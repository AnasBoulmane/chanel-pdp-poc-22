{"version":3,"sources":["webpack:///./patterns/scripts/pages/plp-look/index.js"],"names":["plplook","el","stickyCollectionTitle","select","collectionTitle","window","addEventListener","init","bind","handleStickyCollectionTitle","collectionSection","getCollection","pageTitlesOffset","headerHeight","offsetHeight","stickyOffset","getBoundingClientRect","top","forEach","elem","push","closestOffset","getClosest","selectIndex","indexOf","selectedElm","removeAttribute","dataset","collection","innerText","setAttribute"],"mappings":";;;;;;;;;;;;;;;;;AACA;AACA;AAEe,SAASA,OAAT,CAAiBC,EAAjB,EAAqB;AAClC,QAAMC,qBAAqB,GAAGC,4DAAM,CAAC,sBAAD,CAApC;AACA,MAAIC,eAAe,GAAG,EAAtB;AACAC,QAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgCC,IAAhC;;AAEA,WAASA,IAAT,GAAgB;AACdC,QAAI;AACL;;AAED,WAASA,IAAT,GAAgB;AACdH,UAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,uDAASG,2BAAT,EAAsC,EAAtC,CAAlC;AACD;;AAED,WAASA,2BAAT,GAAuC;AACrC,QAAI,CAACP,qBAAL,EAA4B;AAC1B;AACD;;AACD,UAAMQ,iBAAiB,GAAGC,mEAAa,CAAC,mBAAD,CAAvC;AACA,UAAMC,gBAAgB,GAAG,EAAzB;AACA,UAAMC,YAAY,GAAGV,4DAAM,CAAC,YAAD,CAAN,CAAqBW,YAA1C;AACA,UAAMC,YAAY,GAAGb,qBAAqB,CAACc,qBAAtB,GAA8CC,GAA9C,GAAoDJ,YAAzE;;AACA,QAAIE,YAAY,IAAIF,YAAY,GAAG,CAAnC,EAAsC;AACpCH,uBAAiB,CAACQ,OAAlB,CAA2BC,IAAD,IAAU;AAClCP,wBAAgB,CAACQ,IAAjB,CAAsBD,IAAI,CAACH,qBAAL,GAA6BC,GAAnD;AACD,OAFD;AAGA,YAAMI,aAAa,GAAGC,8DAAU,CAACV,gBAAD,EAAmBG,YAAnB,CAAhC;AACA,YAAMQ,WAAW,GAAGX,gBAAgB,CAACY,OAAjB,CAAyBH,aAAzB,CAApB;AACA,YAAMI,WAAW,GAAGf,iBAAiB,CAACa,WAAD,CAArC;AACArB,2BAAqB,CAACwB,eAAtB,CAAsC,MAAtC;;AAEA,UAAID,WAAW,CAACE,OAAZ,CAAoBC,UAApB,KAAmCxB,eAAnC,IAAuDiB,aAAa,IAAIR,YAA5E,EAA2F;AACzFT,uBAAe,GAAGqB,WAAW,CAACE,OAAZ,CAAoBC,UAAtC;AACA1B,6BAAqB,CAAC2B,SAAtB,GAAkCzB,eAAlC;AACD;AACF,KAbD,MAcK;AACHF,2BAAqB,CAAC2B,SAAtB,GAAkC,EAAlC;AACAzB,qBAAe,GAAG,EAAlB;AACAF,2BAAqB,CAAC4B,YAAtB,CAAmC,MAAnC,EAA2C,cAA3C;AACD;AACF;AACF,C","file":"chunks/plplook.js?v=3.23","sourcesContent":["import { debounce } from 'lodash'\nimport { getClosest } from 'lib/helpers'\nimport { select, getCollection } from 'lib/selectors'\n\nexport default function plplook(el) {\n  const stickyCollectionTitle = select('.js-collection-title')\n  let collectionTitle = ''\n  window.addEventListener('load', init)\n\n  function init() {\n    bind()\n  }\n\n  function bind() {\n    window.addEventListener('scroll', debounce(handleStickyCollectionTitle, 10))\n  }\n\n  function handleStickyCollectionTitle() {\n    if (!stickyCollectionTitle) {\n      return\n    }\n    const collectionSection = getCollection('[data-collection]')\n    const pageTitlesOffset = []\n    const headerHeight = select('.js-header').offsetHeight\n    const stickyOffset = stickyCollectionTitle.getBoundingClientRect().top + headerHeight\n    if (stickyOffset <= headerHeight * 2) {\n      collectionSection.forEach((elem) => {\n        pageTitlesOffset.push(elem.getBoundingClientRect().top)\n      })\n      const closestOffset = getClosest(pageTitlesOffset, stickyOffset)\n      const selectIndex = pageTitlesOffset.indexOf(closestOffset)\n      const selectedElm = collectionSection[selectIndex]\n      stickyCollectionTitle.removeAttribute('role')\n\n      if (selectedElm.dataset.collection !== collectionTitle && (closestOffset <= headerHeight)) {\n        collectionTitle = selectedElm.dataset.collection\n        stickyCollectionTitle.innerText = collectionTitle\n      }\n    }\n    else {\n      stickyCollectionTitle.innerText = ''\n      collectionTitle = ''\n      stickyCollectionTitle.setAttribute('role', 'presentation')\n    }\n  }\n}\n"],"sourceRoot":""}