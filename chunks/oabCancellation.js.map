{"version":3,"sources":["webpack:///./patterns/scripts/pages/oab/oab-api-manager.js","webpack:///./patterns/scripts/pages/oab/oab-cancellation.js"],"names":["OAB_API_MANAGER","getDateAndTime","requestData","callbacks","xhr","window","config","webservices","oab","dateSelection","data","then","getEventDateAndTime","eventDateSelection","getAvailableBoutiques","boutiqueList","getAvailableBoutiquesByService","boutiqueListByService","getAvailableBoutiquesByEvent","boutiqueListByEvent","postDatetimeFormData","Promise","resolve","getServiceList","serviceList","getCategoryList","categoryList","getCategoryCollectionList","categoryCollectionList","addAppointmentBooking","postAppointmentBooking","addEventAppointmentBooking","postEventAppointmentBooking","postAppointmentBookingConfirmation","confirmBooking","postAppointmentEventBookingConfirmation","eventConfirmBooking","postAppointmentStartCheckout","confirmOABEventBooking","postAppointmentGuestBookingConfirmation","confirmGuestBooking","postAppointmentGuestEventBookingConfirmation","confirmGuestEventBooking","deleteAppointmentBooking","cancelBooking","DATA_JSON_ID","DATE_ELEMENT","TIME_ELEMENT","CANCELLATION_CTA","CANCELLATION_STEP","CONFIRMATION_STEP","CONFIRMATION_TITLE","date","cancellationStep","confirmationStep","cancellationCta","loader","confirmationPageTitle","appointmentId","serviceName","cancelRefundable","payableBooking","eventActionVal","oabCancellationData","OabCancellation","el","init","mainContent","select","setAttribute","JSON","parse","document","getElementById","textContent","generateDate","bind","cancelAppointment","DLKit","push","eventAction","eventLabel","lang","documentElement","dateValue","timeValue","dateElement","timeElement","dateArray","split","Date","innerHTML","toLocaleDateString","weekday","month","day","toLocaleTimeString","hourCycle","hour","minute","showLoader","element","isButton","Loader","delay","button","create","destroyLoader","callback","destroy","dataLayer","id","payable","refundable","iscancelled","style","height","offsetHeight","removeAttribute","pageTitle","newRef","location","href","notifier","show","name","locales","request","label","message","close","catch","error"],"mappings":"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","file":"chunks/oabCancellation.js?v=3.23","sourcesContent":["import * as xhr from 'modules/fetch'\n\nconst OAB_API_MANAGER = {\n  /**\n   * @param {Object} requestData - data to send to WS\n   * @param {Array} callbacks [successCallback, rejectCallback, finallyCallback] : array containing promise callbacks\n   */\n  getDateAndTime: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.dateSelection, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n  getEventDateAndTime : (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.eventDateSelection, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  getAvailableBoutiques: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.boutiqueList, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  getAvailableBoutiquesByService: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.boutiqueListByService, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  getAvailableBoutiquesByEvent: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.boutiqueListByEvent, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  postDatetimeFormData: (requestData, callbacks = [null, null, null]) => {\n    // xhr.post('oab/date', requestData).then(callbacks[0], callbacks[1], callbacks[2])\n    new Promise((resolve) => {\n      resolve({ data: ['11:00 AM', '13:00 pm', '16:00 pm', '17:00 AM', '14:30 AM'] })\n      // reject(false)\n    })\n      .then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  getServiceList: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.serviceList, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  getCategoryList: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.categoryList, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n  /**\n   * @see getOabCategoryAndCollection\n   */\n\n  getCategoryCollectionList: (requestData) => xhr.get(window.config.webservices.oab.categoryCollectionList, { data: requestData }),\n\n  addAppointmentBooking: (requestData) => xhr.post(window.config.webservices.oab.postAppointmentBooking, { data: requestData }),\n\n  addEventAppointmentBooking: (requestData) => xhr.post(window.config.webservices.oab.postEventAppointmentBooking, { data: requestData }),\n\n  /**\n   * @see postOabBookingConfirmation\n   */\n  postAppointmentBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.confirmBooking, { data: requestData }),\n\n\n  postAppointmentEventBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.eventConfirmBooking, { data: requestData }),\n\n  postAppointmentStartCheckout: (requestData) => xhr.post(window.config.webservices.oab.confirmOABEventBooking, { data: requestData }),\n\n  /**\n   * @see postOabBookingConfirmation\n   */\n  postAppointmentGuestBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.confirmGuestBooking, { data: requestData }),\n\n\n  /**\n     * @see postOabEventBookingConfirmation\n     */\n    postAppointmentGuestEventBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.confirmGuestEventBooking, { data: requestData }),\n\n  /**\n   * @see deleteOabBooking\n   */\n  deleteAppointmentBooking: (requestData) => xhr.post(window.config.webservices.oab.cancelBooking, { data: requestData })\n\n}\n\nexport default OAB_API_MANAGER\n","import bind from 'delegate'\nimport { select } from 'lib/selectors'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport notifier from 'modules/notifier'\nimport config from 'lib/config'\nimport Loader from 'ui/widgets/loader'\nimport pageTitle from 'modules/pageTitle'\n\n\nconst DATA_JSON_ID = 'js-oab-cancellation-data'\nconst DATE_ELEMENT = '.js-appointment-date'\nconst TIME_ELEMENT = '.js-appointment-time'\nconst CANCELLATION_CTA = '.js-cancel-appointment-cta'\nconst CANCELLATION_STEP = '[data-step=cancellation]'\nconst CONFIRMATION_STEP = '[data-step=confirmation]'\nconst CONFIRMATION_TITLE = '.js-cancellation-confirmation-title'\n\nlet date\nlet cancellationStep\nlet confirmationStep\nlet cancellationCta\nlet loader\nlet confirmationPageTitle\nlet appointmentId\nlet serviceName\nlet cancelRefundable\nlet payableBooking\nlet eventActionVal\nlet oabCancellationData\n\nfunction OabCancellation(el) {\n  if (!el) {\n    return\n  }\n  init(el)\n}\n\nconst init = (el) => {\n  const mainContent = select('.js-main-content')\n  if (mainContent) {\n    mainContent.setAttribute('data-test', 'secDetails')\n  }\n  oabCancellationData = JSON.parse(document.getElementById(DATA_JSON_ID).textContent);\n  generateDate(el)\n  cancellationStep = select(CANCELLATION_STEP, el)\n  confirmationStep = select(CONFIRMATION_STEP, el)\n  cancellationCta = select(CANCELLATION_CTA, el)\n  confirmationPageTitle = select(CONFIRMATION_TITLE, el)\n  appointmentId = oabCancellationData['appointmentId'] || ''\n  serviceName = oabCancellationData['serviceName'] || ''\n  cancelRefundable = oabCancellationData['refundable'] || false\n  payableBooking = oabCancellationData['payable'] || false\n  bind(el, CANCELLATION_CTA, 'click', () => {\n    cancelAppointment(el)\n  })\n  window.document.DLKit.push('oab-when-user-cancel-appointment', {\n    eventAction: 'cancellation page',\n    eventLabel: serviceName\n  })\n}\n\nconst generateDate = (el) => {\n  const lang = document.documentElement.lang\n  const dateValue = oabCancellationData['dateValue']\n  const timeValue = oabCancellationData['timeValue']\n  const dateElement = select(DATE_ELEMENT, el)\n  const timeElement = select(TIME_ELEMENT, el)\n\n  if (dateValue && timeValue) {\n    const dateArray = `${dateValue}T${timeValue}`.split(/[^0-9]/)\n    date = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], dateArray[3], dateArray[4], dateArray[5])\n  }\n  if (dateElement && timeElement) {\n    dateElement.innerHTML = date.toLocaleDateString(lang, { weekday: 'long', month: 'long', day: 'numeric' })\n    timeElement.innerHTML = date.toLocaleTimeString(lang, { hourCycle: 'h23', hour: '2-digit', minute: '2-digit' })\n  }\n}\n\nconst showLoader = (element, isButton = false) => {\n  loader = new Loader(element, {\n    delay: 0,\n    button: isButton\n  })\n  loader.init()\n  loader.create()\n}\nconst destroyLoader = (callback = null) => {\n  if (loader) loader.destroy(callback)\n}\n\nconst cancelAppointment = (el) => {\n  if (cancelRefundable == \"true\") {\n    eventActionVal = 'cancel_and_refund'\n  } else {\n    eventActionVal = 'cancel'\n  }\n\n  dataLayer.push({ \n    'eventCategory': 'appointment',   \n    'eventAction': eventActionVal,   \n    'eventLabel': serviceName,\n    'event': 'uaevent' });\n\n  showLoader(cancellationCta, true)\n  OAB_API_MANAGER.deleteAppointmentBooking({ id: appointmentId, payable: payableBooking , refundable: cancelRefundable })\n    .then(data => {\n      destroyLoader()\n      if (data.iscancelled === 'true') {\n        if (cancellationStep && confirmationStep) {\n          confirmationStep.style.height = cancellationStep.offsetHeight\n          cancellationStep.setAttribute('hidden', '')\n          confirmationStep.removeAttribute('hidden')\n          if (confirmationPageTitle) pageTitle(confirmationPageTitle.innerHTML, '', ' | ')\n        }\n        window.document.DLKit.push('oab-when-user-cancel-appointment', {\n          eventAction: 'cancellation confirmed',\n          eventLabel: serviceName\n        })\n      }else if (data.iscancelled === 'redirect'){\n        let newRef = window.location.href + \"?id=\" + appointmentId;\n        window.location.href = newRef;\n      }else {\n        notifier.show({\n          name: config.locales.notifier.request.label,\n          message: config.locales.notifier.request.message,\n          close: config.locales.notifier.request.close\n        })\n      }\n    })\n    .catch(error => {\n      destroyLoader()\n      notifier.show({\n        name: config.locales.notifier.request.label,\n        message: config.locales.notifier.request.message,\n        close: config.locales.notifier.request.close\n      })\n    })\n}\n\nexport default function (el) {\n  return new OabCancellation(el)\n}"],"sourceRoot":""}