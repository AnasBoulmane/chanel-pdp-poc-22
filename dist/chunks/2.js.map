{"version":3,"sources":["webpack:///./patterns/scripts/ui/cto/Components/cameraIcon.jsx","webpack:///./patterns/scripts/ui/cto/Components/countdownTimer.jsx","webpack:///./patterns/scripts/ui/cto/Components/ctoContext.jsx","webpack:///./patterns/scripts/ui/cto/Components/photoCapture.jsx","webpack:///./patterns/scripts/ui/vto/Components/Close.jsx"],"names":["CameraIcon","Component","constructor","props","color","r","g","b","hsp","match","slice","replace","length","Math","sqrt","render","iconName","name","hexValue","getLuminescence","class","click","cameraMessage","CountdownTimer","isMountedComponent","seconds","state","currentTimer","setState","timerEnd","clearInterval","timer","callback","setInterval","countDown","timerRef","React","createRef","componentDidMount","select","Manager","subscribe","BREAKPOINT_CHANGE","window","innerWidth","innerHeight","startTimer","current","focus","componentDidUpdate","prevprops","pauseTimer","undefined","componentWillUnmount","customClass","customProps","config","cto","dedicated","timerText","CtoContext","createContext","updateValue","PhotoCapture","getBrowserInfo","fileObj","imageName","getImageName","files","file","isItiOS","text","title","url","blob","fetch","then","res","File","type","shareAvailable","availablePlatform","includes","browser","platform","isIpadOS","navigator","canShare","getDataSource","catch","currentDate","Date","getTime","getTimezoneOffset","toISOString","_","date","time","showPicture","backButton","moveBack","bind","isiOS","scrollTo","top","left","options","behavior","convertToFile","imgSrc","context","downloadImage","dataLayer","push","eventCategory","eventAction","eventLabel","event","dataSource","triggerDownload","a","document","createElement","href","download","body","appendChild","removeChild","share","err","backIconName","indexOf","style","photoCaptureBackText","photoCaptureImageAltText","photoCaptureShareText","photoCaptureDownloadText","ButtonClose","nextChevron","zIndex","button","node","close","handleClick","locales","vto","closeButtonLabel"],"mappings":"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","file":"chunks/2.js?v=3.23","sourcesContent":["import React, { Component } from 'react'\nimport Icon from '../../vto/Components/Icon'\n\nclass CameraIcon extends Component {\n    constructor(props) {\n        super(props)\n    }\n\n    getLuminescence = (color) => { // get the brightness value of hex\n        // Variables for red, green, blue values\n        let r, g, b, hsp\n        // Check the format of the color, HEX or RGB?\n        if (color.match(/^rgb/)) {\n            // If RGB --> store the red, green, blue values in separate variables\n            color = color.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)\n            r = color[1]\n            g = color[2]\n            b = color[3]\n        }\n        else {\n            // If hex --> Convert it to RGB\n            color = +(\"0x\" + color.slice(1).replace(color.length < 5 && /./g, '$&$&'))\n            r = color >> 16\n            g = color >> 8 & 255\n            b = color & 255\n        }\n        hsp = Math.sqrt(\n            0.299 * (r * r) +\n            0.587 * (g * g) +\n            0.114 * (b * b)\n        )\n        return 50\n    }\n\n    render() {\n        let iconName\n        if (this.props.name) {\n            iconName = this.props.name\n        } else {\n            iconName = this.props.hexValue ? (this.getLuminescence(this.props.hexValue) > 40 ? \"cto_camera_white\" : \"cto_camera_black\") : \"cto_camera_white\"\n        }\n        return (\n            <button className={`camera-icon ${this.props.class}`} type=\"button\" onClick={this.props.click}>\n                <Icon name={iconName} />\n                <span className=\"is-sr-only\">{this.props.cameraMessage}</span>\n            </button>\n        )\n    }\n}\n\nexport default CameraIcon\n","import React, { Component } from 'react'\nimport { BREAKPOINT_CHANGE, Manager } from '../../../lib/events'\nimport { select, selectAll } from 'lib/selectors'\n\nclass CountdownTimer extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            timerEnd: 2,\n            currentTimer: 3\n        }\n        this.timer = 0\n        this.timerRef = React.createRef()\n        this.isMountedComponent = false\n    }\n\n    countDown = () => {\n        if(!this.isMountedComponent){\n            return false\n        }\n        let seconds = this.state.currentTimer - 1\n        this.setState({\n            currentTimer: seconds\n        })\n        // Check if we're at zero.\n        if (seconds < this.state.timerEnd) {\n            clearInterval(this.timer)\n            this.props.callback()\n        }\n    }\n\n    startTimer = () => {\n        if (this.state.currentTimer >= this.state.timerEnd) {\n            this.timer = setInterval(this.countDown, 1000)\n        }\n    }\n\n    componentDidMount() {\n         this.isMountedComponent = true\n        if (select('.virtual-makeup-component')) {\n            Manager.subscribe(BREAKPOINT_CHANGE, () => {\n                if (window.innerWidth < 961) {\n                    if (window.innerHeight < window.innerWidth) {\n                        clearInterval(this.timer)\n                    } else {\n                        this.startTimer()\n                    }\n                }\n            })\n        }\n        this.timerRef.current.focus()\n        this.startTimer()\n    }\n\n    componentDidUpdate(prevprops) {\n        if (this.props.pauseTimer !== undefined && prevprops.pauseTimer !== this.props.pauseTimer) {\n            this.props.pauseTimer ? clearInterval(this.timer) : this.startTimer()\n        }\n    }\n\n    componentWillUnmount(){\n        this.isMountedComponent = false\n        clearInterval(this.timer)\n    }\n    \n    render() {\n        return (\n            <div className={`count-down ${this.props.customClass ? this.props.customClass : ''}`} {...this.props.customProps}>\n                <div className='count-down-text'>\n                    <p tabIndex=\"-1\" ref={this.timerRef}>\n                        <span className=\"is-sr-only\">{window.config.cto.dedicated.timerText}: </span>\n                        <span aria-live=\"assertive\">{this.state.currentTimer}</span>\n                    </p>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CountdownTimer\n","import React, { Component } from 'react'\n\nexport const CtoContext = React.createContext({state: '', updateValue: () => {}});\n","import { getBrowserInfo, isiOS, isIpadOS } from 'lib/helpers'\nimport React, { Component } from 'react'\nimport { select } from '../../../lib/selectors'\nimport Icon from '../../vto/Components/Icon'\nimport { CtoContext } from '../Components/ctoContext'\n\nclass PhotoCapture extends Component {\n    browser = getBrowserInfo()\n    static contextType = CtoContext\n    constructor(props) {\n        super(props)\n        this.state = {\n            showPicture: true,\n            shareAvailable: false,\n            file: null\n        }\n        this.backButton = React.createRef()\n        this.moveBack = this.moveBack.bind(this)\n        this.isItiOS = isiOS()\n        this.availablePlatform = ['Mac', 'Windows']\n    }\n\n    componentDidMount() {\n        this.backButton.current.focus()\n        window.scrollTo({\n            top: 0,\n            left: 0,\n            options: {\n                behavior: 'smooth'\n            }\n        })\n        this.convertToFile(this.props.imgSrc)\n    }\n\n    getDataSource = (fileObj) => {\n        const imageName = this.getImageName()\n        return {\n            files: [fileObj || this.state.file],\n            ...(this.isItiOS ? {} : { text: imageName }),\n            ...(this.isItiOS ? {} : { title: imageName })\n        }\n    }\n\n    convertToFile = (url) => {\n        const blob = fetch(url).then(res => res.blob()).then(blob => {\n            const fileObj = new File([blob], `${this.getImageName()}.jpg`, { type: 'image/jpeg' })\n            this.setState({\n                file: fileObj,\n                shareAvailable: (!this.availablePlatform.includes(this.browser.platform) || isIpadOS()) && navigator.canShare && navigator.canShare(this.getDataSource(fileObj))\n            })\n        }).catch()\n    }\n\n\n    getImageName = () => {\n        let currentDate = new Date()\n        currentDate = new Date(currentDate.getTime() - 60 * 1000 * currentDate.getTimezoneOffset());\n        const imageName = currentDate.toISOString().replace(/^(.+)T([^.]+).*/, (_, date, time) => `CHANEL-TRY-ON_${date}_${time.replace(/:/g, '')}`)\n        return imageName\n    }\n    moveBack() {\n        this.context.updateValue('showPicture', false)\n        this.context.updateValue('backClicked', true)\n    }\n\n    componentWillUnmount() {\n        this.props.callback()\n    }\n\n    downloadImage() {\n        dataLayer.push({\n            eventCategory: \"vto\",\n            eventAction: \"take picture\",\n            eventLabel: \"download\",\n            event: \"uaevent\"\n        })\n        const imageName = this.getImageName()\n\n        const dataSource = this.getDataSource()\n\n        const triggerDownload = () => {\n            const a = document.createElement('a')\n            a.href = this.props.imgSrc\n            a.download = imageName + '.jpg'\n            document.body.appendChild(a)\n            a.click()\n            document.body.removeChild(a)\n        }\n\n        if (this.state.shareAvailable) {\n            navigator.share(dataSource).catch(err => {\n                if (err.name !== 'AbortError') {\n                    /*We're setting this state here to accomodate safari 15 and above (here navigator.share() is supported ) behaviour,\n                        UseCase1: When user launches native share overlay and close the share overlay we get AbortError, so we are trigering download\n                        ONLY when we do not get AbortError as we do not want unnecessary download of a file when user closes the share overlay.\n\n                       UseCase2: When user lauches native share overlay and click on option named Save this file, the file is downloaded and post this download action\n                       whenever user clicks on our CTA, navigator.share() returns false and we are landed in this catch block.\n                       So here we will not get 'AbortError' and we will be trigering our download function as a fallback.\n                   */\n                    triggerDownload()\n                    this.setState({\n                        shareAvailable: false\n                    })\n                }\n            })\n        } else {\n            triggerDownload()\n        }\n    }\n\n    render() {\n        return (\n            <div className={`cto-captured-photo ${this.props.customClass ? this.props.customClass : ''}`} {...this.props.customProps} >\n                <div className=\"photo_container \">\n                    <button type='button' className=\"backButton\" onClick={this.moveBack} ref={this.backButton} {...this.props.backIconName && this.props.backIconName.indexOf('white') != -1 ? { style: { color: '#fff' } } : null}>\n                        <Icon name={this.props.backIconName ? this.props.backIconName : 'cto_back_black'} className='cto__back_icon' />\n                        {window.config.cto.dedicated.photoCaptureBackText}\n                    </button>\n                    <img src={this.props.imgSrc} className=\"cto__image\" alt={window.config.cto.dedicated.photoCaptureImageAltText} {...(window.innerWidth > 960 ? this.props.customProps : null)}></img>\n                    <ul>\n                        <li>\n                            <button type='button' className='cto__download_icon' onClick={this.downloadImage.bind(this)}>\n                                <span className='is-sr-only'>{this.state.shareAvailable ? window.config.cto.dedicated.photoCaptureShareText : window.config.cto.dedicated.photoCaptureDownloadText}</span>\n                                <Icon name=\"cto_download\" />\n                            </button>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default PhotoCapture","import React, { Component } from 'react'\nimport Icon from './Icon'\nimport config from '../../../lib/config'\nimport { select } from 'lib/selectors'\n\nclass ButtonClose extends Component {\n\n  componentDidMount () {\n    this.button.focus()\n  }\n\n  handleClick = () => {\n    const nextChevron = select('.product-details .js-slide:first-child a')\n    if(nextChevron){\n      nextChevron.style.top = ''\n      nextChevron.style.zIndex = ''\n    }\n  }\n\n  render() {\n    return (\n      <button ref={node => this.button = node} className=\"button is-icon vto-close\"\n              onClick={() => {\n                this.props.close()\n                this.handleClick()\n              }}>\n        <Icon name=\"close\"/>\n        <span className=\"is-sr-only\">{config.locales.vto.closeButtonLabel}</span>\n      </button>\n    )\n  }\n}\n\nexport default ButtonClose\n\n"],"sourceRoot":""}