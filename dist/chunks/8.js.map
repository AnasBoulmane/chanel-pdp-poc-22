{"version":3,"sources":["webpack:///./scripts/components/gigya/cn-captcha.js"],"names":["captchaIns","loader","isVerified","currentScreen","sendBtnTimeout","SEND_CODE_TIME_LIMIT","Manager","subscribe","GIGYA_SCREEN_HAS_CHANGED","data","screen","document","getElementById","captchaContainer","select","init","oldCaptchaBtn","captchaTemplate","url","getTimestamp","loadScript","then","captchaBtn","initNECaptcha","element","captchaId","width","mode","maxVerification","onVerify","err","destroy","captchaSuccess","removeAttribute","captchaStart","setAttribute","classList","add","enableDisableGetCode","phoneNumber","addEventListener","resetCaptcha","focusElement","customStyles","controlBar","height","borderRadius","popupStyles","capBarHeight","onClose","status","source","onload","instance","onerror","console","warn","captchaVerify","catch","error","log","src","Promise","resolve","reject","head","getElementsByTagName","script","createElement","type","async","appendChild","enable","isNoCodeAvailable","otpField","otpFieldInput","remove","resendCodeBtn","sendCode","removeEventListener","captchaContainers","selectAll","forEach","captchaElm","innerHTML","id","config","targetVersion","toggleAccountButtonState","clearTimeout","buttonState","registerBtn","e","value","phoneCountryCodeField","xhr","webservices","account","resendOtp","CSRFToken","ACC","target","innerText","locales","optSendText","setTimeout","resentCodeBtnEnable","bind","phoneNumberField","formErrorData","fields","name","setCustomValidity","checkValidity","focus","newcodeBtnText","preventDefault","isLoader","phoneFieldWrapper","isValidPhoneNumber","captchaVerification","Loader","button","create","verify","phoneField","validity","customError","isValid","checkPhonePattern","countryCode","replace","isValidMobilePhone","msec","parseInt","Date","valueOf"],"mappings":"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","file":"chunks/8.js?v=3.23.0","sourcesContent":["/* eslint-disable prefer-rest-params */\nimport { Manager,GIGYA_SCREEN_HAS_CHANGED } from 'lib/events'\nimport { select, selectAll } from 'lib/selectors'\nimport Loader from 'ui/widgets/loader'\nimport { focusElement, isValidMobilePhone} from '../../../patterns/scripts/lib/helpers'\nimport * as xhr from 'modules/fetch'\nimport config from \"lib/config\"\n\nlet captchaIns = \"\",\n    loader = null,\n    isVerified,\n    currentScreen =  {},\n    sendBtnTimeout\n    \nconst SEND_CODE_TIME_LIMIT = 60*1000\n\nManager.subscribe(GIGYA_SCREEN_HAS_CHANGED, (data) => {\n    const screen = document.getElementById(data.currentScreen)\n    const captchaContainer = select(\".cn-captcha-container\",screen)\n    if (captchaContainer) {\n        init(screen)\n    }\n})\nfunction init(screen) {\n    currentScreen = screen\n    const oldCaptchaBtn = select(\"#captchaBtn\", currentScreen)\n    if(!oldCaptchaBtn)  captchaTemplate(currentScreen)\n    const url = 'https://cstaticdun.126.net/load.min.js' + '?t=' + getTimestamp(1 * 60 * 1000)\n    loadScript(url).then( ()=>{\n        const captchaBtn = select(\"#captchaBtn\", currentScreen)\n        initNECaptcha({\n            element: '#captcha',\n            captchaId: 'd9e2ddd0074e47a4bf6fc1b8e056a42e',\n            width: '400px',\n            mode: 'bind',\n            maxVerification: 2,\n            onVerify: function (err, data) {\n                if (err === null) {\n                    loader.destroy(() => {\n                            let captchaSuccess = select(\".captcha-success\", captchaBtn)\n                            captchaSuccess.removeAttribute(\"hidden\", \"\")\n                            let captchaStart = select(\".captcha-start\", captchaBtn)\n                            captchaStart.setAttribute(\"hidden\", \"hidden\")\n                            captchaBtn.classList.add(\"cn-captcha-success\")\n                            enableDisableGetCode(true)\n                            const phoneNumber = select('input[id=\"phoneNumber\"]')\n                            if (phoneNumber) {\n                                phoneNumber.addEventListener(\"keydown\",resetCaptcha)\n                            }\n                            focusElement(captchaBtn)\n                            isVerified = true\n                    })\n                }\n            },\n            customStyles: {\n                controlBar: {\n                    height: \"80px\",\n                    borderRadius: \"5px\"\n                }\n            },\n            popupStyles: {\n              capBarHeight: 50\n            },\n            onClose: function(status) {\n                if (status.source != 2) loader.destroy()\n                focusElement(captchaBtn)\n            }\n        }, function onload(instance) {\n            captchaIns = instance\n        }, function onerror(err) {\n            console.warn(err)\n        })\n        captchaBtn.addEventListener('click', captchaVerify)\n\n    }).catch((error)=>{\n        console.log(error)\n    })\n}\nasync function loadScript(src) {    \n    return await new Promise(function(resolve,reject){\n        if (typeof initNECaptcha === \"function\") {\n            resolve()\n        } else {\n            let head = document.head || document.getElementsByTagName('head')[0],\n            script = document.createElement('script')\n            script.type = 'text/javascript'\n            script.src = src\n            script.async = \"true\"\n            head.appendChild(script)\n            script.addEventListener(\"load\", () =>{\n                resolve()\n            })\n            script.addEventListener(\"error\", ()=>{\n                reject()\n            })\n        }\n    })\n}\n\nfunction enableDisableGetCode(enable, isNoCodeAvailable = true) {\n    const otpField = select('.otp-field',currentScreen)\n    const otpFieldInput = select('.js-otp-field',otpField)\n    if (isNoCodeAvailable && otpFieldInput){\n        if(enable) {\n            otpFieldInput.removeAttribute(\"aria-disabled\")\n            otpFieldInput.removeAttribute(\"readonly\")\n            otpField.classList.remove(\"is-disabled\")\n        } else {\n            otpField.classList.add(\"is-disabled\")\n            otpFieldInput.setAttribute(\"readonly\", true)\n            otpFieldInput.setAttribute(\"aria-disabled\",true)\n        }\n    }\n    const resendCodeBtn = select(\".js-resend-code\",currentScreen)\n    if (resendCodeBtn) {\n        if (enable) {\n            resendCodeBtn.removeAttribute(\"aria-disabled\")\n            resendCodeBtn.addEventListener(\"click\",sendCode)\n            resendCodeBtn.classList.remove('is-disabled')\n        } else {\n            resendCodeBtn.setAttribute(\"aria-disabled\",true)\n            resendCodeBtn.removeEventListener(\"click\",sendCode)\n            resendCodeBtn.classList.add('is-disabled')\n        }\n    }\n}\nfunction captchaTemplate(screen) {\n    let captchaContainers = selectAll(\".cn-captcha-container\"),\n        captchaTemplate = document.createElement(\"div\"),\n        captchaContainer = select(\"#captchaSection\", screen)\n\n    captchaContainers.forEach(captchaElm => {\n        captchaElm.innerHTML = \"\"\n    })\n    isVerified = false\n    captchaTemplate.id = \"captchaWrapper\"\n    captchaTemplate.innerHTML = `<div id=\"captcha\"></div>\n        <button id=\"captchaBtn\" type=\"button\" class=\"captcha-btn button is-secondary is-block\">\n            <span class=\"button__wrapper captcha-start\">\n                <svg class=\"icon is-xsmall\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n                    <use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg?${config.targetVersion}#captcha\">\n                    </use>\n                </svg>Click here to verify\n            </span>\n            <span class=\"button__wrapper captcha-success\" hidden>\n                <svg class=\"icon is-xsmall\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n                    <use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg?${config.targetVersion}#light-tick\">\n                    </use>\n                </svg>Verified successfully\n            </span>\n        </button>\n        <div class=\"pop-container\"></div>`\n    captchaContainer.appendChild(captchaTemplate)\n}\nfunction resetCaptcha() {\n    if(isVerified == false) return false\n    let captchaSuccess = select(\".captcha-success\", captchaBtn)\n    captchaSuccess.setAttribute(\"hidden\",\"hidden\")\n    let captchaStart = select(\".captcha-start\", captchaBtn)\n    captchaStart.removeAttribute(\"hidden\")\n    captchaBtn.classList.remove(\"cn-captcha-success\")\n    isVerified = false\n    init(currentScreen)\n    enableDisableGetCode(false)\n    toggleAccountButtonState(true)\n    if(sendBtnTimeout) clearTimeout(sendBtnTimeout)\n}\n\nfunction toggleAccountButtonState(buttonState) {\n    const registerBtn = select('.js-register-btn',currentScreen)\n    if (registerBtn) {\n\t\tif (buttonState) {\n\t\t  registerBtn.setAttribute('aria-disabled',buttonState)\n\t\t  registerBtn.classList.add('is-disabled')\n\t\t} else {\n\t\t  registerBtn.removeAttribute('aria-disabled')\n\t\t  registerBtn.classList.remove('is-disabled')\n\t\t}\t\n    }\n}\n\nfunction sendCode(e) {\n    const phoneNumber = select('input[id=\"phoneNumber\"]',currentScreen) ? select('input[id=\"phoneNumber\"]',currentScreen).value : null\n    const phoneCountryCodeField = select('input[id=\"countryCode\"]',currentScreen) ? select('input[id=\"countryCode\"]',currentScreen).value : null\n    xhr.post(config.webservices.account.resendOtp, {\n        data: {\n            phoneCountryCodeField,\n            phoneNumber,\n            CSRFToken: ACC.config.CSRFToken\n        }\n    }).then(() => {\n            e.target.innerText = config.locales.account.optSendText\n            const resendCodeBtn = select(\".js-resend-code\",currentScreen)\n            resendCodeBtn.setAttribute(\"aria-live\",\"off\")\n            enableDisableGetCode(false,false)\n            toggleAccountButtonState(false)\n            sendBtnTimeout = setTimeout(resentCodeBtnEnable.bind(null, e,resendCodeBtn), SEND_CODE_TIME_LIMIT)\n    }).catch(data => {\n    \t\tconst phoneNumberField = select('.js-phone-valid',currentScreen)\n    \t\tif (phoneNumberField && data.formErrorData) {\n\t       \t  if (data.formErrorData.fields[0].name === 'phoneNumber') {\n\t       \t    phoneNumberField.setCustomValidity('phone.exist')\n\t       \t    phoneNumberField.checkValidity()\n\t       \t    phoneNumberField.focus()\n\t       \t  }\n       \t    }\n     })\n}\nfunction resentCodeBtnEnable(e,resendCodeBtn) {\n    e.target.innerText = config.locales.account.newcodeBtnText   \n    resendCodeBtn.setAttribute(\"aria-live\",\"polite\")\n    enableDisableGetCode(true,false)\n}\n\nfunction captchaVerify(e) {\n    e.preventDefault()\n    let captchaBtn = select(\"#captchaBtn\",currentScreen),\n        isLoader = select(\".loader__inner\",captchaBtn)\n    if (isLoader) return false\n    \n    const phoneFieldWrapper = select(\".js-phone-field-wrapper\",currentScreen)\n    if (phoneFieldWrapper) isValidPhoneNumber()\n}\nfunction captchaVerification() {\n    let captchaBtn = select(\"#captchaBtn\",currentScreen),\n        isLoader = select(\".loader__inner\",captchaBtn)\n    if (captchaBtn) {\n        loader = new Loader(captchaBtn, { button: true })\n        loader.init()\n        loader.create()\n    }\n    captchaIns && captchaIns.verify()\n}\nfunction isValidPhoneNumber() {\n  const phoneFieldWrapper = select(\".js-phone-field-wrapper\",currentScreen)\n  const phoneField = select(\".js-phone-field\",phoneFieldWrapper)\n  if (phoneField.validity.customError) {\n\t  phoneField.setCustomValidity('')\n  }\n\n  const isValid = phoneField.checkValidity()\n  if (isValid) {\n    checkPhonePattern(phoneField).then((isValid) => {\n        if(isValid) captchaVerification()\n    })\n  } else {\n      phoneField.focus()\n  }\n}\nasync function  checkPhonePattern(phoneField) {\n    const countryCode = select(\"#countryCode\",currentScreen).value.replace(/[^0-9]/g, '')\n    const phoneNumber = phoneField.value.replace(/[^0-9]/g, '')\n    return await isValidMobilePhone(countryCode, phoneNumber).then(function (isValid) {\n        if (!isValid) {\n            phoneField.setCustomValidity('notAcceptedMobilePhone');\n            phoneField.checkValidity()\n            return Promise.resolve(false)\n        } else {\n            return Promise.resolve(true)\n        }\n    }).catch((err) => {\n        console.error(\"an error occurred during the verification of phone number\")\n    })\n}\nfunction getTimestamp(msec) {\n    msec = !msec && msec !== 0 ? msec : 1\n    return parseInt((new Date()).valueOf() / msec, 10)\n}\n\nexport default {\n    init\n}"],"sourceRoot":""}