{"version":3,"sources":["webpack:///./node_modules/flatpickr/dist/l10n lazy ^\\.\\/.*\\.js$ namespace object","webpack:///./patterns/scripts/pages/oab/index.js","webpack:///./patterns/scripts/pages/oab/oab-api-manager.js","webpack:///./patterns/scripts/pages/oab/oab-boutique-selection.js","webpack:///./patterns/scripts/pages/oab/oab-carousel.js","webpack:///./patterns/scripts/pages/oab/oab-category.js","webpack:///./patterns/scripts/pages/oab/oab-collection-category.js","webpack:///./patterns/scripts/pages/oab/oab-date-selection.js","webpack:///./patterns/scripts/pages/oab/oab-description.js","webpack:///./patterns/scripts/pages/oab/oab-phone-number.js","webpack:///./patterns/scripts/pages/oab/oab-redirect-account.js","webpack:///./patterns/scripts/pages/oab/oab-service-list.js","webpack:///./patterns/scripts/pages/oab/oab-thanks-message.js"],"names":["currentStep","currentStepIndex","oabSteps","stepObjects","stepContainer","stepperInstance","loader","that","stepStart","Stepper","el","stepIndex","stickyPosition","isZoomed","oabDataObject","previousStepToGo","comingFromBack","isBackButtonClicked","guestModeUsed","bannerData","image","description","stepNavigation","select","stepperNavigation","loaderExist","nextStep","step","getUpdatedIndex","getStepIndex","setAttribute","removeAttribute","stepperBackNavigation","isMobileScreen","window","devicePixelRatio","classList","add","remove","header","isTabletScreen","style","transform","titleToHide","parentNode","removeChild","length","showStep","showLoader","element","isButton","delay","callback","Loader","referenceEl","button","init","create","destroyLoader","destroy","setHeaderHeight","narrowHeader","contains","stickyHeader","height","OAB_NAVIGATION_BAR_HEIGHT","stickyHeaderDiv","stickyHeaderFixed","analyticsHandler","analyticsName","data","document","DLKit","push","createStepTitle","title","dataTest","titleLevel","titleSize","titleElement","createElement","titleSpan","innerText","appendChild","generateBanner","currenThis","bannerImage","innerHTML","bannerDescription","scrollToTop","scrollTo","visibleHeader","headerOuterEl","headerOuterElStyle","getComputedStyle","position","setWhiteBanner","bnrImage","bnrButton","backButton","stepTogetBackTo","pop","prevStep","displayErrorModalWindow","notifier","show","name","config","locales","request","label","message","close","firstStepperInstance","pageTitle","oab","getCollection","cookie","bindEvents","hashFlag","URL","split","JSON","parse","sessionStorage","getItem","wasLogged","history","pushState","location","pathname","headerFlag","isMegaMenuEntryPoint","isServiceEntryPoint","service","extra","mode","toLowerCase","manageHeaderRefererFlagStepper","setItem","stringify","onzoom","checkBoxInterests","nameFields","emailField","countryCodeField","phoneNumberField","commentField","legalMention","toFixed","forEach","checkbox","navigator","userAgent","indexOf","nameField","onresize","e","isWideScreen","event","call","stepsArray","oabStep","index","stepInfo","attributes","value","oabDataStep","deleteInstance","resetStepIndex","OabCarousel","categoryBypassOnPrevious","OabCategory","OabServiceList","OabCollectionCategory","OabDescription","OabBoutiqueSelection","OabDateSelection","OabPhoneNumber","OabRedirectAccount","OabThanksMessage","stepToGo","stepToHide","getBackStepAnalytics","analyticsData","dataError","selectedAxis","dataset","companyId","defaultServicePLPCompanyId","parseInt","defaultServicePlpCompanyid","axisData","selectedDivision","divisionType","axisType","axisHeroBanner","axisHeroDescription","defaultService","hasServiceList","defaultServicePLP","dataDefaultServicePlpDesc","isServiceEntry","dataDefaultServicePlpFormattedPrice","dataDefaultServicePlpPriceValue","dataIsMegaMenuOnlyEvents","serviceData","dataService","defaultServicePlp","serviceId","minAdvancePeriod","maxAdvancePeriod","questionSetId","price","formattedValue","duration","unit","code","associatedEvents","trim","eventGroupName","defaultServicePlpPriceFormattedvalue","defaultServicePlpPriceValue","defaultServicePlpDesc","setQuestionData","defaultIsServiceEntry","onlyEvents","collectionCategoryParams","OAB_API_MANAGER","getCategoryCollectionList","then","questionListData","questionList","question","interests","questionName","errors","i","prev","addEventListener","isIosTab","isTabLandscapeView","selectedList","offsetTop","pageYOffset","isSafari","screen","width","isIosStep","isIosStepStyles","zIndex","footerElement","headerStep","isInViewPort","clientHeight","instance","getDateAndTime","requestData","callbacks","xhr","webservices","dateSelection","getEventDateAndTime","eventDateSelection","getAvailableBoutiques","boutiqueList","getAvailableBoutiquesByService","boutiqueListByService","getAvailableBoutiquesByEvent","boutiqueListByEvent","postDatetimeFormData","Promise","resolve","getServiceList","serviceList","getCategoryList","categoryList","categoryCollectionList","addAppointmentBooking","postAppointmentBooking","addEventAppointmentBooking","postEventAppointmentBooking","postAppointmentBookingConfirmation","confirmBooking","postAppointmentEventBookingConfirmation","eventConfirmBooking","postAppointmentStartCheckout","confirmOABEventBooking","postAppointmentGuestBookingConfirmation","confirmGuestBooking","postAppointmentGuestEventBookingConfirmation","confirmGuestEventBooking","deleteAppointmentBooking","cancelBooking","Base","constructor","master","events","evt","stepName","oabData","includes","boutiqueSelectionIndex","SELECTORS","SECTION_TITLE","LIST","ITEM_TEMPLATE","ITEMS","ITEMS_LABEL","ITEMS_RADIO","BOUTIQUE_NAME","BOUTIQUE_ADDRESS","FORM_CTA","SUBMIT_FORM_CTA","OAB_CONTAINER","BOUTIQUE_TITLE","BOUTIQUE_TABS","LIST_TAB","MAP_TAB","BOUTIQUE_INFO","BUTTON_NAVIGATE_TOP","BOUTIQUE_LIST","BOUTIQUE_MAP","MAP_TOP","MAP_BOTTOM","oabContainer","closest","toggle","loadData","eventCategory","eventLabel","eventAction","oabProvider","callGoogleMaps","eventName","response","division","serviceType","salesforceId","eventGroupId","error","bindData","loadSelectedBoutiqueMap","boutiqueTitle","boutiqueTabs","boutiqueInfo","boutiqueMap","mapTab","listTab","selectedListItem","boutiqueSelection","focusElement","firstChild","boutiques","idx","newItem","cloneNode","address","latitude","longitude","radio","selectedBoutique","boutiqueIndex","postcode","address4","address1","createMobileTabs","showTabContent","selectedBoutiqueItem","scrollPos","offsetHeight","top","initGoogleMap","template","insertAdjacentHTML","map","featureType","elementType","stylers","saturation","visibility","latlngbounds","google","maps","LatLngBounds","mapOptions","zoom","center","LatLng","mapTypeControlOptions","mapTypeIds","MapTypeId","ROADMAP","disableDefaultUI","zoomControl","gestureHandling","Map","getElementById","mapType","StyledMapType","mapTypes","set","setMapTypeId","marker_image","theme","pinIcon","Number","MarkerImage","Size","marker","Marker","icon","extend","allMarkers","addListener","selectMarkerBoutique","selectAll","item","lat","long","lng","behavior","boutiqueInfoButton","createBoutiqueInfoBox","bind","focusInCallback","focusOutCallback","submitCallback","focusToActiveTab","focusBottom","focusTop","activeTab","focus","target","buttonNavigateTop","boutiqueListGoBack","boutiqueTemplate","boutiqueInfoBox","backToActiveTabText","boutiqueMapBottom","parentElement","preventDefault","list","type","delegateTarget","checked","scrollIntoView","block","selectedBoutiqueIndex","sl_searchcity","sl_searchcountry","sl_searchrequest","pos_city","pos_country","country","pos_id","id","getAttribute","CAROUSEL_BUTTON","CAROUSEL_PREV_BTN","CAROUSEL_NEXT_BTN","CAROUSEL_TITLE","LOCALIZED_AXIS_NAME","STEP_TITLE","COMPONENT_TITLE","COMPONENT_LEVEL","COMPONENT_SIZE","STEP_NAVIGATION","stepTitle","category","categoryId","categoryName","categoryListObject","firstInit","action","object","componentTitle","componentLevel","componentSize","substring","axisButtons","swipeLeft","swipeRight","carouselTitle","carouselH1Element","widths","offsetWidth","paddingValue","maxWidthButton","Math","max","apply","selectAxis","getTemplate","spanCompanyName","obj","nextStepCallback","insertBefore","childNodes","paths","icons","targetVersion","TEMPLATE","divisionAxis","setupTitle","clean","categoryResponse","initCallback","COLLECTION_CATEGORY_TITLE","STEP_CONTAINER","RESPONSE_SET","questionIndex","answerIndex","questionData","getSelectedQuestion","questions","selectedServiceTitle","answer","selectedServiceDescription","answerName","questionClass","responseIndex","questionId","answerList","serviceTitle","selectedQuestion","titelContainer","s","charAt","toUpperCase","join","children","collectionCategoryCallback","nextStepCall","getQuestionClass","getQuestionTemplate","answersSet","newResponse","getResponseTemplate","LABEL_INPUT","INPUT_FIELD","SUBMIT_BTN","EDIT_BTN","SELECT_DATE_FORM","DATE_CONTAINER","LIST_TITLE","CONFIRM_SELECTION_BUTTON","CONFIRM_SELECTION_PARA","DATE_SELECTION_TITLE","DATE_SELECTION_RADIO","CALENDAR_YEAR_INPUT","COUNTRY_SELECTED","currentLanguage","CALENDAR_DATE_LABEL","selectedDateObject","selectedDateSlot","isAtDateLinePosition","flatpickr","localize","l10ns","console","log","catch","err","availableSlots","labelInput","inputField","submitButton","editButton","calendarDateLabel","selectDateForm","dateContainer","listTitleContainer","titleContainer","selectConfirmationButton","selectConfirmationPara","calendarContainer","cleanErrors","notChangeTabIndex","CalendarInstance","dateFormat","minDate","clickOpens","allowInput","disableMobile","appendTo","wrap","locale","firstDayOfWeek","disable","date","onOpen","setSelectionRange","onClose","activeElement","onReady","maxLength","getBoutiqueDataVirtualService","callDateAPI","onChange","onMonthChange","addBackground","elClone","replaceChild","calendarYearInputField","selectDateSlot","onInput","onKeydown","onCalenderYearInput","click","currentLoader","getAvailableDates","input","focusAndSelectToggle","url","initializationRequestParam","initBoutiqueListCallback","bindBoutiqueListData","serviceListIDArr","filter","selectedBoutiqueId","floor","random","eventId","boutiqueId","startDate","endDate","sfBoutiqueId","minAdvance","maxAdvance","handleDateTimeResponse","region","availableDateTimeList","Date","time","availableDates","selectedDates","dateStr","isOpen","dateSelectionCallback","availableDate","getInputValueDate","inputValue","v","replace","isDateValid","isValidDate","match","dateSelectedRequestParam","selectedDate","reverse","displayShowErrorMessage","createErrorMessage","invalidDate","unavailableDate","unavailableServiceDate","isDateSelected","firstAvailableDate","ariaLabel","allDates","dateArray","availableDateDuration","getTime","timeTemplate","timeId","adviserId","isPair","timeSlotFromText","toLocaleTimeString","hourCycle","hour","minute","timeSlotToText","toggleClearSubmit","slotList","firstRadio","selectedSlotIndex","slotIndex","selectedSlot","setTimeout","selectedSlotItem","sellectedInput","TweenLite","onComplete","dateString","newDate","month","getMonth","slice","day","getDate","year","getFullYear","isFilled","clearText","inputYear","dateInputSelector","isInputCharacter","inputType","startPos","selectionStart","cursorPosition","regex","values","test","keyCode","stopPropagation","backCTA","dateField","positionAt","datePosition","isNaN","currentDate","setHours","domElement","elem","errorMsg","createTextNode","errorMessage","parent","hasErrorClasses","errorMessages","DESCRIPTION_TITLE","DESCRIPTION_BODY","SERVICE_SELECT_BUTTON","selectedService","serviceSelectionCta","fillDescriptionPage","descriptionTitle","descriptionBody","serviceSelectionCTA","priceDurationElement","priceElement","oabDurationUnit","currentMarket","getCurrentMarket","marketElement","body","popinCloseBtn","countryArray","newsletterElm","newsletterRulesElm","isChecked","hasAttribute","heightOfNewsletterRule","fromTo","autoAlpha","form","FORM","checkValidity","countryCodeSelect","phoneNumberInput","email","firstName","lastName","interestsSection","interestsCheckbox","wfjInterests","newsletterCheckbox","commentTextArea","phoneNumberValue","countryCodeVal","phoneNumberVal","commentValue","firstNameValue","lastNameValue","emailValue","params","apiURL","checkoutRequired","checkoutEnabled","associatedEventPresent","firstname","emailAddress","phoneNumber","commentId","wfjQuestionId","wfjQuestId","wfjAnswers","newsLetterOptin","countryCode","availabilityId","serviceAvailId","sfMarketId","marketCode","storeCode","sfBoutiqueCode","Object","assign","eventChainId","personId","memberId","addedBouking","headerAuthToken","currency","currencyIso","eventBooking","eventMode","isOverrideCart","currentTarget","overrideCart","submitBtn","dimension45Value","checkoutEntry","product","exclusive","newProduct","limitedEdition","foreignEdition","numberedEdition","showpopin","openAddToBagConfirmationPopin","modal","popin","hide","confirmationPopinCancelCta","confirmationPopinCta","ev","submitFormCallback","dataLayer","cartId","ecommerce","currencyCode","dataLayerGA","pageLoad","products","brand","variant","gaVariant","quantity","dimension8","dimension17","dimension20","productLineCategory","dimension21","dimension25","dimension45","href","checkout","oabCheckoutUrl","subscriptionError","ctaDescribedBy","fields","guestUserEmail","guestModeDescription","GUEST_MODE_DESCRIPTION","phoneDescription","mailFields","inputPhone","inputCountryCode","commentLabel","commentTextarea","commentDescription","confirmBookingCta","firstNameField","lastNameField","mailInputField","phoneNumberTooltip","phoneCountryCode","options","selectboxSpan","inputPhoneLabel","reviewPlaceHolder","guestModeConfirmationCta","oabPhoneInfo","phoneDiallingCode","confirmationCta","payableAppointment","freeAppointment","buttonContinueToCheckout","isLogged","COMMENT_SECTION","COMMENT_TEXTAREA","NEWSLETTER_CHECKBOX","handleGuestMode","commentSection","commentAnswer","handleNewletterSetting","CTA","redirect","dataWS","SECTION","GUEST_MODE_CTA","getDataToPass","Manager","subscribe","YAPI_PAGELOAD_RECEIVED","isUserLogged","dateObject","displaySection","section","opacity","oabPhone","redirectToMyAccount","redirectToGuestMode","redirectAccount","bookingData","method","className","keys","key","ACC","CSRFToken","submit","detail","serviceName","SERVICE_NAME","offsetParent","questionCommentDate","chooseRedirectionStep","lastIndexOf","idAttribute","servcieSelection","bookCtaText","dataCategory","selectedCategory","CATEGORY","PRICE_SCHEDULE","SERVICE_DESCRIPTION","isDesktopScreen","fontSize","imageServices","media","noImageServices","newItemImages","createImage","newItemNoImages","servicesList","images","hasImage","listItem","imgAlt","imageAltTexts","imagealt","imgTemplate","priceSchedule","serviceDescription","wrapDescription","durationUnit","backToHomeCta","boutiqueNameEl","boutiqueAddressEl","boutiqueTownEl","BOUTIQUE_TOWN","SERVICE_TITLE","lang","documentElement","dateEl","DATE_ELEMENT","timeEl","TIME_ELEMENT","selectedTime","toLocaleDateString","weekday","BOUTIQUE","generateDetails","setLoader","hidden","thanksMessage","array","documentTitle"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;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","file":"chunks/oab.js?v=3.23.0","sourcesContent":["var map = {\n\t\"./ar.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/ar.js\",\n\t\t9\n\t],\n\t\"./at.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/at.js\",\n\t\t10\n\t],\n\t\"./be.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/be.js\",\n\t\t11\n\t],\n\t\"./bg.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/bg.js\",\n\t\t12\n\t],\n\t\"./bn.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/bn.js\",\n\t\t13\n\t],\n\t\"./cat.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/cat.js\",\n\t\t14\n\t],\n\t\"./cs.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/cs.js\",\n\t\t15\n\t],\n\t\"./cy.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/cy.js\",\n\t\t16\n\t],\n\t\"./da.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/da.js\",\n\t\t17\n\t],\n\t\"./de.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/de.js\",\n\t\t18\n\t],\n\t\"./default.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/default.js\",\n\t\t19\n\t],\n\t\"./eo.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/eo.js\",\n\t\t20\n\t],\n\t\"./es.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/es.js\",\n\t\t21\n\t],\n\t\"./et.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/et.js\",\n\t\t22\n\t],\n\t\"./fa.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/fa.js\",\n\t\t23\n\t],\n\t\"./fi.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/fi.js\",\n\t\t24\n\t],\n\t\"./fr.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/fr.js\",\n\t\t25\n\t],\n\t\"./gr.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/gr.js\",\n\t\t26\n\t],\n\t\"./he.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/he.js\",\n\t\t27\n\t],\n\t\"./hi.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/hi.js\",\n\t\t28\n\t],\n\t\"./hr.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/hr.js\",\n\t\t29\n\t],\n\t\"./hu.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/hu.js\",\n\t\t30\n\t],\n\t\"./id.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/id.js\",\n\t\t31\n\t],\n\t\"./index.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/index.js\",\n\t\t32\n\t],\n\t\"./it.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/it.js\",\n\t\t33\n\t],\n\t\"./ja.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/ja.js\",\n\t\t34\n\t],\n\t\"./km.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/km.js\",\n\t\t35\n\t],\n\t\"./ko.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/ko.js\",\n\t\t36\n\t],\n\t\"./kz.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/kz.js\",\n\t\t37\n\t],\n\t\"./lt.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/lt.js\",\n\t\t38\n\t],\n\t\"./lv.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/lv.js\",\n\t\t39\n\t],\n\t\"./mk.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/mk.js\",\n\t\t40\n\t],\n\t\"./mn.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/mn.js\",\n\t\t41\n\t],\n\t\"./ms.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/ms.js\",\n\t\t42\n\t],\n\t\"./my.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/my.js\",\n\t\t43\n\t],\n\t\"./nl.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/nl.js\",\n\t\t44\n\t],\n\t\"./no.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/no.js\",\n\t\t45\n\t],\n\t\"./pa.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/pa.js\",\n\t\t46\n\t],\n\t\"./pl.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/pl.js\",\n\t\t47\n\t],\n\t\"./pt.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/pt.js\",\n\t\t48\n\t],\n\t\"./ro.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/ro.js\",\n\t\t49\n\t],\n\t\"./ru.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/ru.js\",\n\t\t50\n\t],\n\t\"./si.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/si.js\",\n\t\t51\n\t],\n\t\"./sk.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/sk.js\",\n\t\t52\n\t],\n\t\"./sl.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/sl.js\",\n\t\t53\n\t],\n\t\"./sq.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/sq.js\",\n\t\t54\n\t],\n\t\"./sr.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/sr.js\",\n\t\t55\n\t],\n\t\"./sv.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/sv.js\",\n\t\t56\n\t],\n\t\"./th.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/th.js\",\n\t\t57\n\t],\n\t\"./tr.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/tr.js\",\n\t\t58\n\t],\n\t\"./uk.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/uk.js\",\n\t\t59\n\t],\n\t\"./vn.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/vn.js\",\n\t\t60\n\t],\n\t\"./zh.js\": [\n\t\t\"./node_modules/flatpickr/dist/l10n/zh.js\",\n\t\t61\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./node_modules/flatpickr/dist/l10n lazy recursive ^\\\\.\\\\/.*\\\\.js$\";\nmodule.exports = webpackAsyncContext;","import OabCarousel from './oab-carousel'\nimport OabCategory from './oab-category'\nimport OabServiceList from './oab-service-list'\nimport OabCollectionCategory from './oab-collection-category'\nimport OabDescription from './oab-description'\nimport OabBoutiqueSelection from './oab-boutique-selection'\nimport OabDateSelection from './oab-date-selection'\nimport OabPhoneNumber from './oab-phone-number'\nimport OabThanksMessage from './oab-thanks-message'\nimport OabRedirectAccount from './oab-redirect-account'\nimport { select, getCollection } from 'lib/selectors'\nimport Loader from 'ui/widgets/loader'\nimport notifier from 'modules/notifier'\nimport pageTitle from 'modules/pageTitle'\nimport {OAB_NAVIGATION_BAR_HEIGHT} from 'config/constants'\nimport { isMobileScreen, isTabletScreen, isWideScreen, isSafari, isAndroid, isInViewPort } from 'lib/helpers'\nimport OAB_API_MANAGER from './oab-api-manager'\n\nlet currentStep\nlet currentStepIndex\nlet oabSteps\nlet stepObjects\nlet stepContainer\nlet stepperInstance\nlet loader\nlet that\nlet stepStart = 0\n\nfunction Stepper(el) {\n  if (!el) {\n    return\n  }\n  // public functions passed to section classes\n\n\n\n  this.stepIndex = 0\n  this.stickyPosition = 0\n  this.isZoomed = false\n  this.oabDataObject = {\n    previousStepToGo: [],\n    comingFromBack: false,\n    isBackButtonClicked: false,\n    guestModeUsed: false,\n    bannerData: {\n      image: null,\n      description: null\n    }\n  }\n\n  this.stepNavigation = select('.js-step-navigation')\n  this.stepperNavigation = select('.js-step-navigation', el)\n  this.loaderExist = false\n\n  this.nextStep = (step) => {\n    this.oabDataObject.comingFromBack = false\n    currentStepIndex = getUpdatedIndex()\n    if (getStepIndex(oabSteps, step) === stepStart) that.stepperNavigation.setAttribute('hidden', '')\n    else {\n      that.stepperNavigation.removeAttribute('hidden')\n      const stepperBackNavigation = select('p', this.stepperNavigation)\n      if (stepperBackNavigation) {\n        if (!isMobileScreen() && window.devicePixelRatio >= 1.25) {\n          stepperBackNavigation.classList.add('zoomed-navigation')\n        } else {\n          stepperBackNavigation.classList.remove('zoomed-navigation')\n        }\n        let header = select('.is-fixed', that.stepperNavigation)\n        if (isTabletScreen() && header && (header.style.transform === \"\")) {\n          stepperBackNavigation.classList.add('tablet-transform')\n        } else {\n            stepperBackNavigation.classList.remove('tablet-transform')\n        }\n      }\n    }\n    const titleToHide = select('.js-step-dynamic-title', oabSteps[currentStepIndex])\n    if (titleToHide) titleToHide.parentNode.removeChild(titleToHide)\n    if (currentStepIndex < (oabSteps.length - 1)) {\n      oabSteps[currentStepIndex].setAttribute('hidden', '')\n      getStepIndex(oabSteps)\n      showStep(getStepIndex(oabSteps, step))\n    }\n  }\n // push analytics\n  this.showLoader = (element, isButton = false, delay = 0, callback = null) => {\n    this.loaderExist = true\n    loader = new Loader(element, {\n      referenceEl: element,\n      delay: delay,\n      button: isButton\n    })\n    loader.init()\n    loader.create(callback)\n  }\n  this.destroyLoader = (callback = null) => {\n    if (loader) {\n      loader.destroy(callback)\n      this.loaderExist = false\n    }\n\n  }\n\n  this.setHeaderHeight = () => {\n    let narrowHeader = select('.js-header.is-narrow')\n    if (!isMobileScreen()) {\n      select('.js-step-navigation').classList.contains('js-sticky-item') ? '' : select('.js-step-navigation').classList.add('js-sticky-item')\n      const stickyHeader = select('.js-step-navigation.js-sticky-item')\n      const stepperBackNavigation = select('p', this.stepperNavigation)\n      if (stickyHeader) stickyHeader.style.height = `${OAB_NAVIGATION_BAR_HEIGHT}px` // override sticky item height for OAB navigation element\n      const stickyHeaderDiv = select('.is-static', stickyHeader)\n      const stickyHeaderFixed = select('.is-fixed', stickyHeader)\n      if(narrowHeader && stickyHeaderDiv && stickyHeaderDiv.style.transform) {\n        stickyHeaderDiv.classList.remove('is-static')\n        stickyHeaderDiv.classList.add('is-fixed')\n        stickyHeaderDiv.style.transform = !stepperBackNavigation.classList.contains('tablet-transform') ?  \"translateY(80px)\" : ''\n      }\n      else {\n        if (stickyHeaderFixed)\n          stickyHeaderFixed.style.transform = narrowHeader && !stepperBackNavigation.classList.contains('tablet-transform') ?  \"translateY(80px)\" : stickyHeaderFixed.style.transform\n      \n          if(stickyHeaderFixed && stickyHeaderFixed.style.transform != '' && stepperBackNavigation.classList.contains('tablet-transform')) {\n            stepperBackNavigation.classList.remove('tablet-transform')\n          }\n        }\n    }\n  }\n\n  this.analyticsHandler = (analyticsName, data) => {\n    window.document.DLKit.push(analyticsName, data)\n  }\n  this.createStepTitle = (title, dataTest = null, titleLevel = 'h1', titleSize = '1') => {\n    const titleElement = document.createElement(titleLevel)\n    titleElement.classList.add('heading', `is-${titleSize}`, 'js-step-dynamic-title', 'step-dynamic-title')\n    titleElement.setAttribute('tabindex', '-1')\n    if (dataTest) titleElement.setAttribute('data-test', dataTest)\n    const titleSpan = document.createElement('span')\n    titleSpan.innerText = title\n    titleElement.appendChild(titleSpan)\n    return titleElement\n  }\n\n  this.generateBanner = (currenThis) => {\n    const bannerImage = select('.js-axis-banner', currenThis)\n    const bannerData = this.oabDataObject.bannerData\n    if (bannerImage && bannerData.image) bannerImage.innerHTML = bannerData.image\n    const bannerDescription = select('.js-axis-banner-description', currenThis)\n    if (bannerDescription && bannerData.description !== null && bannerData.description !== '') {\n      bannerDescription.removeAttribute('hidden')\n      bannerDescription.innerHTML = bannerData.description\n    }\n  }\n\n  this.scrollToTop = () => {\n    window.scrollTo(0,0)\n  }\n\n  this.visibleHeader = () => {\n    let headerOuterEl = select('.header__outer')\n    if(headerOuterEl != null) {\n    let headerOuterElStyle = getComputedStyle(headerOuterEl)\n    if(headerOuterElStyle.position != \"fixed\")\n        headerOuterEl.style.position = \"fixed\"\n    }\n  }\n\n  this.setWhiteBanner = () => {\n    let bnrImage = select('.js-axis-banner img', oabSteps[this.stepIndex])\n    if(!isMobileScreen() && bnrImage != null) {\n      if (this.stepNavigation) this.stepNavigation.removeAttribute('hidden')\n      select('.js-back-btn', oabSteps[this.stepIndex]).setAttribute('hidden', '')\n      this.stickyPosition = 0\n    }\n  }\n  \n this.bnrButton = () => {\n    let bnrImage = select('.js-axis-banner img', oabSteps[this.stepIndex])\n    if(!isMobileScreen() && this.oabDataObject.bannerData && this.oabDataObject.bannerData.image && bnrImage != null) { \n      this.stickyPosition = 0\n      this.stepNavigation.setAttribute('hidden', '')\n      select('.js-back-btn', oabSteps[this.stepIndex]).removeAttribute('hidden')\n    }\n  }\n\n  this.backButton = () => {\n    const stepTogetBackTo = this.oabDataObject.previousStepToGo\n    this.setWhiteBanner()\n    stepTogetBackTo.pop()\n    prevStep(stepTogetBackTo[stepTogetBackTo.length - 1])\n  }\n\n  this.displayErrorModalWindow = () => {\n    notifier.show({\n      name: window.config.locales.notifier.request.label,\n      message: window.config.locales.notifier.request.message,\n      close: window.config.locales.notifier.request.close,\n    })\n  }\n  that = this\n}\n\nconst init = (firstStepperInstance) => {\n  pageTitle(window.config.oab.title, '', ' | ')\n  that.setHeaderHeight()\n  oabSteps = getCollection('.oab-step')\n  document.cookie = 'oab-login-redirect-step=false'\n  stepObjects = {}\n  bindEvents()\n  const hashFlag = document.URL.split('#').pop()\n  if (hashFlag === \"logged\") {\n    that.oabDataObject = JSON.parse(sessionStorage.getItem('oab-data'))\n    that.oabDataObject.wasLogged = true\n    window.history.pushState(\"\", document.title, window.location.pathname)\n    stepperInstance.nextStep('redirection-step')\n    const headerFlag = select('.js-oab-header-flag') ? select('.js-oab-header-flag').innerText : ''\n    if (select('[data-default-service]') || that.oabDataObject.isMegaMenuEntryPoint === true) {\n      stepStart = headerFlag  === 'true' ? (select('[data-default-service]')) ? 2 : 1 : 0\n    }\n    else if (select('[data-default-service-plp]') || that.oabDataObject.isServiceEntryPoint === true) {\n      if (headerFlag  === 'true')\n        stepStart = that.oabDataObject.service.description && that.oabDataObject.service.description.length > 125 ? 4 : (that.oabDataObject.service.extra.mode != null && that.oabDataObject.service.extra.mode.toLowerCase() === 'video') ? 6 : 5\n    }\n  }\n  else if (select('[data-header-flag]')) {\n    manageHeaderRefererFlagStepper()\n    window.sessionStorage.setItem('isRedirectedToMyAccount', JSON.stringify(false))\n  }\n  else if (hashFlag === 'backFromLoginPage') {\n    that.oabDataObject = JSON.parse(sessionStorage.getItem('oab-data'))\n    stepperInstance.nextStep('redirection-step')\n    window.sessionStorage.setItem('isRedirectedToMyAccount', JSON.stringify(false))\n  }\n  else {\n    stepperInstance.nextStep('carousel')\n    window.sessionStorage.setItem('isRedirectedToMyAccount', JSON.stringify(false))\n  }\n\n  window.onzoom = () => { // detect when user zoom browser\n    const stepperBackNavigation = select('.js-step-navigation p.container')\n    const checkBoxInterests = getCollection('.js-interests-checkbox-input .checkbox')\n    const nameFields = getCollection('.js-name-fields .label-input')\n    const emailField = select('.js-mail-fields .label-input')\n    const countryCodeField = select('.js-input-countryCode .selectbox')\n    const phoneNumberField = select('.js-input-phone .js-label-input')\n    const commentField = select('.review-message-input')\n    const legalMention = select('.js-legal-mention-section p a')\n    const devicePixelRatio = window.devicePixelRatio.toFixed(2)\n    checkBoxInterests.forEach(checkbox => {\n      if (window.devicePixelRatio >= 1 && window.devicePixelRatio < 1.25) {\n        checkbox.classList.remove('checkbox-zoomed')\n        checkbox.classList.add('checkbox-margin')\n      } else {\n        checkbox.classList.add('checkbox-zoomed')\n        checkbox.classList.remove('checkbox-margin')\n      }\n      if(navigator.userAgent.indexOf(\"Firefox\") != -1) {\n        !isMobileScreen() && devicePixelRatio == 0.60 ? checkbox.classList.add('checkbox-zoomed-firefox') : checkbox.classList.remove('checkbox-zoomed-firefox')\n      }\n    })\n    if (stepperBackNavigation) {\n      !isMobileScreen() && window.devicePixelRatio >= 1.25 ? stepperBackNavigation.classList.add('zoomed-navigation') : stepperBackNavigation.classList.remove('zoomed-navigation')\n    }\n    if (nameFields) {\n      nameFields.forEach(nameField => {\n        !isMobileScreen() && (devicePixelRatio >= 0.67 && devicePixelRatio <= 0.75) || devicePixelRatio >= 1.50 ? nameField.classList.add('hover-effect') : nameField.classList.remove('hover-effect')\n      })\n    }\n\n    if (emailField) {\n    \t!isMobileScreen() && devicePixelRatio == 0.67 ? emailField.classList.add('hover-effect') : emailField.classList.remove('hover-effect')\n    }\n    if (commentField) {\n      !isMobileScreen() && (devicePixelRatio >= 0.67 && devicePixelRatio <= 0.75) ? commentField.classList.add('hover-effect') : commentField.classList.remove('hover-effect')\n    }\n    if (phoneNumberField) {\n    \t!isMobileScreen() && (devicePixelRatio >= 0.67 && devicePixelRatio <= 0.80) ? phoneNumberField.classList.add('hover-effect') : phoneNumberField.classList.remove('hover-effect')\n    }\n    if (legalMention) {\n      !isMobileScreen() && (devicePixelRatio >= 0.67 && devicePixelRatio <= 0.80) || devicePixelRatio == 0.33 ? legalMention.classList.add('hover-effect') : legalMention.classList.remove('hover-effect')\n      !isMobileScreen() && devicePixelRatio == 0.33 ? legalMention.classList.add('hover-effect-zoom') : legalMention.classList.remove('hover-effect-zoom')\n      if(navigator.userAgent.indexOf(\"Firefox\") != -1)\n        !isMobileScreen() && devicePixelRatio == 0.50 ? legalMention.classList.add('hover-effect-firefox') : legalMention.classList.remove('hover-effect-firefox')\n    }\n    if (countryCodeField) {\n      !isMobileScreen() && (devicePixelRatio >= 0.67 && devicePixelRatio <= 0.75) || countryCodeField == 0.25 ? countryCodeField.classList.add('hover-effect') : countryCodeField.classList.remove('hover-effect')\n    }\n  }\n\n  window.onresize = (e) => {\n    if(isWideScreen()) \n        that.isZoomed = true\n\n    const event = window.event || e\n    if (typeof (window.onzoom) === 'function') {\n      return window.onzoom.call(window, event)\n    }\n  }\n}\n\nconst getStepIndex = (stepsArray, step) => {\n  stepsArray.forEach((oabStep, index) => {\n    const stepInfo = oabStep.attributes['data-step'].value\n    if (stepInfo === step) {\n      that.stepIndex = index\n    }\n  })\n  return that.stepIndex\n}\n\nconst showStep = (step) => {\n  const oabDataStep = oabSteps[step].attributes['data-step'].value\n  deleteInstance(stepObjects[oabDataStep])\n  oabSteps[step].removeAttribute('hidden')\n  resetStepIndex(step)\n  switch (oabDataStep) {\n    case 'carousel':\n      stepContainer = new OabCarousel(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'category':\n      if (that.oabDataObject.categoryBypassOnPrevious) {\n        delete that.oabDataObject.categoryBypassOnPrevious\n        showStep(step - 1)\n        return\n      }\n      else {\n        stepContainer = new OabCategory(oabSteps[step], stepperInstance)\n        stepObjects[oabDataStep] = stepContainer\n        break\n      }\n    case 'service-list':\n      stepContainer = new OabServiceList(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'collection-category':\n      stepContainer = new OabCollectionCategory(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'description':\n      stepContainer = new OabDescription(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'boutique-selection':\n      stepContainer = new OabBoutiqueSelection(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'date-selection':\n      stepContainer = new OabDateSelection(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'phone-number':\n      stepContainer = new OabPhoneNumber(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'redirection-step':\n      stepContainer = new OabRedirectAccount(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    case 'thanks-message':\n      stepContainer = new OabThanksMessage(oabSteps[step], stepperInstance)\n      stepObjects[oabDataStep] = stepContainer\n      break\n    default: break\n  }\n  that.scrollToTop()\n}\nconst prevStep = (stepToGo) => {\n  that.oabDataObject.comingFromBack = true\n  that.oabDataObject.isBackButtonClicked = true\n  const stepToHide = getUpdatedIndex()\n  currentStepIndex = getStepIndex(oabSteps, stepToGo)\n  const titleToHide = select('.js-step-dynamic-title', oabSteps[stepToHide])\n  if (titleToHide) titleToHide.parentNode.removeChild(titleToHide)\n  if (currentStepIndex >= 0) {\n    oabSteps[stepToHide].setAttribute('hidden', '')\n    if (currentStepIndex === stepStart || that.oabDataObject.previousStepToGo[0] == oabSteps[currentStepIndex].attributes['data-step'].value) that.stepperNavigation.setAttribute('hidden', '')\n    // get back button analytics from subclasses that don't have access to the element\n    if (stepContainer && typeof stepContainer.getBackStepAnalytics === 'function') {\n      const analyticsData = stepContainer.getBackStepAnalytics() || {}\n      stepperInstance.analyticsHandler('oab-when-user-click-step-back', analyticsData)\n    }\n    showStep(currentStepIndex)\n  }\n}\n\n/**\n * If we're coming from Header, we display either categories if > 1 or services\n */\nconst manageHeaderRefererFlagStepper = () => {\n  const dataError = select('[data-error]')\n  if (dataError) {\n    that.displayErrorModalWindow()\n    return\n  }\n\n  that.oabDataObject.selectedAxis = window.location.pathname.split('/')[2]\n  select('[data-company-id]') && select('[data-company-id]').dataset? that.oabDataObject.companyId = select('[data-company-id]').dataset.companyId : 0\n  const defaultServicePLPCompanyId = select('[data-default-service-plp-companyId]')\n  that.oabDataObject.companyId = defaultServicePLPCompanyId ? parseInt(defaultServicePLPCompanyId.dataset.defaultServicePlpCompanyid) : that.oabDataObject.companyId\n  let selectedAxis\n  selectedAxis = that.oabDataObject.selectedAxis.indexOf('watches-jewellery') !== -1 ? 'watches' : that.oabDataObject.selectedAxis\n  const axisData = select(`[data-axis-type=\"${selectedAxis}\"]`).dataset\n  if (axisData) {\n    that.oabDataObject.selectedDivision = axisData.divisionType\n    const axisType = axisData.axisType.toLowerCase()\n    const axisHeroBanner = select(`.js-axis-hero-banner-${axisType}`)\n    const axisHeroDescription = select(`.js-axis-hero-description-${axisType}`)\n    if (axisHeroBanner) that.oabDataObject.bannerData.image = axisHeroBanner.innerHTML\n    if (axisHeroDescription) that.oabDataObject.bannerData.description = axisHeroDescription.innerHTML\n  }\n  else {\n    that.displayErrorModalWindow()\n  }\n  const hashFlag = document.URL.split('#').pop()\n\n  const defaultService = select('[data-default-service]')\n  const hasServiceList = select('[has-service-list]')\n  const defaultServicePLP = select('[data-default-service-plp]')\n  const dataDefaultServicePlpDesc = select('[data-default-service-plp-desc]')\n  const isServiceEntry = select('[data-default-is-service-entry]')\n  const dataDefaultServicePlpFormattedPrice = select('[data-default-service-plp-price-formattedvalue]')\n  const dataDefaultServicePlpPriceValue = select('[data-default-service-plp-price-value]')\n  const dataIsMegaMenuOnlyEvents = select('[data-only-events]')\n  let serviceData\n  \n  if (defaultServicePLP && dataDefaultServicePlpFormattedPrice && dataDefaultServicePlpPriceValue) {\n    const dataService = defaultServicePLP.dataset.defaultServicePlp.split(',')\n    that.oabDataObject.service = { serviceId: dataService[0], title: dataService[1], description: dataService[2], extra: {mode: dataService[3]}, minAdvancePeriod: dataService[4], maxAdvancePeriod: dataService[5], questionSetId: dataService[6], price: {formattedValue: dataService[7], value: dataService[8]}, duration: {duration: dataService[9], unit: {code: dataService[10]}}, associatedEvents: dataService[11].trim() === \"true\" ? true : false, eventGroupName : null}\n    that.oabDataObject.service.eventGroupName = that.oabDataObject.service.associatedEvents ? dataService[12].trim() : ''\n    that.oabDataObject.service.price.formattedValue = dataDefaultServicePlpFormattedPrice.dataset.defaultServicePlpPriceFormattedvalue\n    that.oabDataObject.service.price.value = dataDefaultServicePlpPriceValue.dataset.defaultServicePlpPriceValue\n    that.oabDataObject.service.description = dataDefaultServicePlpDesc ? dataDefaultServicePlpDesc.dataset.defaultServicePlpDesc : ''\n    that.oabDataObject.isServiceEntryPoint = true\n    setQuestionData()\n  }\n\n  if (defaultService || hasServiceList) {\n    stepStart = 2\n    if (hashFlag === 'backFromLoginPage') {\n      that.oabDataObject = JSON.parse(sessionStorage.getItem('oab-data'))\n      stepperInstance.nextStep('redirection-step')\n    } else {\n      stepperInstance.nextStep('service-list')\n    }\n    that.oabDataObject.isMegaMenuEntryPoint === true\n  }\n  else if (defaultServicePLP || isServiceEntry.dataset.defaultIsServiceEntry == \"true\") {\n    serviceData = that.oabDataObject.service ? that.oabDataObject.service : JSON.parse(sessionStorage.getItem('oab-data')).service\n    stepStart = serviceData.description && serviceData.description.length > 125 ? 4 : (serviceData.extra.mode != null && serviceData.extra.mode.toLowerCase() === 'video') ? 6 : 5\n    if (hashFlag === 'backFromLoginPage') {\n      that.oabDataObject = JSON.parse(sessionStorage.getItem('oab-data'))\n      stepperInstance.nextStep('redirection-step')\n    } else {\n      if (serviceData.description && serviceData.description.length > 125) { // if the selected service contains a description and description has more than 125 characters then go to description step\n        stepperInstance.nextStep('description')\n      } else {\n        if (serviceData.extra.mode != null && serviceData.extra.mode.toLowerCase() === 'video') {\n          stepperInstance.nextStep('date-selection') // go to date selection if user has selected virtual service\n        } else {\n          stepperInstance.nextStep('boutique-selection') // else go directly to boutique selection step\n        }\n      }\n    }\n  }\n  else if (dataIsMegaMenuOnlyEvents && dataIsMegaMenuOnlyEvents.dataset.onlyEvents === \"true\") {\n    stepStart = 2\n    stepperInstance.nextStep('service-list')\n  }\n  else {\n    stepStart = 1\n    if (hashFlag === 'backFromLoginPage') {\n      that.oabDataObject = JSON.parse(sessionStorage.getItem('oab-data'))\n      stepperInstance.nextStep('redirection-step')\n    } else {\n      stepperInstance.nextStep('category')\n    }\n  }\n}\n\nconst setQuestionData = () => {\n  if (parseInt(that.oabDataObject.service.questionSetId) !== 0) {\n    const collectionCategoryParams = {\n      questionSetId: that.oabDataObject.service.questionSetId,\n      companyId: that.oabDataObject.companyId\n    }\n    // call categories and collection webservice to check if question is a comment or a category & collection\n    OAB_API_MANAGER.getCategoryCollectionList(collectionCategoryParams)\n      .then((data) => {\n        that.oabDataObject.questionListData = data\n        that.questionList = data.questionList\n        if (that.questionList) {\n          that.questionList.forEach((question) => {\n            that.oabDataObject.interests = question.questionName.toLowerCase() === 'customer_interests'\n          })\n        } else if (data.errors) { // if an error occurs while calling collection and categories webservice then show the error notifier\n          notifier.show({\n            name: window.config.locales.notifier.request.label,\n            message: window.config.locales.notifier.request.message,\n            close: window.config.locales.notifier.request.close,\n          })\n        }\n      })\n  } \n}\n\n\nconst resetStepIndex = (index) => {\n  for (let i = 0; i < oabSteps.length; i++) {\n    oabSteps[i].classList.remove('active')\n  }\n  oabSteps[index].classList.add('active')\n}\nconst getUpdatedIndex = () => {\n  currentStep = select('.oab-step.active')\n  currentStepIndex = oabSteps.indexOf(currentStep)\n  return currentStepIndex\n}\nconst bindEvents = () => {\n  const prev = select('.js-prev-button')\n\n  prev.addEventListener('click', () => {\n    const stepTogetBackTo = that.oabDataObject.previousStepToGo\n    if((that.stepIndex == 1 || that.stepIndex == 2) && that.oabDataObject.previousStepToGo[0] != oabSteps[that.stepIndex].attributes['data-step'].value){ \n      that.setWhiteBanner()\n   }\n    stepTogetBackTo.pop()\n    prevStep(stepTogetBackTo[stepTogetBackTo.length - 1])\n  })\n\n  window.addEventListener('scroll',(event) => {\n    isIosTab()\n    if(that.isZoomed) {\n      that.visibleHeader()\n    }\n\n    if(that.oabDataObject.previousStepToGo[0] != oabSteps[that.stepIndex].attributes['data-step'].value) \n          isTabLandscapeView()\n\n    if((that.stepIndex == 1 || that.stepIndex == 2) && that.oabDataObject.previousStepToGo[0] != oabSteps[that.stepIndex].attributes['data-step'].value){\n      let bnrImage = select('.js-axis-banner img', oabSteps[that.stepIndex])\n      if(!isMobileScreen() && that.oabDataObject.bannerData && that.oabDataObject.bannerData.image && bnrImage != null) {\n        let selectedList = that.stepIndex == 1 ? select('.oab-category-list') : select('.oab-service-list')\n        that.stickyPosition = that.stickyPosition == 0 ? selectedList.offsetTop : that.stickyPosition\n        if (window.pageYOffset >= that.stickyPosition) { \n          that.stepNavigation.removeAttribute('hidden')\n      } else {\n          that.stepNavigation.setAttribute('hidden', '')\n        }\n      }\n    }\n  })\n}\n\nconst isIosTab = () => {\n  if ( isSafari() && (screen.width > 600 && screen.width < 1200) ) {\n    let isIosStep =  select('.js-step-navigation .is-fixed')\n    if (isIosStep != null) {\n      let isIosStepStyles = window.getComputedStyle(isIosStep)\n      if(isIosStepStyles.zIndex == 0)\n          isIosStep.style.zIndex = 60\n    }\n  }\n}\n\nconst isTabLandscapeView = () => {\n  let narrowHeader = select('.js-header.is-narrow')\n  if(narrowHeader && !isMobileScreen() && !isTabletScreen()) {\n    let footerElement = select('.subfooter')\n    let headerStep = select('.js-step-navigation div')\n      if(footerElement && isInViewPort(footerElement, footerElement.clientHeight))  {\n          if(headerStep) {\n            headerStep.classList.remove('is-fixed')\n            headerStep.classList.add('is-static')\n          }\n      } else {\n        if(headerStep) {\n          headerStep.classList.add('is-fixed')\n          headerStep.classList.remove('is-static')\n        }\n      }\n  }\n}\n\nconst deleteInstance = (instance) => {\n  if (instance) {\n    instance.destroy()\n    instance = null\n  }\n}\n\nexport default function (el) {\n  stepperInstance = new Stepper(el)\n  init(stepperInstance)\n  return stepperInstance\n}\n","import * as xhr from 'modules/fetch'\n\nconst OAB_API_MANAGER = {\n  /**\n   * @param {Object} requestData - data to send to WS\n   * @param {Array} callbacks [successCallback, rejectCallback, finallyCallback] : array containing promise callbacks\n   */\n  getDateAndTime: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.dateSelection, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n  getEventDateAndTime : (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.eventDateSelection, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  getAvailableBoutiques: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.boutiqueList, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  getAvailableBoutiquesByService: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.boutiqueListByService, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  getAvailableBoutiquesByEvent: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.boutiqueListByEvent, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  postDatetimeFormData: (requestData, callbacks = [null, null, null]) => {\n    // xhr.post('oab/date', requestData).then(callbacks[0], callbacks[1], callbacks[2])\n    new Promise((resolve) => {\n      resolve({ data: ['11:00 AM', '13:00 pm', '16:00 pm', '17:00 AM', '14:30 AM'] })\n      // reject(false)\n    })\n      .then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  getServiceList: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.serviceList, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n\n  /**\n   * @see getOabDateAndTime\n   */\n  getCategoryList: (requestData, callbacks = [null, null, null]) => {\n    xhr.get(window.config.webservices.oab.categoryList, { data: requestData }).then(callbacks[0], callbacks[1], callbacks[2])\n  },\n  /**\n   * @see getOabCategoryAndCollection\n   */\n\n  getCategoryCollectionList: (requestData) => xhr.get(window.config.webservices.oab.categoryCollectionList, { data: requestData }),\n\n  addAppointmentBooking: (requestData) => xhr.post(window.config.webservices.oab.postAppointmentBooking, { data: requestData }),\n\n  addEventAppointmentBooking: (requestData) => xhr.post(window.config.webservices.oab.postEventAppointmentBooking, { data: requestData }),\n\n  /**\n   * @see postOabBookingConfirmation\n   */\n  postAppointmentBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.confirmBooking, { data: requestData }),\n\n\n  postAppointmentEventBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.eventConfirmBooking, { data: requestData }),\n\n  postAppointmentStartCheckout: (requestData) => xhr.post(window.config.webservices.oab.confirmOABEventBooking, { data: requestData }),\n\n  /**\n   * @see postOabBookingConfirmation\n   */\n  postAppointmentGuestBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.confirmGuestBooking, { data: requestData }),\n\n\n  /**\n     * @see postOabEventBookingConfirmation\n     */\n    postAppointmentGuestEventBookingConfirmation: (requestData) => xhr.post(window.config.webservices.oab.confirmGuestEventBooking, { data: requestData }),\n\n  /**\n   * @see deleteOabBooking\n   */\n  deleteAppointmentBooking: (requestData) => xhr.post(window.config.webservices.oab.cancelBooking, { data: requestData })\n\n}\n\nexport default OAB_API_MANAGER\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport { select, selectAll , closest, getCollection} from 'lib/selectors'\nimport { focusElement, isMobileScreen, initGoogleMap } from 'lib/helpers'\nimport pageTitle from 'modules/pageTitle'\n\nclass OabBoutiqueSelection extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.oabData = this.master.oabDataObject\n    this.stepsArray = this.oabData.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.selectedAxis = this.oabData.selectedAxis\n\tthis.selectedDivision = this.oabData.selectedDivision\n    this.companyId = this.oabData.companyId\n    this.events = []\n    this.boutiqueSelectionIndex = 0\n    this.SELECTORS = {\n      SECTION_TITLE: '.js-boutique-selection-title',\n      LIST: '.oab-boutique-list ul',\n      ITEM_TEMPLATE: '.oab-boutique-list li.template',\n      ITEMS: '.oab-boutique-list li',\n      ITEMS_LABEL: '.oab-boutique-list label',\n      ITEMS_RADIO: '.oab-boutique-list input',\n      BOUTIQUE_NAME: '.js-boutique-name',\n      BOUTIQUE_ADDRESS: '.js-boutique-address',\n      FORM_CTA: '.oab-boutique-list .submitButton',\n      SUBMIT_FORM_CTA: '.boutique-map .submitButton',\n      OAB_CONTAINER: '.js-oab-container',\n      BOUTIQUE_TITLE: '.oab-boutique-title',\n      BOUTIQUE_TABS: '.boutique-tabs',\n      LIST_TAB: '.list-tab',\n      MAP_TAB: '.map-tab',\n      BOUTIQUE_INFO: '.js-boutiqueInfo',\n      BUTTON_NAVIGATE_TOP: '.button-navigate-to-top',\n      BOUTIQUE_LIST: '.oab-boutique-list',\n      BOUTIQUE_MAP: '.boutique-map',\n      MAP_TOP: '#skip_storemap_top',\n      MAP_BOTTOM: '#skip_storemap_bottom'\n    }\n    const oabContainer = closest(this.el, this.SELECTORS.OAB_CONTAINER)\n    if (oabContainer && isMobileScreen()) oabContainer.classList.toggle('container', true)\n    this.loadData()\n  }\n\n  // gets called by the master to get back button analytics\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'boutique selection',\n      eventLabel: 'back',\n      eventAction: ''\n    }\n  }\n\n  /* ---------- LOADING ---------- */\n\n  loadData() {\n\tconst oabProvider = select('.js-oab-provider')\n    this.callGoogleMaps()\n    if(this.master.oabDataObject.service.associatedEvents) {\n      OAB_API_MANAGER.getAvailableBoutiquesByEvent({\n        companyId: this.master.oabDataObject.companyId,\n        eventName: this.master.oabDataObject.service.title,\n        eventGroupName:  this.master.oabDataObject.service.eventGroupName\n      }, [response => this.init(response), response => this.master.displayErrorModalWindow(), () => this.master.destroyLoader()])\n    } else {\n\t\tif(oabProvider.innerText === \"SALESFORCE\"){\n\t\t\tOAB_API_MANAGER.getAvailableBoutiquesByService({\n\t\t\t\tdivision: this.selectedDivision,\n\t\t\t\tserviceType: this.master.oabDataObject.service.salesforceId\n\t\t\t}, [response => this.init(response), response => this.master.displayErrorModalWindow(), () => this.master.destroyLoader()])\n\t\t\t}else{\n\t\t\tOAB_API_MANAGER.getAvailableBoutiquesByService({\n\t\t\t\tcompanyId: this.companyId,\n\t\t\t\tserviceId: this.master.oabDataObject.service.associatedEvents ? this.master.oabDataObject.service.eventGroupId : this.master.oabDataObject.service.serviceId\n\t\t\t\t}, [response => this.init(response), response => this.master.displayErrorModalWindow(), () => this.master.destroyLoader()])\n\t\t\t\t}\n\t\t\t}\n  }\n\n  init(response) {\n    if (response.errors && response.errors.error) {\n      this.master.displayErrorModalWindow()\n      return\n    }\n    this.SECTION_TITLE = select(this.SELECTORS.SECTION_TITLE)\n    this.bindData(response)\n    this.bindEvents()\n    this.loadSelectedBoutiqueMap()\n    this.master.setHeaderHeight()\n  }\n\n  /* ---------- BINDING ---------- */\n\n  bindData(data) {\n    this.LIST = select(this.SELECTORS.LIST) || null\n    this.boutiqueTitle = select(this.SELECTORS.BOUTIQUE_TITLE) || null\n    this.boutiqueTabs = select(this.SELECTORS.BOUTIQUE_TABS) || null\n    this.ITEM_TEMPLATE = select(this.SELECTORS.ITEM_TEMPLATE)\n    this.boutiqueInfo = select(this.SELECTORS.BOUTIQUE_INFO) || null\n    this.boutiqueList = select(this.SELECTORS.BOUTIQUE_LIST)\n    this.boutiqueMap = select(this.SELECTORS.BOUTIQUE_MAP)\n    this.mapTab = select(this.SELECTORS.MAP_TAB) || null\n    this.listTab = select(this.SELECTORS.LIST_TAB) || null\n    this.selectedListItem = null\n    if (this.SECTION_TITLE) {\n      const title = this.master.createStepTitle(window.config.oab.boutiqueSelection.title, 'lblBoutiqueSelection')\n      pageTitle(`${window.config.oab.boutiqueSelection.title} - ${window.config.oab.title}`, '', ' | ')\n      this.SECTION_TITLE.innerHTML = ''\n      this.SECTION_TITLE.appendChild(title)\n      focusElement(this.SECTION_TITLE.firstChild)\n    }\n    if (this.LIST && this.ITEM_TEMPLATE) {\n      this.data = data.boutiques\n      // clean existing list if coming after clicking on back button\n      this.boutiqueTabs ? this.boutiqueTabs.remove() : ''\n      this.boutiqueInfo ? this.boutiqueInfo.remove() : ''\n      while (this.LIST.firstChild) {\n        this.LIST.removeChild(this.LIST.firstChild)\n      }\n      data.boutiques.forEach((element, idx) => {\n        const newItem = this.ITEM_TEMPLATE.cloneNode(true)\n        newItem.classList.remove('template')\n        newItem.removeAttribute('hidden')\n        newItem.setAttribute('data-lat', element.address.latitude)\n        newItem.setAttribute('data-long', element.address.longitude)\n        newItem.setAttribute('data-index', idx)\n\n        const radio = select('input', newItem)\n        const label = select('label', newItem)\n\n        if (radio) {\n          radio.setAttribute('id', `boutique-${idx}`)\n          radio.value = idx\n        }\n        if (label) label.setAttribute('for', `boutique-${idx}`)\n\n        if (this.oabData.selectedBoutique && this.oabData.comingFromBack) {\n          if (this.oabData.selectedBoutique.boutiqueIndex === idx) {\n            newItem.classList.toggle('selected', true)\n            if (radio) radio.setAttribute('checked', '')\n            this.selectedBoutique = element\n            this.selectedBoutique.boutiqueIndex = idx\n          }\n        } else if (idx === 0) {\n          newItem.classList.toggle('selected', true)\n          if (radio) radio.setAttribute('checked', '')\n          this.selectedBoutique = element\n          this.selectedBoutique.boutiqueIndex = idx\n        }\n\n        const name = select(this.SELECTORS.BOUTIQUE_NAME, newItem) || null\n        const address = select(this.SELECTORS.BOUTIQUE_ADDRESS, newItem) || null\n\n\n        if (name) name.innerHTML = element.name\n        if (address) {\n\n          if(element.address.postcode != null && element.address.address4 != null){address.innerHTML = `${element.address.address1 ? element.address.address1 : ''} -\n\n          ${element.address.postcode ? element.address.postcode : ''}\n\n          ${element.address.address4 ? element.address.address4 : ''}`}else{\n\n            address.innerHTML = `${element.address.address1 ? element.address.address1 : ''}`\n\n          }\n\n          this.address = address.innerHTML\n\n        }\n        this.LIST.appendChild(newItem)\n      })\n      if (isMobileScreen()) {\n        this.createMobileTabs()\n        this.showTabContent()\n      }\n\n      if(this.boutiqueSelectionIndex == 0) {\n        this.selectedBoutiqueItem = select(`${this.SELECTORS.LIST} .selected`)\n          if (this.selectedBoutiqueItem) {\n            let scrollPos = 0\n            if(!isMobileScreen()) {\n              scrollPos = this.selectedBoutiqueItem.offsetTop - this.selectedBoutiqueItem.offsetHeight\n            }\n            if(isMobileScreen()) {\n              let boutiqueTabs = select('.boutique-tabs')\n              scrollPos = this.oabData.comingFromBack == false ? this.selectedBoutiqueItem.offsetHeight - this.selectedBoutiqueItem.offsetTop\n                              : this.selectedBoutiqueItem.offsetTop - 2 * (this.selectedBoutiqueItem.offsetHeight) - boutiqueTabs.offsetHeight\n            }\n            this.LIST.scrollTo({\n              top: scrollPos\n            })\n          }\n          this.boutiqueSelectionIndex++\n      }\n\n    }\n  }\n\n  callGoogleMaps() {\n    initGoogleMap()\n  }\n\n  createMobileTabs() {\n    this.template = `<ul class = \"boutique-tabs\">\n    <li> <button class = \"tab-item list-tab\" type=\"button\">${config.oab.boutiqueSelection.listTab}</button></li>\n    <li><button class = \"tab-item map-tab\" type=\"button\">${config.oab.boutiqueSelection.mapTab}</button</li>\n    </ul>`\n    this.boutiqueTitle.insertAdjacentHTML(\"afterend\", this.template)\n    let boutiqueMap = select('.boutique-map')\n    boutiqueMap.setAttribute('hidden', '')\n    this.listTab ? this.listTab.classList.add('selected') : ''\n    select(this.SELECTORS.SECTION_TITLE).classList.remove('element-centered')\n  }\n\n  loadSelectedBoutiqueMap() {\n    let map\n    let style = [{\n        featureType: \"all\",\n        elementType: \"all\",\n        stylers: [{\n          saturation: -100\n        }],\n      },\n\n      {\n        elementType: \"labels.icon\",\n        stylers: [{\n          visibility: \"off\",\n        }, ],\n      },\n    ]\n    let latitude = this.selectedBoutique.address.latitude\n    let longitude = this.selectedBoutique.address.longitude\n    let latlngbounds = new google.maps.LatLngBounds();\n    let mapOptions = {\n      zoom: 17,\n      center: new google.maps.LatLng(latitude, longitude),\n      mapTypeControlOptions: {\n        mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'grey']\n      },\n      disableDefaultUI: true,\n      zoomControl: true,\n      gestureHandling: \"greedy\",\n    }\n\n    map = new google.maps.Map(document.getElementById(\"oab-boutique-map\"), mapOptions)\n    var mapType = new google.maps.StyledMapType(style, {\n      name: \"Grayscale\"\n    })\n    map.mapTypes.set(\"grey\", mapType)\n    map.setMapTypeId(\"grey\")\n    var marker_image = `${config.theme}/assets/media/pin-black.png`\n    for (i = 0; i < this.data.length; i++) {\n      var pinIcon = (Number(this.data[i].address.latitude) === this.selectedBoutique.address.latitude && Number(this.data[i].address.longitude) === this.selectedBoutique.address.longitude) ? new google.maps.MarkerImage(marker_image, null, null, null, new google.maps.Size(30, 30)) : new google.maps.MarkerImage(marker_image, null, null, null, new google.maps.Size(22, 22))\n      const marker = new google.maps.Marker({\n        map: map,\n        position: new google.maps.LatLng(this.data[i].address.latitude, this.data[i].address.longitude),\n        icon: pinIcon,\n      });\n      latlngbounds.extend(marker.position);\n      const that = this\n      let allMarkers = []\n      allMarkers.push(marker)\n      marker.addListener(\"click\", function() {\n        that.selectMarkerBoutique(marker, allMarkers);\n      })\n    }\n  }\n\n  selectMarkerBoutique(marker, allMarkers) {\n    const boutiqueList = selectAll(this.SELECTORS.ITEMS)\n    boutiqueList.forEach((item, index) => {\n      if (Number(item.dataset.lat) === marker.position.lat() && Number(item.dataset.long) === marker.position.lng()) {\n        item.classList.toggle('selected', true)\n        select('input', item).setAttribute('checked', '')\n        this.selectedListItem = item\n        this.selectedBoutique = this.data[index]\n        this.selectedBoutique.boutiqueIndex = index\n      } else {\n        item.classList.toggle('selected', false)\n        select('input', item).removeAttribute('checked')\n      }\n    })\n    const scrollPos = this.selectedListItem.offsetTop - this.selectedListItem.offsetHeight\n    this.LIST.scrollTo({\n      top: scrollPos,\n      behavior: 'smooth'\n    })\n    this.boutiqueInfo = select(this.SELECTORS.BOUTIQUE_INFO)\n    this.boutiqueInfo ? this.boutiqueInfo.remove() : ''\n    let boutiqueInfoButton = select('.map-button-navigate-to-top')\n    boutiqueInfoButton ? boutiqueInfoButton.remove() : ''\n    if (isMobileScreen())\n      this.createBoutiqueInfoBox()\n    this.loadSelectedBoutiqueMap()\n  }\n\n  bindEvents() {\n    this.events.push(bind(this.el, this.SELECTORS.ITEMS_RADIO, 'focusin', (evt) => this.focusInCallback(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.ITEMS, 'click', (evt) => this.focusInCallback(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.ITEMS_RADIO, 'focusout', (evt) => this.focusOutCallback(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.FORM_CTA, 'click', (evt) => this.submitCallback(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.SUBMIT_FORM_CTA, 'click', (evt) => this.submitCallback(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.LIST_TAB, 'click', (evt) => this.showTabContent(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.MAP_TAB, 'click', (evt) => this.showTabContent(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.BUTTON_NAVIGATE_TOP, 'click', (evt) => this.focusToActiveTab(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.MAP_TOP, 'click', (evt) => this.focusBottom(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.MAP_BOTTOM, 'click', (evt) => this.focusTop(evt)))\n  }\n\n  /* ---------- EVENTS ---------- */\n\n  focusToActiveTab(evt) {\n    let activeTab = select('.boutique-tabs .selected')\n    activeTab.focus()\n  }\n\n  focusBottom() {\n    select(this.SELECTORS.MAP_BOTTOM).focus()\n  }\n\n  focusTop() {\n    select(this.SELECTORS.MAP_TOP).focus()\n  }\n\n  showTabContent(evt) {\n    if (isMobileScreen) {\n      this.boutiqueInfo = select(this.SELECTORS.BOUTIQUE_INFO)\n      this.mapTab = select(this.SELECTORS.MAP_TAB) || null\n      this.listTab = select(this.SELECTORS.LIST_TAB) || null\n      if (evt && evt.target && evt.target.classList.contains('map-tab')) {\n        this.boutiqueMap ? this.boutiqueMap.removeAttribute('hidden') : ''\n        this.mapTab ? this.mapTab.setAttribute('aria-current', 'true') : ''\n        this.listTab ? this.listTab.removeAttribute('aria-current') : ''\n        this.boutiqueList ? this.boutiqueList.setAttribute('hidden', '') : ''\n        this.mapTab ? this.mapTab.classList.add('selected') : ''\n        this.listTab ? this.listTab.classList.remove('selected') : ''\n        this.boutiqueInfo ? this.boutiqueInfo.remove() : ''\n        let buttonNavigateTop = select('.map-button-navigate-to-top')\n        buttonNavigateTop ? buttonNavigateTop.remove() : ''\n        this.createBoutiqueInfoBox()\n        let boutiqueListGoBack = select('p[role=heading]', this.boutiqueMap)\n        boutiqueListGoBack ? focusElement(boutiqueListGoBack) : ''\n        this.master.analyticsHandler('oab-when-user-select-boutique-tab', {\n          eventAction: this.master.oabDataObject.service.title,\n          eventLabel: 'map_display'\n        })\n      } else {\n        this.boutiqueList ? this.boutiqueList.removeAttribute('hidden') : ''\n        this.listTab ? this.listTab.setAttribute('aria-current', 'true') : ''\n        this.mapTab ? this.mapTab.removeAttribute('aria-current') : ''\n        this.boutiqueMap ? this.boutiqueMap.setAttribute('hidden', '') : ''\n        this.listTab ? this.listTab.classList.add('selected') : ''\n        this.mapTab ? this.mapTab.classList.remove('selected') : ''\n        let boutiqueListGoBack = select('p[role=heading]', this.boutiqueList)\n        boutiqueListGoBack ? focusElement(boutiqueListGoBack) : ''\n        if (this.selectedListItem) {\n          const scrollPos = this.selectedListItem.offsetTop - this.selectedListItem.parentNode.offsetTop\n          this.LIST.scrollTo({\n            top: scrollPos,\n            behavior: 'smooth'\n          })\n        }\n        this.master.analyticsHandler('oab-when-user-select-boutique-tab', {\n          eventAction: this.master.oabDataObject.service.title,\n          eventLabel: 'list_display'\n        })\n      }\n    }\n  }\n\n  createBoutiqueInfoBox() {\n    if(this.selectedBoutique.address.postcode != null && this.selectedBoutique.address.address4 != null){\n      this.address = `${this.selectedBoutique.address.address1 ? this.selectedBoutique.address.address1 : ''} -\n      ${this.selectedBoutique.address.postcode ? this.selectedBoutique.address.postcode : ''}\n      ${this.selectedBoutique.address.address4 ? this.selectedBoutique.address.address4 : ''}`\n    }else{\n      this.address = `${this.selectedBoutique.address.address1 ? this.selectedBoutique.address.address1 : ''}`\n    }\n    this.boutiqueTemplate = `<div class = \"js-boutiqueInfo boutiqueInfo\" aria-live=\"polite\">\n    <p role=\"heading\" aria-level=\"3\" class=\"heading is-5\" tabindex=\"-1\"><span class=\"is-sr-only\" role=\"presentation\">${config.oab.boutiqueSelection.boutiqueInfoBox}</span>${this.selectedBoutique.name}</p>\n    <p>${this.address}</p>\n    </div>\n    <button type=\"button\" class=\"button-navigate-to-top map-button-navigate-to-top is-sr-only is-sr-only-focusable\">${config.oab.boutiqueSelection.backToActiveTabText}</button>`\n    let boutiqueMapBottom = select('#skip_storemap_bottom')\n    boutiqueMapBottom.parentElement.insertAdjacentHTML(\"afterend\", this.boutiqueTemplate)\n  }\n\n  focusInCallback(evt) {\n    evt.preventDefault()\n    const list = selectAll(this.SELECTORS.ITEMS_RADIO)\n    if (list) {\n      list.forEach(element => {\n        if (evt.type === 'click' && element.parentElement.parentElement === evt.delegateTarget) {\n          element.parentElement.parentElement.classList.toggle('is-focused', true)\n          element.parentElement.parentElement.classList.toggle('selected', true)\n          element.checked = true\n          this.selectedBoutique = this.data[element.value]\n          this.selectedBoutique.boutiqueIndex = parseInt(element.value)\n          return true\n        } else if (evt.type === 'focusin' && element === evt.delegateTarget) {\n          element.parentElement.parentElement.classList.toggle('is-focused', true)\n          element.parentElement.parentElement.classList.toggle('selected', true)\n          element.checked = true\n          this.selectedBoutiqueItem = select(`${this.SELECTORS.LIST} .selected`)\n          if (this.selectedBoutiqueItem) {\n            const scrollPos = this.selectedBoutiqueItem.offsetTop - this.selectedBoutiqueItem.offsetHeight\n            if(isMobileScreen()) {\n              this.selectedBoutiqueItem.scrollIntoView({\n                block: \"center\",\n                behavior: \"smooth\"\n              })\n            } else {\n              this.LIST.scrollTo({\n                  top: scrollPos,\n                  behavior: 'smooth'\n              })\n            }\n          }\n          this.selectedBoutiqueIndex++\n          return true\n        }\n\n        element.parentElement.parentElement.classList.toggle('is-focused', false)\n        element.parentElement.parentElement.classList.toggle('selected', false)\n        element.checked = false\n        return false\n      }, this)\n      this.loadSelectedBoutiqueMap()\n      return true\n    }\n    return false\n  }\n\n  focusOutCallback(evt) {\n    evt.delegateTarget.parentElement.parentElement.classList.toggle('is-focused', false)\n  }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n\n  submitCallback(evt) {\n    // push analytics to the master\n    this.master.analyticsHandler('oab-when-user-select-boutique', {\n      eventAction: this.master.oabDataObject.service.title,\n      sl_searchcity: '',\n      sl_searchcountry: '',\n      sl_searchrequest: '',\n      pos_city: this.selectedBoutique.address.address4,\n      pos_country: this.selectedBoutique.address.country,\n      pos_id: this.selectedBoutique.id\n    })\n    this.oabData.selectedBoutique = this.selectedBoutique\n    this.selectedBoutique.boutiqueIndex = parseInt(select('li.selected div > input', this.el).getAttribute('value'))\n    this.master.nextStep('date-selection')\n    window.sessionStorage.setItem('selectedSpanAriaLabel', '')\n  }\n\n}\n\nexport default OabBoutiqueSelection\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select, selectAll, getCollection, closest } from 'lib/selectors'\nimport { focusElement, isMobileScreen } from 'lib/helpers'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport pageTitle from 'modules/pageTitle'\n\nconst CAROUSEL_BUTTON = '.js-axis-carousel-btn'\nconst CAROUSEL_PREV_BTN = '.js-carousel-prev'\nconst CAROUSEL_NEXT_BTN = '.js-carousel-next'\nconst CAROUSEL_TITLE = '.js-carousel-title'\nconst LOCALIZED_AXIS_NAME = '.js-localised-axis-type'\nconst STEP_TITLE = '.js-carousel-title'\nconst COMPONENT_TITLE = '.js-carousel-component-title'\nconst COMPONENT_LEVEL = '.js-carousel-component-titleLevelGlobal'\nconst COMPONENT_SIZE = '.js-carousel-component-titleSizeGlobal'\nconst STEP_NAVIGATION = '.js-step-navigation'\nconst OAB_CONTAINER = '.js-oab-container'\n\nclass OabCarousel extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.selectedAxis = this.master.oabDataObject.selectedAxis\n    const oabContainer = closest(this.el, OAB_CONTAINER)\n    if (oabContainer && isMobileScreen()) oabContainer.classList.toggle('container', true)\n    this.events = []\n    this.init()\n    this.bindEvents()\n  }\n\n  init() {\n    pageTitle(window.config.oab.title, '', ' | ')\n    this.stepTitle = select(STEP_TITLE, this.el)\n    this.componentTitle = select(COMPONENT_TITLE, this.el).innerHTML\n    this.componentLevel = select(COMPONENT_LEVEL, this.el).innerHTML\n    this.componentSize = select(COMPONENT_SIZE, this.el).innerHTML\n    this.stepperNavigation = select(STEP_NAVIGATION)\n    this.stepperNavigation.setAttribute('hidden', '')\n     this.master.destroyLoader()\n    if (this.master.firstInit) {\n      this.stepTitle.innerHTML = ''\n      const title = this.master.createStepTitle(this.componentTitle, 'lblBookAnAppointment', this.componentLevel, this.componentSize.substring(1))\n      this.stepTitle.classList.add('element-centered')\n      this.stepTitle.appendChild(title)\n    }\n\n    this.axisButtons = getCollection(CAROUSEL_BUTTON, this.el)\n    this.swipeLeft = select('.js-carousel-prev')\n    this.swipeRight = select('.js-carousel-next')\n    this.carouselTitle = select(CAROUSEL_TITLE)\n    const carouselH1Element = select('.js-step-dynamic-title', this.carouselTitle)\n    if (carouselH1Element && this.master.oabDataObject.comingFromBack === true) focusElement(carouselH1Element)\n    let axisButtons = selectAll('.js-axis-carousel-btn')\n    let widths = axisButtons.map(button => button.offsetWidth)\n    let paddingValue = 20\n    let maxWidthButton = Math.max.apply(null, widths) + paddingValue\n    axisButtons.forEach((item) => {\n      item.style.width = `${maxWidthButton}px`\n    })\n  }\n\n  bindEvents() {\n    const analyticsData = {\n      eventCategory: 'book an appointment',\n      eventAction: 'home'\n    }\n    this.events.push(bind(this.el, CAROUSEL_PREV_BTN, 'click', () => {\n      this.analyticsHandler('when-user-swipe', analyticsData)\n    }))\n    this.events.push(bind(this.el, CAROUSEL_NEXT_BTN, 'click', () => {\n      this.analyticsHandler('when-user-swipe', analyticsData)\n    }))\n\n    this.events.push(bind(this.el, CAROUSEL_BUTTON, 'click', (evt) => {\n      this.selectAxis(evt.delegateTarget)\n    }))\n  }\n\n  selectAxis = (e) => {\n    this.master.showLoader(e, true)\n    const axisType = e.attributes['data-axis-type'].value.toLowerCase()\n    const oabProvider = select('.js-oab-provider')\n    const divisionType = e.attributes['data-division-type'].value.toLowerCase()\n    this.master.oabDataObject.selectedAxis = axisType\n    this.master.oabDataObject.selectedDivision = divisionType\n    const axisHeroBanner = select(`.js-axis-hero-banner-${axisType}`, this.el)\n    const axisHeroDescription = select(`.js-axis-hero-description-${axisType}`, this.el)\n    if (axisHeroBanner) this.master.oabDataObject.bannerData.image = axisHeroBanner.innerHTML\n    if (axisHeroDescription) this.master.oabDataObject.bannerData.description = axisHeroDescription.innerHTML\n    const analyticsData = {\n      eventCategory: 'book an appointment',\n      eventAction: axisType\n    }\n     this.master.destroyLoader()\n    this.analyticsHandler('when-user-click-on-axis-button', analyticsData)\n\tif(oabProvider.innerText === 'JRNI'){\n\tOAB_API_MANAGER.getCategoryList({ axisType, divisionType }, [    response => {\n        while (this.stepTitle.firstChild) {\n          this.stepTitle.removeChild(this.stepTitle.firstChild)\n        }\n        this.master.destroyLoader()\n        if (response.categoryList.length === 1) {\n          this.master.oabDataObject.companyId = response.companyId\n          this.master.oabDataObject.category = {\n            categoryId: response.categoryList[0].categoryId,\n            categoryName: response.categoryList[0].name\n          }\n          this.master.nextStep('service-list')\n        } else if (response.categoryList.length > 1) {\n          this.master.oabDataObject.categoryListObject = response\n          this.master.nextStep('category')\n        } else {\n          this.master.oabDataObject.companyId = response.companyId\n          this.master.nextStep('service-list')\n        }\n      },\n      response => {\n        this.master.destroyLoader()\n        this.master.displayErrorModalWindow()\n      }, null\n    ])\n  }else{\n        this.master.nextStep('service-list')\n     }\n    this.master.firstInit = true\n  }\n\n  analyticsHandler = (action, object) => {\n    window.document.DLKit.push(action, object)\n  }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n}\n\nexport default OabCarousel\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select, closest } from 'lib/selectors'\nimport pageTitle from 'modules/pageTitle'\nimport config from 'lib/config'\nimport { isMobileScreen } from 'lib/helpers'\n\nclass OabCategory extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n\t  this.SELECTORS = {\n      SECTION_TITLE: '.js-category-selection-title',\n      TEMPLATE: '.category-item.template',\n      LIST: '.oab-category-list ul',\n      OAB_CONTAINER: '.js-oab-container'\n    }\n    this.selectedAxis = this.master.oabDataObject.selectedAxis\n    this.divisionAxis = this.master.oabDataObject.selectedDivision\n    const oabContainer = closest(this.el, this.SELECTORS.OAB_CONTAINER)\n    if (oabContainer && isMobileScreen()) oabContainer.classList.toggle('container', false)\n    this.events = []\n    this.setupTitle()\n    if (!select('[data-default-list]')) {\n      this.clean()\n      this.loadData()\n    }\n    else {\n      this.bindEvents()\n      this.master.setHeaderHeight()\n    }\n    this.master.generateBanner(this.el)\n    if(this.stepName != this.stepsArray[0])\n        this.master.bnrButton()\n  }\n\n  clean = () => {\n    this.LIST = select(this.SELECTORS.LIST)\n    if (this.LIST) {\n      // clean existing list if coming after clicking on back button\n      while (this.LIST.firstChild) {\n        this.LIST.removeChild(this.LIST.firstChild)\n      }\n    }\n  }\n  \n  // gets called by the master to get back button analytics\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'category selection',\n      eventLabel: 'back',\n      eventAction: this.selectedAxis\n    }\n  }\n\n  loadData() {\n    const categoryResponse = this.master.oabDataObject.categoryListObject\n    this.initCallback(categoryResponse)\n  }\n\n  initCallback = (response) => {\n    if (response.errors && response.errors.error) {\n      this.master.displayErrorModalWindow()\n      return\n    }\n    this.bindData(response)\n    this.bindEvents()\n    this.master.setHeaderHeight()\n  }\n\n  bindData = (response) => {\n    this.master.oabDataObject.companyId = response.companyId\n\n    response.categoryList.forEach(element => {\n      const newItem = document.createElement('li')\n      newItem.classList.add('category-item')\n      newItem.classList.add('is-fullwidth')\n      newItem.innerHTML = this.getTemplate()\n\n      const spanCompanyName = select('span', newItem)\n      if (spanCompanyName) {\n        spanCompanyName.id = element.categoryId\n        spanCompanyName.innerHTML = element.name\n      }\n\n      this.LIST.appendChild(newItem)\n    })\n  }\n\n  bindEvents = () => {\n    const obj = bind(this.el, '.category-item button', 'click', this.nextStepCallback)\n    this.events.push(obj)\n    this.events.push(bind(this.el, '.js-back-btn', 'click', this.master.backButton))\n  }\n\n  setupTitle = () => {\n    this.SECTION_TITLE = select(this.SELECTORS.SECTION_TITLE)\n\n    pageTitle(this.selectedAxis, '', ' - ')\n\n    this.SECTION_TITLE.innerHTML = ''\n    let selectedAxis\n    selectedAxis = this.master.oabDataObject.selectedAxis.indexOf('watches-jewellery') !== -1 ? 'watches' : this.master.oabDataObject.selectedAxis\n    const title = this.master.createStepTitle(config.oab.axisType[selectedAxis], 'lblCategorySelection')\n    this.SECTION_TITLE.insertBefore(title, this.SECTION_TITLE.childNodes[0])\n    title.focus()\n  }\n\n  nextStepCallback = (event) => {\n    if(this.stepName != this.stepsArray[0])\n        this.master.setWhiteBanner()\n    if (event) {\n      const spanCompanyName = select('span', event.delegateTarget) || null\n      if (spanCompanyName) {\n        this.master.oabDataObject.category = {\n          categoryId: spanCompanyName.id,\n          categoryName: spanCompanyName.innerHTML\n        }\n        this.master.analyticsHandler('oab-when-user-select-category', {\n          eventAction: this.selectedAxis,\n          eventLabel: (spanCompanyName) ? spanCompanyName.innerHTML : '',\n        })\n      }\n    }\n    this.master.nextStep('service-list')\n  }\n\n  getTemplate = () => {\n    return `\n        <button type=\"button\" class=\"button\">\n            <span class=\"is-7\"></span>\n            <div class=\"goto-icon\">\n              <svg class=\"icon is-next\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n                <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"${config.paths.icons}icons.svg${config.targetVersion}#next\"></use>\n              </svg>\n            </div>\n        </button>`\n  }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n    delete this.master.oabDataObject.category\n  }\n\n}\n\nexport default OabCategory\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport config from 'lib/config'\nimport { select, getCollection } from 'lib/selectors'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport { focusElement } from 'lib/helpers'\nimport notifier from 'modules/notifier'\nimport pageTitle from 'modules/pageTitle'\n\nconst COLLECTION_CATEGORY_TITLE = '.js-collection-category-title'\nconst STEP_CONTAINER = '.js-collection-category-container'\nconst RESPONSE_SET = '.js-response-list'\n\nclass OabCollectionCategory extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.selectedAxis = this.master.oabDataObject.selectedAxis\n    this.events = []\n    this.init()\n    this.bindEvents()\n  }\n\n  init() {\n    this.companyId = this.master.oabDataObject.companyId\n    this.questionSetId = this.master.oabDataObject.service.questionSetId\n    this.selectedServiceDescription = this.master.oabDataObject.service.description\n    this.serviceTitle = this.master.oabDataObject.service.title\n    pageTitle(this.serviceTitle, '', ' - ')\n    this.selectedQuestion = {}\n    this.stepContainer = select(STEP_CONTAINER)\n    this.titelContainer = select(COLLECTION_CATEGORY_TITLE)\n    const titleElement = this.master.createStepTitle(this.serviceTitle, `lblTitle${this.serviceTitle.split(' ').map((s) => s.charAt(0).toUpperCase() + s.substring(1)).join('')}`, 'h1', '1')\n    this.selectedServiceTitle = this.master.oabDataObject.service.title\n    this.titelContainer.appendChild(titleElement)\n    this.questionListData = this.master.oabDataObject.questionListData\n    focusElement(this.titelContainer.children[0])\n  }\n\n  bindEvents() {\n    this.collectionCategoryCallback(this.questionListData)\n    this.events.push(bind(this.el, '.js-answer-button', 'click', this.nextStepCall))\n  }\n\n  collectionCategoryCallback(data) {\n    this.stepContainer.innerHTML = ''\n    this.questionList = data.questionList\n    if (this.questionList) {\n      this.questionList.forEach((question, index) => {\n        const questionClass = this.getQuestionClass(index, data.questionList.length)\n        this.stepContainer.innerHTML += this.getQuestionTemplate(question, questionClass)\n        const answersSet = getCollection(RESPONSE_SET, this.stepContainer)\n        question.answerList.forEach((answer, answerIndex) => {\n          const newResponse = document.createElement('li')\n          newResponse.innerHTML = this.getResponseTemplate(answer, index, answerIndex)\n          answersSet[index].appendChild(newResponse)\n        })\n      })\n      this.master.oabDataObject.questions = [this.getSelectedQuestion(data.questionList, 0, 0)]\n    }\n    else if (data.errors && data.errors.error) {\n      notifier.show({\n        name: window.config.locales.notifier.request.label,\n        message: data.errors.error || window.config.locales.notifier.request.message,\n        close: window.config.locales.notifier.request.close,\n      })\n    }\n  }\n\n  nextStepCall = (e) => {\n    const questionIndex = e.delegateTarget.getAttribute('data-question')\n    const answerIndex = e.delegateTarget.getAttribute('data-answer')\n    const questionData = this.getSelectedQuestion(this.questionList, questionIndex, answerIndex)\n    this.master.oabDataObject.questions = [questionData]\n    this.master.analyticsHandler('when-user-click-on-collection-category', {\n      eventAction: this.selectedServiceTitle,\n      eventLabel: questionData.answer\n    })\n    this.selectedServiceDescription ? this.master.nextStep('description') : this.master.nextStep('boutique-selection')\n  }\n\n  getQuestionClass(index, length) {\n    if (length > 1) {\n      if ((index % 2) === 0) {\n        return 'left-set'\n      }\n      return 'right-set'\n    }\n    return 'central-set'\n  }\n\n  getResponseTemplate = (answer, questionIndex, answerIndex) => `<button type=\"button\" class=\"button js-answer-button\" data-question=\"${questionIndex}\" data-answer=\"${answerIndex}\">\n                                        <span>${answer.answerName}</span>\n                                        <div class=\"goto-icon\">\n                                          <svg class=\"icon is-next\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n                                            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"${config.paths.icons}icons.svg${config.targetVersion}#next\"></use>\n                                          </svg>\n                                        </div>\n                                      </button>`\n\n  getQuestionTemplate = (question, questionClass) => `\n    <div class=\"question ${questionClass}\">\n        <h2 data-test='lbl${question.questionName}'>${question.questionName}</h2>\n        <ul class=\"js-response-list\">\n        \n        </ul>\n    </div>\n  `\n\n  getSelectedQuestion = (data, questionIndex, responseIndex) => ({\n    id: data[questionIndex].questionId,\n    answer: data[questionIndex].answerList[responseIndex].answerName\n  })\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'collection and category list',\n      eventLabel: 'back',\n      eventAction: this.selectedServiceTitle\n    }\n  }\n\n}\n\nexport default OabCollectionCategory\n","import Base from 'modules/base'\nimport { getCollection, select, selectAll, closest } from 'lib/selectors'\nimport bind from 'delegate'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport { focusElement, isMobileScreen, isInViewPort } from 'lib/helpers'\nimport pageTitle from 'modules/pageTitle'\nimport flatpickr from \"flatpickr\"\n\n// selectors\nconst LABEL_INPUT = '.js-label-input'\nconst INPUT_FIELD = '.js-select-date-input'\nconst SUBMIT_BTN = '.js-date-select-submit'\nconst EDIT_BTN = '.js-calendar-button'\nconst SELECT_DATE_FORM = '.js-select-date-form'\nconst DATE_CONTAINER = '.js-date-container'\nconst LIST_TITLE = '.js-slot-title'\nconst CONFIRM_SELECTION_BUTTON = '.js-confirm-selection'\nconst CONFIRM_SELECTION_PARA = '.js-date-cta-container'\nconst DATE_SELECTION_TITLE = '.js-date-selection-title'\nconst DATE_SELECTION_RADIO = '.oab-date-item [type=\"radio\"]'\nconst CALENDAR_YEAR_INPUT = '.flatpickr-current-month > div input'\nconst COUNTRY_SELECTED = config.currentLanguage.split('_')[0]\nconst CALENDAR_DATE_LABEL = '.oab-visible-submit > div label'\nconst oabProvider = select('.js-oab-provider')\nclass OabDateSelection extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.companyId = this.master.oabDataObject.companyId\n    this.serviceId = this.master.oabDataObject.service.serviceId\n    this.selectedServiceTitle = this.master.oabDataObject.service.title\n    this.minAdvancePeriod = this.master.oabDataObject.service.minAdvancePeriod\n    this.maxAdvancePeriod = this.master.oabDataObject.service.maxAdvancePeriod\n    this.selectedBoutique = this.master.oabDataObject.selectedBoutique\n    this.events = []\n    this.selectedAxis = this.master.oabDataObject.selectedAxis\n    this.selectedDateObject = this.master.oabDataObject.selectedDateSlot\n    this.isAtDateLinePosition = 0\n\n    this.init()\n    if(config.currentLanguage.split('_')[0] === 'vi') {\n       import(`flatpickr/dist/l10n/${config.currentLanguage.toLowerCase().split('_')[1]}.js`)\n        .then(() => {\n          flatpickr.localize(flatpickr.l10ns[config.currentLanguage.toLowerCase().split('_')[1]])\n          this.bindEvents()\n          console.log(`${config.currentLanguage.split('_')[0]} calendar translations loaded`)\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    }\n\telse if(config.currentLanguage.split('_')[0] !== 'en'){\n\t\t import(`flatpickr/dist/l10n/${config.currentLanguage.split('_')[0]}.js`)\n\n\t\t   .then(() => {\n          flatpickr.localize(flatpickr.l10ns[COUNTRY_SELECTED])\n          this.bindEvents()\n          console.log(`${config.currentLanguage.split('_')[0]} calendar translations loaded`)\n        })\n        .catch(err => {\n          console.log(err)\n        })\n\t}\n\telse {\n      this.bindEvents()\n    }\n    const oabContainer = closest(this.el, '.js-oab-container')\n    if (oabContainer && isMobileScreen()) oabContainer.classList.toggle('container', true)\n  }\n\n  init() {\n    this.availableSlots = this.master.oabDataObject.availableSlots || null\n    this.labelInput = select(LABEL_INPUT, this.el)\n    this.inputField = select(INPUT_FIELD, this.el)\n    this.submitButton = select(SUBMIT_BTN, this.el)\n    this.editButton = select(EDIT_BTN, this.el)\n    this.calendarDateLabel = select(CALENDAR_DATE_LABEL, this.el)\n    this.selectDateForm = select(SELECT_DATE_FORM, this.el)\n    this.dateContainer = select(DATE_CONTAINER, this.el)\n    this.listTitleContainer = select(LIST_TITLE, this.el)\n    this.titleContainer = select(DATE_SELECTION_TITLE)\n    this.selectConfirmationButton = select(CONFIRM_SELECTION_BUTTON, this.el)\n    this.selectConfirmationPara = select(CONFIRM_SELECTION_PARA, this.el)\n    this.stepTitle = window.config.oab.dateSelection.title\n    const titleElement = this.master.createStepTitle(this.stepTitle, 'lblDateSelection', 'h1', '2')\n    this.titleContainer.insertBefore(titleElement, this.titleContainer.firstChild)\n    this.calendarContainer = select('.calendar-container')\n    if (this.selectConfirmationButton) this.selectConfirmationButton.setAttribute('hidden', '')\n    if (this.dateContainer) {\n      this.dateContainer.innerHTML = ''\n    }\n\n    pageTitle(this.stepTitle, '', ' - ')\n    this.cleanErrors(this.selectDateForm)\n    this.master.showLoader(this.el, false, 0, () => {\n      const loader = select('.loader', this.el)\n      loader.style.width = '100%'\n      const stepTitle = select('.js-step-dynamic-title', this.titleContainer)\n      if (stepTitle) focusElement(this.titleContainer.firstChild, { notChangeTabIndex: true })\n      this.inputField.removeAttribute('tabindex')\n    })\n    this.master.setHeaderHeight()\n  }\n\n  bindEvents() {\n    this.CalendarInstance = flatpickr('.oab-visible-submit', {\n      dateFormat: config.country === 'JP' ? 'Y/m/d' : 'd/m/Y',\n      minDate: 'today',\n      clickOpens: false,\n      allowInput: true,\n      disableMobile: true,\n      appendTo: this.calendarContainer,\n      wrap: true,\n      locale: {\n        firstDayOfWeek: 1\n      },\n      disable: [\n        function(date) {\n          return (true)\n        }\n      ],\n      onOpen: () => {\n        if (this.calendarContainer) {\n          this.calendarContainer.removeAttribute('hidden')\n          this.submitButton.removeAttribute('hidden')\n          this.editButton.setAttribute('hidden', '')\n          this.inputField.removeAttribute('style')\n          this.inputField.focus()\n          if(isMobileScreen() && config.country !== 'JP' && this.isAtDateLinePosition == 0) {\n            this.inputField.setSelectionRange(2,2)\n            this.isAtDateLinePosition++\n          }\n        }\n      },\n      onClose: () => {\n        if (this.calendarContainer) {\n          this.calendarContainer.setAttribute('hidden', '')\n          this.submitButton.setAttribute('hidden', '')\n          this.editButton.removeAttribute('hidden')\n          if(isMobileScreen() && document.activeElement != this.inputField) this.isAtDateLinePosition = 0\n        }\n      },\n      onReady: () => {\n        select(CALENDAR_YEAR_INPUT).maxLength = 4\n        if (this.master.oabDataObject.service != null && this.master.oabDataObject.service.extra.mode.toLowerCase() === 'video') {\n          this.getBoutiqueDataVirtualService()\n        }\n        else {\n          this.callDateAPI()\n        }\n      },\n      onChange: () => {\n        if (!this.master.loaderExist) {\n          this.master.showLoader(this.el, false, 0, () => {\n            const loader = select('.loader', this.el)\n            loader.style.width = '100%'\n          })\n        }\n      },\n      onMonthChange: () => {\n        this.addBackground()\n      }\n    })\n\n    // Override the keydown eventlistener of the library that empty the field\n    // on key \"enter\"\n    const elClone = this.inputField.cloneNode(true)\n    this.inputField.parentNode.replaceChild(elClone, this.inputField)\n    this.inputField = select(INPUT_FIELD, this.el)\n    this.calendarYearInputField = select(CALENDAR_YEAR_INPUT, this.el)\n\n    this.events.push(bind(this.el, CONFIRM_SELECTION_BUTTON, 'click', () => this.selectDateSlot()))\n    this.events.push(bind(this.el, INPUT_FIELD, 'input', (event) => this.onInput(this.inputField, event)))\n    this.events.push(bind(this.el, INPUT_FIELD, 'keydown', (event) => this.onKeydown(event)))\n    this.events.push(bind(this.el, CALENDAR_YEAR_INPUT, 'input', () => this.onCalenderYearInput(this.calendarYearInputField)))\n    this.events.push(bind(this.el, INPUT_FIELD, 'click', (event) => {\n      if(isMobileScreen() && config.country !== 'JP' && this.isAtDateLinePosition == 0) {\n        this.inputField.setSelectionRange(2,2)\n        this.isAtDateLinePosition++\n      }\n      this.submitButton.removeAttribute('hidden')\n      this.editButton.setAttribute('hidden', '')\n      this.inputField.removeAttribute('style')\n    }))\n\n    this.events.push(bind(this.el, INPUT_FIELD, 'focusout', (event) => {\n\n      if (this.inputField.value.length === 0) {\n        this.labelInput.classList.remove('has-content')\n      }\n      if(isMobileScreen()) this.isAtDateLinePosition = 0\n      this.CalendarInstance.close()\n    }))\n\n    this.events.push(bind(this.el, SUBMIT_BTN, 'mousedown', (e) => {\n      this.submitButton.click()\n    }))\n\n    this.events.push(bind(this.el, SUBMIT_BTN, 'click', (e) => {\n      const currentLoader = select('.loader__content')\n      if (currentLoader === null) {\n        this.master.showLoader(this.el, false, 0, () => {\n          const loader = select('.loader', this.el)\n          loader.style.width = '100%'\n        })\n      }\n      this.getAvailableDates(e)\n      this.inputField.setAttribute('style', 'caret-color: transparent;')\n      this.inputField.removeAttribute('tabindex')\n    }))\n\n    // Workaround on Safari not triggering focusin on label clicks\n    this.events.push(bind(this.el, '.oab-date-item', 'click', (evt) => {\n      const input = select('input', evt.delegateTarget)\n      if (input) input.focus()\n      }\n    ))\n    this.events.push(bind(this.el, DATE_SELECTION_RADIO, 'focusin', (evt) => this.focusAndSelectToggle(evt)))\n    this.events.push(bind(this.el, DATE_SELECTION_RADIO, 'focusout', (evt) => this.focusOutCallback(evt)))\n  }\n\n  getBoutiqueDataVirtualService() {\n    let that = this\n    let url = that.master.oabDataObject.service.associatedEvents ? OAB_API_MANAGER.getAvailableBoutiquesByEvent : OAB_API_MANAGER.getAvailableBoutiquesByService\n    let initializationRequestParam\n    if(this.master.oabDataObject.service.associatedEvents) {\n      initializationRequestParam = {\n        companyId: this.companyId,\n        eventName: this.master.oabDataObject.service.title,\n        eventGroupName:  this.master.oabDataObject.service.eventGroupName\n      }\n    } else {\n        initializationRequestParam = {\n          companyId: this.companyId,\n          serviceId: this.master.oabDataObject.service.serviceId\n        }\n      }\n    url(initializationRequestParam, [response => this.initBoutiqueListCallback(response)])\n  }\n\n  initBoutiqueListCallback(response) {\n    if (response.errors && response.errors.error) {\n      this.master.displayErrorModalWindow()\n      return\n    }\n    this.bindBoutiqueListData(response)\n  }\n  bindBoutiqueListData(data){\n    this.master.oabDataObject.boutiques = data.boutiques\n    this.callDateAPI()\n  }\n\n  callDateAPI() {\n    if (this.master.oabDataObject.service.extra.mode != null && this.master.oabDataObject.service.extra.mode.toLowerCase() === 'video') {\n      const serviceListIDArr = this.master.oabDataObject.boutiques.filter(item => item.id !== null)\n      .map(item => item.id)\n      const selectedBoutiqueId = serviceListIDArr[Math.floor(Math.random() * serviceListIDArr.length)]\n      const selectedBoutique = this.master.oabDataObject.boutiques.filter(item => item.id === selectedBoutiqueId)\n      this.master.oabDataObject.selectedBoutique = selectedBoutique[0]\n      this.selectedBoutique = selectedBoutique[0]\n    }\n    let initializationRequestParam\n    if(this.master.oabDataObject.service.associatedEvents) {\n      initializationRequestParam = {\n        serviceId: this.selectedBoutique.eventId,\n        boutiqueId: this.selectedBoutique.id,\n        startDate: this.selectedBoutique.startDate,\n        endDate: this.selectedBoutique.endDate,\n        eventGroupId: this.selectedBoutique.eventGroupId\n      }\n    } else {\n     if(oabProvider.innerText === \"SALESFORCE\"){\n      initializationRequestParam = {\n\t\t serviceType: this.master.oabDataObject.service.salesforceId,\n\t\t sfBoutiqueId: this.selectedBoutique.sfBoutiqueId\n\t\t}\n     } else {\n      initializationRequestParam = {\n        serviceId: this.serviceId,\n        boutiqueId: this.selectedBoutique.id,\n        minAdvance: this.minAdvancePeriod,\n        maxAdvance: this.maxAdvancePeriod\n      }\n     }\n  }\n\n if(this.master.oabDataObject.service.associatedEvents) {\n   OAB_API_MANAGER.getEventDateAndTime(initializationRequestParam, [\n      response => {\n        this.handleDateTimeResponse(response)\n      },\n      response => this.master.displayErrorModalWindow()\n    ])\n  } else {\n      OAB_API_MANAGER.getDateAndTime(initializationRequestParam, [\n        response => {\n          this.handleDateTimeResponse(response)\n        },\n        response => this.master.displayErrorModalWindow()\n      ])\n    }\n  }\n\n  handleDateTimeResponse(response) {\n    if (response.errors && response.errors.error && config.region !== 'apac') {\n      this.master.displayErrorModalWindow()\n      return\n    }\n    else if (response.availableDateTimeList && response.availableDateTimeList.length > 0) {\n      this.CalendarInstance.set('minDate', new Date(response.availableDateTimeList[0].time))\n      this.CalendarInstance.set('enable', response.availableDates.map((item)=> new Date(item)))\n      this.CalendarInstance.set('onValueUpdate', (selectedDates, dateStr, instance) => {\n        if (instance.isOpen) {\n          this.inputField.value = dateStr\n          this.getAvailableDates()\n        }\n      })\n    }\n    this.dateSelectionCallback(response, null)\n    if (this.selectedDateObject && this.master.oabDataObject.comingFromBack) {\n      const availableDate = new Date(this.selectedDateObject.date.time.substring(0, this.selectedDateObject.date.time.length - 6))\n      this.inputField.value = OabDateSelection.getInputValueDate(availableDate)\n      this.submitButton.click()\n    }\n  }\n\n  getAvailableDates(e) {\n    if (e) e.preventDefault()\n    this.dateContainer.innerHTML = ''\n    this.listTitleContainer.setAttribute('hidden', '')\n    const inputValue = this.inputField.value.split('/').map((v) => parseInt(v.replace(/\\D/g, '')))\n    const isDateValid = config.country === 'JP' ? this.isValidDate(inputValue[0], (inputValue[1] - 1), inputValue[2]) : this.isValidDate(inputValue[2], (inputValue[1] - 1), inputValue[0])\n    if (isDateValid === true && (config.country !== 'JP' && this.inputField.value.match(/^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/) || (config.country === 'JP' && this.inputField.value.match(/^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/)))) {\n      this.cleanErrors(this.selectDateForm)\n      let dateSelectedRequestParam\n      if (this.master.oabDataObject.service.associatedEvents) {\n        dateSelectedRequestParam = {\n          selectedDate: this.inputField.value.split('/').reverse().join('/'),\n          serviceId: this.selectedBoutique.eventId,\n          boutiqueId: this.selectedBoutique.id,\n          startDate: this.selectedBoutique.startDate,\n          endDate: this.selectedBoutique.endDate,\n          eventGroupId: this.selectedBoutique.eventGroupId\n        }\n      } else {\n        if(oabProvider.innerText === \"SALESFORCE\"){\n         dateSelectedRequestParam = {\n          selectedDate: this.inputField.value.split('/').reverse().join('/'),\n          serviceType: this.master.oabDataObject.service.salesforceId,\n          sfBoutiqueId: this.selectedBoutique.sfBoutiqueId\n        }\n        } else {\n        dateSelectedRequestParam = {\n          selectedDate: this.inputField.value.split('/').reverse().join('/'),\n          serviceId: this.serviceId,\n          boutiqueId: this.selectedBoutique.id,\n          minAdvance: this.minAdvancePeriod,\n          maxAdvance: this.maxAdvancePeriod\n        }\n      }\n      }\n      if (this.master.oabDataObject.service.associatedEvents) {\n        OAB_API_MANAGER.getEventDateAndTime(dateSelectedRequestParam, [response => this.dateSelectionCallback(response, dateSelectedRequestParam.selectedDate), response => this.master.displayShowErrorMessage(response)])\n      } else {\n        OAB_API_MANAGER.getDateAndTime(dateSelectedRequestParam, [response => this.dateSelectionCallback(response, dateSelectedRequestParam.selectedDate), response => this.master.displayShowErrorMessage(response)])\n      }\n    } else {\n      this.cleanErrors(this.selectDateForm)\n      if ((config.country !== 'JP' && !this.inputField.value.match(/^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/)) || (config.country === 'JP' && !this.inputField.value.match(/^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/))) {\n        this.createErrorMessage(this.labelInput.parentNode, window.config.oab.dateSelection.errors.invalidDate)\n      } else if (isDateValid !== true && this.availableSlots !== null) {\n        this.createErrorMessage(this.labelInput.parentNode, window.config.oab.dateSelection.errors.unavailableDate)\n      } else if (oabProvider.innerText === 'SALESFORCE' && isDateValid === 'past' && this.availableSlots === null) {\n        this.createErrorMessage(this.labelInput.parentNode, window.config.oab.dateSelection.errors.unavailableServiceDate)\n      }\n      this.submitButton.setAttribute('hidden', '')\n      this.editButton.removeAttribute('hidden')\n      if (this.calendarContainer) this.calendarContainer.setAttribute('hidden', '')\n      if (this.master.loaderExist) this.master.destroyLoader()\n    }\n  }\n\n  addBackground() {\n    let isDateSelected = select('span.flatpickr-day.selected')\n    let firstAvailableDate = select('span.flatpickr-day:not(.disabled)')\n    isDateSelected ? window.sessionStorage.setItem('selectedSpanAriaLabel', isDateSelected.ariaLabel) :  ''\n    let allDates = selectAll('span.flatpickr-day')\n    allDates.forEach((date) => {\n      if(date.ariaLabel === window.sessionStorage.getItem('selectedSpanAriaLabel')) {\n        date.classList.add('selected')\n        isDateSelected = date\n      }\n    })\n    if(isDateSelected == null && window.sessionStorage.getItem('selectedSpanAriaLabel') === '' &&  firstAvailableDate !== null) {\n      firstAvailableDate.classList.add('selected')\n      window.sessionStorage.setItem('selectedSpanAriaLabel', firstAvailableDate.ariaLabel)\n    }\n  }\n\n  dateSelectionCallback(response, selectedDate) {\n    if (response.errors && response.errors.error && config.region !== 'apac') {\n      this.master.displayErrorModalWindow()\n      return\n    }\n    this.dateContainer.innerHTML = ''\n    this.cleanErrors(this.selectDateForm)\n    if (response.availableDateTimeList && response.availableDateTimeList.length == 0) {\n      this.listTitleContainer.setAttribute('hidden', '')\n    }\n    if (response.availableDateTimeList && response.availableDateTimeList.length > 0) {\n      this.availableSlots = this.master.oabDataObject.availableSlots = response.availableDateTimeList\n      response.availableDateTimeList.forEach((date, index) => {\n        var dateArray = date.time.split(/[^0-9]/)\n        const availableDate = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], dateArray[3], dateArray[4], dateArray[5])\n        const availableDateDuration = new Date (availableDate.getTime() + this.master.oabDataObject.service.duration.duration*60000)\n\n        // date slot template\n        const timeTemplate = `<li data-time-id=\"${date.timeId}\" data-person=\"${date.adviserId}\" data-test=\"btnTimeSlot\" class=\"oab-date-item ${(isMobileScreen()) ? 'label-item' : `label-item-${OabDateSelection.isPair(index)}`}\">\n                              <input name=\"date_radio_input\" id=\"date_radio_${index}\" value=\"${availableDate}\" type=\"radio\" aria-required=\"true\" class=\"is-sr-only\" ${index === 0 ? 'checked' : ''}>\n\n                              <label class=\"date-radio-label ${(isMobileScreen()) ? '' : `label-item-${OabDateSelection.isPair(index)}`}\" for=\"date_radio_${index}\">\n                              <span>` + window.config.oab.dateSelection.timeSlotFromText + ' ' + `${availableDate.toLocaleTimeString([window.config.currentLanguage.replace('_', '-')], {hourCycle: 'h23', hour: '2-digit', minute: '2-digit'})}` + ' ' + window.config.oab.dateSelection.timeSlotToText + ' ' + `${availableDateDuration.toLocaleTimeString([window.config.currentLanguage.replace('_', '-')], { hourCycle: 'h23', hour: '2-digit', minute: '2-digit'})}</span></label>\n\n\n\t\t\t\t\t\t\t                </li>`\n        this.dateContainer.innerHTML += timeTemplate\n        this.labelInput.classList.add('has-content')\n        this.inputField.value = OabDateSelection.getInputValueDate(availableDate)\n        this.toggleClearSubmit()\n      })\n\n      this.slotList = getCollection(DATE_SELECTION_RADIO, this.dateContainer)\n      const firstRadio = select('input', this.dateContainer.firstChild)\n      if (!this.master.oabDataObject.comingFromBack && selectedDate !== null) firstRadio.focus()\n      if (this.master.oabDataObject.selectedDateSlot && this.master.oabDataObject.comingFromBack) {\n        const selectedSlotIndex = this.master.oabDataObject.selectedDateSlot.slotIndex\n        const selectedSlot = this.slotList[selectedSlotIndex]\n        this.slotList.forEach((element) => {\n          if (element === selectedSlot  && this.master.oabDataObject.availableSlots[selectedSlotIndex] && this.master.oabDataObject.availableSlots[selectedSlotIndex].time === this.master.oabDataObject.selectedDateSlot.date.time) {\n            element.parentElement.classList.toggle('is-focused', true)\n            element.checked = true\n            this.selectedDateSlot = {\n              slotIndex: this.slotList.indexOf(element),\n              date: this.availableSlots[this.slotList.indexOf(element)]\n            }\n          }\n        })\n\n        setTimeout(() => {\n        this.selectedSlotItem = select(`${DATE_CONTAINER} .is-focused`)\n        if(this.selectedSlotItem) {\n            const sellectedInput = select('input', this.selectedSlotItem)\n            if (sellectedInput) sellectedInput.focus()\n          }\n        }, 1000);\n      }\n      this.selectConfirmationButton.removeAttribute('hidden')\n      this.addBackground()\n    } else if (response.availableDateTimeList && response.availableDateTimeList.length === 0 && !selectedDate) {\n      this.createErrorMessage(this.labelInput.parentNode, window.config.oab.dateSelection.errors.unavailableServiceDate)\n    } else if(config.region !== 'apac' || response.availableDateTimeList != null){\n      this.createErrorMessage(this.labelInput.parentNode, window.config.oab.dateSelection.errors.unavailableDate)\n    }else {\n      this.createErrorMessage(this.labelInput.parentNode, window.config.oab.dateSelection.errors.unavailableServiceDate)\n    }\n    this.master.destroyLoader(() => {\n      TweenLite.set(this.el, {\n        delay: 0.3,\n        onComplete: () => {\n          if (response.availableDateTimeList && response.availableDateTimeList.length > 0) {\n            this.dateContainer.removeAttribute('hidden')\n            this.listTitleContainer.removeAttribute('hidden', '')\n          }\n        }\n      })\n    })\n  }\n\n  static isPair(index) {\n    if ((index % 3) === 0) {\n      return 'pair'\n    }\n    return 'middle'\n  }\n\n  static getInputValueDate(dateString) {\n    const newDate = new Date(dateString)\n    const month = (`0${(newDate.getMonth() + 1)}`).slice(-2)\n    const day = (`0${newDate.getDate()}`).slice(-2)\n    const year = newDate.getFullYear()\n    const date = (config.country === 'JP') ? `${year}/${month}/${day}` : `${day}/${month}/${year}`\n    return config.country === 'JP' ? `${year}/${month}/${day}` : `${day}/${month}/${year}`\n  }\n\n  toggleClearSubmit() {\n    const isFilled = this.inputField.value.length > 0 ? 1 : 0\n    if (isFilled > 0) {\n      this.submitButton.removeAttribute('disabled')\n      this.submitButton.setAttribute('aria-disabled', false)\n      this.calendarDateLabel.classList.remove('no-pointer')\n    } else {\n      this.submitButton.setAttribute('disabled', 'disabled')\n      this.submitButton.setAttribute('aria-disabled', true)\n      this.calendarDateLabel.classList.add('no-pointer')\n    }\n  }\n\n  clearText() {\n    this.labelInput.classList.remove('has-content')\n    this.inputField.value = ''\n    this.dateContainer.innerHTML = ''\n    this.selectConfirmationButton.setAttribute('hidden', '')\n    this.inputField.focus()\n    this.cleanErrors(this.selectDateForm)\n  }\n\n  onCalenderYearInput(e) {\n    const inputYear = e.value.replace(/[^0-9]/g, '');\n    e.value = inputYear\n  }\n\n  onInput(dateInputSelector, event) {\n    const isInputCharacter = event.inputType === 'deleteContentForward' || event.inputType === 'deleteContentBackward'\n    if (config.country !== 'JP' && !isInputCharacter && (dateInputSelector.value.match(/^\\d{2}$/) || dateInputSelector.value.match(/^\\d{2}\\/\\d{2}$/))) {\n      dateInputSelector.value += '/'\n    } else if (config.country === 'JP' && !isInputCharacter && (dateInputSelector.value.match(/^\\d{4}$/) || dateInputSelector.value.match(/^\\d{4}\\/\\d{2}$/))){\n      dateInputSelector.value += '/'\n    }\n    const startPos = dateInputSelector.selectionStart\n    let cursorPosition = startPos\n    dateInputSelector.classList.toggle('is-filled', dateInputSelector.value.length > 0)\n    const regex = /^[0-9/]/\n    const values = dateInputSelector.value.split().map((v) => {\n      if (!regex.test(dateInputSelector.value[startPos - 1])) {\n        cursorPosition = startPos - 1\n        this.toggleClearSubmit()\n      } else {\n        this.listTitleContainer.setAttribute('hidden', '')\n        this.dateContainer.innerHTML = ''\n        this.selectConfirmationButton.setAttribute('hidden', '')\n        this.labelInput.classList.add('has-content')\n        this.toggleClearSubmit()\n      }\n      return v.replace(/[^0-9\\/]/g, '')\n    })\n    dateInputSelector.value = values.join('')\n    this.inputField.focus()\n    if (cursorPosition === -1) cursorPosition++\n    dateInputSelector.setSelectionRange(cursorPosition, cursorPosition)\n  }\n\n  onKeydown(event) {\n    if (this.CalendarInstance.isOpen && (event.keyCode == 37 || event.keyCode == 38 || event.keyCode == 39 || event.keyCode == 40 || event.keyCode == 13)) {\n      event.stopPropagation()\n    }\n\n\n\n\n\n    let backCTA =  select('.js-step-navigation')\n    let header = select('.js-header')\n    let dateField = select('.js-date-container')\n    if(backCTA && header && dateField) {\n    let positionAt = backCTA.offsetHeight + header.offsetHeight;\n      if (!isInViewPort(this.inputField, -positionAt) && isMobileScreen() && (this.inputField === document.activeElement)) {\n        let datePosition = dateField.offsetTop\n        window.scrollTo(0, datePosition)\n      }\n    }\n\n  }\n\n  isValidDate(year, month, day) {\n    const date = new Date(year, month, day)\n    // Handle format error\n    if (isNaN(date)) return null\n\n    const currentDate = new Date()\n    if (date.getFullYear() === year && date.getMonth() === month && date.getDate() === day && date.setHours(0, 0, 0, 0)) {\n      if (date.setHours(0, 0, 0, 0) < currentDate.setHours(0, 0, 0, 0)) {\n        return 'past'\n      } else {\n        return true\n      }\n    } else {\n      return false\n    }\n  }\n\n  createErrorMessage(domElement, message) {\n    this.cleanErrors(this.selectDateForm)\n    this.dateContainer.setAttribute('hidden', '')\n    this.selectConfirmationButton.setAttribute('hidden', '')\n    this.selectConfirmationPara.setAttribute('hidden', '')\n    const elem = document.createElement('p')\n    const errorMsg = document.createTextNode(message)\n    domElement.classList.add('has-error')\n    elem.classList.add('error')\n    elem.setAttribute('id', 'error-date')\n    elem.dataset.errorMessage = 'true'\n    elem.appendChild(errorMsg)\n    elem.setAttribute('data-test', 'data-test=\"lblDateErrormsg\"')\n    const parent = domElement.parentNode\n    parent.appendChild(elem)\n    this.inputField.setAttribute('aria-describedby', 'error-date')\n    this.inputField.setAttribute('aria-invalid', true)\n    this.inputField.removeAttribute('tabindex')\n    focusElement(this.inputField)\n    return elem\n  }\n\n  cleanErrors(element) {\n    this.dateContainer.removeAttribute('hidden')\n    const hasErrorClasses = getCollection('.has-error', element)\n    const errorMessages = getCollection('.error', element)\n    for (let i = 0; i < hasErrorClasses.length; i++) {\n      hasErrorClasses[i].classList.remove('has-error')\n    }\n    for (let i = 0; i < errorMessages.length; i++) {\n      errorMessages[i].parentNode.removeChild(errorMessages[i])\n    }\n    this.inputField.removeAttribute('aria-describedby')\n    this.inputField.removeAttribute('aria-invalid')\n    this.selectConfirmationPara.removeAttribute('hidden')\n  }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n\n  focusAndSelectToggle(evt) {\n    const list = getCollection(DATE_SELECTION_RADIO)\n    if (list) {\n      list.forEach(element => {\n        if (element === evt.delegateTarget) {\n          element.parentElement.classList.toggle('is-focused', true)\n          element.checked = true\n          this.selectedDateSlot = {\n            slotIndex: list.indexOf(evt.delegateTarget),\n            date: this.availableSlots[list.indexOf(evt.delegateTarget)]\n          }\n          return true\n        } else {\n          element.parentElement.classList.toggle('is-focused', false)\n          element.checked = false\n          return false\n        }\n      })\n      return true\n    }\n    return false\n  }\n\n  focusOutCallback(evt) {\n    evt.delegateTarget.parentElement.classList.toggle('is-focused', false)\n  }\n\n  selectDateSlot() {\n    if (this.selectedDateSlot) {\n      this.master.oabDataObject.selectedDateSlot = this.selectedDateSlot\n    } else {\n      this.master.oabDataObject.selectedDateSlot = {\n        slotIndex: 0,\n        date: this.availableSlots[0]\n      }\n    }\n    this.master.analyticsHandler('when-user-click-on-select-slot', {\n      eventAction: this.selectedServiceTitle,\n      eventLabel: 'select this slot',\n    })\n    this.master.nextStep('redirection-step')\n  }\n\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'date selection',\n      eventLabel: 'back',\n      eventAction: this.selectedServiceTitle\n    }\n  }\n}\n\nexport default OabDateSelection\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select, getCollection } from 'lib/selectors'\nimport { focusElement, getCurrentMarket } from 'lib/helpers'\nimport pageTitle from 'modules/pageTitle'\n\n\nconst DESCRIPTION_TITLE = '.js-description-title'\nconst DESCRIPTION_BODY = '.js-description-body'\nconst SERVICE_SELECT_BUTTON = '.js-service-select'\n\n\nclass OabDescription extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.selectedAxis = this.master.oabDataObject.selectedAxis\n    this.events = []\n    this.init()\n    this.fillDescriptionPage()\n    this.bindEvents()\n  }\n\n  init() {\n    this.descriptionTitle = select(DESCRIPTION_TITLE)\n    this.descriptionBody = select(DESCRIPTION_BODY)\n    this.serviceSelectionCTA = select(SERVICE_SELECT_BUTTON)\n    this.master.setHeaderHeight()\n  }\n\n  fillDescriptionPage() {\n    this.selectedService = this.master.oabDataObject.service\n    const title = this.selectedService.title\n    let duration\n    pageTitle(title, '', ' - ')\n    this.descriptionTitle.innerHTML = ''\n    const priceDurationElement = document.createElement('span')\n    priceDurationElement.classList.add('description-price', 'js-description-price', 'is-light')\n    priceDurationElement.setAttribute('data-test', 'lblServicePriceAndDuration')\n\n    const priceElement = document.createElement('span')\n\n    const price = this.selectedService.price && this.selectedService.price.formattedValue && this.selectedService.price.value > 0 ?\n      `- ${this.selectedService.price.formattedValue}` : ''\n\n      duration = this.selectedService.duration ?\n      `${this.selectedService.duration.duration}${['JP', 'TW', 'HK'].includes(window.config.country) ? '' : ' '}${window.config.oab.oabDurationUnit}` : ''\n\n    priceElement.innerHTML = `&nbsp;${duration} ${price}`\n    let currentMarket = getCurrentMarket()\n    if(currentMarket === 'AE') {\n      const marketElement = document.createElement('span')\n      marketElement.classList.add('hidden-value')\n      marketElement.innerHTML = `${currentMarket}`\n      priceDurationElement.appendChild(marketElement)\n    }\n    priceDurationElement.appendChild(priceElement)\n\n    const titleElement = this.master.createStepTitle(title, 'lblServiceTitle', 'h1', '2')\n    titleElement.insertBefore(priceDurationElement, titleElement.firstChild)\n    this.descriptionTitle.appendChild(titleElement)\n    TweenLite.set(document.body, {\n      delay: 0.3,\n      onComplete: () => {\n        focusElement(this.descriptionTitle)\n      }\n    })\n    this.descriptionBody.innerHTML = this.selectedService.description\n  }\n\n  bindEvents() {\n    this.events.push(bind(this.el, '.js-service-select', 'click', this.nextStepCall))\n  }\n\n  nextStepCall = () => {\n    this.master.analyticsHandler('when-user-click-on-description-service-select', {\n      eventAction: this.selectedService.title, // updated value\n      eventLabel: window.config.oab.description.serviceSelectionCta, // updated valued\n    })\n    if (this.selectedService.extra.mode != null && this.selectedService.extra.mode.toLowerCase() === 'video') {\n      this.master.nextStep('date-selection') //go to date selection if user has selected virtual service\n      window.sessionStorage.setItem('selectedSpanAriaLabel', '')\n    }\n    else {\n      this.master.nextStep('boutique-selection') // else go directly to boutique selection step\n    }\n  }\n\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'description',\n      eventLabel: 'back',\n      eventAction: this.selectedService.title\n    }\n  }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n\n}\n\nexport default OabDescription\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select, getCollection, closest } from 'lib/selectors'\nimport {focusElement, isMobileScreen } from 'lib/helpers'\nimport pageTitle from 'modules/pageTitle'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport notifier from 'modules/notifier'\nimport config from 'lib/config'\nimport openAddToBagConfirmationPopin from 'lib/add-to-bag-confirmation-popin'\nimport popin from 'modules/popin'\nlet popinCloseBtn\nconst oabProvider = select('.js-oab-provider')\nconst countryArray = ['GB', 'LX', 'BR']\nclass OabPhoneNumber extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.selectedBoutique = this.master.oabDataObject.selectedBoutique\n    this.selectedService = this.master.oabDataObject.service\n    if (this.selectedService.checkoutEnabled) {\n      const payableAppointment = select('.payableBooking')\n      const freeAppointment = select('.freeBooking')\n      if (payableAppointment) {\n        payableAppointment.removeAttribute('hidden')\n        freeAppointment ? freeAppointment.setAttribute('hidden','')  : ''\n      }  \n    }\n    const buttonContinueToCheckout = select('.js-valid-number')\n    buttonContinueToCheckout ? focusElement(buttonContinueToCheckout) : ''\n    this.companyId = this.master.oabDataObject.companyId\n    this.questionListData = this.master.oabDataObject.questionListData\n    this.isLogged = JSON.parse(sessionStorage.getItem('IS_USER_AUTHENTICATED'))\n    this.SELECTORS = {\n      SECTION_TITLE: '.js-phone-message-title',\n      FORM: '#oab-phone-form',\n      SUBMIT_FORM_CTA: '.js-valid-number',\n      COMMENT_SECTION: '.js-comment-section',\n      COMMENT_TEXTAREA: '.js-comment-textarea',\n      GUEST_MODE_DESCRIPTION: '.js-guest-mode-description',\n      NEWSLETTER_CHECKBOX: 'input#oab-newsletter-subscribe'\n\n    }\n    this.events = []\n    this.handleGuestMode()\n    this.bindData()\n    this.init()\n    this.bindEvents()\n    if (this.master.oabDataObject.guestModeUsed === false && this.isLogged === true) {\n      this.master.oabDataObject.previousStepToGo.pop()\n    }\n    this.heightOfNewsletterRule = 0\n  }\n  \n  init() {\n\tconst form = select(this.SELECTORS.FORM)\n\n  if(form) this.cleanErrors(form)\n  window.onzoom = () => {\n      if (this.master.oabDataObject.guestModeUsed === false) {\n        const devicePixelRatio = window.devicePixelRatio.toFixed(2)\n        const legalMention = select('.js-legal-mention-section p a')\n        if (legalMention) {\n          !isMobileScreen() && devicePixelRatio <= 0.67 ? legalMention.classList.add('hover-effect') : legalMention.classList.remove('hover-effect')\n          !isMobileScreen() && devicePixelRatio == 0.33 ? legalMention.classList.add('hover-effect-guest') : legalMention.classList.remove('hover-effect-guest')\n        }\n      }\n    }\n  }\n\n  // gets called by the master to get back button analytics\n  getBackStepAnalytics() {\n    this.commentSection.setAttribute('hidden', '')\n    this.commentTextArea.value = ''\n    return {\n      eventCategory: 'confirm appointment',\n      eventLabel: 'back',\n      eventAction: this.selectedService.title\n    }\n  }\n\n  /* ---------- BINDING ---------- */\n\n  bindData() {\n    this.SECTION_TITLE = select(this.SELECTORS.SECTION_TITLE) || null\n    if (this.SECTION_TITLE) {\n      this.SECTION_TITLE.innerHTML = ''\n      const title = this.master.createStepTitle(window.config.oab.phoneNumber.title, 'lblBookAnAppointment')\n      pageTitle(window.config.oab.phoneNumber.title, '', ' - ')\n      this.SECTION_TITLE.insertBefore(title, this.SECTION_TITLE.childNodes[0])\n      focusElement(this.SECTION_TITLE.firstChild)\n    }\n\n    this.FORM = select(this.SELECTORS.FORM) || null\n    this.commentTextArea = select(this.SELECTORS.COMMENT_TEXTAREA, this.FORM) || null\n    this.FORM.removeAttribute('action')\n    this.submitBtn = select(this.SELECTORS.SUBMIT_FORM_CTA, this.FORM)\n    this.commentSection = select(this.SELECTORS.COMMENT_SECTION, this.FORM)\n    \n    if (this.questionListData && this.questionListData.questionList) {\n      this.questionListData.questionList.forEach((question) => {\n        if (question.questionName.toLowerCase() === 'comment') {\n          this.commentId = question.questionId\n          this.commentAnswer = question.answerList\n        }\n        else {\n          this.wfjQuestId = question.questionId\n        }\n      })\n      if (this.commentAnswer === null)  this.commentSection.removeAttribute('hidden')\n    }\n\telse if(oabProvider.innerText === \"SALESFORCE\"){\n\tthis.commentSection.removeAttribute('hidden')\n}\n  }\n\n  bindEvents() {\n    this.events.push(bind(this.el, this.SELECTORS.SUBMIT_FORM_CTA, 'click', (evt) => this.submitFormCallback(evt)))\n    this.events.push(bind(this.el, this.SELECTORS.NEWSLETTER_CHECKBOX, 'change', (evt) => this.handleNewletterSetting(evt)))\n  }\n\n  handleNewletterSetting = (evt) => {\n    if (countryArray.includes(config.country) || config.region === \"apac\") {\n      const newsletterElm = evt.delegateTarget\n\n      if (newsletterElm) {\n        const newsletterRulesElm = select('div#oab-newsletter-rules')\n        const isChecked = newsletterElm.checked\n        isChecked && newsletterRulesElm.hasAttribute('hidden') ? newsletterRulesElm.removeAttribute('hidden') : newsletterRulesElm.setAttribute('hidden', '')\n      \n\n      if (!this.heightOfNewsletterRule) {\n        newsletterRulesElm.classList.remove('is-hidden')\n        this.heightOfNewsletterRule = 'auto'\n        newsletterRulesElm.style.height = 0\n      }\n\n      TweenLite.fromTo(newsletterRulesElm, (isChecked ? 1 : .4),\n        { autoAlpha: isChecked ? 0 : .5, height: isChecked ? 0 : this.heightOfNewsletterRule },\n        { autoAlpha: isChecked ? 1 : .0, height: isChecked ? this.heightOfNewsletterRule : 0 }\n        )\n      }\n    }\n  }\n  \n  cleanErrors(element) {\n    const hasErrorClasses = getCollection('.has-error', element)\n\t  const errorMessages = getCollection('.error', element)\n\t  for (let i = 0; i < hasErrorClasses.length; i++) {\n\t    hasErrorClasses[i].classList.remove('has-error')\n\t  }\n\t  for (let i = 0; i < errorMessages.length; i++) {\n\t    errorMessages[i].parentNode.removeChild(errorMessages[i])\n\t  }\n\t  select(this.SELECTORS.SUBMIT_FORM_CTA).removeAttribute('aria-describedby')\n  }\n\n  submitFormCallback = (evt) => {\n    const form = select(this.SELECTORS.FORM)\n    if(form) this.cleanErrors(form)\n    if (this.FORM.checkValidity()) {\n      evt.preventDefault()\n      const countryCodeSelect = select('select[name=countryCode]', this.FORM)\n      const phoneNumberInput = select('input[type=tel]', this.FORM)\n      const email = select('input[type=email]', this.FORM)\n      const firstName = select('.js-name-firstName input', this.FORM)\n      const lastName = select('.js-name-lastName input', this.FORM)\n      const interestsSection = select('.js-interests-fields')\n      const interestsCheckbox = getCollection('.js-interests-checkbox-input input')\n      const wfjInterests = []\n      const newsletterCheckbox = select('.js-newsletter-section input')\n      if(this.master.oabDataObject.interests && interestsCheckbox) {\n        interestsCheckbox.forEach(checkbox => {\n          if(checkbox.checked) {\n            wfjInterests.push(checkbox.value)\n          }\n        })\n      }\n      \n      if (countryCodeSelect && phoneNumberInput && this.commentTextArea && email && firstName && lastName && interestsSection) {\n        this.phoneNumberValue = `${countryCodeSelect.value}${phoneNumberInput.value}`\n        this.countryCodeVal = countryCodeSelect.value\n        this.phoneNumberVal = phoneNumberInput.value\n        this.commentValue = this.commentTextArea.value\n        this.firstNameValue = firstName.value\n        this.lastNameValue = lastName.value\n        this.emailValue = email.value\n        let params\n        let apiURL\n        if (this.master.oabDataObject.service.associatedEvents) {\n          if (this.master.oabDataObject.guestModeUsed === true) {\n\n          }\n        }\n        let checkoutRequired = this.selectedService.checkoutEnabled ;\n        let guestModeUsed = this.master.oabDataObject.guestModeUsed;\n        let associatedEventPresent = this.master.oabDataObject.service.associatedEvents;\n        // Guest User\n        if (guestModeUsed) {\n          params = {\n            boutiqueId: this.selectedBoutique.id,\n            firstname: this.firstNameValue,\n            lastName: this.lastNameValue,\n            emailAddress: this.emailValue,\n            phoneNumber: this.phoneNumberValue,\n            questionId: this.commentId || 0,\n            answer: this.commentValue || '',\n            wfjQuestionId: this.wfjQuestId || 0,\n            wfjAnswers: wfjInterests,\n            divisionType: this.master.oabDataObject.selectedDivision,\n            newsLetterOptin: newsletterCheckbox && newsletterCheckbox.checked ? true : false\n          }\n\n          if(oabProvider.innerText === \"SALESFORCE\"){ \n            params.countryCode = this.countryCodeVal,\n      params.phoneNumber = this.phoneNumberVal,\n      params.availabilityId = this.master.oabDataObject.selectedDateSlot.date.serviceAvailId,\n      params.sfMarketId = this.master.oabDataObject.selectedDateSlot.date.marketCode,\n      params.storeCode = this.selectedBoutique.sfBoutiqueCode\n          }\n         \n          if (associatedEventPresent) {\n            params = Object.assign(params, {\n              date: this.master.oabDataObject.selectedDateSlot.date.time,\n              eventId: this.master.oabDataObject.selectedDateSlot.date.timeId,\n              eventChainId: this.master.oabDataObject.selectedBoutique.eventId\n            });\n          } else {\n            params = Object.assign(params, {\n              date: this.master.oabDataObject.selectedDateSlot.date.time.substring(0, this.master.oabDataObject.selectedDateSlot.date.time.indexOf(\"T\")),\n              timeId: this.master.oabDataObject.selectedDateSlot.date.timeId,\n              serviceId: this.master.oabDataObject.service.serviceId,\n              personId: this.master.oabDataObject.selectedDateSlot.date.adviserId\n            });\n          }\n          apiURL = associatedEventPresent ? OAB_API_MANAGER.postAppointmentGuestEventBookingConfirmation : OAB_API_MANAGER.postAppointmentGuestBookingConfirmation;\n        } else {\n          // Registered User\n          params = {\n            memberId: this.master.oabDataObject.addedBouking.memberId,\n            headerAuthToken: this.master.oabDataObject.addedBouking.headerAuthToken,\n            boutiqueId: this.selectedBoutique.id,\n            phoneNumber: this.phoneNumberValue,\n            questionId: this.commentId || 0,\n            answer: this.commentValue || ''\n          }\n          if (!associatedEventPresent) {\n            params = Object.assign(params, {\n              companyId: this.companyId\n            })\n          }\n          apiURL = associatedEventPresent ? OAB_API_MANAGER.postAppointmentEventBookingConfirmation : OAB_API_MANAGER.postAppointmentBookingConfirmation;\n        }\n        if (checkoutRequired) {\n          params = Object.assign(params, {\n            price: this.selectedService.price.value,\n            currency: this.selectedService.price.currencyIso,\n            guestModeUsed: guestModeUsed,\n            eventBooking: associatedEventPresent,\n            serviceId: this.selectedService.serviceId,\n            eventName: this.selectedService.title,\n            selectedDate: this.master.oabDataObject.selectedDateSlot.date.time,\n            location: this.master.oabDataObject.selectedBoutique.name,\n            eventMode: this.master.oabDataObject.service.extra.mode,\n            isOverrideCart: evt.currentTarget.dataset.overrideCart ? false : true\n          })\n\n          \n          apiURL = OAB_API_MANAGER.postAppointmentStartCheckout\n        }\n\n        this.master.showLoader(this.submitBtn, true)\n        apiURL(params)\n          .then(data => {\n            if (!data.errors || !data.errors.error) {\n              if (checkoutRequired) {\n                let dimension45Value = 'none'\n                if(data.checkoutEntry !== null) {\n                if(data.checkoutEntry.product.exclusive){\n                  dimension45Value = 'Exclusive'\n                }else if(data.checkoutEntry.product.newProduct){\n                  dimension45Value = 'New'\n                }else if(data.checkoutEntry.product.limitedEdition){\n                  dimension45Value = 'Limited Edition'\n                }else if(data.checkoutEntry.product.foreignEdition){\n                  dimension45Value = 'Foreign Edition'\n                }else if(data.checkoutEntry.product.numberedEdition){\n                  dimension45Value = 'Numbered Edition'\n                }\n              }\n\n                if (data.showpopin === true) {\n                  \n                  openAddToBagConfirmationPopin('oabservice').then((modal) => {\n                    this.master.destroyLoader()\n                    \n                    window.document.DLKit.push('on-tracking', {\n                     'eventCategory': 'mix cart pop in',\n                     'eventAction': 'display',\n                     'eventLabel': '',\n                     'event': 'nievent'\n                   })\n                     popinCloseBtn = select('.js-popin-close', modal.modal.el)\n                     if(popinCloseBtn) popinCloseBtn.addEventListener('click', () => {\n                       window.document.DLKit.push('on-tracking', {\n                         'eventCategory': 'mix cart pop in',\n                         'eventAction': 'leave',\n                         'eventLabel': '',\n                         'event': 'uaevent'\n                       })\n                     })\n                     focusElement(popinCloseBtn, {notChangeTabIndex: true })\n                     modal.modal.el.addEventListener('click', (e) => {\n                       if (closest(e.target, '.popin__row')) return\n                       popin.hide()\n                     })\n                     const confirmationPopinCancelCta = select('.js-confirmation-cancel-cta')\n                     if (confirmationPopinCancelCta) confirmationPopinCancelCta.addEventListener('click', () => {\n                       popin.hide()\n                       window.document.DLKit.push('on-tracking', {\n                         'eventCategory': 'mix cart pop in',\n                         'eventAction': 'cancel',\n                         'eventLabel': '',\n                         'event': 'uaevent'\n                       })\n                     })\n                     const confirmationPopinCta = select('.js-confirmation-popin-cta')\n                     \n                     if (confirmationPopinCta) confirmationPopinCta.addEventListener('click', (ev) => {\n                       this.submitFormCallback(ev)\n                       popin.hide()\n                       window.document.DLKit.push('on-tracking', {\n                         'eventCategory': 'mix cart pop in',\n                         'eventAction': 'confirm',\n                         'eventLabel': '',\n                         'event': 'uaevent'\n                       })\n                     })\n                   })\n                } else{\n                  dataLayer.push({\n                    event: 'uaevent',\n                    eventCategory: 'add to cart',\n                    eventAction: 'regular quickbuy',\n                    eventLabel: this.selectedService.title,\n                    cartId: data.cartId,\n                    ecommerce: {\n                      currencyCode: window.dataLayerGA.pageLoad.currencyCode,\n                      add: {\n                        products: [{\n                          name: this.selectedService.title.toLowerCase(),\n                          id: data.checkoutEntry.product.code,\n                          price: this.selectedService.price.value,\n                          brand: data.checkoutEntry.product.division,\n                          category: data.checkoutEntry.product.division + \"/booking/\" + this.selectedService.title.toLowerCase(),\n                          variant: data.checkoutEntry.product.gaVariant,\n                          quantity: 1,\n                          dimension8: data.checkoutEntry.product.code,\n                          dimension17: 'no',\n                          // dimension18: Product Status\n                          // dimension19:  Sub Collection\n                          dimension20:  data.checkoutEntry.product.productLineCategory,\n                          dimension21:  'in stock',\n                          dimension25:  data.checkoutEntry.product.axisType,\n                          dimension45:  dimension45Value// flag\n                          // dimension65: '' // Extended Catalog\n                        }]\n                      }\n                    }\n                  })\n                   window.location.href = window.config.webservices.checkout.oabCheckoutUrl\n                }\n\n               \n              } \n              else {\n                this.master.destroyLoader()\n                this.master.analyticsHandler('oab-when-user-valid-phone', {\n                  eventAction: this.selectedService.title,\n                  sl_searchcity: '',\n                  sl_searchcountry: '',\n                  sl_searchrequest: '',\n                  pos_city: this.selectedBoutique.address.address4,\n                  pos_country: this.selectedBoutique.address.country,\n                  pos_id: this.selectedBoutique.id\n                })\n                this.master.nextStep('thanks-message')\n                this.master.analyticsHandler('oab-when-user-see-thanks-message', {\n                  eventAction: this.selectedService.title,\n                })\n                if(data.subscriptionError === \"\") {\n                  this.master.analyticsHandler('oab-when-user-select-newsletter-subscription', {})\n                }}\n            } else if (data.errors &&  data.errors.error === 'Please note : An account already exists with this email') {\n                this.master.destroyLoader()\n                const errorMsg = select('#guest-confirmation-error')\n            \t  errorMsg.classList.add('error', 'guest-confirmation-error')\n            \t  const ctaDescribedBy = select('.js-valid-number')\n            \t  if (ctaDescribedBy) ctaDescribedBy.setAttribute('aria-describedby', 'guest-confirmation-error')\n            \t  errorMsg.innerHTML = config.locales.errors.form.fields.guestUserEmail\n            \t  focusElement(errorMsg)\n            \t  this.stepsArray = this.master.oabDataObject.previousStepToGo\n                if (this.stepsArray.includes(this.stepName)) {\n                  this.stepsArray.pop(this.stepName)\n                }\n              } else {\n              this.master.destroyLoader()\n              this.master.displayErrorModalWindow()\n            }\n          })\n          .catch(error => {\n            this.master.destroyLoader()\n            this.master.displayErrorModalWindow()\n          })\n      }\n    }\n  }\n\n  handleGuestMode = () => {\n    const guestModeDescription = select(this.SELECTORS.GUEST_MODE_DESCRIPTION)\n    const phoneDescription = select('.js-phone-description')\n    const nameFields = select('.js-name-fields')\n    const mailFields = select('.js-mail-fields')\n    const inputPhone = select('.js-input-phone')\n    const phoneNumberInput = select('input[type=tel]', this.FORM)\n    const inputCountryCode = select('.js-input-countryCode .selectbox__input')\n    const commentLabel = select('.js-review-field-label')\n    const commentTextarea = select('.js-comment-textarea')\n    const commentDescription = select('.js-comment-description')\n    const confirmBookingCta = select('.js-confirmation-cta-text')\n    const firstNameField = select('.js-name-firstName input')\n    const lastNameField = select('.js-name-lastName input')\n    const mailInputField = select('.mail-input input')\n    const phoneNumberTooltip = select('.is-guest-oab-phoneNumber-tooltip')\n    const phoneCountryCode = select('.js-input-countryCode')\n    const interestsSection = select('.js-interests-fields')\n    const options = getCollection('.js-input-countryCode .selectbox__input option')\n    const selectboxSpan = select('.phone_selectbox span')\n    const interestsCheckbox = getCollection('.js-interests-checkbox-input input')\n    const inputPhoneLabel = select('.js-label-input', inputPhone)\n    interestsCheckbox.forEach(checkbox => {\n      checkbox.removeAttribute('disabled')\n    })\n    const newsletterCheckbox = select('.js-newsletter-section')\n\n    if (interestsSection && guestModeDescription && phoneDescription && nameFields && mailFields && inputPhone && inputCountryCode && commentLabel && commentTextarea && commentDescription && confirmBookingCta && options && selectboxSpan && phoneNumberInput && inputPhoneLabel) {\n      if (this.master.oabDataObject.guestModeUsed === true) {\n        guestModeDescription.removeAttribute('hidden')\n        phoneDescription.setAttribute('hidden', '')\n        nameFields.removeAttribute('hidden')\n        mailFields.removeAttribute('hidden')\n        inputPhone.setAttribute('autocomplete', 'tel-national')\n        inputCountryCode.removeAttribute('autocomplete')\n        inputCountryCode.setAttribute('autocomplete', 'tel-country-code')\n        commentLabel.setAttribute('hidden', '')\n        commentTextarea.setAttribute('placeholder', config.oab.phoneNumber.reviewPlaceHolder)\n        commentDescription.classList.remove('is-sr-only')\n        confirmBookingCta.innerText = config.oab.phoneNumber.guestModeConfirmationCta\n        firstNameField.setAttribute('required', true)\n        lastNameField.setAttribute('required', true)\n        mailInputField.setAttribute('required', true)\n        phoneNumberTooltip.removeAttribute('hidden')\n        phoneCountryCode.classList.add('phone-tooltip')\n        newsletterCheckbox ? newsletterCheckbox.removeAttribute('hidden') : ''\n        this.master.oabDataObject.interests ? interestsSection.removeAttribute('hidden') : interestsSection.setAttribute('hidden', '')\n      } else {\n        const oabPhoneInfo = this.master.oabDataObject.oabPhoneInfo\n        if (oabPhoneInfo) {\n          options.forEach(function(el) {\n            el.hasAttribute('selected') ? el.removeAttribute('selected') : ''\n            el.innerText == oabPhoneInfo.phoneDiallingCode ? el.setAttribute('selected', 'selected') : ''\n          })\n          selectboxSpan.innerText = oabPhoneInfo.phoneDiallingCode\n          phoneNumberInput.value = oabPhoneInfo.phoneNumber\n          inputPhoneLabel.classList.add('has-content')\n        }\n        guestModeDescription.setAttribute('hidden', '')\n        phoneDescription.removeAttribute('hidden')\n        nameFields.setAttribute('hidden', '')\n        mailFields.setAttribute('hidden', '')\n        inputPhone.setAttribute('autocomplete', 'tel-national')\n        inputCountryCode.setAttribute('autocomplete', 'country-code')\n        commentLabel.removeAttribute('hidden')\n        commentTextarea.removeAttribute('placeholder')\n        commentDescription.classList.add('is-sr-only')\n        confirmBookingCta.innerText = config.oab.phoneNumber.confirmationCta\n        phoneNumberTooltip.setAttribute('hidden', '')\n        phoneCountryCode.classList.remove('phone-tooltip')\n        interestsSection.setAttribute('hidden', '')\n        newsletterCheckbox ? newsletterCheckbox.setAttribute('hidden', '') : ''\n      }\n    }\n  }\n\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n\n}\n\nexport default OabPhoneNumber\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select } from 'lib/selectors'\nimport config from 'lib/config'\nimport * as xhr from 'modules/fetch'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport notifier from 'modules/notifier'\nimport pageTitle from 'modules/pageTitle'\nimport {Manager, YAPI_PAGELOAD_RECEIVED} from 'lib/events'\n\n\nclass OabRedirectAccount extends Base {\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.SELECTORS = {\n      SECTION: '.oab-redirect',\n      SECTION_TITLE: '.js-redirect-title',\n      CTA: '.oab-myacnt-btn',\n      GUEST_MODE_CTA: '.js-guest-mode-cta'\n    }\n    this.events = []\n    this.selectedService = this.master.oabDataObject.service\n    this.dataWS = this.getDataToPass()\n\n    window.scrollTo(0, 0)\n    this.master.showLoader(this.el, false, 0, () => {\n      const loader = select('.loader', this.el)\n      loader.style.width = '100%'\n    })\n\n    if (this.master.oabDataObject.wasLogged === true && !this.master.oabDataObject.isBackButtonClicked && window.sessionStorage.getItem('isRedirectedToMyAccount') === 'true') {\n      Manager.subscribe(YAPI_PAGELOAD_RECEIVED, () => {\n        this.isUserLogged()\n      })\n    }\n    else {\n      this.isUserLogged()\n    }\n  }\n\n  getDataToPass() {\n    try {\n      const dateObject = new Date(this.master.oabDataObject.selectedDateSlot.date.time)\n      let dataWS\n      if (this.master.oabDataObject.service.associatedEvents) {\n        dataWS = {\n          eventId: this.master.oabDataObject.selectedDateSlot.date.timeId,\n          eventChainId: this.master.oabDataObject.selectedBoutique.eventId,\n          date: this.master.oabDataObject.selectedDateSlot.date.time,\n          boutiqueId: this.master.oabDataObject.selectedBoutique.id,\n          divisionType: this.master.oabDataObject.selectedDivision\n        }\n      } else {\n        dataWS = {\n        serviceId: this.selectedService.serviceId,\n        date: `${dateObject.getFullYear()}-${dateObject.getMonth() + 1}-${dateObject.getDate()}`,\n        personId: this.master.oabDataObject.selectedDateSlot.date.adviserId,\n        timeId: this.master.oabDataObject.selectedDateSlot.date.timeId,\n        boutiqueId: this.master.oabDataObject.selectedBoutique.id,\n        questionId: 0,\n        answer: '',\n        divisionType: this.master.oabDataObject.selectedDivision\n      }\n    }\n      if (this.master.oabDataObject.questions) {\n        dataWS.questionId = this.master.oabDataObject.questions[0].id\n        dataWS.answer = this.master.oabDataObject.questions[0].answer\n      }\n      return dataWS\n    }\n    catch(e) {\n      this.master.nextStep('carousel')\n    }\n  }\n\n  displaySection() {\n    this.master.destroyLoader()\n    const section = select(this.SELECTORS.SECTION)\n    if (section) section.style.opacity = '1'\n  }\n  isUserLogged() {\n    TweenLite.set(document.body, {\n      delay: 3,\n      onComplete: () => {\n        const isLogged = JSON.parse(window.sessionStorage.getItem('IS_USER_AUTHENTICATED'))\n        let apiURL\n        apiURL = this.master.oabDataObject.service.associatedEvents ? OAB_API_MANAGER.addEventAppointmentBooking : OAB_API_MANAGER.addAppointmentBooking\n        if (isLogged && isLogged === true) {\n          apiURL(this.dataWS)\n            .then(data => {\n              this.master.destroyLoader()\n              if (!data.errors) {\n                this.master.oabDataObject.addedBouking = {\n                  headerAuthToken: data.headerAuthToken,\n                  memberId: data.memberId\n                }\n                this.master.oabDataObject.oabPhoneInfo = data.oabPhone\n                this.master.oabDataObject.guestModeUsed = false\n                this.master.nextStep('phone-number')\n              }\n              else {\n                this.master.displayErrorModalWindow()\n                this.master.nextStep('date-selection')\n              }\n\n            })\n            .catch(error => {\n              this.master.destroyLoader()\n              this.displaySection()\n              this.master.displayErrorModalWindow()\n            })\n        }\n        else {\n          this.displaySection()\n          this.bindEvents()\n          this.bindData()\n          this.master.setHeaderHeight()\n        }\n      }\n    })\n  }\n\n  // gets called by the master to get back button analytics\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'finalize appointment',\n      eventAction: this.selectedService.title\n    }\n  }\n\n  bindEvents() {\n    this.events.push(bind(this.el, this.SELECTORS.CTA, 'click', this.redirectToMyAccount))\n    this.events.push(bind(this.el, this.SELECTORS.GUEST_MODE_CTA, 'click', this.redirectToGuestMode))\n  }\n\n  bindData() {\n    this.SECTION_TITLE = select(this.SELECTORS.SECTION_TITLE) || null\n\n    if (this.SECTION_TITLE) {\n      this.SECTION_TITLE.innerHTML = ''\n      const title = this.master.createStepTitle(window.config.oab.redirectAccount.title)\n      this.SECTION_TITLE.appendChild(title)\n      title.focus()\n    }\n    pageTitle(window.config.oab.redirectAccount.title, '', ' - ')\n  }\n\n  redirectToGuestMode = () => {\n    this.master.oabDataObject.guestModeUsed = true\n    this.master.analyticsHandler('oab-when-user-goto-guest-mode', {\n      eventAction: this.selectedService.title,\n    })\n    this.master.nextStep('phone-number')\n  }\n\n  redirectToMyAccount = () => {\n    sessionStorage.setItem('oab-data', JSON.stringify(this.master.oabDataObject))\n    this.master.analyticsHandler('oab-when-user-goto-account', {\n      eventAction: this.selectedService.title,\n    })\n    this.master.showLoader(select(this.SELECTORS.CTA, this.el), true, 1000, () => {\n      TweenLite.set(document.body, {\n        delay: 3,\n        onComplete: () => {\n          this.master.oabDataObject.guestModeUsed = false\n          this.redirect(this.dataWS)\n        }\n      })\n    })\n  }\n\n  redirect(bookingData) {\n\t    const form = document.createElement('form')\n\t    form.action = this.master.oabDataObject.service.associatedEvents ? `eventLogin` : `login`\n\t    form.method = 'POST'\n\t    form.className = 'is-hidden'\n\n\t    Object.keys(bookingData).forEach(key => {\n\t      form.insertAdjacentHTML('beforeend', `<input type=\"hidden\" name=\"${key}\" value=\"${bookingData[key]}\"/>`)\n\t    })\n\t    form.insertAdjacentHTML('beforeend', `<input type=\"hidden\" name=\"CSRFToken\" value=\"${ACC.config.CSRFToken}\"/>`)\n\t    document.body.appendChild(form)\n\t    document.cookie = 'oab-login-redirect-step=true;path=/'\n\t    form.submit()\n      window.sessionStorage.setItem('isRedirectedToMyAccount', JSON.stringify(true))\n   }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n  }\n\n}\n\nexport default OabRedirectAccount\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select, getCollection, closest } from 'lib/selectors'\nimport pageTitle from 'modules/pageTitle'\nimport OAB_API_MANAGER from './oab-api-manager'\nimport config from 'lib/config'\nimport notifier from 'modules/notifier'\nimport { isMobileScreen, isDesktopScreen } from 'lib/helpers'\n\n\nconst oabProvider = select('.js-oab-provider')\nclass OabServiceList extends Base {\n\n  constructor(el, master) {\n    super(el)\n    this.el = el\n    this.master = master\n    this.stepName = this.el.attributes['data-step'].value\n    this.stepsArray = this.master.oabDataObject.previousStepToGo\n    if (!this.stepsArray.includes(this.stepName)) {\n      this.stepsArray.push(this.stepName)\n    }\n    this.selectedAxis = this.master.oabDataObject.selectedAxis\n    this.selectedDivision = this.master.oabDataObject.selectedDivision\n    this.companyId = this.master.oabDataObject.companyId\n    const defaultService = select('[data-default-service]')\n    if (defaultService) {\n      const dataCategory = defaultService.dataset.defaultService.split(',')\n      this.master.oabDataObject.category = { categoryId: dataCategory[0], categoryName: dataCategory[1] }\n    }\n\n    this.selectedCategory = this.master.oabDataObject.category\n\n    this.SELECTORS = {\n      SECTION_TITLE: '.js-service-list-title',\n      LIST: '.oab-service-list div[role=list]',\n      ITEM_TEMPLATE: '.oab-service-list li.template',\n      ITEMS: '.oab-service-list li:not(.template)',\n      CATEGORY: '.js-category',\n      PRICE_SCHEDULE: '.price-schedule',\n      SERVICE_NAME: '.js-service-name',\n      SERVICE_DESCRIPTION: '.js-description',\n      OAB_CONTAINER: '.js-oab-container'\n    }\n    const oabContainer = closest(this.el, this.SELECTORS.OAB_CONTAINER)\n    if (oabContainer && isMobileScreen()) oabContainer.classList.toggle('container', false)\n    this.events = []\n    this.clean()\n    this.master.generateBanner(this.el)\n    if(this.stepName != this.stepsArray[0])\n        this.master.bnrButton()\n    this.loadData()\n  }\n\n  clean = () => {\n    this.LIST = select(this.SELECTORS.LIST)\n    if (this.LIST) {\n      // clean existing list if coming after clicking on back button\n      while (this.LIST.firstChild) {\n        this.LIST.removeChild(this.LIST.firstChild)\n      }\n    }\n  }\n\n\tloadData(){\n  if (oabProvider.innerText === 'SALESFORCE') {\n      OAB_API_MANAGER.getServiceList({ division: this.selectedDivision}, [response => this.initCallback(response), response => this.master.displayErrorModalWindow(response), () => { this.master.destroyLoader() }])\n  } else {\n      OAB_API_MANAGER.getServiceList({ companyId: this.companyId, categoryId: this.selectedCategory ? this.selectedCategory.categoryId : 0 }, [response => this.initCallback(response), response => this.master.displayErrorModalWindow(response), () => { this.master.destroyLoader() }])\n  }   \n  }\n\n  initCallback(response) {\n    if (response.errors && response.errors.error) {\n      this.master.displayErrorModalWindow()\n      return\n    }\n    this.bindData(response)\n    this.bindEvents()\n    this.master.setHeaderHeight()\n  }\n\n  bindEvents() {\n    this.events.push(bind(this.el, '.goto-button', 'click', this.nextStepCallback))\n    this.events.push(bind(this.el, '.js-back-btn', 'click', this.master.backButton))\n  }\n\n  bindData(data) {\n    this.serviceList = data.serviceList\n    this.SECTION_TITLE = select(this.SELECTORS.SECTION_TITLE) || null\n    this.LIST = select(this.SELECTORS.LIST) || null\n\n    if (this.SECTION_TITLE) {\n      this.SECTION_TITLE.innerHTML = ''\n      if (oabProvider.innerText === 'SALESFORCE') {\n        this.selectedAxis = `${window.config.oab.axisType[this.selectedAxis]}`\n      }\n      const title = this.master.createStepTitle((this.selectedCategory) ? this.selectedCategory.categoryName : this.selectedAxis, 'lbl_Axiscategory')\n      this.SECTION_TITLE.insertBefore(title, this.SECTION_TITLE.childNodes[0])\n      title.focus()\n\n      if(window.config.country == \"MX\" && isDesktopScreen()) {\n        title.style.fontSize = \"25px\"\n      }\n    }\n    pageTitle((this.selectedCategory && this.selectedCategory.categoryName.toLowerCase() !== this.selectedAxis.toLowerCase()) ? `${this.selectedCategory.categoryName} - ${this.selectedAxis}` : this.selectedAxis, '', ' - ')\n\n    if (this.LIST) {\n      let imageServices = data.serviceList.filter(item => item.media !== null)\n      let noImageServices = data.serviceList.filter(item => item.media === null)\n      const newItemImages = document.createElement('div')\n      newItemImages.setAttribute('role', 'presentation')\n      noImageServices.length > 0 ? newItemImages.classList.add('has-image') : 0\n      imageServices.forEach((element, index) => {\n        this.createImage(newItemImages, element, index, true)\n      })\n\n      const newItemNoImages = document.createElement('div')\n      newItemNoImages.setAttribute('role', 'presentation')\n      imageServices.length > 0 ? newItemNoImages.classList.add('no-image') : ''\n      noImageServices.forEach((element, index) => {\n        this.createImage(newItemNoImages, element, index, false)\n      })\n    }\n    this.servicesList = getCollection('.service-item')\n  }\n\n  createImage(images, element, index, hasImage) {\n    const listItem = document.createElement('div')\n        listItem.setAttribute('role', 'listitem')\n        listItem.setAttribute('data-service-id', element.serviceId)\n        images.appendChild(listItem)\n        listItem.classList.add('service-item')\n        listItem.classList.add('has-text-left')\n        let idAttribute = hasImage ? `oab_service_${index}` : `oab_service_0${index}`\n        let imgAlt = config.oab.imageAltTexts[element.extra.imagealt] ?  config.oab.imageAltTexts[element.extra.imagealt] : ''\n        let imgTemplate = index ===0 ? `<img role=\"presentation\" aria-hidden=\"true\" width=\"282\" height=\"375\" src = \"${element.media ? element.media.url: null}\" alt=\"${imgAlt}\"/>` : `<img role=\"presentation\" aria-hidden=\"true\" class=\"is-lazy\" width=\"282\" height=\"375\" data-src = \"${element.media ? element.media.url: null}\" alt=\"${imgAlt}\"/>`\n        listItem.innerHTML = hasImage ? imgTemplate + this.getTemplate(idAttribute, element.media ? element.media.url: null, element.extra.imagealt)\n        : this.getTemplate(idAttribute, element.media ? element.media.url: null, element.extra.imagealt)\n\n        const category = select(this.SELECTORS.CATEGORY, listItem) || null\n        const serviceName = select(this.SELECTORS.SERVICE_NAME, listItem) || null\n        const priceSchedule = select(this.SELECTORS.PRICE_SCHEDULE, listItem) || null\n        const serviceDescription = select(this.SELECTORS.SERVICE_DESCRIPTION, listItem) || null\n\n\n        if (serviceName) {\n          serviceName.innerHTML = element.title\n          serviceName.id = element.serviceId\n          serviceName.setAttribute('data-test', 'lblServiceName')\n        }\n        if (serviceDescription && element.description) {\n          serviceDescription.innerHTML = this.wrapDescription(element.description)\n        }\n        else {\n          serviceDescription.parentElement.removeChild(serviceDescription)\n        }\n\n        if (element.category && category) category.innerHTML = element.category\n        else {\n          category.parentElement.removeChild(category)\n        }\n\n        if ((element.price || element.duration) && priceSchedule) {\n          const durationUnit = (['JP', 'TW', 'HK'].includes(window.config.country) ? '' : ' ') + window.config.oab.oabDurationUnit\n\n          priceSchedule.innerHTML = `${element.duration ? `${element.duration.duration}${durationUnit}` : ''}\n          ${element.price && element.price.value > 0 && element.price.formattedValue ? ` - ${element.price.formattedValue}` : ''}`\n        }\n\n        else {\n          listItem.removeChild(priceSchedule)\n        }\n\n        this.LIST.appendChild(images)\n  }\n  // Stepper callback\n  nextStepCallback = (evt) => {\n  if (evt.detail <= 1) {\n    if (this.stepName != this.stepsArray[0])\n      this.master.setWhiteBanner()\n    this.master.oabDataObject.service = this.serviceList.filter(service=>service.serviceId === parseInt(evt.delegateTarget.parentElement.getAttribute('data-service-id')))[0] // store selected service in the global data object to use in next steps\n    const serviceName = select(this.SELECTORS.SERVICE_NAME, evt.delegateTarget.offsetParent) || null\n    this.master.analyticsHandler('oab-when-user-select-service', {\n      eventAction: this.master.oabDataObject.selectedAxis,\n      eventLabel: this.master.oabDataObject.service.title\n    })\n    // check if questions are linked to the service or not\n    if (this.master.oabDataObject.service.questionSetId !== 0) {\n      const collectionCategoryParams = {\n        questionSetId: this.master.oabDataObject.service.questionSetId,\n        companyId: this.companyId\n      }\n      // call categories and collection webservice to check if question is a comment or a category & collection\n      OAB_API_MANAGER.getCategoryCollectionList(collectionCategoryParams)\n        .then((data) => {\n          this.master.oabDataObject.questionListData = data\n          this.questionList = data.questionList\n          if (this.questionList) {\n            this.questionList.forEach((question) => {\n              this.master.oabDataObject.interests = question.questionName.toLowerCase() === 'customer_interests'\n              // if question is collection and category then redirect to collection and categories step\n              if (question.answerList !== null && question.questionName.toLowerCase() !== 'comment' && question.questionName.toLowerCase() !== 'customer_interests') {\n                this.master.oabDataObject.questionCommentDate = question\n                this.master.nextStep('collection-category')\n              } else if (question.questionName.toLowerCase() === 'comment') {\n                // else if question is a comment then don't redirect to collection and categories step\n                this.chooseRedirectionStep()\n              }\n            })\n          } else if (data.errors) { // if an error occurs while calling collection and categories webservice then show the error notifier\n            notifier.show({\n              name: window.config.locales.notifier.request.label,\n              message: window.config.locales.notifier.request.message,\n              close: window.config.locales.notifier.request.close,\n            })\n            this.chooseRedirectionStep() // bypass the collection and category step to avoid blocking the user\n          }\n        })\n    } else {\n      this.chooseRedirectionStep()\n    }\n  }\n}\n\n  chooseRedirectionStep() {\n    if (this.master.oabDataObject.service.description && this.master.oabDataObject.service.description.length > 125) { // if the selected service contains a description and description has more than 125 characters then go to description step\n      this.master.nextStep('description')\n    } else {\n      if (this.master.oabDataObject.service.extra.mode != null && this.master.oabDataObject.service.extra.mode.toLowerCase() === 'video') {\n        this.master.nextStep('date-selection') // go to date selection if user has selected virtual service\n        window.sessionStorage.setItem('selectedSpanAriaLabel', '')\n      }\n      else {\n        this.master.nextStep('boutique-selection') // else go directly to boutique selection step\n      }\n    }\n  }\n\n  // gets called by the master to get back button analytics\n  getBackStepAnalytics() {\n    return {\n      eventCategory: 'service list',\n      eventLabel: 'back',\n      eventAction: (this.selectedCategory) ? this.selectedCategory.categoryName : this.selectedAxis\n    }\n  }\n\n  destroy = () => {\n    this.events.forEach(evt => {\n      evt.destroy()\n    })\n    delete this.master.oabDataObject.service\n  }\n\n  wrapDescription = (description) => {\n    return (description.length > 125) ? `${description.substring(0, description.substring(0, 120).lastIndexOf(' '))}...` : description\n  }\n\n  getTemplate = (idAttribute) => `<div class=\"service-text\">\n            <p class=\"heading is-8 js-category\" data-test=\"lbl_Axiscategory\"></p>\n            <h2 id = \"${idAttribute}\">\n                  <span role=\"presentation\" class=\"heading is-5 js-service-name\" data-test=\"lblServiceName\"></span>\n            <span role=\"presentation\" class=\"heading is-7 price-schedule\"></span>\n            </h2>\n            <p class=\"description js-description\" data-test=\"lblDescription\"></p>\n            \n        </div>\n        <button class=\"goto-button\" type=\"button\" aria-describedby=\"${idAttribute}\">${window.config.oab.servcieSelection.bookCtaText}</button>`\n\n}\n\nexport default OabServiceList\n","import Base from 'modules/base'\nimport bind from 'delegate'\nimport { select } from 'lib/selectors'\nimport { focusElement } from 'lib/helpers'\n\nclass OabThanksMessage extends Base {\n    constructor(el, master) {\n        super(el)\n        this.el = el\n        this.master = master\n        this.stepName = this.el.attributes['data-step'].value\n        this.stepsArray = this.master.oabDataObject.previousStepToGo\n        if (!this.stepsArray.includes(this.stepName)) {\n            this.stepsArray.push(this.stepName)\n        }\n        this.selectedServiceTitle = this.master.oabDataObject.service.title\n        this.selectedBoutique = this.master.oabDataObject.selectedBoutique\n        this.selectedDateSlot = this.master.oabDataObject.selectedDateSlot\n        this.SELECTORS = {\n            SECTION_TITLE: '.js-thanks-message-title',\n            BOUTIQUE: '.js-appointment-boutique',\n            FORM_CTA: '.js-explore-link',\n            DATE_ELEMENT: '.js-appointment-date',\n            TIME_ELEMENT: '.js-appointment-time',\n            BOUTIQUE_NAME: '.js-boutique-name',\n            BOUTIQUE_ADDRESS: '.js-boutique-address',\n            BOUTIQUE_TOWN: '.js-boutique-town',\n            SERVICE_TITLE: '.js-selected-service-title'\n        }\n        this.events = []\n        this.bindEvents()\n        this.bindData()\n        this.generateDetails(this.el)\n    }\n\n    /* ---------- BINDING ---------- */\n\n    bindEvents() {\n        this.events.push(bind(this.el, this.SELECTORS.FORM_CTA, 'click', (evt) => this.setLoader(evt)))\n    }\n\n    bindData() {\n        const backButton = select('.js-step-navigation')\n        this.SECTION_TITLE = select(this.SELECTORS.SECTION_TITLE) || null\n\n        if (backButton) {\n            backButton.hidden = true\n        }\n\n        if (this.SECTION_TITLE) {\n            this.SECTION_TITLE.innerHTML = ''\n            const title = this.master.createStepTitle(window.config.oab.thanksMessage.title, 'lblThankyoumsg')\n\n            const array = document.title.split(' | ')\n            const documentTitle = array[(array.length > 1) ? array.length - 1 : 0]\n            document.title = `${window.config.oab.thanksMessage.title} | ${window.config.oab.title} | ${documentTitle}`\n\n            this.SECTION_TITLE.insertBefore(title, this.SECTION_TITLE.childNodes[0])\n            focusElement(this.SECTION_TITLE.firstChild)\n        }\n    }\n\n    setLoader = () => {\n        this.master.showLoader(select(this.SELECTORS.FORM_CTA, this.el), true)\n    }\n\n\n  generateDetails = (el) => {\n    const boutiqueInfo = select('.js-boutique-info')\n    const boutiqueTitle = select('.boutique-subtitle')\n    const backToHomeCta = select('.back-to-home-cta')\n    if (this.master.oabDataObject.service.extra.mode.toLowerCase() === 'video') {\n      boutiqueInfo.setAttribute('hidden', '')\n      boutiqueTitle.setAttribute('hidden', '')\n      backToHomeCta.classList.add('virtual-service-thanks-cta')\n    }\n    else {\n      boutiqueInfo.removeAttribute('hidden')\n      boutiqueTitle.removeAttribute('hidden')\n      backToHomeCta.classList.remove('virtual-service-thanks-cta')\n      const boutiqueNameEl = select(this.SELECTORS.BOUTIQUE_NAME, el)\n      const boutiqueAddressEl = select(this.SELECTORS.BOUTIQUE_ADDRESS, el)\n      const boutiqueTownEl = select(this.SELECTORS.BOUTIQUE_TOWN, el)\n      if (boutiqueNameEl) boutiqueNameEl.innerHTML = this.selectedBoutique.name\n      if (boutiqueAddressEl) boutiqueAddressEl.innerHTML = this.selectedBoutique.address.address1\n      if(this.selectedBoutique.address.postcode != null && this.selectedBoutique.address.address4 != null){\n      if (boutiqueTownEl) boutiqueTownEl.innerHTML = `${this.selectedBoutique.address.postcode} ${this.selectedBoutique.address.address4}`\n    }else{\n        boutiqueTownEl.parentElement.removeChild(boutiqueTownEl)\n    }\n    }\n    const selectedService = select(this.SELECTORS.SERVICE_TITLE, el)\n    const lang = document.documentElement.lang\n    const dateEl = select(this.SELECTORS.DATE_ELEMENT, el)\n    const timeEl = select(this.SELECTORS.TIME_ELEMENT, el)\n    const selectedTime = this.selectedDateSlot.date.time\n    const dateArray = selectedTime.split(/[^0-9]/)\n    this.date = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], dateArray[3], dateArray[4], dateArray[5])\n    if (selectedService) selectedService.innerHTML = this.selectedServiceTitle\n    if (dateEl && timeEl) {\n      dateEl.innerHTML = this.date.toLocaleDateString(lang, {weekday: 'long', month: 'long', day: 'numeric'})\n    \ttimeEl.innerHTML = this.date.toLocaleTimeString(lang, {hourCycle: 'h23', hour: '2-digit', minute: '2-digit'})\n}\n  }\n\n    destroy = () => {\n        this.events.forEach(evt => {\n            evt.destroy()\n        })\n    }\n\n}\n\nexport default OabThanksMessage"],"sourceRoot":""}