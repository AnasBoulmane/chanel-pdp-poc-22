{"version":3,"sources":["webpack:///./patterns/scripts/ui/vto/Components/Close.jsx","webpack:///./patterns/scripts/ui/vto/Components/Error.jsx","webpack:///./patterns/scripts/ui/vto/Components/Eyewear/index.js"],"names":["ButtonClose","Component","nextChevron","select","style","top","zIndex","componentDidMount","button","focus","render","node","props","close","handleClick","config","locales","vto","closeButtonLabel","Error","error","name","message","zoomButton","selectedMockup","facecakeProps","isFacecakeMockupEnabled","product","code","orientation","retrySetup","window","addEventListener","onOrientationChange","bind","Manager","subscribe","WINDOW_WAS_RESIZED","onResize","display","getMq","topBannerBehaviour","vtoVariantsBehaviour","sampleProductIds","getProductID","componentDidUpdate","startCamera","errorMessage","e","dispatch","vtoCameraNotAvailableAction","location","protocol","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","video","stream","localStream","mediaStreamTrack","getVideoTracks","onended","stopCamera","tracks","getTracks","forEach","track","stop","moveDown","topBannerComponent","document","body","mainEl","productDetailsContent","topBannerComponentHeight","getBoundingClientRect","height","paddingTop","transform","order","parentNode","title","bar","par","backorder","option","description","selectAll","moreDetails","insertBefore","newNode","createElement","className","d","tmpNode","tmpDescription","remove","publish","VTO_PDP_STYLE_UPDATE","showing","isMobile","container","left","scrollTo","options","behavior","componentWillUnmount","srcObject","removeEventListener","vtoOpenCTA","classList","vtoClose","vtoCloseClickAction","vtoVideoStopAction","product_detail_scroll","visibility","category","loader","Loader","delay","vtoReadyAction","componentWillReceiveProps","newProps","setSelectedMockup","sampleMockup","productIndex","findIndex","items","length","getEyewearDimensions","type","getComputedStyle","sizeProps","params","dataLayer","locale","encodeURIComponent","basic","color","labels","canvasLabel","permissionDenied","portrait","tryOn","tryOnUrl","baseProduct"],"mappings":"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","file":"chunks/7.js?v=3.23","sourcesContent":["import React, { Component } from 'react'\nimport Icon from './Icon'\nimport config from '../../../lib/config'\nimport { select } from 'lib/selectors'\n\nclass ButtonClose extends Component {\n\n  componentDidMount () {\n    this.button.focus()\n  }\n\n  handleClick = () => {\n    const nextChevron = select('.product-details .js-slide:first-child a')\n    if(nextChevron){\n      nextChevron.style.top = ''\n      nextChevron.style.zIndex = ''\n    }\n  }\n\n  render() {\n    return (\n      <button ref={node => this.button = node} className=\"button is-icon vto-close\"\n              onClick={() => {\n                this.props.close()\n                this.handleClick()\n              }}>\n        <Icon name=\"close\"/>\n        <span className=\"is-sr-only\">{config.locales.vto.closeButtonLabel}</span>\n      </button>\n    )\n  }\n}\n\nexport default ButtonClose\n\n","import React from 'react'\n\nconst Error = ({ error }) => (\n  <div className=\"error permissionDenied\">\n    <div role=\"heading\" aria-level=\"2\" className=\"error__title\">{error.name}</div>\n    <p className=\"error__message\">{error.message}</p>\n  </div>\n)\n\nexport default Error\n","import React, { Component } from 'react'\nimport Icon from '../Icon'\nimport ButtonClose from '../Close'\nimport Error from \"../Error\"\nimport Loader from '../../../widgets/loader'\nimport isMobile from 'lib/helpers/mobile-detect'\nimport {\n  errorAction,\n  vtoCameraNotAvailableAction,\n  vtoCloseClickAction,\n  vtoReadyAction,\n  vtoVideoStopAction\n} from '../../Redux/actions'\nimport { select, selectAll } from 'lib/selectors'\nimport { getMq } from 'lib/helpers'\nimport { Manager, VTO_PDP_STYLE_UPDATE, WINDOW_WAS_RESIZED } from 'lib/events'\n\n\nconst zoomButton = select('.js-product-details-zoom', select('.js-main-content'))\n\nlet selectedMockup = null\n\nexport default class extends Component {\n  componentDidMount() {\n    const {orientation} = this.props\n\n\n    this.retrySetup()\n\n    window.addEventListener('orientationchange', this.onOrientationChange.bind(this))\n\n    Manager.subscribe(WINDOW_WAS_RESIZED, () =>\n      this.onResize()\n    )\n\n    zoomButton.style.display = 'none'\n\n    if (getMq() !== 'desktop') {\n      this.topBannerBehaviour(true)\n      this.vtoVariantsBehaviour(true)\n    }\n    selectedMockup = this.props.facecakeProps.sampleProductIds[0]    \n    this.getProductID()\n  }\n\n  componentDidUpdate() {\n    if (getMq() !== 'desktop') {\n      this.vtoVariantsBehaviour(true)\n    }\n  }\n\n  startCamera() {\n    const errorMessage = (message, e) => {\n      const { dispatch } = this.props\n      vtoCameraNotAvailableAction({dispatch})\n    }\n\n    if (location.protocol === 'https:') {\n      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n      if (navigator.getUserMedia) {\n        navigator.getUserMedia({ video: true }, function (stream) {\n          window.localStream = stream\n          var mediaStreamTrack = stream.getVideoTracks()[0];\n          if (typeof mediaStreamTrack != \"undefined\") {\n            mediaStreamTrack.onended = function () {//for Chrome.\n              errorMessage('Your webcam is busy!')\n            }\n          } else errorMessage('Permission denied!');\n        }, function (e) {\n          var message;\n          switch (e.name) {\n            case 'NotFoundError':\n            case 'DevicesNotFoundError':\n              message = 'Please setup your webcam first.';\n              break;\n            case 'SourceUnavailableError':\n              message = 'Your webcam is busy';\n              break;\n            case 'PermissionDeniedError':\n            case 'SecurityError':\n              message = 'Permission denied!';\n              break;\n            default: errorMessage('Reeeejected!', e);\n              return;\n          }\n          errorMessage(message);\n        });\n      } else errorMessage('Uncompatible browser!');\n    } else errorMessage('Use https protocol for open this page.')\n  }\n\n  stopCamera() {\n    if (window.localStream) {\n      const stream = window.localStream \n      const tracks = stream.getTracks();\n      tracks.forEach(function (track) {\n        track.stop();\n      });\n    }\n  }\n\n  topBannerBehaviour(moveDown) {\n    const topBannerComponent = select('.top-banner-component', document.body)\n    const mainEl = select('.page-productDetails-Eyewear .js-main', document.body)\n    const productDetailsContent = select('.product-details__content', document.body)\n\n    if (topBannerComponent && mainEl) {\n      const topBannerComponentHeight = topBannerComponent.getBoundingClientRect().height\n      mainEl.style.paddingTop = `${moveDown ? topBannerComponentHeight: 0}px`\n      if (productDetailsContent) {\n        productDetailsContent.style.transform = `translate3d(0, ${moveDown ? -topBannerComponentHeight: 0}px, 0)`\n      }\n    }\n  }\n\n  /*\n  Accessibility request (ONE-15590) : Change DOM order to make it match the visual order\n  */\n  vtoVariantsBehaviour(order = true) {\n    const parentNode = select('.product-details__text')\n    const title = select('.product-details__head')\n    const bar = select('.product-details__bar')\n    const par = select('.js-product-details-more-wrapper')\n    const backorder = select('.product-details__backorder')\n    const option = select('.product-details__option')\n    const description = selectAll('.product-details__description', title)\n    const moreDetails = select('p.product-details__more')\n    \n    if (order && parentNode) {\n      parentNode.insertBefore(bar, option)\n      const newNode = document.createElement('p')\n      newNode.className = 'product-details__description-wrapper'\n      if(description) {\n        description.forEach(d => {\n          newNode.insertBefore(d, null)\n          parentNode.insertBefore(newNode, bar)\n        })\n      }\n\n    } else {\n      const tmpNode = select('.product-details__description-wrapper', parentNode)\n      const tmpDescription = selectAll('.product-details__description', parentNode)\n      if(tmpDescription) {\n        tmpDescription.forEach(d => {\n          title.insertBefore(d, null)\n        })\n      }\n      if(tmpNode)\n        tmpNode.remove()\n\n      parentNode.insertBefore(title, backorder)\n      parentNode.insertBefore(bar, backorder)\n      if (moreDetails) {\n        parentNode.insertBefore(moreDetails, bar)\n      }\n      if (par) {\n        parentNode.insertBefore(par, bar)\n      }\n    }\n  }\n\n  onResize() {\n    Manager.publish(VTO_PDP_STYLE_UPDATE)\n    const mainEl = select('.page-productDetails-Eyewear .js-main', document.body)\n    if (mainEl) {\n      if (getMq() === 'desktop') {\n        this.vtoVariantsBehaviour(false)\n        this.topBannerBehaviour(false)\n      } else {\n        this.topBannerBehaviour(true)\n      }\n    }\n  }\n\n  onOrientationChange() {\n    const {showing} = this.props\n    if (showing && isMobile() && this.container) {\n      const {top, left} = this.container.getBoundingClientRect()\n      window.scrollTo({\n        top,\n        left,\n        options: {\n          behavior: 'smooth'\n        }\n      })\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.video) {\n      this.video.srcObject = null\n    }\n    window.removeEventListener('orientationchange', this.onOrientationChange)\n    zoomButton.style.display = null\n    this.topBannerBehaviour(false)\n  }\n\n  close() {\n    this.vtoVariantsBehaviour(false)\n    const {dispatch} = this.props\n \n    const vtoOpenCTA = select('button', select('.vto-open__wrapper'))\n    if (vtoOpenCTA)\n      vtoOpenCTA.classList.remove(\"buttonDisabled\")\n\n    window.vtoClose()\n    vtoCloseClickAction({dispatch})\n    vtoVideoStopAction({dispatch})\n\n    Manager.publish(VTO_PDP_STYLE_UPDATE)\n    let zoomButton = select('.js-product-details-zoom')\n    if (zoomButton)\n      zoomButton.style.display = null\n      \n    const product_detail_scroll = select('.product-details .product-details-scroll')\n    if (product_detail_scroll) {\n      product_detail_scroll.style.visibility = 'visible'\n    }\n    this.stopCamera()\n  }\n\n  retrySetup() {\n    const { product, dispatch } = this.props\n    if (this.props.product.vto.category === 'eyewear') {\n      const loader = new Loader(this.container, { delay: 0 })\n      Manager.publish('VTO_IS_SHOWING', product)\n      vtoReadyAction({ dispatch })\n    }\n  }\n\n  componentWillReceiveProps(newProps) {\n    const {product} = this.props\n    const {vto} = newProps.product\n    if (vto && vto !== product.vto) {\n      this.setSelectedMockup()\n    }\n  }\n\n  setSelectedMockup() {\n    const sampleMockup = this.props.facecakeProps.sampleProductIds\n    const productIndex = sampleMockup.findIndex(items=> items == selectedMockup)\n    if(productIndex != (sampleMockup.length - 1)) { \n      selectedMockup = sampleMockup[productIndex + 1]\n    } else {\n      selectedMockup = sampleMockup[0]\n    }\n  }\n\n getProductID = () => {\n    if(this.props.facecakeProps.isFacecakeMockupEnabled) {\n      return selectedMockup\n    } else {\n      return this.props.product.code\n    }\n  }\n\n  getEyewearDimensions(type) {\n    const container = select('.vto-eyewear-container')\n    if(container != null) {\n      return window.getComputedStyle(container)[type]\n    }\n    else return ''\n  }\n\n  render() {\n    let {orientation, error} = this.props\n    let sizeProps = {}\n    let params = '?lang='+dataLayer[0].locale+'&title='+encodeURIComponent(`Try on ${this.props.product.basic.name} ${this.props.product.color? this.props.product.color.name:''}`)\n    +'&fallbackContent='+encodeURIComponent(config.vto.labels.canvasLabel)+'&cameraErrorMsg='+encodeURIComponent(config.locales.vto.permissionDenied)\n    +'&generalErrorMsg='+encodeURIComponent(config.vto.labels.error);\n\n    return (\n      <div ref={node => this.container = node}\n        className={`vto__wrapper ${orientation.portrait ? 'portrait' : 'landscape'}`}>\n        <ButtonClose ref={node => this.button = node} close={() => this.close(this.props)}/>\n        {this.props.product.vto.category === 'eyewear' ?\n          <div className=\"vto-eyewear-container\">\n            <iframe className=\"vto_iframe\" referrerpolicy=\"strict-origin\"\n              height={this.getEyewearDimensions('height')}\n              aria-hidden=\"false\" \n              title={`${config.locales.vto.tryOn} ${this.props.product.basic.name} ${this.props.product.color? this.props.product.color.name:''}`}\n              tabIndex='-1' src={this.props.facecakeProps.tryOnUrl + '/' + this.props.product.baseProduct+params}\n              scrolling=\"no\"\n              allow=\"camera;\"\n            >\n            </iframe>\n          </div>\n          :\n          null }\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}