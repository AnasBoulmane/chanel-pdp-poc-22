{"version":3,"sources":["webpack:///./patterns/scripts/modules/camera.js","webpack:///./patterns/scripts/ui/cto/Components/cart.jsx","webpack:///./patterns/scripts/ui/cto/Components/cto.jsx","webpack:///./patterns/scripts/ui/cto/Components/errorProduct.jsx","webpack:///./patterns/scripts/ui/cto/Components/filters.jsx","webpack:///./patterns/scripts/ui/cto/Components/finish.jsx","webpack:///./patterns/scripts/ui/cto/Components/finishes.jsx","webpack:///./patterns/scripts/ui/cto/Components/harmonies.jsx","webpack:///./patterns/scripts/ui/cto/Components/harmony.jsx","webpack:///./patterns/scripts/ui/cto/Components/intensitySwitch.jsx","webpack:///./patterns/scripts/ui/cto/Components/intensitySwitchButton.jsx","webpack:///./patterns/scripts/ui/cto/Components/module.jsx","webpack:///./patterns/scripts/ui/cto/Components/product.jsx","webpack:///./patterns/scripts/ui/cto/Components/removeFilters.jsx","webpack:///./patterns/scripts/ui/cto/Components/shade.jsx","webpack:///./patterns/scripts/ui/cto/Components/shadeList.jsx","webpack:///./patterns/scripts/ui/cto/Components/tab.jsx","webpack:///./patterns/scripts/ui/cto/Components/tabs.jsx","webpack:///./patterns/scripts/ui/cto/Redux/configureStore.js","webpack:///./patterns/scripts/ui/cto/Redux/reducers.js","webpack:///./patterns/scripts/ui/cto/index.js","webpack:///./patterns/scripts/ui/vto/Components/Icon.jsx","webpack:///./patterns/scripts/ui/vto/Redux/actions.js"],"names":["navigator","mediaDevices","enumerateDevices","console","log","then","devices","exists","forEach","device","kind","document","body","classList","add","catch","err","name","message","ButtonCart","Component","render","isProductAdded","queryString","props","code","cartArray","window","localStorage","getItem","addToBag","config","cto","dedicated","indexOf","cartId","store","configureStore","isItChrome","identifyBrowser","includes","ChanelTryOn","constructor","currentLanguage","state","windowWidth","innerWidth","iFrame","select","container","contentWindow","canvas","width","height","getComputedStyle","style","scale","Math","max","parseInt","replace","getBoundingClientRect","position","left","top","transform","isMobile","ipadLandscapeCheck","setVideoDimensions","key","val","setState","noCamera","currentLipProduct","data","categories","products","ecommerceSite","initialLipsProducts","lipsProducts","lipsFilters","currentEyeshadowProduct","EyeshadowProducts","currentEyelinerProduct","EyelinerProducts","isLoaded","errorTab","errorType","isFilterBarEnabled","isfilterBarEnabled","hidePrice","categoryType","filterFlag","eyeshadowFilters","initialEyeshadowProducts","lastSelectedProduct","selectedShadesList","invalidLipsProduct","invalidEyeshadowsProduct","invalidEyelinersProduct","eyelinerFilters","initialEyelinerProducts","dlLipsHarmonyCodes","dlEyeshadowsHarmonyCodes","dlEyelinersHarmonyCodes","dlFinishCodes","dlFiltersCodes","appliedSkuCodes","prevLipsSkuCode","prevEyeshadowsSkuCode","prevEyelinersSkuCode","removeFilters","errorMessageCLass","showTimer","showPicture","backClicked","windowHeight","closeShade","bind","updateFilterFlag","showPrice","updateShade","setFilter","filterProducts","changeTab","noShade","clearProduct","toggleRemoveFilter","componentDidMount","sdk","YMK","productContainer","calendar","contains","remove","addEventListener","dispatch","type","setAy11","setAttribute","iframeTitle","canvasEl","querySelector","dataRadiumDiv","getElementsByTagName","border","objectFit","screen","setTimeout","applyMakeupBySku","ymkContainer","invalidProduct","once","landScapeError","componentDidUpdate","prevProps","prevState","isiOS","setCanvasDimensionsOnResize","componentWillUnmount","callback","noCameraMessage","YMKvideo","ctoContainerInner","ctoContainer","ymkVideo","canvasEls","selectAll","items","getAttribute","iframeCanvasEls","querySelectorAll","ctoText","focus","canvasText","createElement","textElem","createTextNode","appendChild","filter","filters","finishAppliedCode","harmonyAppliedCodes","action","codesforDL","category","cat","toLowerCase","find","f","push","length","x","toString","join","dataLayer","harmoniesListMessage","harmonyCountText","harmoniesContainer","harmonyCount","harmonyText","shadesAvailable","innerText","some","p","harmonies","finishes","close","ReactDOM","unmountComponentAtNode","vtoSDKCloseAction","Promise","resolve","CTAElem","product","selectedCategory","selectedSkuCode","prevSkuCode","sku","ctoProduct","currentLipsProduct","currentEyeshadowsProduct","tabChanged","currentEyelinersProduct","isWideScreen","isMobileScreen","isTabletScreen","catDiv","catFillter","updateAllShades","productCode","_this","reset","item","undefined","prodInnerContainer","crossDataLayerPush","appliedSkus","remainingSku","priceFlag","toggleIntensity","clickedCategory","shadeLipsBlock","shadeEyeshadowBlock","shadeEyelinersBlock","addInitialProduct","hidden","filterWrap","filterBlock","Object","keys","newfilterFlag","toggle","removeFilterObject","errorPresent","value","elem","landscapeModal","children","orientation","insertAdjacentHTML","rotate","removeAttribute","innerHTML","vto","labels","deniedTitle","deniedMessage","values","variants","error","closeBottom","closeBottomSmall","innerHeight","Manager","subscribe","WINDOW_WAS_RESIZED","updateValue","hasTwoIntensities","openFilter","isQRcontext","price","disclaimerText","disclaimerTextTitle","disclaimerURL","disclaimerTextMoreInfo","theme","connect","errorProduct","errorMsgDLPush","errorMessage","noResults","Filters","e","setRemoveFilterBlur","showFilter","finishWidth","toggleFilters","windowResized","toggleProductDetails","filterToggleDLPush","flag","productDetails","fakeSelected","setButtonWidth","prevMax","offsetWidth","abs","showfilter","filterHeader","removeFilterCTA","scrollWidth","clientWidth","filterWrapClass","filterClasses","iconClass","filterIcon","newFiltersHeading","currentFilters","index","Finish","toggleFinish","finish","isOnFilterList","isSelected","finishStyle","marginRight","margin","hasProduct","Finishes","sliderList","sliderRef","current","initialX","touches","clientX","xOffset","startX","changedTouches","pageX","finishesRef","scrolling","preventDefault","slider","parent","sliderWidth","round","currentX","elasticOffset","TweenLite","set","initialPosition","fromTo","delta","React","createRef","leftArrow","rightArrow","goToNextFinish","goToPrevFinish","currentRight","onMouseDown","onMouseLeave","onMouseMove","updateAccessibilityState","ifArrowvisible","removeEventListener","sliderBox","limit","offset","getCollection","isBetween","tempMargin","finishTab","i","distance","min","finishesBox","parentSize","finishesCollection","finishesDimensions","floor","right","dest","current_right","onComplete","firstElementChild","getTabVisibility","shade","rect","sliderBlock","sliderBlockRect","isInViewport","categoryName","collections","visibility","firstChild","leftHiddenItems","rightHiddenItems","finishScreenReaderText","finishCategory","map","previousFinishes","nextFinishes","Harmonies","harmoniesRef","harmonySize","lateralMargin","mobileBp","isSet","goToNextHarmony","goToPrevHarmony","initializeCarousel","harmoniesTab","harmoniesBox","harmonyDimensions","harmonyScreenReaderText","previousHarmonies","nextHarmonies","Harmony","shouldComponentUpdate","nextProps","harmony","hexColor","toggleHarmony","hasHexCode","lastHarmonyMargin","harmonyStyle","borderColor","backgroundColor","color","IntensitySwitch","active","componentWillReceiveProps","newProps","mainSku","altSku","screenReaderText","IntensitySwitchButton","toggleButton","ariaPressed","i18nIntensity","light","intense","Module","snapshot","imgURL","imgSrc","context","cameraIcon","shadeContainer","timerComplete","pauseTimer","photoCaptureClose","lipsName","finishesLips","productsEyeshadow","eyeshadowsName","harmoniesEyeshadow","finishesEyeshadows","productsEyeliners","eyelinersName","harmoniesEyeliners","finishesEyeliners","CtoContext","Product","pCode","substring","getWishlistNav","renderCartIcon","getRightNav","getImage","images","imageUrl","result","assetType","url","defaultImg","pName","isWishlist","wishlistCTO","hiddenTxt","wishlistAdd","wishlistRemove","addToWishlist","removeFromWishlist","wishlistData","wishlistIcon","wishlistButton","JSON","stringify","setProductTop","parentContainer","productContainerHeight","clientHeight","moveToShade","selectedButton","image","basic","backToShadeText","backtoShadeText","isBoutiqueApp","jsConfigSecond","ecom","disclaimerTextPriceInfo","RemoveFilters","enabled","clickRemoveFilter","removeFilterTxt","newRemoveFilter","translationArray","lips","eyeshadows","eyeliners","removeFilterTxtTitle","categoryTransalation","small_txt","actif","Shade","changeShade","stopPropagation","isTabClick","screenX","screenY","isTrusted","shadeInfo","drag","click","slideToShade","target","arrowClick","productInfo","setArrowClick","getErrorID","classvalue","getShadename","lipsProductCode","eyeshadowsProductCode","eyelinersProductCode","id","prodID","errorMessageID","invalidExists","hexValue","isTablet","ShadeList","fakePos","selectedShadeSize","shades","center","halfMargin","shadeTab","shadeSize","diffX","toggleAltCross","el","closestIndex","findIndex","slice","slideToCross","wideScreen","selectedTab","setfakePos","isPotrait","matchMedia","matches","keyCode","which","getCurrentProduct","shadeArray","isCrossFixedLips","isCrossFixedEyeshadows","isCrossFixedEyeliners","crossMargin","handleResize","goToNextShade","goToPrevShade","shadesRef","btnRight","btnLeft","onDblClick","availHeight","selectedShadeSku","currentView","currentProduct","currentProd","checkTabFocus","firstShadeDistance","hasError","crossPosition","to","shadesTab","selectedShade","nextElementSibling","rightBtn","leftBtn","shadesBox","currentShade","shadesDimensions","previousSibling","isFixedCrossedDisplayed","isListShortened","tabName","shadeName","getSelectedShades","showCameraIcon","enablePictureCTODedicatedPage","removeCurrentShade","pointerEvents","cameraText","cameraClicked","previousShades","nextShades","Tab","clickOnTab","catName","currentTab","hasAppliedDotClass","hasOwnProperty","Tabs","translationCatName","loggerMiddleware","createLogger","predicate","process","appliedMiddleWare","applyMiddleware","preloadedStore","createStore","reducers","ready","combineReducers","ctoWrapper","yapi","currentLocale","desktopBp","checkForCamera","manageQR","ymkAsyncInit","bodyWidth","flexWidth","flexWidthRatio","flexWidthBig","documentElement","init","hideUI","autoOpen","setLaunchButton","hero","button","tryOnLegal","isActive","bindTryOnButtonEvents","currentCookie","getCookie","parse","ctoDedicatedTryOnAccepted","CTOButtonAnalyticsPush","open","manageData","is4ShadowFeatureFlipping","is4ShadowProduct","ctoIntensity","lipsFinishes","filterCode","URL","location","href","medium","searchParams","get","campaign","list","setSubCategoryAnalytics","subcategory","counter","interval","setInterval","sub_category_level3","clearInterval","makeup","yapiPromise","sdkPromise","scriptjs","all","Icon","className","targetVersion","cameraErrorResolvedAction","ACTIONS","CAMERA_ERROR_RESOLVED","vtoVideoStartAction","VTO_VIDEO_START","vtoVideoStopAction","VTO_VIDEO_STOP","vtoCameraOpenAction","VTO_BTN_CLICKED","vtoCameraStoppedAction","VTO_CAMERA_STOPPED","vtoReadyAction","VTO_READY","vtoCloseAction","VTO_CLOSE","vtoStream","getTracks","track","stop","onVtoClosed","getState","publish","VTO_PDP_STYLE_UPDATE","layoutChangeAction","LAYOUT_CHANGE","payload","productChangeAction","PRODUCT_CHANGE","vtoOpenAction","VTO_OPEN","orientationChangeAction","event","ORIENTATION_CHANGE","angle","vtoCloseClickAction","VTO_CLOSE_CLICK","errorAction","ERROR","vtoCameraNotAvailableAction","CameraNotAvailable","SDK_CLOSED"],"mappings":"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","file":"chunks/cto.js?v=3.23.0","sourcesContent":["export default function () {\n\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n        console.log(\"enumerateDevices() not supported.\");\n        //return;\n    }\n\n    // List cameras and microphones.\n\n    if (navigator.mediaDevices) {\n      navigator.mediaDevices.enumerateDevices()\n          .then(function (devices) {\n\n              let exists = false\n\n              devices.forEach(function (device) {\n                  exists |= device.kind === 'videoinput'\n              });\n\n              if(exists) {\n                  console.log('Camera detected. vto can be enabled on this device')\n                  document.body.classList.add('camera-ok');\n              }else {\n                  console.log('Camera undetected. vto is disabled on this device')\n                  document.body.classList.add('no-camera');\n              }\n          })\n          .catch(function (err) {\n              console.log(err.name + \": \" + err.message);\n          });\n    }\n}","import React,  { Component } from 'react'\nimport Icon from '../../vto/Components/Icon'\n\n\nclass ButtonCart extends Component {\n\n  render () {\n   let isProductAdded = false\n   const queryString = 'sku='+this.props.code+'&quickView=true'\n   const cartArray = window.localStorage.getItem('cartCTO')\n   const addToBag = window.config.cto.dedicated.addToBag\n   if (cartArray && cartArray.indexOf(this.props.code)!==-1) {\n     isProductAdded = true\n   }\n\n    return (\n      <button className={`button icon is-large vto-cart nav-item`  + (isProductAdded ? ' already-has-product' : '')} type=\"button\" data-id={this.props.code} data-popup-target=\"quickview\" data-popup-query={queryString} aria-haspopup=\"dialog\" aria-describedby={this.props.cartId} data-modal-title={this.props.name}>\n         <Icon name=\"cto_new_basket\" />\n        <span className=\"is-sr-only\">{addToBag}</span>\n     </button> \n    )\n  }\n}\n\nexport default ButtonCart\n","import React, { Component } from 'react'\nimport ReactDOM from 'react-dom';\nimport Module from './module'\nimport Product from './product'\nimport { Manager, WINDOW_WAS_RESIZED } from \"../../../lib/events\"\nimport { select, selectAll } from 'lib/selectors'\nimport configureStore from '../Redux/configureStore'\nconst store = configureStore()\nimport { connect } from 'react-redux'\nimport { vtoSDKCloseAction } from \"../../vto/Redux/actions\"\nimport Close from '../../vto/Components/Close'\nimport ErrorProduct from './errorProduct'\nimport IntensitySwitch from './intensitySwitch'\nimport { isMobileScreen, isTabletScreen, isWideScreen } from 'lib/helpers'\nimport PhotoCapture from './photoCapture';\nimport {CtoContext} from './ctoContext'\nimport { identifyBrowser, isiOS, isMobile } from '../../../lib/helpers';\n\nconst isItChrome = identifyBrowser().includes('Chrome')\nclass ChanelTryOn extends Component {\n  productContainer = ''\n  disclaimerURL = `https://services.chanel.com/${window.config.currentLanguage}/policies/legal/6-prices`\n  constructor(props) {\n    super(props)\n    this.state = {\n      noCamera: false,\n      currentLipProduct: this.props.data.categories[0].products[0],\n      ecommerceSite: this.props.data.ecommerceSite,\n      initialLipsProducts: this.props.data.categories[0].products,\n      lipsProducts: this.props.data.categories[0].products,\n      lipsFilters: [],\n      currentEyeshadowProduct: this.props.data.categories[1].products[0],\n      EyeshadowProducts: this.props.data.categories[1].products,\n      currentEyelinerProduct: this.props.data.categories[2].products[0],\n      EyelinerProducts: this.props.data.categories[2].products,\n      isLoaded: false,\n      errorTab: {'Lips': false, 'Eyeshadows': false,'Eyeliners': false},\n      errorType:  {'Lips': '', 'Eyeshadows': '','Eyeliners': ''},\n      isFilterBarEnabled: this.props.data.isfilterBarEnabled,\n      hidePrice : this.props.data.categories[0].hidePrice,\n      categoryType: 'Lips',\n      filterFlag : false,\n      eyeshadowFilters: [],\n      initialEyeshadowProducts: this.props.data.categories[1].products,\n      lastSelectedProduct: this.props.data.categories[0].products[0],\n      selectedShadesList: [{'currentLipsProduct': this.props.data.categories[0].products[0]},{'currentEyeshadowsProduct': ''},{'currentEyelinersProduct': ''}],\n      invalidLipsProduct: '',\n      invalidEyeshadowsProduct: '',\n      invalidEyelinersProduct: '',\n      eyelinerFilters: [],\n      initialEyelinerProducts: this.props.data.categories[2].products,\n      dlLipsHarmonyCodes: [],\n      dlEyeshadowsHarmonyCodes: [],\n      dlEyelinersHarmonyCodes: [],\n      dlFinishCodes: [],\n      dlFiltersCodes: [],\n      appliedSkuCodes: [this.props.data.categories[0].products[0].code],\n      prevLipsSkuCode: this.props.data.categories[0].products[0].code,\n      prevEyeshadowsSkuCode: this.props.data.categories[1].products[0].code,\n      prevEyelinersSkuCode: this.props.data.categories[2].products[0].code,\n      removeFilters: {'Lips': false, 'Eyeshadows' : false, 'Eyeliners' : false},\n      errorMessageCLass: '',\n      showTimer: false,\n      showPicture: false,\n      backClicked: false,\n      windowWidth: window.innerWidth,\n      windowHeight: 0\n    }\n    this.closeShade = this.closeShade.bind(this)\n    this.updateFilterFlag = this.updateFilterFlag.bind(this)\n    this.showPrice = this.showPrice.bind(this)\n    this.updateShade = this.updateShade.bind(this)\n    this.setFilter = this.setFilter.bind(this)\n    this.filterProducts = this.filterProducts.bind(this)\n    this.changeTab = this.changeTab.bind(this)\n    this.noShade = this.noShade.bind(this)\n    this.clearProduct = this.clearProduct.bind(this)\n    this.toggleRemoveFilter = this.toggleRemoveFilter.bind(this)\n    this.setFilter = this.setFilter.bind(this)\n  }\n\n  componentDidMount() {\n    const sdk = window.YMK\n    document.body.classList.add('cto-open')\n    this.productContainer = select('.cto__product')\n    const calendar = select('#admin-calendar')\n    if (calendar) {\n      if (select('body').classList.contains(\".page-chanel-try-on.cto-open\") > -1) {\n        calendar.remove()\n      }\n    }\n    sdk.addEventListener('noCamera', () => {\n      this.setState({ noCamera: true })\n    })\n\n    sdk.addEventListener('loaded', () => {\n      store.dispatch({\n        type: 'CTO_READY'\n      })\n      this.setState({\n        isLoaded: true\n      })\n\n      this.setAy11()\n      \n      const iFrame = select('#YMK-module-iframe')\n      if (iFrame) {\n        iFrame.setAttribute('title', window.config.cto.dedicated.iframeTitle)\n        const canvasEl = iFrame.contentWindow.document.querySelector('#canvas')\n        var dataRadiumDiv = iFrame.contentWindow.document.querySelector('.frame-content').getElementsByTagName('div')[0]\n        dataRadiumDiv.style.border = 'none'\n        dataRadiumDiv.style.width = '100%'\n        if (select('body').classList.contains('firefox')) canvasEl.style.objectFit = 'cover'\n        if (screen.width < window.innerWidth) {\n         if (canvasEl) {\n           setTimeout(() => {\n             canvasEl.style.width='100%'\n           }, 200)\n         }\n          iFrame.contentWindow.document.querySelector('.frame-content').getElementsByTagName('div')[0].style.width='auto'\n        }\n   \n        \n      }\n      if(isMobile() && this.ipadLandscapeCheck()){\n        this.setVideoDimensions()\n    }\n      YMK.applyMakeupBySku(this.props.data.categories[0].products[0].code)\n      const ymkContainer = select('.YMK-module')\n      if (ymkContainer) {\n        ymkContainer.classList.add('ymk-loaded')\n      }\n    })\n\n    sdk.addEventListener('invalidProduct', () => {\n      const errorTab = this.state.errorTab\n      errorTab[this.state.categoryType] = true\n      this.setState({\n        errorTab\n      })\n      this.invalidProduct()\n    }, { once: true })\n\n\n    this.productContainer ? this.productContainer.classList.remove('is-softly-hidden') : ''\n    this.landScapeError()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.showTimer !== prevState.showTimer) {\n      if (!isiOS()) {\n        this.setCanvasDimensionsOnResize()\n      }\n      if (this.state.showTimer && isMobile() && this.ipadLandscapeCheck()) {\n        this.setVideoDimensions()\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.setState = (state, callback) => {\n      return;\n    } \n    this.landScapeError(false)\n    this.noCameraMessage()\n  }\n \n  setVideoDimensions() {\n    const YMKvideo = select('#YMK-video-input')\n    const ctoContainerInner = select('.cto__container--inner')\n    if (YMKvideo && ctoContainerInner) {\n      YMKvideo.style.height = ctoContainerInner.getBoundingClientRect().height + 'px'\n      YMKvideo.style.width = ctoContainerInner.getBoundingClientRect().width + 'px'\n    }\n  }\n\n  ipadLandscapeCheck = () => {\n    return (this.state.windowWidth < 961 && window.innerWidth > 1000)\n  }\n\n  setAy11() {\n    const ctoContainer = select('.cto__container')\n    const iFrame = select('#YMK-module-iframe')\n    if (ctoContainer) {\n      const ymkVideo = select('#YMK-video-input')\n      if (ymkVideo) {\n        ymkVideo.setAttribute(\"aria-hidden\", true)\n        ymkVideo.setAttribute(\"tabindex\", \"-1\")\n      }\n      const canvasEls = selectAll('canvas', ctoContainer)\n      canvasEls.forEach((items) => {\n        if (items.getAttribute(\"id\") != 'canvas') {\n          items.setAttribute(\"aria-hidden\", true)\n          items.setAttribute(\"tabindex\", \"-1\")\n        }\n      })\n      const iframeCanvasEls = iFrame.contentWindow.document.querySelectorAll('canvas')\n      iframeCanvasEls.forEach((items) => {\n        if (items.getAttribute(\"id\") != 'canvas') {\n          items.setAttribute(\"aria-hidden\", true)\n          items.setAttribute(\"tabindex\", \"-1\")\n        }\n      })\n      const ctoText = select('.ctoText', ctoContainer)\n      if (ctoText && window.innerWidth > 960) {\n        ctoText.focus()\n      }\n    }\n    if (iFrame) {\n      const canvasEl = iFrame.contentWindow.document.querySelector('#canvas')\n      const canvasText = document.createElement(\"p\")\n      const textElem = document.createTextNode(window.config.cto.dedicated.canvasText)\n      canvasText.appendChild(textElem)\n      canvasEl.appendChild(canvasText)\n    }\n  }\n\n  setFilter(filter, type, categoryType) {\n    let filters, finishAppliedCode, harmonyAppliedCodes, action\n    let codesforDL = ''\n    const code = filter.code\n    const category = this.state.categoryType\n    const cat = category.toLowerCase()\n\n    this.toggleRemoveFilter(true)\n\n    if (category === 'Lips') {\n      filters = this.state.lipsFilters\n    }\n    if (category === 'Eyeshadows') {\n      filters = this.state.eyeshadowFilters\n    }\n    if (category === 'Eyeliners') {\n      filters = this.state.eyelinerFilters\n    }\n    // if already existing, remove filter\n    if (filters.find(f => f.code === code)) {\n      filters = filters.filter(f => f.code !== code)\n    }\n    else {\n      filters.push({ type, code })\n    }\n    if (category === 'Lips') {\n      this.setState({ lipsFilters: filters }, () => {\n        if (filters.length > 0) this.filterProducts(category)\n        else this.setState({ lipsProducts: this.state.initialLipsProducts })\n      })\n    }\n    if (category === 'Eyeshadows') {\n      this.setState({ eyeshadowFilters: filters }, () => {\n        if (filters.length > 0) this.filterProducts(category)\n        else this.setState({ EyeshadowProducts: this.state.initialEyeshadowProducts })\n      })\n    }\n    if (category === 'Eyeliners') {\n      this.setState({ eyelinerFilters: filters }, () => {\n        if (filters.length > 0) this.filterProducts(category)\n        else this.setState({ EyelinerProducts: this.state.initialEyelinerProducts })\n      })\n    }\n\n    if (type === 'finish') {\n      finishAppliedCode = this.state.dlFiltersCodes\n      if (finishAppliedCode.find(f => f === code)) {\n        finishAppliedCode = finishAppliedCode.filter(x => x !== code)\n      }\n      else {\n        finishAppliedCode.push(code)\n      }\n      this.setState({ dlFiltersCodes : finishAppliedCode })\n      if (finishAppliedCode.length === 1) {\n        codesforDL = finishAppliedCode.toString()\n      }\n      else if (finishAppliedCode.length > 1) {\n        codesforDL = finishAppliedCode.join('|')\n      }\n    }\n    if (type === 'harmony') {\n      if (category === 'Lips') {\n        harmonyAppliedCodes = this.state.dlFiltersCodes\n      }\n      if (category === 'Eyeshadows') {\n        harmonyAppliedCodes = this.state.dlEyeshadowsHarmonyCodes\n      }\n      if (category === 'Eyeliners') {\n        harmonyAppliedCodes = this.state.dlEyelinersHarmonyCodes\n      }\n      \n      if (harmonyAppliedCodes.find(f => f === code)) {\n        harmonyAppliedCodes = harmonyAppliedCodes.filter(x => x !== code)\n      }\n      else {\n        harmonyAppliedCodes.push(code)\n      }\n      if (category === 'Lips') {\n        this.setState({ dlFiltersCodes : harmonyAppliedCodes })\n      }\n      if (category === 'Eyeshadows') {\n        this.setState({ dlEyeshadowsHarmonyCodes : harmonyAppliedCodes })\n      }\n      if (category === 'Eyeliners') {\n        this.setState({ dlEyelinersHarmonyCodes : harmonyAppliedCodes })\n      }\n      if (harmonyAppliedCodes.length === 1) {\n        codesforDL = harmonyAppliedCodes.toString()\n      }\n      else if (harmonyAppliedCodes.length > 1) {\n        codesforDL = harmonyAppliedCodes.join('|')\n      }\n    }\n    action = `applied_filters_${cat}`\n\n    if (filters.length === 0)\n    this.toggleRemoveFilter(false)\n\n    dataLayer.push({ \n      'eventCategory': 'vto',\n      'eventAction': action,\n      'eventLabel': codesforDL,\n      'event': 'uaevent'\n    })\n\n    setTimeout(() => {\n      const harmoniesListMessage = select(`.${categoryType} .shadeCount`)\n      const harmonyCountText = select(`.${categoryType} .harmonyCount`)\n      const harmoniesContainer = select(`.${categoryType} .shades__container`)\n      if (!harmonyCountText && harmoniesContainer) { \n        const harmonyCount = document.createElement(\"p\")\n        harmonyCount.classList = 'is-sr-only harmonyCount'\n        const harmonyText = document.createTextNode(`${categoryType == 'Lips' ? this.state.lipsProducts.length : categoryType == 'Eyeshadows' ? this.state.EyeshadowProducts.length : this.state.EyelinerProducts.length } ${window.config.cto.dedicated.shadesAvailable}`)\n        harmonyCount.appendChild(harmonyText)\n        harmoniesListMessage.appendChild(harmonyCount)\n      }\n      else {\n        harmonyCountText.innerText =  `${categoryType == 'Lips' ? this.state.lipsProducts.length : categoryType == 'Eyeshadows' ? this.state.EyeshadowProducts.length : this.state.EyelinerProducts.length } ${window.config.cto.dedicated.shadesAvailable}`\n      }\n    }, 100);\n  }\n\n  filterProducts(category) {\n    let products\n    let filters\n    if (category === 'Lips') {\n      products = this.state.initialLipsProducts\n      filters = this.state.lipsFilters\n    }\n    if (category === 'Eyeshadows') {\n      products = this.state.initialEyeshadowProducts\n      filters = this.state.eyeshadowFilters\n    }\n    if (category === 'Eyeliners') {\n      products = this.state.initialEyelinerProducts\n      filters = this.state.eyelinerFilters\n    }\n\n    if (filters.some(f =>f.type === 'harmony')) {\n      products = products.filter(p => {\n        return filters.some(f => {\n          if (f.type === 'harmony') {\n            if (p.harmonies) {\n              if (p.harmonies.includes(f.code)) return true\n            }\n          }\n        })\n      })\n    }\n\n    if (filters.some(f =>f.type === 'finish')) {\n      products = products.filter(p => {\n        return filters.some(f => {\n          if (f.type === 'finish') {\n            if (p.finishes) {\n              if (p.finishes.includes(f.code)) return true\n            }\n          }\n        })\n      })\n    }\n\n    const errorTab = this.state.errorTab\n    errorTab[category] = false\n    const errorType = this.state.errorType\n    errorType[category] = ''\n\n    if (category === 'Lips') {\n      this.setState({ lipsProducts: products }, () => {\n        if (products.length === 0) this.noShade()\n        else this.setState({ errorTab, errorType })\n      })}\n    if (category === 'Eyeshadows') {\n      this.setState({ EyeshadowProducts: products }, () => {\n        if (products.length === 0) this.noShade()\n        else this.setState({ errorTab, errorType })\n    })}\n    if (category === 'Eyeliners') {\n      this.setState({ EyelinerProducts: products }, () => {\n        if (products.length === 0) this.noShade()\n        else this.setState({ errorTab, errorType })\n    })}\n  }\n\n  setCanvasDimensionsOnResize = () => {\n    const iFrame = select('#YMK-module-iframe', this.container).contentWindow.document\n    const canvas = select('#canvas', iFrame)\n    const { width, height } = window.getComputedStyle(select('#YMK-module'))\n    select('.frame-content>div', iFrame).style.height = height\n    select('.frame-content>div', iFrame).style.width = width\n\n    if (canvas) {\n      const scale = Math.max(\n        parseInt(width, 10) / parseInt(canvas.style.width.includes('px') ? canvas.style.width.replace('px', '') : canvas.getBoundingClientRect().width,10)  ,\n        parseInt(height, 10) / parseInt(canvas.style.height.includes('px') ? canvas.style.height.replace('px', '') : canvas.getBoundingClientRect().height,10)\n      )\n\n      canvas.style.position = 'absolute'\n      canvas.style.left = '50%'\n      canvas.style.top = '50%'\n      canvas.style.transform = `translate3d(-50%, -50%, 0) scale(${scale})`\n     \n      if(isMobile() && this.ipadLandscapeCheck()){\n          this.setVideoDimensions()\n      }\n    }\n  }\n\n  async close(dispatch) {\n    if (dispatch.type === 'cameraCTO') {\n      YMK.close()\n    }\n    select('.virtual-makeup-component').classList.add('is-hidden')\n    ReactDOM.unmountComponentAtNode(select('.virtual-makeup-component'))\n    select('.cto-hero').classList.remove('is-hidden')\n    document.body.classList.remove('cto-open')\n    vtoSDKCloseAction(dispatch)\n    await new Promise(resolve => {\n      resolve()\n      if (localStorage['cartCTO'])\n        localStorage['cartCTO']=''\n      if (localStorage['wishlistCTO'])\n        localStorage['wishlistCTO']=''\n    })\n    const CTAElem = select('.cto-launch-button')\n    if (CTAElem) {\n      CTAElem.focus()\n    }\n  }\n\n  updateShade(product, selectedCategory) {\n    let selectedSkuCode, action, prevSkuCode\n    let codesforDL = ''\n    const sku = product.code\n    const ctoProduct = select('.cto__product')\n    if (selectedCategory === 'Lips') {\n      this.setState({ currentLipProduct: product, lastSelectedProduct: product, invalidLipsProduct: {} })\n      this.state.selectedShadesList[0].currentLipsProduct = product\n      YMK.applyMakeupBySku(product.code)\n    }\n    if (selectedCategory === 'Eyeshadows') {\n      this.setState({ currentEyeshadowProduct : product, lastSelectedProduct: product, invalidEyeshadowsProduct: {} })\n      this.state.selectedShadesList[1].currentEyeshadowsProduct = product\n      YMK.applyMakeupBySku(product.code)\n      this.state.tabChanged = true\n    }\n    if (selectedCategory === 'Eyeliners') {\n      this.setState({ currentEyelinerProduct : product, lastSelectedProduct: product, invalidEyelinersProduct: {} })\n      this.state.selectedShadesList[2].currentEyelinersProduct = product\n      YMK.applyMakeupBySku(product.code)\n    }\n    if (isWideScreen()) {\n      ctoProduct ? ctoProduct.classList.remove('is-softly-hidden') : ''\n      ctoProduct && !this.state.filterFlag ? ctoProduct.classList.remove('is-softly-hidden') : ''\n    }\n    if (isMobileScreen() || isTabletScreen()) {\n      const catDiv = select('div.'+selectedCategory)\n      if (catDiv) {\n        const catFillter = select('.show__filters', catDiv)\n        ctoProduct && catFillter===null ? ctoProduct.classList.remove('is-softly-hidden') : ''\n        ctoProduct && catFillter!==null ? ctoProduct.classList.add('is-softly-hidden') : ''\n      }\n    }\n    const errorTab = this.state.errorTab\n    errorTab[selectedCategory] = false\n    this.setState({\n      errorTab\n    })\n    selectedSkuCode = this.state.appliedSkuCodes\n    if (selectedCategory === 'Lips') {\n      prevSkuCode = this.state.prevLipsSkuCode\n    }\n    if (selectedCategory === 'Eyeshadows') {\n      prevSkuCode = this.state.prevEyeshadowsSkuCode\n    }\n    if (selectedCategory === 'Eyeliners') {\n      prevSkuCode = this.state.prevEyelinersSkuCode\n    }\n    if (selectedSkuCode.find(f => f === prevSkuCode)) {\n      selectedSkuCode = selectedSkuCode.filter(x => x !== prevSkuCode)\n    }\n    selectedSkuCode.push(sku)\n    action = 'applied_makeup'\n    this.setState({ appliedSkuCodes : selectedSkuCode })\n    if (selectedCategory === 'Lips') {\n      this.setState({ prevLipsSkuCode : sku })\n    }\n    if (selectedCategory === 'Eyeshadows') {\n      this.setState({ prevEyeshadowsSkuCode : sku })\n    }\n    if (selectedCategory === 'Eyeliners') {\n      this.setState({ prevEyelinersSkuCode : sku })\n    }\n    if (selectedSkuCode.length === 1) {\n      codesforDL = selectedSkuCode.toString()\n    }\n    else if (selectedSkuCode.length > 1) {\n      codesforDL = selectedSkuCode.join('|')\n    }\n    dataLayer.push({ \n      'eventCategory': 'vto',\n      'eventAction': action,\n      'eventLabel': codesforDL,\n      'event': 'nievent'\n    })\n  }\n\n  updateAllShades() {\n    let productCode\n    let _this = this\n    YMK.reset()\n    this.state.selectedShadesList.forEach( item => {\n      if (item.currentLipsProduct) productCode = item.currentLipsProduct.code\n      else if (item.currentEyeshadowsProduct) productCode = item.currentEyeshadowsProduct.code\n      else if (item.currentEyelinersProduct) productCode = item.currentEyelinersProduct.code\n      if (productCode && productCode !== undefined) {\n        YMK.applyMakeupBySku(productCode)\n      }\n    })\n  }\n\n  closeShade(product) {\n    const errorTab = this.state.errorTab\n    const selectedCategory = this.state.categoryType\n    errorTab[selectedCategory] = false\n    this.setState({errorTab})\n    YMK.reset()\n    this.productContainer ? this.productContainer.classList.add('is-softly-hidden') : ''\n    const prodInnerContainer = select('.cto-product-container')\n    prodInnerContainer ? this.productContainer.classList.add('is-softly-hidden') : ''\n    if (product) {\n      this.crossDataLayerPush(product.code) \n    }\n  }\n\n  noShade() {\n    const selectedCategory = this.state.categoryType\n    const errorTab = this.state.errorTab\n    errorTab[selectedCategory] = true\n    \n    const errorType = this.state.errorType\n    errorType[selectedCategory] = 'noshade'\n\n    this.setState({ errorTab, errorType })\n    if (selectedCategory === 'Lips') {\n      this.state.selectedShadesList[0].currentLipsProduct = {}\n    }\n    if (selectedCategory === 'Eyeshadows') {\n      this.state.selectedShadesList[1].currentEyeshadowsProduct = {}\n    }\n    if (selectedCategory === 'Eyeliners') {\n      this.state.selectedShadesList[2].currentEyelinersProduct = {}\n    }\n    this.updateAllShades()\n  }\n\n  crossDataLayerPush(productCode) {\n    let appliedSkus\n    const selectedCategory = this.state.categoryType\n    let remainingSku = ''\n    appliedSkus = this.state.appliedSkuCodes\n    if (appliedSkus.find(f => f === productCode)) {\n      appliedSkus = appliedSkus.filter(x => x !== productCode)\n    }\n    this.setState({ appliedSkuCodes : appliedSkus })\n    if (appliedSkus.length === 1) {\n      remainingSku = appliedSkus.toString()\n    }\n    else if (appliedSkus.length > 1) {\n      remainingSku = appliedSkus.join('|')\n    }\n    if ( selectedCategory === 'Lips') {\n      this.setState({ prevLipsSkuCode : '' })\n    }\n    if ( selectedCategory === 'Eyeshadows') {\n      this.setState({ prevEyeshadowsSkuCode : '' })\n    }\n    if ( selectedCategory === 'Eyeliners') {\n      this.setState({ prevEyelinersSkuCode : '' })\n    }\n    dataLayer.push({\n      'eventCategory': 'vto',\n      'eventAction': 'applied_makeup',\n      'eventLabel': remainingSku,\n      'event': 'uaevent'\n    })\n  }\n\n  clearProduct(category) {\n    let selectedShadesList = this.state.selectedShadesList\n    if (category === 'Lips') {\n      selectedShadesList[0].currentLipsProduct = {}\n      this.setState({ currentLipProduct: {}, selectedShadesList, invalidLipsProduct: {} })\n    }\n    if (category === 'Eyeshadows') {\n      selectedShadesList[1].currentEyeshadowsProduct = {}\n      this.setState({ currentEyeshadowProduct: {}, selectedShadesList, invalidEyeshadowsProduct: {} })\n    }\n    if (category === 'Eyeliners') {\n      selectedShadesList[2].currentEyelinersProduct = {}\n      this.setState({ currentEyelinerProduct: {}, selectedShadesList, invalidEyelinersProduct: {} })\n    }\n    this.updateAllShades()\n  }\n\n  showPrice(priceFlag) {\n    this.setState({ hidePrice: priceFlag })\n  }\n\n  toggleIntensity(sku) {\n    YMK.applyMakeupBySku(sku)\n  }\n  \n  changeTab(clickedCategory) {\n    const shadeLipsBlock = select('.Lips')\n    const shadeEyeshadowBlock = select('.Eyeshadows')\n    const shadeEyelinersBlock = select('.Eyeliners')\n    const ctoProduct = select('.cto__product')\n    let productCode\n    let addInitialProduct = this.state.appliedSkuCodes\n    let selectedShadesList = this.state.selectedShadesList\n    if (clickedCategory === 'Lips') {\n      shadeLipsBlock.classList.remove('is-hidden') \n      shadeLipsBlock.hidden = false\n      shadeEyeshadowBlock.classList.add('is-hidden')\n      shadeEyeshadowBlock.hidden = true \n      shadeEyelinersBlock.classList.add('is-hidden')\n      shadeEyelinersBlock.hidden = true \n      this.state.categoryType = clickedCategory\n      this.setState({ lastSelectedProduct: this.state.currentLipProduct })\n    }\n    if (clickedCategory === 'Eyeshadows') {\n      shadeEyeshadowBlock.classList.remove('is-hidden')\n      shadeEyeshadowBlock.hidden = false\n      shadeLipsBlock.classList.add('is-hidden')\n      shadeLipsBlock.hidden = true \n      shadeEyelinersBlock.classList.add('is-hidden')\n      shadeEyelinersBlock.hidden = true \n      this.state.categoryType = clickedCategory\n      if (selectedShadesList[1].currentEyeshadowsProduct === '') {\n        selectedShadesList[1].currentEyeshadowsProduct = this.props.data.categories[1].products[0]\n        addInitialProduct.push(this.props.data.categories[1].products[0].code)\n        this.setState({appliedSkuCodes : addInitialProduct})\n      }\n      productCode = selectedShadesList[1].currentEyeshadowsProduct.code\n      if (productCode && productCode !== undefined) {\n        YMK.applyMakeupBySku(productCode)\n      }\n      this.setState({ lastSelectedProduct: this.state.currentEyeshadowProduct })\n    }\n    if (clickedCategory === 'Eyeliners') {\n      shadeEyelinersBlock.classList.remove('is-hidden')\n      shadeEyelinersBlock.hidden = false\n      shadeEyeshadowBlock.classList.add('is-hidden')\n      shadeEyeshadowBlock.hidden = true \n      shadeLipsBlock.classList.add('is-hidden')\n      shadeLipsBlock.hidden = true \n      this.state.categoryType = clickedCategory\n      if (selectedShadesList[2].currentEyelinersProduct === '') {\n        selectedShadesList[2].currentEyelinersProduct = this.props.data.categories[2].products[0]\n        addInitialProduct.push(this.props.data.categories[2].products[0].code)\n        this.setState({appliedSkuCodes : addInitialProduct})\n      }\n      productCode = selectedShadesList[2].currentEyelinersProduct.code\n      if (productCode && productCode !== undefined) {\n        YMK.applyMakeupBySku(productCode)\n      }\n      this.setState({ lastSelectedProduct: this.state.currentEyelinerProduct })\n    }\n    if (this.state.currentEyeshadowProduct.code || this.state.currentLipProduct.code || this.state.currentEyelinerProduct.code) {\n       ctoProduct ? ctoProduct.classList.remove('is-softly-hidden') : ''\n    }\n    if ((clickedCategory === 'Eyeshadows' && !this.state.currentEyeshadowProduct.code) || (clickedCategory === 'Lips' && !this.state.currentLipProduct.code) || (clickedCategory === 'Eyeliners' && !this.state.currentEyelinerProduct.code)) {\n      if (clickedCategory === 'Lips') {\n        if (!this.state.invalidLipsProduct.code) {\n          ctoProduct ? ctoProduct.classList.add('is-softly-hidden') : ''\n        } else {\n          this.setState({lastSelectedProduct: this.state.invalidLipsProduct})\n        }\n        if (!this.state.currentLipProduct.code && this.state.invalidLipsProduct.code) {\n          ctoProduct ? ctoProduct.classList.remove('is-softly-hidden') : ''\n        }\n      }\n      if (clickedCategory === 'Eyeshadows') {\n        if (!this.state.invalidEyeshadowsProduct.code) {\n          ctoProduct ? ctoProduct.classList.add('is-softly-hidden') : ''\n        } else {\n          this.setState({lastSelectedProduct: this.state.invalidEyeshadowsProduct})\n        }\n        if (!this.state.currentEyeshadowProduct.code && this.state.invalidEyeshadowsProduct.code) {\n          ctoProduct ? ctoProduct.classList.remove('is-softly-hidden') : ''\n        }\n      }\n      if (clickedCategory === 'Eyeliners') {\n        if (!this.state.invalidEyelinersProduct.code) {\n          ctoProduct ? ctoProduct.classList.add('is-softly-hidden') : ''\n        } else {\n          this.setState({lastSelectedProduct: this.state.invalidEyelinersProduct})\n        }\n        if (!this.state.currentEyelinerProduct.code && this.state.invalidEyelinersProduct.code) {\n          ctoProduct ? ctoProduct.classList.remove('is-softly-hidden') : ''\n        }\n      }\n    }\n    if ( (isMobileScreen() || isTabletScreen()) && !isWideScreen() ) {\n      const filterWrap = select('.filters__container--inner--block.'+clickedCategory)\n      const filterBlock = select('.filters__value', filterWrap)\n      if (clickedCategory === 'Lips') {\n        if (Object.keys(selectedShadesList[0].currentLipsProduct).length === 0 || filterBlock.classList.contains('show__filters')) {\n          ctoProduct.classList.add('is-softly-hidden')\n        }\n        else {\n          ctoProduct.classList.remove('is-softly-hidden')\n        }\n         if (!this.state.currentLipProduct.code && this.state.invalidLipsProduct.code) {\n          ctoProduct && !filterBlock.classList.contains('show__filters')? ctoProduct.classList.remove('is-softly-hidden') : ''\n        }\n      }\n      if (clickedCategory === 'Eyeshadows') {\n        if (Object.keys(selectedShadesList[1].currentEyeshadowsProduct).length === 0 || filterBlock.classList.contains('show__filters')) {\n          ctoProduct.classList.add('is-softly-hidden')\n        }\n        else {\n          ctoProduct.classList.remove('is-softly-hidden')\n        }\n        if (!this.state.currentEyeshadowProduct.code && this.state.invalidEyeshadowsProduct.code) {\n          ctoProduct && !filterBlock.classList.contains('show__filters')? ctoProduct.classList.remove('is-softly-hidden') : ''\n        }\n      }\n      if (clickedCategory === 'Eyeliners') {\n        if (Object.keys(selectedShadesList[2].currentEyelinersProduct).length === 0 || filterBlock.classList.contains('show__filters')) {\n          ctoProduct.classList.add('is-softly-hidden')\n        }\n        else {\n          ctoProduct.classList.remove('is-softly-hidden')\n        }\n         if (!this.state.currentEyelinerProduct.code && this.state.invalidEyelinersProduct.code) {\n          ctoProduct && !filterBlock.classList.contains('show__filters')? ctoProduct.classList.remove('is-softly-hidden') : ''\n        }\n      }\n    }\n  }\n\n  updateFilterFlag(newfilterFlag) {\n   this.setState(\n     {\n      filterFlag: newfilterFlag\n     }\n   )\n  }\n\n  invalidProduct() {\n    const category = this.state.categoryType\n    if (this.state.errorTab[category]) {\n      YMK.reset()\n      let selectedShadesList = this.state.selectedShadesList\n      if (category === 'Lips') {\n        if (Object.keys(selectedShadesList[0].currentLipsProduct).length > 0) {\n          this.setState({ invalidLipsProduct: selectedShadesList[0].currentLipsProduct })\n        }\n        selectedShadesList[0].currentLipsProduct = {}\n        this.setState({ currentLipProduct: {}, selectedShadesList })\n      }\n      if (category === 'Eyeshadows') {\n        if (Object.keys(selectedShadesList[1].currentEyeshadowsProduct).length > 0) {\n          this.setState({invalidEyeshadowsProduct: selectedShadesList[1].currentEyeshadowsProduct})\n        }\n        selectedShadesList[1].currentEyeshadowsProduct = {}\n        this.setState({ currentEyeshadowProduct: {}, selectedShadesList })\n      }\n      if (category === 'Eyeliners') {\n        if (Object.keys(selectedShadesList[2].currentEyelinersProduct).length > 0) {\n          this.setState({invalidEyelinersProduct: selectedShadesList[2].currentEyelinersProduct})\n        }\n        selectedShadesList[2].currentEyelinersProduct = {}\n        this.setState({ currentEyelinerProduct: {}, selectedShadesList })\n      }\n      this.updateAllShades()\n    }\n  }\n\n  toggleRemoveFilter(toggle) {\n    let removeFilterObject = this.state.removeFilters\n    const category = this.state.categoryType\n    removeFilterObject[category] = toggle\n    this.setState({\n      removeFilters : removeFilterObject\n    })\n    if (toggle === false) {\n      if (category === 'Lips') {\n        this.setState({\n          lipsFilters : [],\n          lipsProducts: this.state.initialLipsProducts\n        })\n      }\n      else if (category === 'Eyeshadows') {\n        this.setState({\n          eyeshadowFilters : [],\n          EyeshadowProducts: this.state.initialEyeshadowProducts\n        })\n      }\n      else {\n        this.setState({\n          eyelinerFilters : [],\n          EyelinerProducts: this.state.initialEyelinerProducts\n        })\n      }\n      setTimeout(() => {\n        const categoryType = category\n        const harmoniesListMessage = select(`.${categoryType} .shadeCount`)\n        const harmonyCountText = select(`.${categoryType} .harmonyCount`)\n        const harmoniesContainer = select(`.${categoryType} .shades__container`)\n        if (!harmonyCountText && harmoniesContainer) {\n          const harmonyCount = document.createElement(\"p\")\n          harmonyCount.classList = 'is-sr-only harmonyCount'\n          const harmonyText = document.createTextNode(`${categoryType == 'Lips' ? this.state.lipsProducts.length : categoryType == 'Eyeshadows' ? this.state.EyeshadowProducts.length : this.state.EyelinerProducts.length} ${window.config.cto.dedicated.shadesAvailable}`)\n          harmonyCount.appendChild(harmonyText)\n          harmoniesListMessage.appendChild(harmonyCount)\n        }\n        else {\n          harmonyCountText.innerText = `${categoryType == 'Lips' ? this.state.lipsProducts.length : categoryType == 'Eyeshadows' ? this.state.EyeshadowProducts.length : this.state.EyelinerProducts.length} ${window.config.cto.dedicated.shadesAvailable}`\n        }\n      }, 10);\n    }\n  }\n\n  errorPresent(value) {\n    if (value) {\n      this.setState({\n        errorMessageCLass: 'has_error'\n      })\n    }  else {\n      this.setState({\n        errorMessageCLass: ''\n      })\n    }\n  }\n\n  landScapeError(value) {\n    const elem = select('#cto_lanscape_error_ay11')\n    const landscapeModal = select('.cto__container .cto_landscape--modal')\n    if (elem) {\n      if (value) {\n        if (elem.children.length === 0 && (isTabletScreen() || isMobileScreen()) && window.screen.orientation && window.screen.orientation.type.includes('landscape')) {\n          elem.insertAdjacentHTML('beforeend', `<p>${window.config.cto.dedicated.rotate}</p>`)\n          landscapeModal && landscapeModal.removeAttribute('aria-hidden')\n          setTimeout(() => {\n            elem.innerHTML = ''\n          }, 2001);\n        } else if (window.screen.orientation && window.screen.orientation.type.includes('portrait')) {\n          elem.innerHTML = ''\n          if (this.state.showTimer || this.state.showPicture){\n            landscapeModal && landscapeModal.setAttribute('aria-hidden', true)\n          }\n        }\n      }\n      else {\n        elem.innerHTML = ''\n      }\n    }\n  }\n\n  noCameraMessage(value = this.state.noCamera) {\n    const elem = select('#no_camera_error_ay11')\n    if (elem) {\n      if (this.state.noCamera && elem.children.length === 0) {\n        elem.insertAdjacentHTML('beforeend', `<div className=\"error__title\" aria-level=\"2\" role=\"heading\">${window.config.vto.labels.deniedTitle}</div><p className=\"error__message\">${window.config.vto.labels.deniedMessage}</p>`)\n        setTimeout(() => {\n          elem.innerHTML = ''\n        }, 2001);\n      }\n      else {\n        elem.innerHTML = ''\n      }\n    }\n  }\n\n  updateValue = (key, val) => {\n    this.setState({[key]: val});\n  }\n\n  render(values) {\n    const { variants = [], error, product, dispatch } = this.props\n    const selectedCategory = this.state.categoryType\n    const closeBottom = (this.state.errorTab[selectedCategory]) ? 'cto__close--bottom' : ''\n    const closeBottomSmall = this.state.errorType[selectedCategory]\n    this.windowHeight = window.innerHeight\n    Manager.subscribe(WINDOW_WAS_RESIZED, () => {\n      this.landScapeError(true)\n      const iFrame = select('#YMK-module-iframe', this.container)\n      \n      if (iFrame && iFrame.contentWindow.document) { \n        if(!(isItChrome && (this.windowHeight - window.innerHeight > 80))){ //80 to accomodate Chrome download notification segement\n          this.setCanvasDimensionsOnResize() \n        }\n      }\n      this.windowHeight = window.innerHeight\n    })\n\n    this.noCameraMessage(this.state.noCamera)\n    const ctoContainer =  <CtoContext.Provider value={{state: this.state, updateValue: this.updateValue}}>\n                          <div className=\"cto__wrapper\">\n                         \n                            <div className=\"cto__row\">\n                              <div className={`cto__close-mobile cto__close-color-white is-hidden-l ${closeBottom} ${closeBottomSmall}`} {...(window.innerWidth > 960 ? { 'hidden': true } : '')} {...(this.state.showTimer || this.state.showPicture) ? {\"hidden\":true, 'aria-hidden': true} : {}}>\n                               <Close close={() => this.close({dispatch, type:'cameraCTO'})}/>\n                              </div>\n                              \n                              <div className=\"cto__container\">\n                              {(this.state.isLoaded && this.state.categoryType === 'Eyeshadows' && this.state.currentEyeshadowProduct.hasTwoIntensities ) ?\n                                    (<div {...(this.state.showTimer || this.state.showPicture) ? {\"hidden\":true, 'aria-hidden': true} : {}}>\n                                      <IntensitySwitch product={this.state.currentEyeshadowProduct} toggleIntensity={this.toggleIntensity}  />\n                                    </div>) : null}\n                                    <div className={`cto__error ${this.state.errorMessageCLass}`} aria-live=\"polite\">\n                                      {(this.state.errorTab[this.state.categoryType]) ? <ErrorProduct errorType={this.state.errorType} category={selectedCategory} errorPresent={(value) => this.errorPresent(value)} /> : null}\n                                    </div>\n                                    <Module \n                                      selectedShadesList={this.state.selectedShadesList}\n                                      updateFilterFlag={this.updateFilterFlag}\n                                      filterFlag={this.state.filterFlag}\n                                      products={this.state.lipsProducts}\n                                      openFilter={this.props.openFilter}\n                                      setFilter={this.setFilter}\n                                      data={this.props.data}\n                                      harmonies={this.props.data.categories[0].harmonies}\n                                      harmoniesEyeshadow={this.props.data.categories[1].harmonies}\n                                      finishesLips={this.props.data.categories[0].finishes}\n                                      finishesEyeshadows={this.props.data.categories[1].finishes}\n                                      closeShade={this.closeShade}\n                                      updateShade={this.updateShade}\n                                      isLoaded={this.state.isLoaded}\n                                      showPrice={this.showPrice}\n                                      isFilterBarEnabled={this.state.isFilterBarEnabled}\n                                      changeTab={this.changeTab}\n                                      productsEyeshadow={this.state.EyeshadowProducts}\n                                      noShade={this.noShade}\n                                      lipsName=\"Lips\"\n                                      eyeshadowsName=\"Eyeshadows\"\n                                      clearProduct={this.clearProduct}\n                                      categoryType={this.state.categoryType}\n                                      currentLipProduct={this.state.currentLipProduct}\n                                      currentEyeshadowProduct={this.state.currentEyeshadowProduct}\n                                      invalidLipsProduct={this.state.invalidLipsProduct}\n                                      invalidEyeshadowsProduct={this.state.invalidEyeshadowsProduct}\n                                      lipsFilters={this.state.lipsFilters}\n                                      eyeshadowFilters={this.state.eyeshadowFilters}\n                                      eyelinerFilters={this.state.eyelinerFilters}\n                                      errorTab={this.errorTab}\n                                      invalidEyelinersProduct={this.state.invalidEyelinersProduct}\n                                      currentEyelinerProduct={this.state.currentEyelinerProduct}\n                                      harmoniesEyeliners={this.props.data.categories[2].harmonies}\n                                      finishesEyeliners={this.props.data.categories[2].finishes}\n                                      productsEyeliners={this.state.EyelinerProducts}\n                                      eyelinersName=\"Eyeliners\"\n                                      removeFilters={this.state.removeFilters}\n                                      toggleRemoveFilter={this.toggleRemoveFilter}\n                                    />\n                              </div>\n                              <div className=\"cto__product\" {...(this.state.showTimer || this.state.showPicture) ? {\"hidden\":true, 'aria-hidden': true} : {}}>{(this.state.isLoaded) ? \n                                <Product \n                                  hidePrice={this.state.hidePrice}\n                                  product={this.state.lastSelectedProduct}\n                                  ecom={this.state.ecommerceSite}\n                                  categoryType={this.state.categoryType}\n                                  isQRcontext={this.props.isQRcontext}\n                                /> : null }                                \n                              </div>\n                            </div>\n\t\t\t\t\t\t\t              {(this.state.isLoaded &&  !this.state.hidePrice && !this.state.ecommerceSite && this.state.currentLipProduct.price && this.state.currentLipProduct.price !=='' && !this.props.isQRcontext) ? <div id=\"disclaimer-text\" className=\"price__disclaimer\">\n\t\t\t\t\t\t\t    <p className=\"content\">\n\t\t\t\t\t\t\t     {window.config.cto.dedicated.disclaimerText}<a target=\"_blank\" className=\"link is-underline is-gray is-paddingLeft\" title={window.config.cto.dedicated.disclaimerTextTitle} rel=\"nofollow\" href={this.disclaimerURL}>\n\t\t\t\t\t\t\t        <span>{window.config.cto.dedicated.disclaimerTextMoreInfo}</span>\n\t\t\t\t\t\t\t      </a>\n\t\t\t\t\t\t\t    </p>\n\t\t\t\t\t\t\t  </div> : '' }\n                \n\t\t\t\t\t\t\t</div>\n            </CtoContext.Provider>\n    const noCamera = <div className={`cto__row`  + (error && error.name ? ' error-no-camera-cto' : '')}>\n    <div className=\"cto__close-mobile is-hidden-l\">\n      <Close close={() => this.close({dispatch})}/>\n    </div>\n    <div className=\"error__container\">\n        <div className=\"error__title\" aria-level=\"2\" role=\"heading\">{window.config.vto.labels.deniedTitle}</div><p className=\"error__message\">{window.config.vto.labels.deniedMessage}</p>\n    </div>\n    <div className=\"cto__product\">&nbsp;</div>\n    <div className=\"cto_landscape--modal\">\n        <img src={`${config.theme}/assets/media/landscapeMobileDev.svg`} alt=\"\"/>\n        <p>{window.config.cto.dedicated.rotate}</p>\n    </div>\n    </div>\n\n    \n    if (this.state.noCamera) {\n      return noCamera\n    }\n  \n    return ctoContainer \n  }\n}\n\nexport default connect(state => state)(ChanelTryOn)","import React, { Component } from 'react'\n\nclass errorProduct extends Component {\n\n    constructor(props) {\n      super(props)\n    }\n    componentDidMount() {\n      const category = this.props.category\n      this.errorMsgDLPush(this.props.errorType[category])\n      this.props.errorPresent(true)\n    }\n\n    componentWillUnmount() {\n      this.props.errorPresent(false)\n    }\n\n    errorMsgDLPush(errorType) {\n      if (errorType == 'noshade') {\n        dataLayer.push({\n          'eventCategory': 'vto',\n          'eventAction': 'error shade',\n          'eventLabel': 'No results match the selected filters.',\n          'event': 'nievent'\n        })\n      }\n      else {\n        dataLayer.push({\n          'eventCategory': 'vto',\n          'eventAction': 'error shade',\n          'eventLabel': 'The selected shade is not available. Please try another one.',\n          'event': 'nievent'\n        })\n      }\n    }\n\n    render() {\n      const category = this.props.category\n      let errorMessage = ''\n      if (this.props.errorType[category] == 'noshade') {\n        errorMessage = window.config.cto.dedicated.noResults\n      }\n      else {\n        errorMessage = window.config.cto.dedicated.errorProduct\n      }\n        return (\n          <p id=\"cto__product--error\" tabIndex=\"-1\">{errorMessage}</p>\n        )\n    }\n}\n\nexport default errorProduct","import React, { Component } from 'react'\nimport Icon from '../../vto/Components/Icon'\nimport { select, selectAll } from 'lib/selectors'\nimport { isWideScreen } from 'lib/helpers'\nimport Harmonies from './harmonies'\nimport Finishes from './finishes'\nimport RemoveFilters from './removeFilters'\n\nclass Filters extends Component {\n    max = 0\n    constructor() {\n        super()\n        this.state = {\n          showFilter: false,\n          finishWidth: null\n        }\n        this.toggleFilters = this.toggleFilters.bind(this)\n        this.finishWidth = null\n    }\n\n    componentDidMount() {\n      window.addEventListener('resize', this.windowResized)\n    }\n\n    toggleFilters() {\n      const { showFilter } = this.state\n      this.setState({\n        showFilter: !showFilter\n      })\n     this.props.updateFilterFlag(!showFilter)\n     this.toggleProductDetails(this.state.showFilter)\n     this.filterToggleDLPush(this.state.showFilter)\n    }\n\n    toggleProductDetails(flag) {\n      const productDetails = select('.cto__product')\n      const category = this.props.categoryType\n      const fakeSelected = select(`.${category} .selected.fake`)\n      if (productDetails  && !isWideScreen()) {\n        if ((this.props.categoryType === 'Lips' && Object.keys(this.props.currentLipProduct).length !== 0) || \n            (this.props.categoryType === 'Eyeshadows' && Object.keys(this.props.currentEyeshadowProduct).length !== 0) ||\n            (this.props.categoryType === 'Eyeliners' && Object.keys(this.props.currentEyelinerProduct).length !== 0) ||\n            (!this.props.errorTab && !fakeSelected.classList.contains(\"is-hidden\"))) {\n                !flag ? productDetails.classList.add('is-softly-hidden') : productDetails.classList.remove('is-softly-hidden')\n          }\n      }\n    }\n\n    filterToggleDLPush(flag) {\n    const category = this.props.categoryType.toLowerCase()\n\t  dataLayer.push({\n\t   'eventCategory': 'vto',\n\t   'eventAction': category + '_filter',\n\t   'eventLabel': flag ? 'close' : 'open' ,\n\t   'event' :   'uaevent'\n\t  })\n  }\n\n  setButtonWidth() {\n    const finishes = selectAll('.finishes li')\n    let max = 0\n    let prevMax = this.max\n    if (finishes) {\n      finishes.forEach(f => {\n        if (f.offsetWidth > max) { \n          max = f.offsetWidth\n        }\n      })\n      if(Math.abs(max - prevMax) > 5) {\n        this.max = max\n      } else {\n        this.max = prevMax\n      }\n    }\n  }\n\n  setRemoveFilterBlur(showfilter) {\n    const filterHeader = select(`.filters__container--inner--block.${this.props.categoryType} .filters__inner__wrapper .filters__heading`)\n    const removeFilterCTA = select(`.filters__container--inner--block.${this.props.categoryType} .remove__filters`)\n    if (window.innerWidth > 960) {\n      if (showfilter) {\n        removeFilterCTA.style.width = `${filterHeader.getBoundingClientRect().left - removeFilterCTA.getBoundingClientRect().left - 36}px` //security margin of 36px\n        if (removeFilterCTA.scrollWidth > removeFilterCTA.clientWidth) {\n          removeFilterCTA.classList.add('is-cropped')\n        } else {\n          removeFilterCTA.classList.remove('is-cropped')\n        }\n      }\n    } else {\n      if (removeFilterCTA) {\n        removeFilterCTA.style.width = 'auto'\n        removeFilterCTA.classList.remove('is-cropped')\n      }\n    }\n  }\n\n  windowResized = (e) => {\n    this.setRemoveFilterBlur(this.state.showFilter)\n  }\n\n\n    render() {\n        const { showFilter } = this.state\n        let filterWrapClass = 'filters__content'\n        if (!this.props.isFilterBarEnabled) {\n            filterWrapClass += ' is-hidden'\n        }\n        let filterClasses = 'filters__value'\n        if(showFilter){\n            filterClasses += ' show__filters'\n        }\n\n        let iconClass = 'icon__down'\n        if (showFilter) {\n            iconClass += ' icon__up'\n            this.setButtonWidth()\n        }\n        const filterIcon = showFilter ? 'down' : 'cto_refine' \n\n        this.setRemoveFilterBlur(showFilter)        \n\n        return (\n          <div className={filterWrapClass}>\n            <div className=\"filters__header\">\n              <p role=\"heading\" aria-level=\"2\">\n                <button type=\"button\" className=\"filters__heading\" aria-expanded={showFilter} onClick={this.toggleFilters}><Icon name={filterIcon} className={iconClass} /> {window.config.cto.dedicated.newFiltersHeading}</button>\n              </p>\n            </div>\n            <div className={filterClasses}>\n              <Harmonies harmonies={this.props.harmonies} setFilter={this.props.setFilter} categoryType={this.props.categoryType} category={this.props.name} currentFilters={this.props.currentFilters} />\n              {this.props.name === 'Lips' ? <Finishes finishes={this.props.finishes} setFilter={this.props.setFilter} categoryType={this.props.categoryType} lipsFilters={this.props.lipsFilters} finishCategory='Lips' width={this.max} /> : ''}\n              <RemoveFilters removeFilters={this.props.removeFilters} categoryType={this.props.categoryType} category={this.props.name} toggleRemoveFilter={this.props.toggleRemoveFilter} index={this.props.index} />\n            </div>\n          </div>\n        )\n    }\n}\n\nexport default Filters","import React, { Component } from 'react'\nimport { select } from 'lib/selectors'\n\nclass Finish extends Component {\n\n    toggleFinish(finish) {\n        this.props.setFilter(finish, 'finish', this.props.categoryType)\n    }\n\n    render() {\n        const finish = this.props.finish\n        const isOnFilterList = this.props.lipsFilters.some(f => {\n            return f.code === finish.code\n        })  \n        const isSelected = isOnFilterList ? 'selected' : ''\n        let finishStyle = {}\n        if (this.props.width) {\n            finishStyle = {marginRight : this.props.margin, width: this.props.width}\n        }\n        else finishStyle = {marginRight : this.props.margin}\n        \n        return (\n            \n            <React.Fragment>\n                {finish.hasProduct &&\n                    <li key={finish.code} className={isSelected} style={finishStyle} onClick={this.toggleFinish.bind(this, finish)}>\n                        <button aria-pressed={isOnFilterList}>\n                            {finish.name}\n                        </button>\n                    </li>}\n            </React.Fragment>\n        )\n    }\n}\n\nexport default Finish","import React, { Component } from 'react'\nimport Finish from './finish'\nimport {getCollection} from 'lib/selectors'\nimport Icon from '../../vto/Components/Icon'\nimport { select } from 'lib/selectors'\nclass Finishes extends Component {\n     constructor(props) {\n       super(props)\n       this.scrolling = false\n       this.xOffset = 0\n       this.currentX = 0\n       this.initialX = 0\n       this.initialPosition = 0\n       this.delta = 35\n       this.startX\n       this.elasticOffset = 80\n       this.finishesRef = React.createRef()\n       this.sliderRef = React.createRef()\n       this.state = {\n        margin: 9,\n        leftArrow : false,\n        rightArrow: false\n      }\n       this.goToNextFinish = this.goToNextFinish.bind(this)\n       this.goToPrevFinish = this.goToPrevFinish.bind(this)\n       this.currentRight = 0\n    }\n\n  componentDidMount() {\n    const container = this.finishesRef.current\n    container.addEventListener('mousedown', this.onMouseDown)\n    container.addEventListener('mouseleave', this.onMouseLeave)\n    container.addEventListener('mouseup', this.onMouseLeave)\n    container.addEventListener('mousemove', this.onMouseMove)\n    container.addEventListener('touchstart', this.onMouseDown)\n    container.addEventListener('touchend', this.onMouseLeave)\n    container.addEventListener('touchmove', this.onMouseMove)\n    const initialPosition = this.initialPosition\n    this.xOffset = initialPosition\n    this.updateAccessibilityState(this.props.categoryType)\n    this.ifArrowvisible()\n  }\n\n  componentWillUnmount() {\n    const container = this.finishesRef.current\n    const name = this.props.categoryType\n    container.removeEventListener('mousedown', this.onMouseDown)\n    container.removeEventListener('mouseleave', this.onMouseLeave)\n    container.removeEventListener('mouseup', this.onMouseLeave)\n    container.removeEventListener('mousemove', this.onMouseMove)\n    container.removeEventListener('touchstart', this.onMouseDown)\n    container.removeEventListener('touchend', this.onMouseLeave)\n    container.removeEventListener('touchmove', this.onMouseMove)\n   }\n\n   componentDidUpdate(prevProps) {\n     if ((prevProps.width !== this.props.width) && this.props.width) {\n      const sliderList = this.sliderRef.current\n      const sliderWidth = Math.round(sliderList.getBoundingClientRect().width)\n      const sliderBox = this.finishesRef.current\n      const limit = sliderBox.getBoundingClientRect().width\n      const offset = 17\n      const max = -(sliderWidth - sliderBox.getBoundingClientRect().width)\n\n      if (sliderList.scrollWidth > limit) {\n        if (this.currentX > max) sliderBox.classList.add('is-cropped-right')\n        const finishes = getCollection('li', sliderList)\n        let isBetween = false\n        let tempMargin = this.state.margin\n        while(isBetween === false) {\n          let finishTab = []\n          let i = 0\n          let distance = this.initialPosition\n          finishes.forEach( f => {\n            finishTab[i] = {\n              min: distance,\n              max: distance + this.props.width\n            }\n            distance += this.props.width + tempMargin\n            i++\n          })\n          finishTab.forEach( f => {\n            if (limit > f.min && limit < f.max) {\n              isBetween = true\n            }\n          })\n          if (isBetween === false) tempMargin ++\n        }\n        if (tempMargin !== this.state.margin) {\n          this.setState({\n            margin : tempMargin + offset\n          })\n        }\n      }\n      this.updateAccessibilityState(this.props.categoryType)\n      this.ifArrowvisible()\n    }\n   }\n\n\n   onMouseDown = (e) => {\n    const sliderList = this.sliderRef.current\n     if (e.type === \"touchstart\") {\n      this.initialX = e.touches[0].clientX - this.xOffset\n      this.startX = e.changedTouches[0].pageX\n     } else {\n       this.initialX = e.clientX - this.xOffset\n       this.startX = e.pageX;\n     }\n     if (sliderList.scrollWidth > this.finishesRef.current.getBoundingClientRect().width)\n       this.scrolling = true\n     else\n       this.scrolling = false\n   }\n\n   onMouseMove = (e) => {\n    if (!this.scrolling) return\n    e.preventDefault()\n\n    const slider = this.sliderRef.current\n    const parent = this.finishesRef.current\n    const sliderWidth = Math.round(slider.getBoundingClientRect().width)\n    const max = -(sliderWidth - parent.getBoundingClientRect().width)\n\n    if (e.type === \"touchmove\") {\n      this.currentX = e.touches[0].clientX - this.initialX\n    } else {\n      this.currentX = e.clientX - this.initialX\n    }\n    \n    // limit for elasticity\n    if (this.currentX > this.elasticOffset) {\n      TweenLite.set(slider, { x: this.elasticOffset })\n      this.currentX = this.elasticOffset\n    }\n    else if (this.currentX < (max- this.elasticOffset)) {\n      TweenLite.set(slider, { x: (max- this.elasticOffset) })\n      this.currentX = (max- this.elasticOffset)\n    }\n\n    // add fade above the carousel\n    if (this.currentX <= this.initialPosition + 10) {\n      if (!parent.classList.contains('is-cropped-left')) parent.classList.add('is-cropped-left')\n    } else parent.classList.remove('is-cropped-left')\n\n    if (this.currentX >= max + 10) {\n      if (!parent.classList.contains('is-cropped-right')) parent.classList.add('is-cropped-right')\n    } else parent.classList.remove('is-cropped-right')\n\n   TweenLite.set(slider, { x: this.currentX })\n   this.xOffset = this.currentX\n  }\n\n  onMouseLeave = (e) => {\n    if (!this.scrolling) return\n    this.scrolling = false\n    const slider = this.sliderRef.current\n    const sliderWidth = Math.round(slider.getBoundingClientRect().width)\n    const max = -(sliderWidth - this.finishesRef.current.getBoundingClientRect().width)\n\n    if (this.currentX > this.initialPosition) {\n      TweenLite.fromTo(slider, .4, { x: this.currentX }, { x: this.initialPosition })\n      this.currentX = this.initialPosition\n      this.xOffset = this.initialPosition\n    }\n    \n   else if (this.currentX < max) {\n     TweenLite.fromTo(slider, .4, { x: this.currentX }, { x: max })\n     this.currentX = max \n     this.xOffset = max\n    }\n  }\n\n  \n  goToNextFinish() {\n    const finishesBox = this.finishesRef.current.getBoundingClientRect()\n    const parentSize = finishesBox.width\n    if ( parentSize > 0) {\n      const sliderList = this.sliderRef.current\n      const finishesCollection = getCollection('li', sliderList)\n      finishesCollection.some( (f, index) => {\n        const finishesDimensions = f.getBoundingClientRect()\n        if(Math.floor(finishesDimensions.right) > Math.floor(finishesBox.right)) {\n          let dest = 0\n          let current_right = 0\n          if(this.currentRight != 0) { \n            current_right = this.currentRight\n          } else {\n            current_right = (parentSize - this.props.width) / 2\n            if(index > 0) {\n              current_right = parentSize - ((index + 1 ) * this.props.width)\n            }\n          }       \n          dest = current_right - (this.props.width + this.state.margin)\n          TweenLite.fromTo(sliderList, .4, { x: current_right }, { x: dest, onComplete: () => {\n            this.currentRight = dest\n            this.updateAccessibilityState(this.props.categoryType)\n            this.ifArrowvisible()\n            f.firstElementChild.focus()\n          }})\n          return true\n        }\n      })\n    } \n  }\n  \n  goToPrevFinish() {\n    const finishesBox = this.finishesRef.current.getBoundingClientRect()\n    const parentSize = finishesBox.width\n    if ( parentSize > 0) {\n      const sliderList = this.sliderRef.current\n      const finishesCollection = getCollection('li', sliderList)\n      finishesCollection.some( (f, index) => {\n        const finishesDimensions = f.getBoundingClientRect()\n        if(Math.floor(finishesDimensions.left) < Math.floor(finishesBox.left)) {         \n          let dest = 0\n          let current_right = 0\n          if(this.currentRight != 0) { \n            current_right = this.currentRight\n          } else {\n            current_right = (parentSize - this.props.width) / 2\n            if(index > 0) {\n              current_right = parentSize - ((index + 1 ) * this.props.width)\n            }\n          } \n          dest = current_right + this.props.width + this.state.margin          \n          TweenLite.fromTo(sliderList, .4, { x: current_right }, { x: dest, onComplete: () => {\n            this.currentRight = dest\n            this.updateAccessibilityState(this.props.categoryType)\n            this.ifArrowvisible()\n            f.firstElementChild.focus()\n          }})\n          return true\n        }\n      })\n    } \n  }\n\n  getTabVisibility(shade, name) {\n    const rect = shade.getBoundingClientRect()\n    const sliderBlock = select(`.${name} .finishes__box`)\n    const sliderBlockRect = sliderBlock.getBoundingClientRect()\n    const isInViewport = rect.left >= sliderBlockRect.left && (rect.right + this.state.margin) <= sliderBlockRect.right\n    return isInViewport\n  }\n\n  updateAccessibilityState (categoryName) {\n    const sliderList = select(`.${categoryName} ul.finishes`)\n    const collections = getCollection('li', sliderList)\n    collections.forEach(shade => {\n      const visibility = this.getTabVisibility(shade, categoryName)\n      if ( visibility ) {\n        shade.removeAttribute('aria-hidden')\n        shade.firstChild.removeAttribute('tabindex')\n      }\n      else {\n        shade.setAttribute('aria-hidden', 'true')\n        shade.firstChild.setAttribute('tabindex', '-1')\n      }\n    })\n  }\n\n  ifArrowvisible() {\n    const finishesBox = this.finishesRef.current.getBoundingClientRect()\n    const sliderList = this.sliderRef.current\n    let leftHiddenItems = 0\n    let rightHiddenItems = 0\n    const finishesCollection = getCollection('li', sliderList)\n    finishesCollection.some( (f, index) => {\n      const finishesDimensions = f.getBoundingClientRect()\n      if (Math.floor(finishesDimensions.right) > Math.floor(finishesBox.right)) {\n        rightHiddenItems++\n        this.setState({\n          rightArrow: true\n        })\n        return true\n      }\n    })\n    if(rightHiddenItems == 0) {\n      this.setState({\n        rightArrow: false\n      })\n    }\n    finishesCollection.some( (f, index) => {\n      const finishesDimensions = f.getBoundingClientRect()\n      if (Math.floor(finishesDimensions.left) < Math.floor(finishesBox.left)) {\n        leftHiddenItems++\n        this.setState({\n          leftArrow: true\n        })\n        return true\n      }\n    })\n    if(leftHiddenItems == 0) {\n      this.setState({\n        leftArrow: false\n      })\n    }\n  }\n\n   render() {\n\n        const finishes = this.props.finishes.filter(f => f.hasProduct)\n        const finishScreenReaderText = window.config.cto.dedicated.finishScreenReaderText\n        return (\n            <React.Fragment>\n            <div className={`finishes__box ` + this.props.finishCategory} ref={this.finishesRef} >\n              <div role=\"heading\" aria-level=\"3\" className=\"is-sr-only\">{finishScreenReaderText}</div>\n                <ul className={`finishes ` + this.props.finishCategory}  ref={this.sliderRef}>\n                {finishes.map((item, index) => <Finish \n                                                  key={index}\n                                                  finish={item}\n                                                  setFilter={this.props.setFilter}\n                                                  categoryType={this.props.categoryType}\n                                                  lipsFilters={this.props.lipsFilters}\n                                                  margin={this.state.margin}\n                                                  width={this.props.width}\n                                                />\n                )}\n                </ul>\n              </div>\n            <button type=\"button\" className={`is-sr-only is-sr-only-focusable btn-arrow finishes btn-left `} onClick={this.goToPrevFinish} {...(!this.state.leftArrow) ? {hidden:true} : {}}>\n              <Icon name=\"back\" />\n              <span className=\"is-sr-only\">{window.config.cto.dedicated.previousFinishes}</span>\n            </button>\n            <button type=\"button\" className={`is-sr-only is-sr-only-focusable btn-arrow finishes btn-right `} onClick={this.goToNextFinish} {...(!this.state.rightArrow) ? {hidden:true} : {}}>\n              <Icon name=\"back\" className=\"flipIcon\" />\n              <span className=\"is-sr-only\">{window.config.cto.dedicated.nextFinishes}</span>\n            </button>\n      </React.Fragment>\n        )\n    }\n}\n\nexport default Finishes","import React, { Component } from 'react'\nimport Harmony from './harmony'\nimport {getCollection} from 'lib/selectors'\nimport Icon from '../../vto/Components/Icon'\nimport { select } from 'lib/selectors'\n\nclass Harmonies extends Component {\n  constructor(props) {\n    super(props)\n    this.scrolling = false\n    this.xOffset = 0\n    this.initialX = 0\n    this.initialPosition = 0\n    this.delta = 15\n    this.margin = 20\n    this.harmonySize = 36\n    this.startX\n    this.elasticOffset = 80\n    this.lateralMargin = 18\n    this.mobileBp = 960\n    this.harmoniesRef = React.createRef()\n    this.sliderRef = React.createRef()\n    if (window.innerWidth > this.mobileBp) {\n      this.harmonySize = 29\n    }\n    this.state = {\n      type: \"\",\n      margin: 17,\n      isSet: false,\n      leftArrow : false,\n      rightArrow: false\n    }\n    this.goToNextHarmony = this.goToNextHarmony.bind(this)\n    this.goToPrevHarmony = this.goToPrevHarmony.bind(this)\n    this.currentRight = 0\n  }\n\n  componentDidMount() {\n    const container = this.harmoniesRef.current\n    container.addEventListener('mousedown', this.onMouseDown)\n    container.addEventListener('mouseleave', this.onMouseLeave)\n    container.addEventListener('mouseup', this.onMouseLeave)\n    container.addEventListener('mousemove', this.onMouseMove)\n    container.addEventListener('touchstart', this.onMouseDown)\n    container.addEventListener('touchend', this.onMouseLeave)\n    container.addEventListener('touchmove', this.onMouseMove)\n    this.initializeCarousel()\n    this.updateAccessibilityState(this.props.categoryType)\n    this.ifArrowvisible()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.categoryType !== this.props.categoryType && this.props.categoryType === this.props.category && this.state.isSet !== true) {\n      this.initializeCarousel()\n      this.updateAccessibilityState(this.props.categoryType)\n      this.ifArrowvisible()\n    }\n  }\n\n  componentWillUnmount() {\n    const container = this.harmoniesRef.current\n    container.removeEventListener('mousedown', this.onMouseDown)\n    container.removeEventListener('mouseleave', this.onMouseLeave)\n    container.removeEventListener('mouseup', this.onMouseLeave)\n    container.removeEventListener('mousemove', this.onMouseMove)\n    container.removeEventListener('touchstart', this.onMouseDown)\n    container.removeEventListener('touchend', this.onMouseLeave)\n    container.removeEventListener('touchmove', this.onMouseMove)\n  }\n\n  onMouseDown = (e) => {\n    const sliderList = this.sliderRef.current\n    if (e.type === \"touchstart\") {\n      this.initialX = e.touches[0].clientX - this.xOffset\n      this.startX = e.changedTouches[0].pageX\n    } else {\n      this.initialX = e.clientX - this.xOffset\n      this.startX = e.pageX;\n    }\n\n    if (sliderList.scrollWidth > Math.round(this.harmoniesRef.current.getBoundingClientRect().width))\n      this.scrolling = true\n    else\n      this.scrolling = false\n  }\n\n  onMouseMove = (e) => {\n    if (!this.scrolling) return\n    e.preventDefault()\n    const sliderList = this.sliderRef.current\n    const parent = this.harmoniesRef.current\n    const sliderWidth = Math.round(sliderList.getBoundingClientRect().width)\n    const max = -(sliderWidth - parent.getBoundingClientRect().width)\n\n    if (e.type === \"touchmove\") {\n      this.currentX = e.touches[0].clientX - this.initialX\n    } else {\n      this.currentX = e.clientX - this.initialX\n    }\n\n    if (this.currentX < (max- this.elasticOffset)) {\n      TweenLite.set(sliderList, { x: (max- this.elasticOffset) })\n      this.currentX = (max- this.elasticOffset)\n    }\n\n    TweenLite.set(sliderList, { x: this.currentX })\n    this.xOffset = this.currentX\n  }\n\n  onMouseLeave = (e) => {\n    if (!this.scrolling) return\n    this.scrolling = false\n    const sliderList = this.sliderRef.current\n    const sliderWidth = Math.round(sliderList.getBoundingClientRect().width)\n    const max = -(sliderWidth - this.harmoniesRef.current.getBoundingClientRect().width)\n\n    if (this.currentX > 0) {\n      TweenLite.fromTo(sliderList, .4, { x: this.currentX }, { x: 0 })\n      this.currentX = 0\n      this.xOffset = 0\n    }\n    \n   else if (this.currentX < max) {\n     TweenLite.fromTo(sliderList, .4, { x: this.currentX }, { x: max })\n     this.currentX = max \n     this.xOffset = max\n    }\n  }\n\n  initializeCarousel() {\n    const parentSize = this.harmoniesRef.current.getBoundingClientRect().width\n    if ( parentSize > 0) {\n      this.initialPosition = (parentSize - this.harmonySize ) / 2 - this.lateralMargin\n      this.xOffset = this.initialPosition\n      const sliderList = this.sliderRef.current\n\n      if (sliderList.scrollWidth > parentSize) {\n        sliderList.style.transform = \"translate3d(\" + this.initialPosition + \"px, 0, 0)\"\n  \n        const sliderBox = this.harmoniesRef.current\n        const limit = sliderBox.getBoundingClientRect().width\n        const offset = 2\n        const harmonies = getCollection('li', sliderList)\n        let isBetween = false\n        let tempMargin = this.state.margin\n        while(isBetween === false) {\n          let harmoniesTab = []\n          let i = 0\n          let distance = (parentSize - this.harmonySize ) / 2\n          harmonies.forEach( f => {\n            harmoniesTab[i] = {\n              min: distance,\n              max: distance +  this.harmonySize\n            }\n            distance +=  this.harmonySize + tempMargin\n            i++\n          })\n          harmoniesTab.forEach( f => {\n            if (limit > f.min && limit < f.max) {\n              isBetween = true\n            }\n          })\n          if (isBetween === false) tempMargin ++\n        }\n  \n        if (tempMargin !== this.state.margin) {\n          this.setState({\n            margin : tempMargin + offset,\n            isSet: true\n          })\n        }\n        else this.setState({ isSet: true })\n      }\n      else {\n        this.setState({\n          type: \"is-centered\",\n          isSet: true\n        })\n      }\n    }\n  }\n\n  goToNextHarmony() {\n    const harmoniesBox = this.harmoniesRef.current.getBoundingClientRect()\n    const parentSize = harmoniesBox.width\n    if ( parentSize > 0) {\n      const sliderList = this.sliderRef.current\n      const harmonies = getCollection('li', sliderList)\n      harmonies.some( (f, index) => {\n        const harmonyDimensions = f.getBoundingClientRect()\n        if(Math.floor(harmonyDimensions.right) > Math.floor(harmoniesBox.right)) {\n          let dest = 0\n          let current_right = 0\n          if(this.currentRight != 0) { \n            current_right = this.currentRight\n          } else {\n            current_right = (parentSize - this.harmonySize) / 2           \n          }       \n          dest = current_right - (this.harmonySize + this.state.margin)\n          TweenLite.fromTo(sliderList, .4, { x: current_right }, { x: dest, onComplete: () => {\n            this.currentRight = dest\n            this.updateAccessibilityState(this.props.categoryType)\n            this.ifArrowvisible()\n            f.firstElementChild.focus()\n          }})\n          return true\n        }\n      })\n    } \n  }\n  \n  goToPrevHarmony() {\n    const harmoniesBox = this.harmoniesRef.current.getBoundingClientRect()\n    const parentSize = harmoniesBox.width\n    if ( parentSize > 0) {\n      const sliderList = this.sliderRef.current\n      const harmonies = getCollection('li', sliderList)\n      harmonies.some( (f, index) => {\n        const harmonyDimensions = f.getBoundingClientRect()\n        if(Math.floor(harmonyDimensions.left) < Math.floor(harmoniesBox.left)) {\n          let dest = 0\n          let current_right = 0\n          if(this.currentRight != 0) { \n            current_right = this.currentRight\n          } else {\n            current_right = (parentSize - this.harmonySize) / 2\n          } \n          dest = current_right + this.harmonySize + this.state.margin \n          TweenLite.fromTo(sliderList, .4, { x: current_right }, { x: dest, onComplete: () => {\n            this.currentRight = dest\n            this.updateAccessibilityState(this.props.categoryType)\n            this.ifArrowvisible()\n            f.firstElementChild.focus()\n          }})\n          return true\n        }\n      })\n    } \n  }\n\n  getTabVisibility(shade, name) {\n    const rect = shade.getBoundingClientRect()\n    const sliderBlock = select(`.${name} .harmonies__box`)\n    const sliderBlockRect = sliderBlock.getBoundingClientRect()\n    const isInViewport = rect.left >= sliderBlockRect.left && rect.right + this.margin <= sliderBlockRect.right\n    return isInViewport\n  }\n\n  updateAccessibilityState (categoryName) {\n    const sliderList = select(`.${categoryName} ul.harmonies`)\n    const collections = getCollection('li', sliderList)\n    collections.forEach(shade => {\n      const visibility = this.getTabVisibility(shade, categoryName)\n      if (shade.classList.contains(\"selected\")) {\n        shade.firstChild.setAttribute('aria-current', 'true')\n      }\n      else {\n        shade.firstChild.removeAttribute('aria-current')\n      }\n      if ( visibility ) {\n        shade.removeAttribute('aria-hidden')\n        shade.firstChild.removeAttribute('tabindex')\n      }\n      else {\n        shade.setAttribute('aria-hidden', 'true')\n        shade.firstChild.setAttribute('tabindex', '-1')\n      }\n    })\n  }\n\n  ifArrowvisible() {\n    const harmoniesBox = this.harmoniesRef.current.getBoundingClientRect()\n    const sliderList = this.sliderRef.current\n    const harmonies = getCollection('li', sliderList)\n    let leftHiddenItems = 0\n    let rightHiddenItems = 0\n    harmonies.some((f, index) => {\n      const harmonyDimensions = f.getBoundingClientRect()\n      if (Math.floor(harmonyDimensions.right) > Math.floor(harmoniesBox.right)) {\n        rightHiddenItems++\n        this.setState({\n          rightArrow: true\n        })\n        return true\n      }\n    })\n    if(rightHiddenItems == 0) {\n      this.setState({\n        rightArrow: false\n      })\n    }\n    harmonies.some((f, index) => {\n      const harmonyDimensions = f.getBoundingClientRect()\n      if (Math.floor(harmonyDimensions.left) < Math.floor(harmoniesBox.left)) {\n        leftHiddenItems++\n        this.setState({\n          leftArrow: true\n        })\n        return true\n      }\n    })\n    if(leftHiddenItems == 0) {\n      this.setState({\n        leftArrow: false\n      })\n    }\n  }\n\n  render() {\n    const harmonies = this.props.harmonies\n    return (\n      <React.Fragment>\n        <div className=\"harmonies__box\" ref={this.harmoniesRef}>\n          <div role=\"heading\" aria-level=\"3\" className=\"is-sr-only\">{window.config.cto.dedicated.harmonyScreenReaderText}</div>\n          <ul className={`harmonies ${this.state.type}`} ref={this.sliderRef} >\n            {harmonies.map((item, index) => <Harmony key={index} index={index} harmony={item} setFilter={this.props.setFilter} margin={this.state.margin} max={harmonies.length} categoryType={this.props.categoryType} currentFilters={this.props.currentFilters} />\n            )}\n          </ul>\n        </div>\n        <button type=\"button\" className={`is-sr-only is-sr-only-focusable btn-arrow harmonies btn-left `} onClick={this.goToPrevHarmony}  {...(!this.state.leftArrow) ? {hidden:true} : {}}>\n          <Icon name=\"back\" />\n          <span className=\"is-sr-only\">{window.config.cto.dedicated.previousHarmonies}</span>\n        </button>\n        <button type=\"button\" className={`is-sr-only is-sr-only-focusable btn-arrow harmonies btn-right `} onClick={this.goToNextHarmony} {...(!this.state.rightArrow) ? {hidden:true} : {}}>\n          <Icon name=\"back\" className=\"flipIcon\" />\n          <span className=\"is-sr-only\">{window.config.cto.dedicated.nextHarmonies}</span>\n        </button>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default Harmonies","import React, { Component } from 'react'\nimport { select } from 'lib/selectors'\n\nclass Harmony extends Component {\n\n    shouldComponentUpdate(nextProps) {\n        return !!nextProps.harmony.hexColor\n    }\n\n    toggleHarmony(harmony) {\n        this.props.setFilter(harmony, 'harmony', this.props.categoryType)        \n    }\n\n    render() {\n        const code = this.props.harmony.code\n        const isOnFilterList = this.props.currentFilters.some(f => {\n            return f.code === code\n        })  \n        const isSelected = isOnFilterList ? 'selected' : ''\n        const hasHexCode = !!this.props.harmony.hexColor\n        const lastHarmonyMargin = 18\n        const marginRight = (this.props.index === (this.props.max-1)) ? lastHarmonyMargin : this.props.margin\n        const harmonyStyle = {marginRight : marginRight, borderColor: `#${this.props.harmony.hexColor}`}\n\n        return (\n            <React.Fragment>\n                {hasHexCode && \n                    <li key={this.props.harmony.code} style={harmonyStyle} className={isSelected}>\n                        <button\n                            aria-pressed={isOnFilterList}\n                            style={{backgroundColor: `#${this.props.harmony.hexColor}`, color: `#${this.props.harmony.hexColor}`}}\n                            onClick={this.toggleHarmony.bind(this, this.props.harmony)}\n                            >\n                            <span className=\"is-sr-only\">{this.props.harmony.name}</span>\n                        </button>\n                    </li>\n                }\n            </React.Fragment>\n        )\n    }\n}\n\nexport default Harmony","import React, { Component } from 'react'\nimport IntensitySwitchButton from './intensitySwitchButton'\n\nclass IntensitySwitch extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tactive: 'light'\n\t\t}\n\t\tthis.toggle = this.toggle.bind(this)\n\t}\n\n\tcomponentWillReceiveProps(newProps) {\n\t\tif (newProps.product.code !== this.props.product.code) {\n\t\t\tthis.setState({ active: 'light' })\n\t\t}\n\t}\n\n\ttoggle(sku, type) {\n\t\tif (this.state.active !== type) {\n\t\t\tthis.props.toggleIntensity(sku, type)\n\t\t\tthis.setState({\n\t\t\t\tactive: type\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\tconst mainSku = this.props.product.code\n\t\tconst altSku = this.props.product.altSku\n\t\tconst screenReaderText = window.config.vto.labels.screenReaderText\n\n\t\treturn (\n\t\t\t<div className=\"intensity-switch\">\n\t\t\t\t<p className=\"is-sr-only\">{screenReaderText} :</p>\n\t\t\t\t<IntensitySwitchButton type=\"light\" sku={mainSku} active={this.state.active} toggle={this.toggle} toggleIntensity={this.props.toggleIntensity} />\n\t\t\t\t<IntensitySwitchButton type=\"intense\" sku={altSku} active={this.state.active} toggle={this.toggle} toggleIntensity={this.props.toggleIntensity} />\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default IntensitySwitch\n","import React, { Component } from 'react'\n\nclass IntensitySwitchButton extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t}\n\n\ttoggleButton(sku, type) {\n\t\tthis.props.toggle(sku, type)\n\t}\n\n\trender() {\n\t\tconst type = this.props.type\n\t\tconst active = this.props.active === type ? 'active' : ''\n\t\tconst ariaPressed = this.props.active === type ? 'true' : 'false'\n\n\t\tlet i18nIntensity = ''\n\t\tif (type === 'light') {\n\t\t\ti18nIntensity = window.config.vto.labels.light\n\t\t}\n\t\telse if (type === 'intense') {\n\t\t\ti18nIntensity = window.config.vto.labels.intense\n\t\t}\n\n\t\treturn (\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName={`switch ${active}`}\n\t\t\t\tonClick={this.toggleButton.bind(this, this.props.sku, type)}\n\t\t\t\taria-pressed={ariaPressed}\n\t\t\t>\n\t\t\t\t{i18nIntensity}\n\t\t\t</button>\n\t\t)\n\t}\n\n}\n\nexport default IntensitySwitchButton","import React, { Component } from 'react'\nimport ShadeList from './shadeList'\nimport Filters from './filters'\nimport Tabs from './tabs'\nimport { select, selectAll } from 'lib/selectors'\nimport { isWideScreen, isLandscape } from 'lib/helpers'\nimport {CtoContext} from './ctoContext'\nimport CountdownTimer from './countdownTimer'\nimport PhotoCapture from './photoCapture'\n\nclass Module extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            imgSrc: ''\n        }\n        \n    }\n    static contextType = CtoContext\n\n    timerComplete = () => {\n        const sdk = window.YMK\n        sdk.snapshot('base64', (imgURL) => {\n            this.setState({\n                imgSrc: imgURL\n            },() => {\n                this.context.updateValue('showTimer', false)\n                this.context.updateValue('showPicture', true)\n            })\n        })\n       \n    }\n\n    photoCaptureClose = () => {\n        const cameraIcon = select(`.${this.props.categoryType}  .camera-icon`)\n        setTimeout(() => {\n            cameraIcon && cameraIcon.focus()\n        }, 0)\n        const landscapeModal = select('.cto__container .cto_landscape--modal')\n        landscapeModal && landscapeModal.removeAttribute('aria-hidden')\n    }\n\n    render() {\n        const shadeContainer = selectAll('.shades__margin-b')\n        if (shadeContainer && !isWideScreen()) {\n            shadeContainer.forEach( item => {\n                const ctoProduct = select('.cto__product')\n                if (ctoProduct.classList.contains('is-softly-hidden')) {\n                    item.classList.add('shade-small')\n                }\n                else {\n                    item.classList.remove('shade-small')\n                }\n            })\n        }\n        return (\n            <React.Fragment>\n                <p role=\"heading\" aria-level=\"1\" className=\"is-sr-only ctoText\" lang=\"en\" tabIndex=\"-1\">{window.config.cto.dedicated.ctoText}</p>\n                <div className=\"cto__container--inner\">\n                    {this.context.state.showTimer && <CountdownTimer customClass=\"cto_dedicated\" callback={this.timerComplete} pauseTimer={this.props.pauseTimer} />}\n                    {this.context.state.showPicture && <PhotoCapture imgSrc={this.state.imgSrc} callback={this.photoCaptureClose} customClass='cto-dedicated-photo' />}\n                    <div className=\"YMK-module\" id=\"YMK-module\" {...(this.context.state.showTimer || this.context.state.showPicture) ? {'aria-hidden': true} : {}}></div>\n                    {this.props.isLoaded &&  <div className={`filters__container`  + (!this.props.isFilterBarEnabled ? ' filters__disabled' : '')} {...(this.context.state.showTimer || this.context.state.showPicture) ? {\"hidden\":true, 'aria-hidden': true} : {}}>\n                        <div className=\"filters__container--inner\">\n                            <div className=\"filters__container--inner--block Lips\">\n                                <div className={`shades__margin-b`  + (!this.props.isFilterBarEnabled ? ' shades_additional__margin-b' : '')}>\n                                    {this.props.isLoaded &&\n                                    <div className=\"shades__outer__container\">\n                                        <ShadeList \n                                            categoryType={this.props.categoryType} \n                                            products={this.props.products} \n                                            updateShade={this.props.updateShade} \n                                            closeShade={this.props.closeShade} \n                                            name={this.props.lipsName} \n                                            noShade={this.props.noShade} \n                                            clearProduct={this.props.clearProduct} \n                                            selectedShadesList={this.props.selectedShadesList} \n                                            selectedShadeSku={this.props.currentLipProduct} \n                                            invalidProduct={this.props.invalidLipsProduct}\n                                        />\n                                    </div>\n                                    }\n                                </div>\n                                <div className={`filters__inner__wrapper` + (!this.props.isFilterBarEnabled ? ' is-hidden' : '')}>\n                                    {this.props.isLoaded && \n                                    <Filters\n                                        isFilterBarEnabled={this.props.isFilterBarEnabled}\n                                        harmonies={this.props.harmonies}\n                                        setFilter={this.props.setFilter}\n                                        updateFilterFlag={this.props.updateFilterFlag}\n                                        categoryType={this.props.categoryType}\n                                        currentLipProduct={this.props.currentLipProduct}\n                                        currentEyeshadowProduct={this.props.currentEyeshadowProduct}\n                                        finishes={this.props.finishesLips}\n                                        products={this.props.products}\n                                        lipsFilters={this.props.lipsFilters}\n                                        currentFilters={this.props.lipsFilters}\n                                        currentEyelinerProduct={this.props.currentEyelinerProduct}\n                                        removeFilters={this.props.removeFilters}\n                                        name={this.props.lipsName}\n                                        toggleRemoveFilter={this.props.toggleRemoveFilter}\n                                        index={0}\n                                    />\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"filters__container--inner--block Eyeshadows is-hidden\" hidden>\n                                <div className={`shades__margin-b`  + (!this.props.isFilterBarEnabled ? ' shades_additional__margin-b' : '')}>\n                                    {this.props.isLoaded &&\n                                    <div className=\"shades__outer__container\">\n                                        <ShadeList \n                                            categoryType={this.props.categoryType}\n                                            products={this.props.productsEyeshadow}\n                                            updateShade={this.props.updateShade}\n                                            closeShade={this.props.closeShade}\n                                            name={this.props.eyeshadowsName}\n                                            clearProduct={this.props.clearProduct}\n                                            selectedShadesList={this.props.selectedShadesList}\n                                            selectedShadeSku={this.props.currentEyeshadowProduct}\n                                            invalidProduct={this.props.invalidEyeshadowsProduct}\n                                        />\n                                    </div>\n                                    }\n                                </div>\n                                <div className={`filters__inner__wrapper`  + (!this.props.isFilterBarEnabled ? ' is-hidden' : '')}>\n                                    {this.props.isLoaded && \n                                    <Filters \n                                        isFilterBarEnabled={this.props.isFilterBarEnabled}\n                                        harmonies={this.props.harmoniesEyeshadow}\n                                        setFilter={this.props.setFilter}\n                                        updateFilterFlag={this.props.updateFilterFlag}\n                                        categoryType={this.props.categoryType}\n                                        errorTab={this.props.errorTab}\n                                        currentLipProduct={this.props.currentLipProduct}\n                                        currentEyeshadowProduct={this.props.currentEyeshadowProduct}\n                                        finishes={this.props.finishesEyeshadows}\n                                        products={this.props.productsEyeshadow}\n                                        currentFilters={this.props.eyeshadowFilters}\n                                        currentEyelinerProduct={this.props.currentEyelinerProduct}\n                                        removeFilters={this.props.removeFilters}\n                                        name={this.props.eyeshadowsName}\n                                        toggleRemoveFilter={this.props.toggleRemoveFilter}\n                                        index={1}\n                                    />\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"filters__container--inner--block Eyeliners is-hidden\" hidden>\n                                <div className={`shades__margin-b`  + (!this.props.isFilterBarEnabled ? ' shades_additional__margin-b' : '')}>\n                                    {this.props.isLoaded &&\n                                    <div className=\"shades__outer__container\">\n                                        <ShadeList \n                                            categoryType={this.props.categoryType}\n                                            products={this.props.productsEyeliners}\n                                            updateShade={this.props.updateShade}\n                                            closeShade={this.props.closeShade}\n                                            name={this.props.eyelinersName}\n                                            clearProduct={this.props.clearProduct}\n                                            selectedShadesList={this.props.selectedShadesList}\n                                            selectedShadeSku={this.props.currentEyelinerProduct}\n                                            invalidProduct={this.props.invalidEyelinersProduct}\n                                        />\n                                    </div>\n                                    }\n                                </div>\n                                <div className={`filters__inner__wrapper`  + (!this.props.isFilterBarEnabled ? ' is-hidden' : '')}>\n                                    {this.props.isLoaded && \n                                    <Filters \n                                        isFilterBarEnabled={this.props.isFilterBarEnabled}\n                                        harmonies={this.props.harmoniesEyeliners}\n                                        setFilter={this.props.setFilter}\n                                        updateFilterFlag={this.props.updateFilterFlag}\n                                        categoryType={this.props.categoryType}\n                                        currentLipProduct={this.props.currentLipProduct}\n                                        currentEyeshadowProduct={this.props.currentEyeshadowProduct}\n                                        finishes={this.props.finishesEyeliners}\n                                        products={this.props.productsEyeliners}\n                                        currentFilters={this.props.eyelinerFilters}\n                                        currentEyelinerProduct={this.props.currentEyelinerProduct}\n                                        removeFilters={this.props.removeFilters}\n                                        name={this.props.eyelinersName}\n                                        toggleRemoveFilter={this.props.toggleRemoveFilter}\n                                        index={2}\n                                    />\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                        <div className={(!this.props.isFilterBarEnabled ? ' is-hidden' : '')}>\n                            <Tabs data={this.props.data} showPrice={this.props.showPrice} changeTab={this.props.changeTab} selectedShadesList={this.props.selectedShadesList} />\n                        </div>\n                    </div>\n                    }\n                </div>\n                <div className=\"cto_landscape--modal\">\n                    <img src={`${config.theme}/assets/media/landscapeMobileDev.svg`} alt=\"\"/>\n                    <p>{window.config.cto.dedicated.rotate}</p>\n                </div>\n            </React.Fragment>\n          )\n    }\n}\n\nexport default Module","import React, { Component } from 'react'\nimport Cart from './cart'\nimport Icon from '../../vto/Components/Icon'\nimport { select } from 'lib/selectors'\nimport { isWideScreen } from 'lib/helpers'\n\nclass Product extends Component {\n\n  defaultImg = `${config.theme}/assets/media/product_default.png`\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n    let product, pCode\n    product = this.props.product\n    pCode = product.code.substring(0, 6)\n    window.addEventListener('resize', this.getWishlistNav(pCode, product.name))\n  }\n\n  shouldComponentUpdate(nextProps) {\n        return !!nextProps.product.code\n  }\n\n renderCartIcon(pCode, product) {\n    if (!this.props.isQRcontext) return (\n         <Cart code={pCode} cartId={`REF-${pCode}`} name={product.name}/>\n    )\n  }\n\n  getRightNav(pCode, product) {\n    return (\n        this.renderCartIcon(pCode, product)\n    )\n  }\n\n  getImage(images) {\n    let imageUrl = ''\n    let result = ''\n    result = images.filter(x => x.assetType === \"PACKSHOT_DEFAULT\")\n    if (result && result !=\"\") {\n      imageUrl = result[0].url\n    }\n    else {\n      result = images.filter(x => x.assetType === \"BASIC_TEXTURE\")\n      result && result !=\"\" ? imageUrl = result[0].url : imageUrl = this.defaultImg\n    }\n    return imageUrl\n  }\n\n  getWishlistNav(pCode, pName) {\n    let isWishlist, wishlistCTO, hiddenTxt, wishlistAdd, wishlistRemove\n    wishlistCTO = window.localStorage.getItem('wishlistCTO')\n    hiddenTxt = window.config.cto.dedicated.addToWishlist + ' ' + pName + ' - Ref. ' + pCode\n    wishlistAdd = window.config.cto.dedicated.addToWishlist + ' ' + pName + ' - Ref. ' + pCode\n    wishlistRemove = window.config.cto.dedicated.removeFromWishlist + ' ' + pName + ' - Ref. ' + pCode\n    isWishlist = false\n    const wishlistData = {\n      \"eventAction\": pName,\n      \"eventLabel\": pCode\n    }\n    if (wishlistCTO && wishlistCTO.indexOf(pCode)!==-1) {\n      isWishlist = true\n      hiddenTxt =  window.config.cto.dedicated.removeFromWishlist +' '+ pName+'- Ref. '+ pCode\n    }\n    const wishlistIcon = window.innerWidth > 960 ? 'wishlist' : 'cto_new_wishlist'\n    if (!this.props.isQRcontext) {\n    var wishlistButton = select('button.is-wishlist')\n     if (wishlistButton) {\n        isWishlist ? wishlistButton.classList.add('is-active') : wishlistButton.classList.remove('is-active')\n      }\n      return (\n        <button type=\"button\" className={`button is-icon is-wishlist ` + (isWishlist ? ' is-active' : '')} data-track-wishlist={JSON.stringify(wishlistData)} data-wishlist={pCode} data-text-active={wishlistAdd} data-text-inactive={wishlistRemove} data-text-wishlist-active={window.config.cto.dedicated.addToWishlist} data-text-wishlist-inactive={window.config.cto.dedicated.removeFromWishlist} data-test=\"wishlist-action\">\n          <Icon className=\" is-medium  is-wishlist  \" name={wishlistIcon} />\n          <span className=\"is-sr-only\">{hiddenTxt}</span>\n        </button>\n      )\n    }\n  }\n\n  setProductTop() {\n    const productContainer = select('.product-container')\n    const parentContainer = select('.cto__product')\n    if (productContainer) {\n      const productContainerHeight = productContainer.clientHeight\n      if (productContainerHeight >= '50' ) {\n        parentContainer.classList.add('align-top')\n      }\n      else {\n        parentContainer.classList.remove('align-top')\n      }\n    }\n  }\n\n  moveToShade() {\n    const selectedButton = select(`ul.shade-slider.${this.props.categoryType} li.selected button`)\n    if (selectedButton) {\n      selectedButton.focus()\n    }\n  }\n\n  render() {\n    let queryString, image, product, pCode\n    image = this.props.product.basic.images ? this.getImage(this.props.product.basic.images) : this.defaultImg\n    product = this.props.product\n    pCode = product.code.substring(0, 6)\n    queryString = 'sku=' + pCode + '&quickView=true'\n    const addToBag = window.config.cto.dedicated.addToBag\n    const backToShadeText = window.config.cto.dedicated.backtoShadeText\n    const isBoutiqueApp = window.jsConfigSecond.isBoutiqueApp\n\n    setTimeout(() => this.setProductTop(), 10)\n    return (\n      <div className=\"cto-product-container product\">\n        {!isBoutiqueApp &&\n          <div className=\"wishlst-icon nav-left\">\n            {this.getWishlistNav(pCode, product.name)}\n          </div>\n        }\n        <div className=\"cart-icon nav-right cto-cart-icon\">\n          {this.props.ecom && !isBoutiqueApp ? this.getRightNav(pCode, product) : ''}\n        </div>\n        <div className=\"product-container\">\n          <div className=\"product-image\"><img src={image} alt=\"\" /></div>\n          <div >\n            <p role=\"heading\" tabIndex=\"-1\" aria-level=\"2\" id={`REF-${pCode}`} className='product-info'>\n              <span className=\"product-title\"> {product.name}</span>\n              <span className=\"product-description is-cropped\">{product.shade.shade}</span>\n              <span className=\"is-sr-only\">{`Ref. ${pCode}`}</span>\n            </p>\n          </div>\n          <div className=\"product-price\">{(!this.props.hidePrice && !this.props.isQRcontext) ? <p>{product.price}\n            {(!this.props.ecom && product.price && product.price !== '') ? <a className=\"disclaimer-indicator\" href=\"#disclaimer-text\" aria-label={window.config.cto.dedicated.disclaimerTextPriceInfo} data-test=\"lblDisclaimerIndicator\">*</a> : ''}</p> : ''}</div>\n          {this.props.ecom && !this.props.isQRcontext && !isBoutiqueApp ?\n            <button className=\"button is-tertiary cto-addtobag\" type=\"button\" data-id={pCode} data-popup-target=\"quickview\" data-popup-query={queryString} aria-haspopup=\"dialog\" aria-label={`${addToBag} ${product.name} ${product.shade.shade}`} aria-describedby={`REF-${pCode}`}  data-modal-title={product.name}>\n              <span>\n                <span>{window.config.cto.dedicated.addToBag}</span>\n              </span>\n            </button> : ''}          \n            <button type=\"button\" className=\"is-sr-only is-sr-only-focusable\" onClick={() => this.moveToShade()}>{backToShadeText}</button>            \n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Product","import React, { Component } from 'react'\nimport Icon from '../../vto/Components/Icon'\nimport { select } from 'lib/selectors'\n\nclass RemoveFilters extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            enabled: false\n        }\n        this.clickRemoveFilter = this.clickRemoveFilter.bind(this)\n    }\n\n    clickRemoveFilter() {\n        this.props.toggleRemoveFilter(false)\n        const selectedButton = select('div.filters__container--inner--block:not(.is-hidden) button.filters__heading')\n        if (selectedButton) {\n            selectedButton.focus()\n        }\n        dataLayer.push({\n            'eventCategory': 'vto',\n            'eventAction': this.props.categoryType + '_filter_removed',\n            'eventLabel': 'all',\n            'event': 'uaevent'\n        })\n    }\n\n    render() {\n        const removeFilterTxt = window.config.cto.dedicated.newRemoveFilter\n        const category = this.props.categoryType\n        const enabled = this.props.removeFilters[category]\n        const translationArray = [window.config.cto.dedicated.lips, window.config.cto.dedicated.eyeshadows, window.config.cto.dedicated.eyeliners]\n        const removeFilterTxtTitle = `${window.config.cto.dedicated.newRemoveFilter} - ${window.config.cto.dedicated.categoryTransalation} ${translationArray[this.props.index]}`\n        let small_txt = ''\n        if (removeFilterTxt.length > 18) {\n            small_txt = ' small-txt'\n        }\n\n        let actif = ' disabled'\n        if (enabled) {\n            actif = ''\n        }\n\n        return (\n            <div className=\"remove__filters\">\n                <button className={`remove__filters-btn${small_txt} ${actif}`} disabled={!enabled} type=\"button\" onClick={this.clickRemoveFilter}  {...(enabled) ? { 'title': removeFilterTxtTitle } : {}}><Icon name=\"close\" /><span className=\"remove__filters-txt\">{removeFilterTxt}</span></button>\n            </div>\n        )\n    }\n}\n\nexport default RemoveFilters","import React, { Component } from 'react'\nimport { select, selectAll } from 'lib/selectors'\nclass Shade extends Component {\n\n    constructor(props) {\n        super(props)\n        this.changeShade = this.changeShade.bind(this)\n    }\n\n    componentDidMount() {\n        const slider = select('.shade-slider.' + this.props.name)\n        const shade = select('li.shade', slider)\n        shade.firstChild.addEventListener('click', this.changeShade)\n    }\n\n    changeShade(product,e) {\n        if (e == undefined)  {\n            return false\n        }        \n        e.stopPropagation()\n        let isTabClick = e && e.screenX == 0 && e.screenY == 0 && e.isTrusted\n        if ((product.code == this.props.shadeInfo.code) && !this.props.drag && isTabClick) {\n            const cameraIcon = select('.camera-icon')\n            cameraIcon && cameraIcon.click()\n        }\n        !this.props.drag ? this.props.slideToShade(product, this.props.name) : ''\n        if (!e.target.classList.contains('clicked')) {\n          dataLayer.push({\n            'eventCategory': 'vto',\n            'eventAction': 'change model color',\n            'eventLabel': product.code,\n            'event': 'uaevent'\n          })\n        }\n        const productContainer = select('.product-container')\n        if (productContainer && this.props.arrowClick) {\n            const productInfo = select('.product-info', productContainer)\n            if (productInfo) {\n                productInfo.focus()\n            }\n        }\n        this.props.setArrowClick(false)\n    }\n\n    getErrorID(classvalue) {\n        const elem = select(classvalue)\n        if(elem) {\n            elem.focus()\n            return elem.getAttribute('id')\n        }\n        else {\n            return ''\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if(JSON.stringify(prevProps.invalidProduct) != JSON.stringify(this.props.invalidProduct))\n        this.setState({\n            invalidProduct : this.props.invalidProduct\n        })\n    }\n\n    getShadename(product) {\n        return `${product.shade.shade}`\n    }\n\n    render() {\n        const product = this.props.product\n        let isSelected = 'shade'\n        let lipsProductCode = this.props.selectedShadesList[0].currentLipsProduct.code\n        let eyeshadowsProductCode = this.props.selectedShadesList[1].currentEyeshadowsProduct.code\n        let eyelinersProductCode = this.props.selectedShadesList[2].currentEyelinersProduct.code\n        const sliderList = selectAll('.shade-slider')\n        const _this = this\n        if (sliderList.length > 0) {\n            sliderList.forEach(function(item) {\n                if (item.classList[1] === 'Lips') {\n                    if (_this.props.invalidProduct.code == product.code) isSelected = \"selected shade\" \n                    else if (lipsProductCode == product.code) isSelected = \"selected shade\"\n                }\n                else if (item.classList[1] === 'Eyeshadows') {\n                    if (_this.props.invalidProduct.code == product.code) isSelected = \"selected shade\"\n                    else if (eyeshadowsProductCode == product.code) isSelected = \"selected shade\"\n                }\n                else if (item.classList[1] === 'Eyeliners') {\n                    if (_this.props.invalidProduct.code == product.code) isSelected = \"selected shade\"\n                    else if (eyelinersProductCode == product.code) isSelected = \"selected shade\"\n                }\n            })\n        }\n        else {\n            if (lipsProductCode == product.code) isSelected = \"selected shade\"\n        }\n        \n        const id = `shade-${product.code}`\n        const prodID = product.code.substring(0,6)\n\n        let url = product.shade.url\n        if (url) {\n            url = product.shade.url.replace('w_512', 'w_114')\n            url = url.replace('h_512', 'h_114')\n        }\n\n        const errorMessageID = this.getErrorID('.cto__error p')\n        const invalidExists = this.state && this.state.invalidProduct\n\n        return (\n            <li className={isSelected} id={id} data-id={prodID} style={{marginRight: this.props.margin}}>\n                <button style={{backgroundColor: `#${product.hexValue}`}} type=\"button\" onClick={this.changeShade.bind(this, product)} {...(invalidExists && Object.keys(this.state.invalidProduct).length > 0) ? {'aria-describedby' : errorMessageID} : {}}>\n                    <img src={url} alt={this.getShadename(product)} />\n                </button>\n            </li>\n        )\n    }\n}\n\nexport default Shade","import React, { Component } from 'react'\nimport Shade from './shade'\nimport { select, selectAll, getCollection } from 'lib/selectors'\nimport Icon from '../../vto/Components/Icon'\nimport CameraIcon from './cameraIcon'\nimport { CtoContext } from './ctoContext'\nimport {identifyBrowser, isTabletScreen} from '../../../lib/helpers'\n\nconst isItChrome = identifyBrowser().includes('Chrome')\nconst isTablet = isTabletScreen()\nclass ShadeList extends Component {\n  static contextType = CtoContext\n  constructor(props) {\n    super(props)\n    this.state = {\n      isCrossFixedLips: false,\n      isCrossFixedEyeshadows: false,\n      isCrossFixedEyeliners: false,\n      margin: 28,\n      isSet: false,\n      drag: false,\n      wideScreen: false,\n      arrowClick: false,\n      windowWidth: 0,\n      isPotrait:  window.matchMedia(\"(orientation:portrait)\").matches\n    }\n    this.scrolling = false\n    this.xOffset = 0\n    this.initialX = 0\n    this.shadeSize = 50\n    this.margin = 28\n    this.crossMargin = 28\n    this.selectedShadeSize = 67\n    this.mobileBp = 960\n    this.delta = 15;\n    this.startX;\n    this.slideToShade = this.slideToShade.bind(this)\n    this.slideToCross = this.slideToCross.bind(this)\n    this.handleResize = this.handleResize.bind(this)\n    this.goToNextShade = this.goToNextShade.bind(this)\n    this.goToPrevShade = this.goToPrevShade.bind(this)\n    this.shadesRef = React.createRef()\n    this.sliderRef = React.createRef()\n    this.shadeInfo = null\n    this.windowHeight = 0\n  }\n\n  componentDidMount() {\n    const name = this.props.name\n    const container = select(`.${name} .shades__container`)\n    const btnRight = select(`.${name} .btn-right`)\n    const btnLeft = select(`.${name} .btn-left`)\n    container.addEventListener('mousedown', this.onMouseDown)\n    container.addEventListener('mouseleave', this.onMouseLeave)\n    container.addEventListener('mouseup', this.onMouseLeave)\n    container.addEventListener('mousemove', this.onMouseMove)\n    container.addEventListener('touchstart', this.onMouseDown)\n    container.addEventListener('touchend', this.onMouseLeave)\n    container.addEventListener('touchmove', this.onMouseMove)\n    container.addEventListener('dblclick', this.onDblClick)\n    btnRight.addEventListener('click', this.goToNextShade)\n    btnLeft.addEventListener('click', this.goToPrevShade)\n    const parentSize = select('.cto__container--inner').clientWidth\n    const initialPosition = (parentSize - this.selectedShadeSize) / 2 - (this.shadeSize + this.crossMargin)\n    const sliderList = select(`.${name} .shade-slider`)\n    sliderList.style.transform = \"translate3d(\" + initialPosition + \"px, 0, 0)\"\n    this.xOffset = initialPosition\n\n    const fakeSelected = selectAll(`.filters__container .fake`)\n    const fakePos = (parentSize - this.selectedShadeSize) / 2\n    fakeSelected.forEach( item => {\n      item.style.transform = \"translate3d(\" + fakePos + \"px, 0, 0)\"\n    })\n    this.initializeCarousel()\n    this.updateAccessibilityState(name)\n    if (screen.availHeight > this.mobileBp) {\n      this.setState({\n        wideScreen: true\n      })\n    }\n    else if (window.innerWidth > this.mobileBp) {\n      this.setState({\n        wideScreen: true\n      })\n    }\n    this.setState({\n      windowWidth: window.innerWidth\n    })\n    this.windowHeight = window.innerHeight\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.name === this.props.categoryType) {\n      if (this.props.products.length > 0) {\n        if (this.props.products.length !== prevProps.products.length) {\n          if (Object.keys(this.props.selectedShadeSku).length > 0) {\n            if (!this.props.products.includes(this.props.selectedShadeSku)) {\n              this.slideToShade(this.props.products[0])\n            }\n            else this.slideToShade(this.props.selectedShadeSku)\n          }\n          else {\n            if (Object.keys(this.props.invalidProduct).length > 0){\n              this.slideToShade(this.props.invalidProduct)\n            } else{\n              this.slideToCross(false, true)\n            }\n          }\n        }\n      }\n      else {\n        this.slideToCross(false, true)\n      }\n    }\n    if (prevProps.categoryType !== this.props.categoryType && this.props.categoryType === this.props.name && this.state.isSet !== true) {\n        this.initializeCarousel()\n        this.updateAccessibilityState(this.props.name)\n    }\n    if(!this.context.showPicture) {\n      this.updateAccessibilityState(this.props.categoryType)\n    } \n   \n    if (this.state.isPotrait != prevState.isPotrait) {\n      let currentView = window.matchMedia(\"(orientation:portrait)\").matches\n      if (currentView != this.state.isPotrait) {\n        const currentProduct = this.getCurrentProduct()\n        if (Object.keys(currentProduct).length != 0) {\n          this.slideToShade(currentProduct)\n        } else {\n          this.slideToCross()\n        }\n      }\n    }\n    if (prevProps.categoryType !== this.props.categoryType && isTablet) {\n      const currentProd = this.getCurrentProduct()\n      if (Object.keys(currentProd).length != 0) {\n        this.slideToShade(currentProd)\n      } else {\n        this.slideToCross()\n      }\n      this.setfakePos()\n    }\n  }\n\n  setfakePos = () => {\n    const parentSize = select('.cto__container--inner').clientWidth\n    const fakeSelected = selectAll(`.filters__container .fake`)\n    const fakePos = (parentSize - this.selectedShadeSize) / 2\n    fakeSelected.forEach(item => {\n      item.style.transform = \"translate3d(\" + fakePos + \"px, 0, 0)\"\n    })\n  }\n\n  componentWillUnmount() {\n    const name = this.props.name\n    const container = select(`.${name} .shades__container`)\n    const btnRight = select(`.${name} .btn-right`)\n    const btnLeft = select(`.${name} .btn-left`)\n    container.removeEventListener('mousedown', this.onMouseDown)\n    container.removeEventListener('mouseleave', this.onMouseLeave)\n    container.removeEventListener('mouseup', this.onMouseLeave)\n    container.removeEventListener('mousemove', this.onMouseMove)\n    container.removeEventListener('touchstart', this.onMouseDown)\n    container.removeEventListener('touchend', this.onMouseLeave)\n    container.removeEventListener('touchmove', this.onMouseMove)\n    container.removeEventListener('dblclick', this.onDblClick)\n    btnRight.removeEventListener('click', this.goToNextShade)\n    btnLeft.removeEventListener('click', this.goToPrevShade)\n    window.removeEventListener('keyup', this.checkTabFocus)\n    window.addEventListener('orientationchange', this.toggleAltCross)\n  }\n\n  onMouseDown = (e) => { \n    this.setState({\n       drag : false\n    })\n    if (e.type === \"touchstart\") {\n      this.initialX = e.touches[0].clientX - this.xOffset\n      this.startX = e.changedTouches[0].pageX\n    } else {\n      this.initialX = e.clientX - this.xOffset\n      this.startX = e.pageX;\n    }\n    this.scrolling = true\n  }\n\n  onMouseMove = (e) => {\n    this.setState({\n       drag : true\n    })\n    if (!this.scrolling) return\n    e.preventDefault()\n    const category = this.props.categoryType\n    const slider = select('.shade-slider.' + category)\n    if (e.type === \"touchmove\") {\n      this.currentX = e.touches[0].clientX - this.initialX\n    } else {\n      this.currentX = e.clientX - this.initialX\n    }\n    TweenLite.set(slider, { x: this.currentX })\n    this.xOffset = this.currentX\n  }\n\n  onMouseLeave = (e) => {\n    if (!this.scrolling) return\n    const category = this.props.categoryType\n    this.initialX = this.currentX\n    this.scrolling = false\n    const slider = select('.shade-slider.' + category)\n    const parentSize = select('.cto__container--inner').clientWidth\n    const shades = [...getCollection('li.shade', slider)]\n    const center = (parentSize / 2) - this.initialX\n    const halfMargin = this.state.margin / 2\n    let shadeTab = []\n    let distance = (this.shadeSize + halfMargin)\n    let diffX = 0\n    let i = 0\n    this.toggleAltCross()\n    if (e.type === \"touchend\") diffX = Math.abs(e.changedTouches[0].pageX - this.startX)\n    else diffX = Math.abs(e.pageX - this.startX)\n\n    // find the closest shade to select it\n    if (shades.length > 0 && diffX > this.delta) {\n      shades.forEach(el => {\n        if (el.classList.contains(\"selected\")) {\n          shadeTab[i] = {\n            'min': distance,\n            'max': distance + this.selectedShadeSize + this.state.margin,\n          }\n          distance += this.selectedShadeSize + this.state.margin\n        }\n        else {\n          shadeTab[i] = {\n            'min': distance,\n            'max': distance + this.shadeSize + this.state.margin\n          }\n          distance += this.shadeSize + this.state.margin\n        }\n        i++\n      })\n      const closestIndex = shadeTab.findIndex(el => {\n        return (el.min < center && el.max >= center)\n      })\n\n      // if scrolling past the slider max width\n      if (closestIndex < 0 && center > shadeTab[shadeTab.length - 1].max) {\n        const id = shades[shades.length - 1].getAttribute('id').slice(-6)\n        const product = this.props.products.find(p => p.code === id)\n        if (product) this.slideToShade(product)\n      }\n      // if scrolling before the center\n      else if (closestIndex < 0 && center < (this.shadeSize + halfMargin)) {\n        this.slideToCross()\n\n      }\n      else {\n        if (shades[closestIndex]) {\n          const id = shades[closestIndex].getAttribute('id').replace('shade-', '')\n          const product = this.props.products.find(p => p.code === id)\n          if (product) this.slideToShade(product)\n        }\n      }\n    }\n  }\n\n  onDblClick() {\n    return false\n  }\n\n  toggleAltCross() {\n    if (this.props.categoryType) {\n      let offset = 80\n      if (this.xOffset < this.mobileBp) offset = 0\n      const category = this.props.categoryType\n      if (this.xOffset < offset) {\n        if (category === 'Lips' && !this.state.isCrossFixedLips) {\n          this.setState({ isCrossFixedLips: true })\n        }\n        if (category === 'Eyeshadows' && !this.state.isCrossFixedEyeshadows) {\n          this.setState({ isCrossFixedEyeshadows: true })\n        }\n        if (category === 'Eyeliners' && !this.state.isCrossFixedEyeliners) {\n          this.setState({ isCrossFixedEyeliners: true })\n        }\n      }\n      else {\n        if (category === 'Lips' && this.state.isCrossFixedLips) {\n          this.setState({ isCrossFixedLips: false })\n        }\n        if (category === 'Eyeshadows' && this.state.isCrossFixedEyeshadows) {\n          this.setState({ isCrossFixedEyeshadows: false })\n        }\n        if (category === 'Eyeliners' && this.state.isCrossFixedEyeliners) {\n          this.setState({ isCrossFixedEyeliners: false })\n        }\n      }\n    }\n  }\n\n  slideToShade(product) {\n    const sku = product.code\n    const category = this.props.categoryType\n    const slider = select('.shade-slider.' + category)\n    const parentSize = select('.cto__container--inner').clientWidth\n    const shade = select(`#shade-${sku}`, slider)\n    const shades = [...getCollection('li', slider)]\n    const index = shades.findIndex(el => el == shade)\n    const firstShadeDistance = (parentSize - this.selectedShadeSize) / 2 - (this.shadeSize + this.crossMargin)\n    const fakeSelected = select(`.${category} .selected.fake`)\n    let dest = firstShadeDistance\n    if (index > 0) dest = firstShadeDistance - ((index - 1) * (this.shadeSize + this.state.margin))\n    TweenLite.fromTo(slider, .4, { x: this.xOffset }, { x: dest, onComplete: () => {\n      this.updateAccessibilityState(category)\n    } })\n    this.xOffset = dest\n    this.toggleAltCross()\n    this.props.updateShade(product, category)\n    fakeSelected.classList.remove('is-hidden')\n  }\n\n  slideToCross(e, hasError = false) {\n    const category = this.props.categoryType\n    const slider = select('.shade-slider.' + category)\n    const parentSize = select('.cto__container--inner').clientWidth\n    const crossPosition = (parentSize - this.shadeSize) / 2\n    const fakeSelected = select(`.${category} .selected.fake`)\n    TweenLite.to(slider, .4, { x: crossPosition, onComplete: () => {\n      this.updateAccessibilityState(category)\n    } })\n    this.xOffset = crossPosition\n    this.currentX = this.xOffset\n    this.toggleAltCross()\n    fakeSelected.classList.add('is-hidden')\n\n    if (hasError) {\n      const productContainer = select('.cto__product')\n      productContainer.classList.add('is-softly-hidden')\n    }\n    else {\n      let product\n      if (category === 'Lips') {\n        product = this.props.selectedShadesList[0].currentLipsProduct\n      }\n      if (category === 'Eyeshadows') {\n        product = this.props.selectedShadesList[1].currentEyeshadowsProduct\n      }\n      if (category === 'Eyeliners') {\n        product = this.props.selectedShadesList[2].currentEyelinersProduct\n      }\n      this.props.closeShade(product)\n      this.props.clearProduct(category)\n    }\n  }\n\n  handleResize = (e) => {\n    let current = select('.current')\n    if (this.state.wideScreen && current && !(isItChrome && this.windowHeight - window.innerHeight < 80)) { //80 to accomodate Chrome download notification segement\n      const selectedTab = current.getAttribute('data-category')\n      let product\n      if (selectedTab === 'Lips') {\n        if (this.props.selectedShadesList[0].currentLipsProduct === '' || Object.keys(this.props.selectedShadesList[0].currentLipsProduct).length == 0) {\n          this.slideToCross()\n        }\n        else {\n          product = this.props.selectedShadesList[0].currentLipsProduct\n          this.slideToShade(product, selectedTab)\n        }\n      }\n      else if (selectedTab === 'Eyeshadows') {\n        if (this.props.selectedShadesList[1].currentEyeshadowsProduct === '' || Object.keys(this.props.selectedShadesList[1].currentEyeshadowsProduct).length == 0) {\n          this.slideToCross()\n        }\n        else {\n          product = this.props.selectedShadesList[1].currentEyeshadowsProduct\n          this.slideToShade(product, selectedTab)\n        }\n      }\n      else if (selectedTab === 'Eyeliners') {\n        if (this.props.selectedShadesList[2].currentEyelinersProduct === '' || Object.keys(this.props.selectedShadesList[2].currentEyelinersProduct).length == 0) {\n          this.slideToCross()\n        }\n        else {\n          product = this.props.selectedShadesList[2].currentEyelinersProduct\n          this.slideToShade(product, selectedTab)\n        }\n      } \n      this.setfakePos()\n    }\n    this.windowHeight = window.innerHeight\n    this.setState({\n      isPotrait: window.matchMedia(\"(orientation:portrait)\").matches\n    }) \n  }\n\n  initializeCarousel() {\n    const name = this.props.name\n    const container = select(`.${name} .shades__container`)\n    const parentSize = container.getBoundingClientRect().width\n    \n    if ( parentSize > 0) {\n      this.initialPosition = (parentSize - this.selectedShadeSize ) / 2\n      this.xOffset = this.initialPosition\n      const slider = select('.shade-slider.' + name)\n      const shades = [...getCollection('li.shade', slider)]\n      const limit = parentSize - 2\n      const offset = 4\n      let isBetween = false\n      let tempMargin = this.state.margin\n      while(isBetween === false) {\n        let shadesTab = []\n        let i = 0\n        let distance = (parentSize - this.selectedShadeSize ) / 2\n        shades.forEach( f => {\n          if (i === 0) {\n            shadesTab[i] = {\n              min: distance,\n              max: distance + this.selectedShadeSize,\n            }\n            distance +=  this.selectedShadeSize + tempMargin\n          }\n          else {\n            shadesTab[i] = {\n              min: distance,\n              max: distance +  this.shadeSize\n            }\n            distance +=  this.shadeSize + tempMargin\n          }\n          i++\n        })\n        shadesTab.forEach( f => {\n          if (limit > f.min && limit < f.max) {\n            isBetween = true\n          }\n        })\n        if (isBetween === false) tempMargin ++\n      }\n\n      if (tempMargin !== this.state.margin) {\n        if (tempMargin + offset > 40) tempMargin = 40\n        else tempMargin = tempMargin + offset\n        this.setState({\n          margin : tempMargin,\n          isSet: true\n        })\n      }\n      else this.setState({isSet: true})\n    }\n  }\n\n  updateAccessibilityState (categoryName) {\n    const sliderList = select(`.${categoryName} .shade-slider`)\n    const shades = [...getCollection('li.shade', sliderList)]\n    shades.forEach(shade => {\n      const visibility = this.getTabVisibility(shade, categoryName)\n      if (shade.classList.contains(\"selected\")) {\n        shade.firstChild.setAttribute('aria-current', 'true')\n      }\n      else {\n        shade.firstChild.removeAttribute('aria-current')\n      }\n      if ( visibility ) {\n        shade.removeAttribute('aria-hidden')\n        shade.firstChild.removeAttribute('tabindex')\n      }\n      else {\n        shade.setAttribute('aria-hidden', 'true')\n        shade.firstChild.setAttribute('tabindex', '-1')\n      }\n    })\n  }\n\n  getTabVisibility(shade, name) {\n    const rect = shade.getBoundingClientRect()\n    const sliderBlock = select(`.${name} .shades__container`)\n    const sliderBlockRect = sliderBlock.getBoundingClientRect()\n    const isInViewport = rect.left >= sliderBlockRect.left && rect.right + this.margin <= sliderBlockRect.right\n    return isInViewport\n  }\n\n  goToNextShade() {\n    this.setState({\n      drag : false,\n      arrowClick: true\n    })\n    const selectedTab = select('.current').getAttribute('data-category')\n    const slider = select('.shade-slider.' + selectedTab)\n    const selectedShade = select('.selected', slider)\n    if (selectedShade !== null) {\n      if (selectedShade.nextElementSibling.nextElementSibling === null) {\n        const rightBtn = select('.btn-right.' + selectedTab)\n        rightBtn.setAttribute('hidden', 'true')\n      }\n      selectedShade.nextElementSibling.firstChild.click()\n    }\n    else {\n      const leftBtn = select('.btn-left.' + selectedTab)\n      leftBtn.removeAttribute('hidden')\n      slider.firstChild.nextElementSibling.firstChild.click()\n    }\n    setTimeout(() => {\n      const shadesBox = this.shadesRef.current.getBoundingClientRect()\n      const parentSize = shadesBox.width\n      if (parentSize > 0) {\n        const sliderList = this.sliderRef.current\n        const shades = getCollection('li', sliderList)\n        let currentShade = null\n        shades.some((f, index) => {\n          const shadesDimensions = f.getBoundingClientRect()\n          if (Math.floor(shadesDimensions.right) < Math.floor(shadesBox.right)) { \n            currentShade = f\n          }\n          if (Math.floor(shadesDimensions.right) > Math.floor(shadesBox.right)) {\n            currentShade.firstElementChild.focus()\n            return true\n          }\n        })\n      }\n    }, 500);    \n  }\n\n  goToPrevShade() {\n    this.setState({\n      drag : false,\n      arrowClick: true\n    })\n    const selectedTab = select('.current').getAttribute('data-category')\n    const slider = select('.shade-slider.' + selectedTab)\n    const selectedShade = select('.selected', slider)\n    if (selectedShade !== null) {\n      const rightBtn = select('.btn-right.' + selectedTab)\n      rightBtn.removeAttribute('hidden')\n      if (selectedShade.previousSibling.previousSibling === null) {\n        const leftBtn = select('.btn-left.' + selectedTab)\n        leftBtn.setAttribute('hidden', 'true')\n      }\n      selectedShade.previousSibling.firstChild.click()\n    }\n    setTimeout(() => {\n      const shadesBox = this.shadesRef.current.getBoundingClientRect()\n      const parentSize = shadesBox.width\n      if (parentSize > 0) {\n        const sliderList = this.sliderRef.current\n        const shades = getCollection('li', sliderList)\n        let currentShade = null\n        shades.some((f, index) => {\n          if (index != 0) {\n            const shadesDimensions = f.getBoundingClientRect()\n            if (Math.floor(shadesDimensions.left) > Math.floor(shadesBox.left)) {\n              currentShade = f\n            }\n            if (Math.floor(shadesDimensions.left) > Math.floor(shadesBox.left)) {\n              currentShade.firstElementChild.focus()\n              return true\n            }\n          }\n        })\n      }\n    }, 500);\n  }\n\n  checkTabFocus = (e) => {\n    var code = (e.keyCode ? e.keyCode : e.which);\n    if (code == 9 && this.state.drag) {\n      this.setState({\n        drag: false\n      })\n    }\n  }\n\n  setArrowClick(e) {\n    this.setState({\n      arrowClick: e\n    })\n  }\n\n  \n  cameraClicked = (e) => {\n    this.context.updateValue('showTimer', true)\n    dataLayer.push({\n        'eventCategory': 'vto',\n        'eventAction': 'take picture on dedicated page',\n        'eventLabel': this.getCurrentProduct().code,\n        'event': 'uaevent'\n    })\n    const landscapeModal = select('.cto__container .cto_landscape--modal')\n    landscapeModal && landscapeModal.setAttribute('aria-hidden', true)\n  }\n\n  getCurrentProduct = (e) => {\n    if (this.props.categoryType === 'Lips') {\n     return this.props.selectedShadesList[0].currentLipsProduct\n    }\n    if (this.props.categoryType === 'Eyeshadows') {\n      return this.props.selectedShadesList[1].currentEyeshadowsProduct\n    }\n    if (this.props.categoryType === 'Eyeliners') {\n      return this.props.selectedShadesList[2].currentEyelinersProduct\n    }\n  }\n\n  getSelectedShades = (e) => {\n    let shadeArray = []\n    if (this.props.selectedShadesList[0].currentLipsProduct && this.props.selectedShadesList[0].currentLipsProduct.shade) {\n      shadeArray.push(this.props.selectedShadesList[0].currentLipsProduct.shade.shade)\n    }\n    if (this.props.selectedShadesList[1].currentEyeshadowsProduct && this.props.selectedShadesList[1].currentEyeshadowsProduct.shade) {\n      shadeArray.push(this.props.selectedShadesList[1].currentEyeshadowsProduct.shade.shade)\n    }\n    if (this.props.selectedShadesList[2].currentEyelinersProduct && this.props.selectedShadesList[2].currentEyelinersProduct.shade) {\n      shadeArray.push(this.props.selectedShadesList[2].currentEyelinersProduct.shade.shade)\n    }\n    return shadeArray.length > 0 ? shadeArray.join(', ') : ''\n  }\n\n  render() {\n    const products = this.props.products\n    let isFixedCrossedDisplayed, isListShortened\n    if (this.props.categoryType === 'Lips') {\n      isFixedCrossedDisplayed = this.state.isCrossFixedLips ? 'visible' : ''\n      isListShortened = this.state.isCrossFixedLips ? 'short' : ''\n    }\n    if (this.props.categoryType === 'Eyeshadows') {\n      isFixedCrossedDisplayed = this.state.isCrossFixedEyeshadows ? 'visible' : ''\n      isListShortened = this.state.isCrossFixedEyeshadows ? 'short' : ''\n    }\n    if (this.props.categoryType === 'Eyeliners') {\n      isFixedCrossedDisplayed = this.state.isCrossFixedEyeliners ? 'visible' : ''\n      isListShortened = this.state.isCrossFixedEyeliners ? 'short' : ''\n    }\n    window.addEventListener('resize', this.handleResize)\n    window.addEventListener('keyup', this.checkTabFocus)\n    const tabName = this.props.categoryType + '-Tab'\n    let shadeName = this.getSelectedShades()\n\n    this.shadeInfo = this.getCurrentProduct()\n\n    const showCameraIcon = config.cto.dedicated.enablePictureCTODedicatedPage && Object.keys(this.props.invalidProduct).length == 0\n\n    return (\n      <React.Fragment>\n        <div className={`fixed-cross ` + this.props.name + ` ${isFixedCrossedDisplayed}`} {...(isFixedCrossedDisplayed === '' ? { 'hidden': true } : '')}>\n        <button type=\"button\" className=\"reset-shades-icon\" onClick={this.slideToCross} aria-describedby={tabName}>\n            <span className=\"is-sr-only\">{window.config.cto.dedicated.removeCurrentShade}</span>\n            <Icon name=\"close\" className=\"cross-icon\" />\n          </button>\n        </div>\n        <div className={`selected fake ${Object.keys(this.props.selectedShadeSku).length == 0 && Object.keys(this.props.invalidProduct).length == 0 ? 'is-hidden' : ''}`} {...showCameraIcon && !this.scrolling ? { 'style': { pointerEvents: 'inherit' } } : {}}>\n          <span></span>\n          {showCameraIcon && <CameraIcon cameraMessage={`${window.config.cto.dedicated.cameraText} ${shadeName}`} click={this.cameraClicked} />}\n        </div>\n        <div className={`shades__container ` + this.props.name + ` ${isListShortened}`} ref={this.shadesRef} >\n          <div className=\"shadeCount\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n          <ul className={`shade-slider ` + this.props.name} ref={this.sliderRef}>\n            <li className=\"cross\" {...(isFixedCrossedDisplayed === '' ? '' : {'hidden': true })}>\n              <button type=\"button\" className=\"reset-shades-icon\" onClick={this.slideToCross} aria-describedby={tabName}>\n                <span className=\"is-sr-only\">{window.config.cto.dedicated.removeCurrentShade}</span>\n                <Icon name=\"close\" className=\"cross-icon\" />\n              </button>\n            </li>\n            {products.map((item, index) => <Shade\n              key={index}\n              index={index}\n              product={item}\n              drag={this.state.drag}\n              slideToShade={this.slideToShade}\n              selectedShadesList={this.props.selectedShadesList}\n              name={this.props.name}\n              invalidProduct={this.props.invalidProduct}\n              margin={this.state.margin}\n              arrowClick={this.state.arrowClick}\n              setArrowClick={(e) => this.setArrowClick(e)}\n              shadeInfo={this.shadeInfo}\n            />\n            )}\n          </ul>\n        </div>\n        <button type=\"button\" className={`is-sr-only is-sr-only-focusable btn-arrow btn-left ` + this.props.name }>\n          <Icon name=\"next-white\" className=\"flipIcon\" />\n          <span className=\"is-sr-only\">{window.config.cto.dedicated.previousShades}</span>\n        </button>\n        <button type=\"button\" className={`is-sr-only is-sr-only-focusable btn-arrow btn-right ` + this.props.name }>\n          <Icon name=\"next-white\" />\n          <span className=\"is-sr-only\">{window.config.cto.dedicated.nextShades}</span>\n        </button>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default ShadeList","import React, { Component } from 'react'\nimport { select } from 'lib/selectors'\n\nclass Tab extends Component {\n\n    clickOnTab(category, hidePrice) {\n        this.props.changeTab(category)\n        this.props.showPrice(hidePrice)\n             dataLayer.push({\n             'eventCategory': 'vto',\n             'eventAction': 'tab',\n             'eventLabel': this.props.catName,\n             'event' :   'uaevent'\n            })\n      setTimeout(() => {\n        const selectedButton = select(`ul.shade-slider.${this.props.catName} li.selected.shade button`)\n        if (selectedButton) {\n          selectedButton.focus()\n        }\n      }, 500);\n    }\n\n    render() {\n        let currentTab = this.props.currentTab\n        const hidePrice = this.props.hidePrice\n        const name = this.props.name\n        const categoryName = this.props.catName\n        let hasAppliedDotClass = ''\n        let isSelected = ''\n        let selectedShadesList =  this.props.selectedShadesList\n        if (this.props.catName === 'Lips' && selectedShadesList[0].currentLipsProduct.hasOwnProperty('code') == true) {\n          hasAppliedDotClass = 'has-applied'\n        }\n        else if (this.props.catName === 'Eyeshadows' && selectedShadesList[1].currentEyeshadowsProduct.hasOwnProperty('code') == true)  {\n          hasAppliedDotClass = 'has-applied'\n        }\n        else if (this.props.catName === 'Eyeliners' && selectedShadesList[2].currentEyelinersProduct.hasOwnProperty('code') == true) {\n          hasAppliedDotClass = 'has-applied'\n        }\n        if (currentTab === this.props.catName) isSelected = \"current\"\n        return (\n            <li className={`cto__tabs--item ${isSelected} ${hasAppliedDotClass}` } data-category={categoryName}><button type=\"button\" id={`${categoryName}-Tab`} onClick={this.clickOnTab.bind(this, categoryName, hidePrice)}  aria-pressed={hasAppliedDotClass == 'has-applied'} {...(isSelected) ? {'aria-current' : true} : {}}><span>{name}</span></button></li>\n        )\n    }\n}\n\n\nexport default Tab","import React, { Component } from 'react'\nimport Tab from './tab'\n\nclass Tabs extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            currentTab : 'Lips'\n        }\n        this.changeTab = this.changeTab.bind(this)\n    }\n\n    changeTab(category) {\n        this.setState({currentTab: category})\n        this.props.changeTab(category)\n    }\n\n    render() {\n        const categories = this.props.data.categories\n        const translationArray = [window.config.cto.dedicated.lips, window.config.cto.dedicated.eyeshadows, window.config.cto.dedicated.eyeliners]\n        const translationCatName = ['Lips', 'Eyeshadows', 'Eyeliners']\n        const screenReaderText = window.config.cto.dedicated.screenReaderText\n        return (\n            <div className=\"cto__tabs\" data-test=\"secTabToAccessAnotherCategory\">\n                <p className=\"is-sr-only\">{screenReaderText}</p>\n                <ul className=\"cto__tabs-list\">\n                    {categories.map((item, index) => <Tab\n                            key={index}\n                            index={index}\n                            apiName={item.name}\n                            name={translationArray[index]}\n                            catName={translationCatName[index]}\n                            changeTab={this.changeTab}\n                            currentTab={this.state.currentTab}\n                            hidePrice={item.hidePrice}\n                            showPrice={this.props.showPrice}\n                            selectedShadesList={this.props.selectedShadesList}\n                            />\n                    )}\n                </ul>\n            </div>\n        )\n    }\n}\n\nexport default Tabs","import { createLogger } from 'redux-logger'\nimport { createStore, applyMiddleware } from 'redux'\nimport reducers from './reducers'\n\nconst loggerMiddleware = createLogger({\n  predicate: () => process.env.NODE_ENV === 'development',\n})\n\nconst appliedMiddleWare = applyMiddleware(loggerMiddleware)\n\nexport default function configureStore(preloadedStore) {\n  return createStore(\n    reducers,\n    preloadedStore,\n    appliedMiddleWare,\n  )\n}\n","import { combineReducers } from 'redux'\n\nconst ready = (state = false, {type}) => {\n    switch (type) {\n      case 'SDK_LOADED':\n        return true\n      case 'CTO_CLOSE':\n        return false\n      default:\n        return state\n    }\n  }\n\n  const reducers = combineReducers({\n    ready\n  })\n  \n  export default reducers","import React, { Component } from 'react'\nimport { render } from 'react-dom'\nimport { select, getCollection } from 'lib/selectors'\nimport { get } from 'modules/fetch'\nimport { Provider, connect } from 'react-redux'\nimport scriptjs from 'scriptjs'\nimport checkForCamera from 'modules/camera'\nimport configureStore from './Redux/configureStore'\nimport Cto from './Components/cto'\nimport { isWideScreen } from 'lib/helpers'\nimport { bindTryOnButtonEvents, getCookie } from 'ui/try-on-legal'\n\nconst store = configureStore()\nconst ctoWrapper = select('.virtual-makeup-component')\nconst currentLanguage = window.config.currentLanguage\nconst yapi = `${window.config.currentLocale}yapi/virtual-makeup/?lang=${currentLanguage}`\nconst desktopBp = 961\n\nlet isQRcontext = false\ncheckForCamera()\n\nmanageQR()\n\nif (localStorage['cartCTO'])\nlocalStorage['cartCTO']=''\n\nif (localStorage['wishlistCTO'])\nlocalStorage['wishlistCTO']=''\n\nwindow.ymkAsyncInit = function () {\n\tlet width, height\n\tif (isWideScreen()) {\n\t\twidth = 533\n\t\theight = 469\n\t\tlet bodyWidth = document.body.clientWidth\n\t\tconst flexWidth = bodyWidth - desktopBp\n\t\tif (bodyWidth > desktopBp && bodyWidth <= 1400) {\n\t\t\tconst flexWidthRatio = flexWidth / 1.8 // find the good ratio linked to the grid & container width\n\t\t\twidth += flexWidthRatio\n\t\t}\n\t\tif (bodyWidth > 1400 && bodyWidth <= 1600) {\n\t\t\tconst flexWidthBig = flexWidth / 1.805\n\t\t\twidth += flexWidthBig\n\t\t}\n\t\telse if (bodyWidth > 1600) {\n\t\t\twidth = 887\n\t\t}\n\t\tif (select('body').classList.contains('firefox')) {\n\t\t\twidth = 682\n\t\t\theight = 500\n\t\t}\n\t}\n\telse {\n\t\twidth = document.documentElement.clientWidth,\n\t\theight = document.documentElement.clientHeight\n\t}\n\n\twindow.YMK.init({\n\t\thideUI: true,\n\t\twidth,\n\t\theight,\n\t\tautoOpen: false\n\t})\n}\n\nfunction setLaunchButton(hero, values) {\n\tconst button = select('#cto-launch-button', hero)\n\tjsConfigSecond.tryOnLegal.cto.isActive && bindTryOnButtonEvents(select('.cto-launch-button'), jsConfigSecond.tryOnLegal.cto.message) \n\tbutton.addEventListener('click', function () {\n\t\tconst currentCookie = getCookie('LEGAL_CONSENT') ? JSON.parse(getCookie('LEGAL_CONSENT')) : null\n\t\tif (jsConfigSecond.tryOnLegal.cto.isActive && !(currentCookie && currentCookie.ctoDedicatedTryOnAccepted)) {\n\t\t\treturn false\n\t\t}\n\t\thero.classList.add('is-hidden')\n\t\tctoWrapper.classList.remove('is-hidden')\n\t\tCTOButtonAnalyticsPush()\n\n\t\trender(\n\t\t\t<Provider store={store}>\n\t\t\t\t<Cto data={values} isQRcontext={isQRcontext}/>\n\t\t\t</Provider>,\n\t\t\tctoWrapper\n\t\t)\n\t\twindow.YMK.open()\n\t\twindow.ymkAsyncInit()\n\t})\n}\n\nfunction CTOButtonAnalyticsPush() {\n  dataLayer.push({\n    'eventCategory': 'try-on',\n    'eventAction': 'click',\n    'eventLabel': 'start the experience',\n    'event': 'uaevent' // associated event\n  })\n}\n\nfunction manageData(data) {\n\t// for eyeshadows only\n\tdata.categories[1].products.forEach((product) => {\n\t\tif (product.is4ShadowFeatureFlipping && product.basic.is4ShadowProduct) {\n\t\t\tswitch(product.basic.ctoIntensity) {\n\t\t\t\tcase 'APACCTOIntensity':\n\t\t\t\t\t// only one intensity for markets /th, /tw, /sg, /hk-zh, /hk-en, /my\n\t\t\t\t\tproduct.hasTwoIntensities = false\n\t\t\t\t\tproduct.code = `${product.code}-3`\n\t\t\t\t\tbreak\n\t\t\t\tcase 'WWCTOIntensity':\n\t\t\t\t\t// two intensities\n\t\t\t\t\tproduct.altSku = product.code\n\t\t\t\t\tproduct.code = `${product.code}-1`\n\t\t\t\t\tproduct.hasTwoIntensities = true\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t})\n\n\t// add a hadProduct tag for finishes\n\tconst lipsProducts = data.categories[0].products\n\tconst lipsFinishes = data.categories[0].finishes\n\n\tlipsFinishes.forEach(f => {\n\t\tconst filterCode = f.code\n\t\tconst hasProduct = lipsProducts.some(p => {\n\t\t\tif (p.finishes) return p.finishes.includes(filterCode)\n\t\t\telse return false\n\t\t})\n\t\tf.hasProduct = hasProduct\n\t})\n\tdata.categories[0].finishes = lipsFinishes\n\n\treturn data\n}\n\nfunction manageQR() {\n\tlet url = new URL(window.location.href)\n\tif (select('body').classList.contains('page-chanel-try-on') && url) {\n\t\tlet medium = url.searchParams.get('utm_medium')\n\t\tlet campaign = url.searchParams.get('utm_campaign')\n\t\t// list of dom elements to hide if theses params are present in url\n\t\tlet list = ['footer', '#chatButton']\n\t\n\t\tselect('.page-chanel-try-on > header').style.visibility = 'visible'\n\t\tif ((campaign && campaign === 'QRS') && (medium && medium === 'qrcode')) {\n\t\t\tisQRcontext = true\n\t\t\tlist.forEach(item => {\n\t\t\t\tif (select(item)) {\n\t\t\t\t\tselect(item).classList.add('is-hidden')\n\t\t\t\t\tselect(item).setAttribute('aria-hidden', true)\n\t\t\t\t}\n\t\t\t})\n\t\t\tselect('header').classList.add('cto-qrs')\n\t\t\tsetSubCategoryAnalytics('qrs')\n\t\t} else {\n\t\t\tsetSubCategoryAnalytics('classic')\n\t\t}\n\t}\n}\n\nfunction setSubCategoryAnalytics(subcategory) {\n\tlet counter = 0\n\tconst interval = setInterval(() => {\n\n\t\tcounter++\n\t\tif (window.dataLayer && typeof(window.dataLayer[0].sub_category_level3) !== \"undefined\") {\n\t\t\twindow.dataLayer[0].sub_category_level3 = subcategory\n\t\t\tclearInterval(interval)\n\t\t}\n\t\tif (counter >= 300) {\n\t\t\tclearInterval(interval)\n\t\t}\n\t}, 100)\n}\n\nfunction init() {\n\tconst sdk = window.config.vto ? window.config.vto.makeup.sdk : ''\n\n\t\tconst yapiPromise = get(yapi)\n \t\tconst sdkPromise = new Promise(resolve => scriptjs(sdk, () => {\n\t\t\tresolve(window.YMK)\n\t\t\tstore.dispatch({\n\t\t\t\ttype: 'SDK_LOADED'\n\t\t\t})\n\t\t}))\n\n\t\treturn Promise.all([yapiPromise, sdkPromise]).then((values) => {\n\t\t\tstore.dispatch({\n\t\t\t\ttype: 'CTO_READY'\n\t\t\t})\n\t\t\tconst hero = select('.hero')\n\t\t\tsetLaunchButton(hero, manageData(values[0]))\n\t\t})\n}\n\nexport {\n\tinit\n}","import React from 'react'\n\nconst Icon = ({ name, className }) => (\n  <svg className={`icon ${className}`} focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n    <use xlinkHref={`${config.theme}/assets/icons.svg${config.targetVersion}#${name}`}/>\n  </svg>\n)\n\nexport default Icon\n","import { onVtoClosed } from \"../Utils/analytics\"\nimport { ACTIONS } from \"../../../config/constants\"\n\nimport { Manager, VTO_PDP_STYLE_UPDATE } from 'lib/events'\n\nexport const cameraErrorResolvedAction = (store) => store.dispatch({\n  type: ACTIONS.CAMERA_ERROR_RESOLVED\n})\n\nexport const vtoVideoStartAction = (store) => store.dispatch({\n  type: ACTIONS.VTO_VIDEO_START\n})\n\nexport const vtoVideoStopAction = (store) => store.dispatch({\n  type: ACTIONS.VTO_VIDEO_STOP\n})\n\n\nexport const vtoCameraOpenAction = (store) => store.dispatch({\n  type: ACTIONS.VTO_BTN_CLICKED,\n})\n\nexport const vtoCameraStoppedAction = (store) => store.dispatch({\n  type: ACTIONS.VTO_CAMERA_STOPPED\n})\n\nexport const vtoReadyAction = (store) => store.dispatch({\n  type: ACTIONS.VTO_READY,\n  category: 'eyewear'\n})\n\nexport const vtoCloseAction = (store, window) => {\n  store.dispatch({\n    type: ACTIONS.VTO_CLOSE,\n  })\n\n  if (window.vtoStream) {\n    window.vtoStream.getTracks()\n      .forEach(track => track.stop())\n    window.vtoStream = null\n    delete window.vtoStream\n  }\n\n  onVtoClosed(store.getState().product.code)\n\n  Manager.publish(VTO_PDP_STYLE_UPDATE)\n}\n\nexport const layoutChangeAction = (store, type) => store.dispatch({\n  type: ACTIONS.LAYOUT_CHANGE,\n  payload: type\n})\n\nexport const productChangeAction = (store, product) => store.dispatch({\n  type: ACTIONS.PRODUCT_CHANGE,\n  ...product\n})\n\nexport const vtoOpenAction = (store) => {\n  store.dispatch({\n    type: ACTIONS.VTO_OPEN\n  })\n}\n\nexport const orientationChangeAction = (store, event) => store.dispatch({\n  type: ACTIONS.ORIENTATION_CHANGE,\n  payload: event ? event.target.screen.orientation.angle : 0\n})\n\nexport const vtoCloseClickAction = (store) => store.dispatch({\n  type: ACTIONS.VTO_CLOSE_CLICK\n})\n\nexport const errorAction = (store, err) => store.dispatch({\n  type: ACTIONS.ERROR,\n  err\n})\n\nexport const vtoCameraNotAvailableAction = (store) => store.dispatch({\n  type: ACTIONS.CameraNotAvailable\n})\n\nexport const vtoSDKCloseAction = (store) => store.dispatch({\n  type: ACTIONS.SDK_CLOSED\n})\n"],"sourceRoot":""}