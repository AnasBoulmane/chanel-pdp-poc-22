(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{422:function(e,t,s){"use strict";s.r(t),s.d(t,"init",(function(){return ke}));s(14),s(99),s(73);var i=s(428),r=s(0),o=s(5),a=s(448),n=s(140),c=s.n(n),d=s(595),l=s(539),h=s(471);var u=Object(h.combineReducers)({ready:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{type:t}=arguments.length>1?arguments[1]:void 0;switch(t){case"SDK_LOADED":return!0;case"CTO_CLOSE":return!1;default:return e}}});const p=Object(l.createLogger)({predicate:()=>!1}),m=Object(h.applyMiddleware)(p);function f(e){return Object(h.createStore)(u,e,m)}s(7);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}class y extends i.Component{constructor(e){super(e),this.changeShade=this.changeShade.bind(this)}componentDidMount(){const e=Object(r.select)(".shade-slider."+this.props.name);Object(r.select)("li.shade",e).firstChild.addEventListener("click",this.changeShade)}changeShade(e,t){if(null==t)return!1;t.stopPropagation();let s=t&&0==t.screenX&&0==t.screenY&&t.isTrusted;if(e.code==this.props.shadeInfo.code&&!this.props.drag&&s){const e=Object(r.select)(".camera-icon");e&&e.click()}!this.props.drag&&this.props.slideToShade(e,this.props.name),t.target.classList.contains("clicked")||dataLayer.push({eventCategory:"vto",eventAction:"change model color",eventLabel:e.code,event:"uaevent"});const i=Object(r.select)(".product-container");if(i&&this.props.arrowClick){const e=Object(r.select)(".product-info",i);e&&e.focus()}this.props.setArrowClick(!1)}getErrorID(e){const t=Object(r.select)(e);return t?(t.focus(),t.getAttribute("id")):""}componentDidUpdate(e){JSON.stringify(e.invalidProduct)!=JSON.stringify(this.props.invalidProduct)&&this.setState({invalidProduct:this.props.invalidProduct})}getShadename(e){return"".concat(e.shade.shade)}render(){const e=this.props.product;let t="shade",s=this.props.selectedShadesList[0].currentLipsProduct.code,o=this.props.selectedShadesList[1].currentEyeshadowsProduct.code,a=this.props.selectedShadesList[2].currentEyelinersProduct.code;const n=Object(r.selectAll)(".shade-slider"),c=this;n.length>0?n.forEach((function(i){"Lips"===i.classList[1]?(c.props.invalidProduct.code==e.code||s==e.code)&&(t="selected shade"):"Eyeshadows"===i.classList[1]?(c.props.invalidProduct.code==e.code||o==e.code)&&(t="selected shade"):"Eyeliners"===i.classList[1]&&(c.props.invalidProduct.code==e.code||a==e.code)&&(t="selected shade")})):s==e.code&&(t="selected shade");const d="shade-".concat(e.code),l=e.code.substring(0,6);let h=e.shade.url;h&&(h=e.shade.url.replace("w_512","w_114"),h=h.replace("h_512","h_114"));const u=this.getErrorID(".cto__error p"),p=this.state&&this.state.invalidProduct;return i.default.createElement("li",{className:t,id:d,"data-id":l,style:{marginRight:this.props.margin}},i.default.createElement("button",g({style:{backgroundColor:"#".concat(e.hexValue)},type:"button",onClick:this.changeShade.bind(this,e)},p&&Object.keys(this.state.invalidProduct).length>0?{"aria-describedby":u}:{}),i.default.createElement("img",{src:h,alt:this.getShadename(e)})))}}var b=y,v=s(440),w=s(596),E=s(488),S=s(2);function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const T=Object(S.B)().includes("Chrome"),C=Object(S.T)();class O extends i.Component{constructor(e){super(e),P(this,"setfakePos",()=>{const e=Object(r.select)(".cto__container--inner").clientWidth,t=Object(r.selectAll)(".filters__container .fake"),s=(e-this.selectedShadeSize)/2;t.forEach(e=>{e.style.transform="translate3d("+s+"px, 0, 0)"})}),P(this,"onMouseDown",e=>{this.setState({drag:!1}),"touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.startX=e.changedTouches[0].pageX):(this.initialX=e.clientX-this.xOffset,this.startX=e.pageX),this.scrolling=!0}),P(this,"onMouseMove",e=>{if(this.setState({drag:!0}),!this.scrolling)return;e.preventDefault();const t=this.props.categoryType,s=Object(r.select)(".shade-slider."+t);"touchmove"===e.type?this.currentX=e.touches[0].clientX-this.initialX:this.currentX=e.clientX-this.initialX,TweenLite.set(s,{x:this.currentX}),this.xOffset=this.currentX}),P(this,"onMouseLeave",e=>{if(!this.scrolling)return;const t=this.props.categoryType;this.initialX=this.currentX,this.scrolling=!1;const s=Object(r.select)(".shade-slider."+t),i=Object(r.select)(".cto__container--inner").clientWidth,o=[...Object(r.getCollection)("li.shade",s)],a=i/2-this.initialX,n=this.state.margin/2;let c=[],d=this.shadeSize+n,l=0,h=0;if(this.toggleAltCross(),l="touchend"===e.type?Math.abs(e.changedTouches[0].pageX-this.startX):Math.abs(e.pageX-this.startX),o.length>0&&l>this.delta){o.forEach(e=>{e.classList.contains("selected")?(c[h]={min:d,max:d+this.selectedShadeSize+this.state.margin},d+=this.selectedShadeSize+this.state.margin):(c[h]={min:d,max:d+this.shadeSize+this.state.margin},d+=this.shadeSize+this.state.margin),h++});const e=c.findIndex(e=>e.min<a&&e.max>=a);if(e<0&&a>c[c.length-1].max){const e=o[o.length-1].getAttribute("id").slice(-6),t=this.props.products.find(t=>t.code===e);t&&this.slideToShade(t)}else if(e<0&&a<this.shadeSize+n)this.slideToCross();else if(o[e]){const t=o[e].getAttribute("id").replace("shade-",""),s=this.props.products.find(e=>e.code===t);s&&this.slideToShade(s)}}}),P(this,"handleResize",e=>{let t=Object(r.select)(".current");if(this.state.wideScreen&&t&&!(T&&this.windowHeight-window.innerHeight<80)){const e=t.getAttribute("data-category");let s;"Lips"===e?""===this.props.selectedShadesList[0].currentLipsProduct||0==Object.keys(this.props.selectedShadesList[0].currentLipsProduct).length?this.slideToCross():(s=this.props.selectedShadesList[0].currentLipsProduct,this.slideToShade(s,e)):"Eyeshadows"===e?""===this.props.selectedShadesList[1].currentEyeshadowsProduct||0==Object.keys(this.props.selectedShadesList[1].currentEyeshadowsProduct).length?this.slideToCross():(s=this.props.selectedShadesList[1].currentEyeshadowsProduct,this.slideToShade(s,e)):"Eyeliners"===e&&(""===this.props.selectedShadesList[2].currentEyelinersProduct||0==Object.keys(this.props.selectedShadesList[2].currentEyelinersProduct).length?this.slideToCross():(s=this.props.selectedShadesList[2].currentEyelinersProduct,this.slideToShade(s,e))),this.setfakePos()}this.windowHeight=window.innerHeight,this.setState({isPotrait:window.matchMedia("(orientation:portrait)").matches})}),P(this,"checkTabFocus",e=>{9==(e.keyCode?e.keyCode:e.which)&&this.state.drag&&this.setState({drag:!1})}),P(this,"cameraClicked",e=>{this.context.updateValue("showTimer",!0),dataLayer.push({eventCategory:"vto",eventAction:"take picture on dedicated page",eventLabel:this.getCurrentProduct().code,event:"uaevent"});const t=Object(r.select)(".cto__container .cto_landscape--modal");t&&t.setAttribute("aria-hidden",!0)}),P(this,"getCurrentProduct",e=>"Lips"===this.props.categoryType?this.props.selectedShadesList[0].currentLipsProduct:"Eyeshadows"===this.props.categoryType?this.props.selectedShadesList[1].currentEyeshadowsProduct:"Eyeliners"===this.props.categoryType?this.props.selectedShadesList[2].currentEyelinersProduct:void 0),P(this,"getSelectedShades",e=>{let t=[];return this.props.selectedShadesList[0].currentLipsProduct&&this.props.selectedShadesList[0].currentLipsProduct.shade&&t.push(this.props.selectedShadesList[0].currentLipsProduct.shade.shade),this.props.selectedShadesList[1].currentEyeshadowsProduct&&this.props.selectedShadesList[1].currentEyeshadowsProduct.shade&&t.push(this.props.selectedShadesList[1].currentEyeshadowsProduct.shade.shade),this.props.selectedShadesList[2].currentEyelinersProduct&&this.props.selectedShadesList[2].currentEyelinersProduct.shade&&t.push(this.props.selectedShadesList[2].currentEyelinersProduct.shade.shade),t.length>0?t.join(", "):""}),this.state={isCrossFixedLips:!1,isCrossFixedEyeshadows:!1,isCrossFixedEyeliners:!1,margin:28,isSet:!1,drag:!1,wideScreen:!1,arrowClick:!1,windowWidth:0,isPotrait:window.matchMedia("(orientation:portrait)").matches},this.scrolling=!1,this.xOffset=0,this.initialX=0,this.shadeSize=50,this.margin=28,this.crossMargin=28,this.selectedShadeSize=67,this.mobileBp=960,this.delta=15,this.startX,this.slideToShade=this.slideToShade.bind(this),this.slideToCross=this.slideToCross.bind(this),this.handleResize=this.handleResize.bind(this),this.goToNextShade=this.goToNextShade.bind(this),this.goToPrevShade=this.goToPrevShade.bind(this),this.shadesRef=i.default.createRef(),this.sliderRef=i.default.createRef(),this.shadeInfo=null,this.windowHeight=0}componentDidMount(){const e=this.props.name,t=Object(r.select)(".".concat(e," .shades__container")),s=Object(r.select)(".".concat(e," .btn-right")),i=Object(r.select)(".".concat(e," .btn-left"));t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseleave",this.onMouseLeave),t.addEventListener("mouseup",this.onMouseLeave),t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("touchstart",this.onMouseDown),t.addEventListener("touchend",this.onMouseLeave),t.addEventListener("touchmove",this.onMouseMove),t.addEventListener("dblclick",this.onDblClick),s.addEventListener("click",this.goToNextShade),i.addEventListener("click",this.goToPrevShade);const o=Object(r.select)(".cto__container--inner").clientWidth,a=(o-this.selectedShadeSize)/2-(this.shadeSize+this.crossMargin);Object(r.select)(".".concat(e," .shade-slider")).style.transform="translate3d("+a+"px, 0, 0)",this.xOffset=a;const n=Object(r.selectAll)(".filters__container .fake"),c=(o-this.selectedShadeSize)/2;n.forEach(e=>{e.style.transform="translate3d("+c+"px, 0, 0)"}),this.initializeCarousel(),this.updateAccessibilityState(e),(screen.availHeight>this.mobileBp||window.innerWidth>this.mobileBp)&&this.setState({wideScreen:!0}),this.setState({windowWidth:window.innerWidth}),this.windowHeight=window.innerHeight}componentDidUpdate(e,t){if(this.props.name===this.props.categoryType&&(this.props.products.length>0?this.props.products.length!==e.products.length&&(Object.keys(this.props.selectedShadeSku).length>0?this.props.products.includes(this.props.selectedShadeSku)?this.slideToShade(this.props.selectedShadeSku):this.slideToShade(this.props.products[0]):Object.keys(this.props.invalidProduct).length>0?this.slideToShade(this.props.invalidProduct):this.slideToCross(!1,!0)):this.slideToCross(!1,!0)),e.categoryType!==this.props.categoryType&&this.props.categoryType===this.props.name&&!0!==this.state.isSet&&(this.initializeCarousel(),this.updateAccessibilityState(this.props.name)),this.context.showPicture||this.updateAccessibilityState(this.props.categoryType),this.state.isPotrait!=t.isPotrait){if(window.matchMedia("(orientation:portrait)").matches!=this.state.isPotrait){const e=this.getCurrentProduct();0!=Object.keys(e).length?this.slideToShade(e):this.slideToCross()}}if(e.categoryType!==this.props.categoryType&&C){const e=this.getCurrentProduct();0!=Object.keys(e).length?this.slideToShade(e):this.slideToCross(),this.setfakePos()}}componentWillUnmount(){const e=this.props.name,t=Object(r.select)(".".concat(e," .shades__container")),s=Object(r.select)(".".concat(e," .btn-right")),i=Object(r.select)(".".concat(e," .btn-left"));t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseleave",this.onMouseLeave),t.removeEventListener("mouseup",this.onMouseLeave),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchstart",this.onMouseDown),t.removeEventListener("touchend",this.onMouseLeave),t.removeEventListener("touchmove",this.onMouseMove),t.removeEventListener("dblclick",this.onDblClick),s.removeEventListener("click",this.goToNextShade),i.removeEventListener("click",this.goToPrevShade),window.removeEventListener("keyup",this.checkTabFocus),window.addEventListener("orientationchange",this.toggleAltCross)}onDblClick(){return!1}toggleAltCross(){if(this.props.categoryType){let e=80;this.xOffset<this.mobileBp&&(e=0);const t=this.props.categoryType;this.xOffset<e?("Lips"!==t||this.state.isCrossFixedLips||this.setState({isCrossFixedLips:!0}),"Eyeshadows"!==t||this.state.isCrossFixedEyeshadows||this.setState({isCrossFixedEyeshadows:!0}),"Eyeliners"!==t||this.state.isCrossFixedEyeliners||this.setState({isCrossFixedEyeliners:!0})):("Lips"===t&&this.state.isCrossFixedLips&&this.setState({isCrossFixedLips:!1}),"Eyeshadows"===t&&this.state.isCrossFixedEyeshadows&&this.setState({isCrossFixedEyeshadows:!1}),"Eyeliners"===t&&this.state.isCrossFixedEyeliners&&this.setState({isCrossFixedEyeliners:!1}))}}slideToShade(e){const t=e.code,s=this.props.categoryType,i=Object(r.select)(".shade-slider."+s),o=Object(r.select)(".cto__container--inner").clientWidth,a=Object(r.select)("#shade-".concat(t),i),n=[...Object(r.getCollection)("li",i)].findIndex(e=>e==a),c=(o-this.selectedShadeSize)/2-(this.shadeSize+this.crossMargin),d=Object(r.select)(".".concat(s," .selected.fake"));let l=c;n>0&&(l=c-(n-1)*(this.shadeSize+this.state.margin)),TweenLite.fromTo(i,.4,{x:this.xOffset},{x:l,onComplete:()=>{this.updateAccessibilityState(s)}}),this.xOffset=l,this.toggleAltCross(),this.props.updateShade(e,s),d.classList.remove("is-hidden")}slideToCross(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.props.categoryType,i=Object(r.select)(".shade-slider."+s),o=(Object(r.select)(".cto__container--inner").clientWidth-this.shadeSize)/2,a=Object(r.select)(".".concat(s," .selected.fake"));if(TweenLite.to(i,.4,{x:o,onComplete:()=>{this.updateAccessibilityState(s)}}),this.xOffset=o,this.currentX=this.xOffset,this.toggleAltCross(),a.classList.add("is-hidden"),t){Object(r.select)(".cto__product").classList.add("is-softly-hidden")}else{let e;"Lips"===s&&(e=this.props.selectedShadesList[0].currentLipsProduct),"Eyeshadows"===s&&(e=this.props.selectedShadesList[1].currentEyeshadowsProduct),"Eyeliners"===s&&(e=this.props.selectedShadesList[2].currentEyelinersProduct),this.props.closeShade(e),this.props.clearProduct(s)}}initializeCarousel(){const e=this.props.name,t=Object(r.select)(".".concat(e," .shades__container")).getBoundingClientRect().width;if(t>0){this.initialPosition=(t-this.selectedShadeSize)/2,this.xOffset=this.initialPosition;const s=Object(r.select)(".shade-slider."+e),i=[...Object(r.getCollection)("li.shade",s)],o=t-2,a=4;let n=!1,c=this.state.margin;for(;!1===n;){let e=[],s=0,r=(t-this.selectedShadeSize)/2;i.forEach(t=>{0===s?(e[s]={min:r,max:r+this.selectedShadeSize},r+=this.selectedShadeSize+c):(e[s]={min:r,max:r+this.shadeSize},r+=this.shadeSize+c),s++}),e.forEach(e=>{o>e.min&&o<e.max&&(n=!0)}),!1===n&&c++}c!==this.state.margin?(c+a>40?c=40:c+=a,this.setState({margin:c,isSet:!0})):this.setState({isSet:!0})}}updateAccessibilityState(e){const t=Object(r.select)(".".concat(e," .shade-slider"));[...Object(r.getCollection)("li.shade",t)].forEach(t=>{const s=this.getTabVisibility(t,e);t.classList.contains("selected")?t.firstChild.setAttribute("aria-current","true"):t.firstChild.removeAttribute("aria-current"),s?(t.removeAttribute("aria-hidden"),t.firstChild.removeAttribute("tabindex")):(t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("tabindex","-1"))})}getTabVisibility(e,t){const s=e.getBoundingClientRect(),i=Object(r.select)(".".concat(t," .shades__container")).getBoundingClientRect();return s.left>=i.left&&s.right+this.margin<=i.right}goToNextShade(){this.setState({drag:!1,arrowClick:!0});const e=Object(r.select)(".current").getAttribute("data-category"),t=Object(r.select)(".shade-slider."+e),s=Object(r.select)(".selected",t);if(null!==s){if(null===s.nextElementSibling.nextElementSibling){Object(r.select)(".btn-right."+e).setAttribute("hidden","true")}s.nextElementSibling.firstChild.click()}else{Object(r.select)(".btn-left."+e).removeAttribute("hidden"),t.firstChild.nextElementSibling.firstChild.click()}setTimeout(()=>{const e=this.shadesRef.current.getBoundingClientRect();if(e.width>0){const t=this.sliderRef.current,s=Object(r.getCollection)("li",t);let i=null;s.some((t,s)=>{const r=t.getBoundingClientRect();if(Math.floor(r.right)<Math.floor(e.right)&&(i=t),Math.floor(r.right)>Math.floor(e.right))return i.firstElementChild.focus(),!0})}},500)}goToPrevShade(){this.setState({drag:!1,arrowClick:!0});const e=Object(r.select)(".current").getAttribute("data-category"),t=Object(r.select)(".shade-slider."+e),s=Object(r.select)(".selected",t);if(null!==s){if(Object(r.select)(".btn-right."+e).removeAttribute("hidden"),null===s.previousSibling.previousSibling){Object(r.select)(".btn-left."+e).setAttribute("hidden","true")}s.previousSibling.firstChild.click()}setTimeout(()=>{const e=this.shadesRef.current.getBoundingClientRect();if(e.width>0){const t=this.sliderRef.current,s=Object(r.getCollection)("li",t);let i=null;s.some((t,s)=>{if(0!=s){const s=t.getBoundingClientRect();if(Math.floor(s.left)>Math.floor(e.left)&&(i=t),Math.floor(s.left)>Math.floor(e.left))return i.firstElementChild.focus(),!0}})}},500)}setArrowClick(e){this.setState({arrowClick:e})}render(){const e=this.props.products;let t,s;"Lips"===this.props.categoryType&&(t=this.state.isCrossFixedLips?"visible":"",s=this.state.isCrossFixedLips?"short":""),"Eyeshadows"===this.props.categoryType&&(t=this.state.isCrossFixedEyeshadows?"visible":"",s=this.state.isCrossFixedEyeshadows?"short":""),"Eyeliners"===this.props.categoryType&&(t=this.state.isCrossFixedEyeliners?"visible":"",s=this.state.isCrossFixedEyeliners?"short":""),window.addEventListener("resize",this.handleResize),window.addEventListener("keyup",this.checkTabFocus);const r=this.props.categoryType+"-Tab";let o=this.getSelectedShades();this.shadeInfo=this.getCurrentProduct();const a=config.cto.dedicated.enablePictureCTODedicatedPage&&0==Object.keys(this.props.invalidProduct).length;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",L({className:"fixed-cross "+this.props.name+" ".concat(t)},""===t?{hidden:!0}:""),i.default.createElement("button",{type:"button",className:"reset-shades-icon",onClick:this.slideToCross,"aria-describedby":r},i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.removeCurrentShade),i.default.createElement(v.a,{name:"close",className:"cross-icon"}))),i.default.createElement("div",L({className:"selected fake ".concat(0==Object.keys(this.props.selectedShadeSku).length&&0==Object.keys(this.props.invalidProduct).length?"is-hidden":"")},a&&!this.scrolling?{style:{pointerEvents:"inherit"}}:{}),i.default.createElement("span",null),a&&i.default.createElement(w.a,{cameraMessage:"".concat(window.config.cto.dedicated.cameraText," ").concat(o),click:this.cameraClicked})),i.default.createElement("div",{className:"shades__container "+this.props.name+" ".concat(s),ref:this.shadesRef},i.default.createElement("div",{className:"shadeCount","aria-live":"polite","aria-atomic":"true"}),i.default.createElement("ul",{className:"shade-slider "+this.props.name,ref:this.sliderRef},i.default.createElement("li",L({className:"cross"},""===t?"":{hidden:!0}),i.default.createElement("button",{type:"button",className:"reset-shades-icon",onClick:this.slideToCross,"aria-describedby":r},i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.removeCurrentShade),i.default.createElement(v.a,{name:"close",className:"cross-icon"}))),e.map((e,t)=>i.default.createElement(b,{key:t,index:t,product:e,drag:this.state.drag,slideToShade:this.slideToShade,selectedShadesList:this.props.selectedShadesList,name:this.props.name,invalidProduct:this.props.invalidProduct,margin:this.state.margin,arrowClick:this.state.arrowClick,setArrowClick:e=>this.setArrowClick(e),shadeInfo:this.shadeInfo})))),i.default.createElement("button",{type:"button",className:"is-sr-only is-sr-only-focusable btn-arrow btn-left "+this.props.name},i.default.createElement(v.a,{name:"next-white",className:"flipIcon"}),i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.previousShades)),i.default.createElement("button",{type:"button",className:"is-sr-only is-sr-only-focusable btn-arrow btn-right "+this.props.name},i.default.createElement(v.a,{name:"next-white"}),i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.nextShades)))}}P(O,"contextType",E.a);var _=O;class x extends i.Component{shouldComponentUpdate(e){return!!e.harmony.hexColor}toggleHarmony(e){this.props.setFilter(e,"harmony",this.props.categoryType)}render(){const e=this.props.harmony.code,t=this.props.currentFilters.some(t=>t.code===e),s=t?"selected":"",r=!!this.props.harmony.hexColor,o={marginRight:this.props.index===this.props.max-1?18:this.props.margin,borderColor:"#".concat(this.props.harmony.hexColor)};return i.default.createElement(i.default.Fragment,null,r&&i.default.createElement("li",{key:this.props.harmony.code,style:o,className:s},i.default.createElement("button",{"aria-pressed":t,style:{backgroundColor:"#".concat(this.props.harmony.hexColor),color:"#".concat(this.props.harmony.hexColor)},onClick:this.toggleHarmony.bind(this,this.props.harmony)},i.default.createElement("span",{className:"is-sr-only"},this.props.harmony.name))))}}var j=x;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class R extends i.Component{constructor(e){super(e),F(this,"onMouseDown",e=>{const t=this.sliderRef.current;"touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.startX=e.changedTouches[0].pageX):(this.initialX=e.clientX-this.xOffset,this.startX=e.pageX),t.scrollWidth>Math.round(this.harmoniesRef.current.getBoundingClientRect().width)?this.scrolling=!0:this.scrolling=!1}),F(this,"onMouseMove",e=>{if(!this.scrolling)return;e.preventDefault();const t=this.sliderRef.current,s=this.harmoniesRef.current,i=-(Math.round(t.getBoundingClientRect().width)-s.getBoundingClientRect().width);"touchmove"===e.type?this.currentX=e.touches[0].clientX-this.initialX:this.currentX=e.clientX-this.initialX,this.currentX<i-this.elasticOffset&&(TweenLite.set(t,{x:i-this.elasticOffset}),this.currentX=i-this.elasticOffset),TweenLite.set(t,{x:this.currentX}),this.xOffset=this.currentX}),F(this,"onMouseLeave",e=>{if(!this.scrolling)return;this.scrolling=!1;const t=this.sliderRef.current,s=-(Math.round(t.getBoundingClientRect().width)-this.harmoniesRef.current.getBoundingClientRect().width);this.currentX>0?(TweenLite.fromTo(t,.4,{x:this.currentX},{x:0}),this.currentX=0,this.xOffset=0):this.currentX<s&&(TweenLite.fromTo(t,.4,{x:this.currentX},{x:s}),this.currentX=s,this.xOffset=s)}),this.scrolling=!1,this.xOffset=0,this.initialX=0,this.initialPosition=0,this.delta=15,this.margin=20,this.harmonySize=36,this.startX,this.elasticOffset=80,this.lateralMargin=18,this.mobileBp=960,this.harmoniesRef=i.default.createRef(),this.sliderRef=i.default.createRef(),window.innerWidth>this.mobileBp&&(this.harmonySize=29),this.state={type:"",margin:17,isSet:!1,leftArrow:!1,rightArrow:!1},this.goToNextHarmony=this.goToNextHarmony.bind(this),this.goToPrevHarmony=this.goToPrevHarmony.bind(this),this.currentRight=0}componentDidMount(){const e=this.harmoniesRef.current;e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseleave",this.onMouseLeave),e.addEventListener("mouseup",this.onMouseLeave),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("touchstart",this.onMouseDown),e.addEventListener("touchend",this.onMouseLeave),e.addEventListener("touchmove",this.onMouseMove),this.initializeCarousel(),this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible()}componentDidUpdate(e){e.categoryType!==this.props.categoryType&&this.props.categoryType===this.props.category&&!0!==this.state.isSet&&(this.initializeCarousel(),this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible())}componentWillUnmount(){const e=this.harmoniesRef.current;e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseleave",this.onMouseLeave),e.removeEventListener("mouseup",this.onMouseLeave),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseDown),e.removeEventListener("touchend",this.onMouseLeave),e.removeEventListener("touchmove",this.onMouseMove)}initializeCarousel(){const e=this.harmoniesRef.current.getBoundingClientRect().width;if(e>0){this.initialPosition=(e-this.harmonySize)/2-this.lateralMargin,this.xOffset=this.initialPosition;const t=this.sliderRef.current;if(t.scrollWidth>e){t.style.transform="translate3d("+this.initialPosition+"px, 0, 0)";const s=this.harmoniesRef.current.getBoundingClientRect().width,i=2,o=Object(r.getCollection)("li",t);let a=!1,n=this.state.margin;for(;!1===a;){let t=[],i=0,r=(e-this.harmonySize)/2;o.forEach(e=>{t[i]={min:r,max:r+this.harmonySize},r+=this.harmonySize+n,i++}),t.forEach(e=>{s>e.min&&s<e.max&&(a=!0)}),!1===a&&n++}n!==this.state.margin?this.setState({margin:n+i,isSet:!0}):this.setState({isSet:!0})}else this.setState({type:"is-centered",isSet:!0})}}goToNextHarmony(){const e=this.harmoniesRef.current.getBoundingClientRect(),t=e.width;if(t>0){const s=this.sliderRef.current;Object(r.getCollection)("li",s).some((i,r)=>{const o=i.getBoundingClientRect();if(Math.floor(o.right)>Math.floor(e.right)){let e=0,r=0;return r=0!=this.currentRight?this.currentRight:(t-this.harmonySize)/2,e=r-(this.harmonySize+this.state.margin),TweenLite.fromTo(s,.4,{x:r},{x:e,onComplete:()=>{this.currentRight=e,this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible(),i.firstElementChild.focus()}}),!0}})}}goToPrevHarmony(){const e=this.harmoniesRef.current.getBoundingClientRect(),t=e.width;if(t>0){const s=this.sliderRef.current;Object(r.getCollection)("li",s).some((i,r)=>{const o=i.getBoundingClientRect();if(Math.floor(o.left)<Math.floor(e.left)){let e=0,r=0;return r=0!=this.currentRight?this.currentRight:(t-this.harmonySize)/2,e=r+this.harmonySize+this.state.margin,TweenLite.fromTo(s,.4,{x:r},{x:e,onComplete:()=>{this.currentRight=e,this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible(),i.firstElementChild.focus()}}),!0}})}}getTabVisibility(e,t){const s=e.getBoundingClientRect(),i=Object(r.select)(".".concat(t," .harmonies__box")).getBoundingClientRect();return s.left>=i.left&&s.right+this.margin<=i.right}updateAccessibilityState(e){const t=Object(r.select)(".".concat(e," ul.harmonies"));Object(r.getCollection)("li",t).forEach(t=>{const s=this.getTabVisibility(t,e);t.classList.contains("selected")?t.firstChild.setAttribute("aria-current","true"):t.firstChild.removeAttribute("aria-current"),s?(t.removeAttribute("aria-hidden"),t.firstChild.removeAttribute("tabindex")):(t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("tabindex","-1"))})}ifArrowvisible(){const e=this.harmoniesRef.current.getBoundingClientRect(),t=this.sliderRef.current,s=Object(r.getCollection)("li",t);let i=0,o=0;s.some((t,s)=>{const i=t.getBoundingClientRect();if(Math.floor(i.right)>Math.floor(e.right))return o++,this.setState({rightArrow:!0}),!0}),0==o&&this.setState({rightArrow:!1}),s.some((t,s)=>{const r=t.getBoundingClientRect();if(Math.floor(r.left)<Math.floor(e.left))return i++,this.setState({leftArrow:!0}),!0}),0==i&&this.setState({leftArrow:!1})}render(){const e=this.props.harmonies;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"harmonies__box",ref:this.harmoniesRef},i.default.createElement("div",{role:"heading","aria-level":"3",className:"is-sr-only"},window.config.cto.dedicated.harmonyScreenReaderText),i.default.createElement("ul",{className:"harmonies ".concat(this.state.type),ref:this.sliderRef},e.map((t,s)=>i.default.createElement(j,{key:s,index:s,harmony:t,setFilter:this.props.setFilter,margin:this.state.margin,max:e.length,categoryType:this.props.categoryType,currentFilters:this.props.currentFilters})))),i.default.createElement("button",k({type:"button",className:"is-sr-only is-sr-only-focusable btn-arrow harmonies btn-left ",onClick:this.goToPrevHarmony},this.state.leftArrow?{}:{hidden:!0}),i.default.createElement(v.a,{name:"back"}),i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.previousHarmonies)),i.default.createElement("button",k({type:"button",className:"is-sr-only is-sr-only-focusable btn-arrow harmonies btn-right ",onClick:this.goToNextHarmony},this.state.rightArrow?{}:{hidden:!0}),i.default.createElement(v.a,{name:"back",className:"flipIcon"}),i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.nextHarmonies)))}}var N=R;class M extends i.Component{toggleFinish(e){this.props.setFilter(e,"finish",this.props.categoryType)}render(){const e=this.props.finish,t=this.props.lipsFilters.some(t=>t.code===e.code),s=t?"selected":"";let r={};return r=this.props.width?{marginRight:this.props.margin,width:this.props.width}:{marginRight:this.props.margin},i.default.createElement(i.default.Fragment,null,e.hasProduct&&i.default.createElement("li",{key:e.code,className:s,style:r,onClick:this.toggleFinish.bind(this,e)},i.default.createElement("button",{"aria-pressed":t},e.name)))}}var A=M;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function X(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class D extends i.Component{constructor(e){super(e),X(this,"onMouseDown",e=>{const t=this.sliderRef.current;"touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.startX=e.changedTouches[0].pageX):(this.initialX=e.clientX-this.xOffset,this.startX=e.pageX),t.scrollWidth>this.finishesRef.current.getBoundingClientRect().width?this.scrolling=!0:this.scrolling=!1}),X(this,"onMouseMove",e=>{if(!this.scrolling)return;e.preventDefault();const t=this.sliderRef.current,s=this.finishesRef.current,i=-(Math.round(t.getBoundingClientRect().width)-s.getBoundingClientRect().width);"touchmove"===e.type?this.currentX=e.touches[0].clientX-this.initialX:this.currentX=e.clientX-this.initialX,this.currentX>this.elasticOffset?(TweenLite.set(t,{x:this.elasticOffset}),this.currentX=this.elasticOffset):this.currentX<i-this.elasticOffset&&(TweenLite.set(t,{x:i-this.elasticOffset}),this.currentX=i-this.elasticOffset),this.currentX<=this.initialPosition+10?s.classList.contains("is-cropped-left")||s.classList.add("is-cropped-left"):s.classList.remove("is-cropped-left"),this.currentX>=i+10?s.classList.contains("is-cropped-right")||s.classList.add("is-cropped-right"):s.classList.remove("is-cropped-right"),TweenLite.set(t,{x:this.currentX}),this.xOffset=this.currentX}),X(this,"onMouseLeave",e=>{if(!this.scrolling)return;this.scrolling=!1;const t=this.sliderRef.current,s=-(Math.round(t.getBoundingClientRect().width)-this.finishesRef.current.getBoundingClientRect().width);this.currentX>this.initialPosition?(TweenLite.fromTo(t,.4,{x:this.currentX},{x:this.initialPosition}),this.currentX=this.initialPosition,this.xOffset=this.initialPosition):this.currentX<s&&(TweenLite.fromTo(t,.4,{x:this.currentX},{x:s}),this.currentX=s,this.xOffset=s)}),this.scrolling=!1,this.xOffset=0,this.currentX=0,this.initialX=0,this.initialPosition=0,this.delta=35,this.startX,this.elasticOffset=80,this.finishesRef=i.default.createRef(),this.sliderRef=i.default.createRef(),this.state={margin:9,leftArrow:!1,rightArrow:!1},this.goToNextFinish=this.goToNextFinish.bind(this),this.goToPrevFinish=this.goToPrevFinish.bind(this),this.currentRight=0}componentDidMount(){const e=this.finishesRef.current;e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseleave",this.onMouseLeave),e.addEventListener("mouseup",this.onMouseLeave),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("touchstart",this.onMouseDown),e.addEventListener("touchend",this.onMouseLeave),e.addEventListener("touchmove",this.onMouseMove);const t=this.initialPosition;this.xOffset=t,this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible()}componentWillUnmount(){const e=this.finishesRef.current;this.props.categoryType;e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseleave",this.onMouseLeave),e.removeEventListener("mouseup",this.onMouseLeave),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseDown),e.removeEventListener("touchend",this.onMouseLeave),e.removeEventListener("touchmove",this.onMouseMove)}componentDidUpdate(e){if(e.width!==this.props.width&&this.props.width){const e=this.sliderRef.current,t=Math.round(e.getBoundingClientRect().width),s=this.finishesRef.current,i=s.getBoundingClientRect().width,o=17,a=-(t-s.getBoundingClientRect().width);if(e.scrollWidth>i){this.currentX>a&&s.classList.add("is-cropped-right");const t=Object(r.getCollection)("li",e);let n=!1,c=this.state.margin;for(;!1===n;){let e=[],s=0,r=this.initialPosition;t.forEach(t=>{e[s]={min:r,max:r+this.props.width},r+=this.props.width+c,s++}),e.forEach(e=>{i>e.min&&i<e.max&&(n=!0)}),!1===n&&c++}c!==this.state.margin&&this.setState({margin:c+o})}this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible()}}goToNextFinish(){const e=this.finishesRef.current.getBoundingClientRect(),t=e.width;if(t>0){const s=this.sliderRef.current;Object(r.getCollection)("li",s).some((i,r)=>{const o=i.getBoundingClientRect();if(Math.floor(o.right)>Math.floor(e.right)){let e=0,o=0;return 0!=this.currentRight?o=this.currentRight:(o=(t-this.props.width)/2,r>0&&(o=t-(r+1)*this.props.width)),e=o-(this.props.width+this.state.margin),TweenLite.fromTo(s,.4,{x:o},{x:e,onComplete:()=>{this.currentRight=e,this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible(),i.firstElementChild.focus()}}),!0}})}}goToPrevFinish(){const e=this.finishesRef.current.getBoundingClientRect(),t=e.width;if(t>0){const s=this.sliderRef.current;Object(r.getCollection)("li",s).some((i,r)=>{const o=i.getBoundingClientRect();if(Math.floor(o.left)<Math.floor(e.left)){let e=0,o=0;return 0!=this.currentRight?o=this.currentRight:(o=(t-this.props.width)/2,r>0&&(o=t-(r+1)*this.props.width)),e=o+this.props.width+this.state.margin,TweenLite.fromTo(s,.4,{x:o},{x:e,onComplete:()=>{this.currentRight=e,this.updateAccessibilityState(this.props.categoryType),this.ifArrowvisible(),i.firstElementChild.focus()}}),!0}})}}getTabVisibility(e,t){const s=e.getBoundingClientRect(),i=Object(r.select)(".".concat(t," .finishes__box")).getBoundingClientRect();return s.left>=i.left&&s.right+this.state.margin<=i.right}updateAccessibilityState(e){const t=Object(r.select)(".".concat(e," ul.finishes"));Object(r.getCollection)("li",t).forEach(t=>{this.getTabVisibility(t,e)?(t.removeAttribute("aria-hidden"),t.firstChild.removeAttribute("tabindex")):(t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("tabindex","-1"))})}ifArrowvisible(){const e=this.finishesRef.current.getBoundingClientRect(),t=this.sliderRef.current;let s=0,i=0;const o=Object(r.getCollection)("li",t);o.some((t,s)=>{const r=t.getBoundingClientRect();if(Math.floor(r.right)>Math.floor(e.right))return i++,this.setState({rightArrow:!0}),!0}),0==i&&this.setState({rightArrow:!1}),o.some((t,i)=>{const r=t.getBoundingClientRect();if(Math.floor(r.left)<Math.floor(e.left))return s++,this.setState({leftArrow:!0}),!0}),0==s&&this.setState({leftArrow:!1})}render(){const e=this.props.finishes.filter(e=>e.hasProduct),t=window.config.cto.dedicated.finishScreenReaderText;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"finishes__box "+this.props.finishCategory,ref:this.finishesRef},i.default.createElement("div",{role:"heading","aria-level":"3",className:"is-sr-only"},t),i.default.createElement("ul",{className:"finishes "+this.props.finishCategory,ref:this.sliderRef},e.map((e,t)=>i.default.createElement(A,{key:t,finish:e,setFilter:this.props.setFilter,categoryType:this.props.categoryType,lipsFilters:this.props.lipsFilters,margin:this.state.margin,width:this.props.width})))),i.default.createElement("button",B({type:"button",className:"is-sr-only is-sr-only-focusable btn-arrow finishes btn-left ",onClick:this.goToPrevFinish},this.state.leftArrow?{}:{hidden:!0}),i.default.createElement(v.a,{name:"back"}),i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.previousFinishes)),i.default.createElement("button",B({type:"button",className:"is-sr-only is-sr-only-focusable btn-arrow finishes btn-right ",onClick:this.goToNextFinish},this.state.rightArrow?{}:{hidden:!0}),i.default.createElement(v.a,{name:"back",className:"flipIcon"}),i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.nextFinishes)))}}var I=D;function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}class z extends i.Component{constructor(e){super(e),this.state={enabled:!1},this.clickRemoveFilter=this.clickRemoveFilter.bind(this)}clickRemoveFilter(){this.props.toggleRemoveFilter(!1);const e=Object(r.select)("div.filters__container--inner--block:not(.is-hidden) button.filters__heading");e&&e.focus(),dataLayer.push({eventCategory:"vto",eventAction:this.props.categoryType+"_filter_removed",eventLabel:"all",event:"uaevent"})}render(){const e=window.config.cto.dedicated.newRemoveFilter,t=this.props.categoryType,s=this.props.removeFilters[t],r=[window.config.cto.dedicated.lips,window.config.cto.dedicated.eyeshadows,window.config.cto.dedicated.eyeliners],o="".concat(window.config.cto.dedicated.newRemoveFilter," - ").concat(window.config.cto.dedicated.categoryTransalation," ").concat(r[this.props.index]);let a="";e.length>18&&(a=" small-txt");let n=" disabled";return s&&(n=""),i.default.createElement("div",{className:"remove__filters"},i.default.createElement("button",W({className:"remove__filters-btn".concat(a," ").concat(n),disabled:!s,type:"button",onClick:this.clickRemoveFilter},s?{title:o}:{}),i.default.createElement(v.a,{name:"close"}),i.default.createElement("span",{className:"remove__filters-txt"},e)))}}var H=z;function Y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class K extends i.Component{constructor(){super(),Y(this,"max",0),Y(this,"windowResized",e=>{this.setRemoveFilterBlur(this.state.showFilter)}),this.state={showFilter:!1,finishWidth:null},this.toggleFilters=this.toggleFilters.bind(this),this.finishWidth=null}componentDidMount(){window.addEventListener("resize",this.windowResized)}toggleFilters(){const{showFilter:e}=this.state;this.setState({showFilter:!e}),this.props.updateFilterFlag(!e),this.toggleProductDetails(this.state.showFilter),this.filterToggleDLPush(this.state.showFilter)}toggleProductDetails(e){const t=Object(r.select)(".cto__product"),s=this.props.categoryType,i=Object(r.select)(".".concat(s," .selected.fake"));t&&!Object(S.X)()&&("Lips"===this.props.categoryType&&0!==Object.keys(this.props.currentLipProduct).length||"Eyeshadows"===this.props.categoryType&&0!==Object.keys(this.props.currentEyeshadowProduct).length||"Eyeliners"===this.props.categoryType&&0!==Object.keys(this.props.currentEyelinerProduct).length||!this.props.errorTab&&!i.classList.contains("is-hidden"))&&(e?t.classList.remove("is-softly-hidden"):t.classList.add("is-softly-hidden"))}filterToggleDLPush(e){const t=this.props.categoryType.toLowerCase();dataLayer.push({eventCategory:"vto",eventAction:t+"_filter",eventLabel:e?"close":"open",event:"uaevent"})}setButtonWidth(){const e=Object(r.selectAll)(".finishes li");let t=0,s=this.max;e&&(e.forEach(e=>{e.offsetWidth>t&&(t=e.offsetWidth)}),Math.abs(t-s)>5?this.max=t:this.max=s)}setRemoveFilterBlur(e){const t=Object(r.select)(".filters__container--inner--block.".concat(this.props.categoryType," .filters__inner__wrapper .filters__heading")),s=Object(r.select)(".filters__container--inner--block.".concat(this.props.categoryType," .remove__filters"));window.innerWidth>960?e&&(s.style.width="".concat(t.getBoundingClientRect().left-s.getBoundingClientRect().left-36,"px"),s.scrollWidth>s.clientWidth?s.classList.add("is-cropped"):s.classList.remove("is-cropped")):s&&(s.style.width="auto",s.classList.remove("is-cropped"))}render(){const{showFilter:e}=this.state;let t="filters__content";this.props.isFilterBarEnabled||(t+=" is-hidden");let s="filters__value";e&&(s+=" show__filters");let r="icon__down";e&&(r+=" icon__up",this.setButtonWidth());const o=e?"down":"cto_refine";return this.setRemoveFilterBlur(e),i.default.createElement("div",{className:t},i.default.createElement("div",{className:"filters__header"},i.default.createElement("p",{role:"heading","aria-level":"2"},i.default.createElement("button",{type:"button",className:"filters__heading","aria-expanded":e,onClick:this.toggleFilters},i.default.createElement(v.a,{name:o,className:r})," ",window.config.cto.dedicated.newFiltersHeading))),i.default.createElement("div",{className:s},i.default.createElement(N,{harmonies:this.props.harmonies,setFilter:this.props.setFilter,categoryType:this.props.categoryType,category:this.props.name,currentFilters:this.props.currentFilters}),"Lips"===this.props.name?i.default.createElement(I,{finishes:this.props.finishes,setFilter:this.props.setFilter,categoryType:this.props.categoryType,lipsFilters:this.props.lipsFilters,finishCategory:"Lips",width:this.max}):"",i.default.createElement(H,{removeFilters:this.props.removeFilters,categoryType:this.props.categoryType,category:this.props.name,toggleRemoveFilter:this.props.toggleRemoveFilter,index:this.props.index})))}}var V=K;function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}class q extends i.Component{clickOnTab(e,t){this.props.changeTab(e),this.props.showPrice(t),dataLayer.push({eventCategory:"vto",eventAction:"tab",eventLabel:this.props.catName,event:"uaevent"}),setTimeout(()=>{const e=Object(r.select)("ul.shade-slider.".concat(this.props.catName," li.selected.shade button"));e&&e.focus()},500)}render(){let e=this.props.currentTab;const t=this.props.hidePrice,s=this.props.name,r=this.props.catName;let o="",a="",n=this.props.selectedShadesList;return("Lips"===this.props.catName&&1==n[0].currentLipsProduct.hasOwnProperty("code")||"Eyeshadows"===this.props.catName&&1==n[1].currentEyeshadowsProduct.hasOwnProperty("code")||"Eyeliners"===this.props.catName&&1==n[2].currentEyelinersProduct.hasOwnProperty("code"))&&(o="has-applied"),e===this.props.catName&&(a="current"),i.default.createElement("li",{className:"cto__tabs--item ".concat(a," ").concat(o),"data-category":r},i.default.createElement("button",U({type:"button",id:"".concat(r,"-Tab"),onClick:this.clickOnTab.bind(this,r,t),"aria-pressed":"has-applied"==o},a?{"aria-current":!0}:{}),i.default.createElement("span",null,s)))}}var Q=q;class J extends i.Component{constructor(e){super(e),this.state={currentTab:"Lips"},this.changeTab=this.changeTab.bind(this)}changeTab(e){this.setState({currentTab:e}),this.props.changeTab(e)}render(){const e=this.props.data.categories,t=[window.config.cto.dedicated.lips,window.config.cto.dedicated.eyeshadows,window.config.cto.dedicated.eyeliners],s=["Lips","Eyeshadows","Eyeliners"],r=window.config.cto.dedicated.screenReaderText;return i.default.createElement("div",{className:"cto__tabs","data-test":"secTabToAccessAnotherCategory"},i.default.createElement("p",{className:"is-sr-only"},r),i.default.createElement("ul",{className:"cto__tabs-list"},e.map((e,r)=>i.default.createElement(Q,{key:r,index:r,apiName:e.name,name:t[r],catName:s[r],changeTab:this.changeTab,currentTab:this.state.currentTab,hidePrice:e.hidePrice,showPrice:this.props.showPrice,selectedShadesList:this.props.selectedShadesList}))))}}var G=J,$=s(597),Z=s(545);function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class se extends i.Component{constructor(e){super(e),te(this,"timerComplete",()=>{window.YMK.snapshot("base64",e=>{this.setState({imgSrc:e},()=>{this.context.updateValue("showTimer",!1),this.context.updateValue("showPicture",!0)})})}),te(this,"photoCaptureClose",()=>{const e=Object(r.select)(".".concat(this.props.categoryType,"  .camera-icon"));setTimeout(()=>{e&&e.focus()},0);const t=Object(r.select)(".cto__container .cto_landscape--modal");t&&t.removeAttribute("aria-hidden")}),this.state={imgSrc:""}}render(){const e=Object(r.selectAll)(".shades__margin-b");return e&&!Object(S.X)()&&e.forEach(e=>{Object(r.select)(".cto__product").classList.contains("is-softly-hidden")?e.classList.add("shade-small"):e.classList.remove("shade-small")}),i.default.createElement(i.default.Fragment,null,i.default.createElement("p",{role:"heading","aria-level":"1",className:"is-sr-only ctoText",lang:"en",tabIndex:"-1"},window.config.cto.dedicated.ctoText),i.default.createElement("div",{className:"cto__container--inner"},this.context.state.showTimer&&i.default.createElement($.a,{customClass:"cto_dedicated",callback:this.timerComplete,pauseTimer:this.props.pauseTimer}),this.context.state.showPicture&&i.default.createElement(Z.a,{imgSrc:this.state.imgSrc,callback:this.photoCaptureClose,customClass:"cto-dedicated-photo"}),i.default.createElement("div",ee({className:"YMK-module",id:"YMK-module"},this.context.state.showTimer||this.context.state.showPicture?{"aria-hidden":!0}:{})),this.props.isLoaded&&i.default.createElement("div",ee({className:"filters__container"+(this.props.isFilterBarEnabled?"":" filters__disabled")},this.context.state.showTimer||this.context.state.showPicture?{hidden:!0,"aria-hidden":!0}:{}),i.default.createElement("div",{className:"filters__container--inner"},i.default.createElement("div",{className:"filters__container--inner--block Lips"},i.default.createElement("div",{className:"shades__margin-b"+(this.props.isFilterBarEnabled?"":" shades_additional__margin-b")},this.props.isLoaded&&i.default.createElement("div",{className:"shades__outer__container"},i.default.createElement(_,{categoryType:this.props.categoryType,products:this.props.products,updateShade:this.props.updateShade,closeShade:this.props.closeShade,name:this.props.lipsName,noShade:this.props.noShade,clearProduct:this.props.clearProduct,selectedShadesList:this.props.selectedShadesList,selectedShadeSku:this.props.currentLipProduct,invalidProduct:this.props.invalidLipsProduct}))),i.default.createElement("div",{className:"filters__inner__wrapper"+(this.props.isFilterBarEnabled?"":" is-hidden")},this.props.isLoaded&&i.default.createElement(V,{isFilterBarEnabled:this.props.isFilterBarEnabled,harmonies:this.props.harmonies,setFilter:this.props.setFilter,updateFilterFlag:this.props.updateFilterFlag,categoryType:this.props.categoryType,currentLipProduct:this.props.currentLipProduct,currentEyeshadowProduct:this.props.currentEyeshadowProduct,finishes:this.props.finishesLips,products:this.props.products,lipsFilters:this.props.lipsFilters,currentFilters:this.props.lipsFilters,currentEyelinerProduct:this.props.currentEyelinerProduct,removeFilters:this.props.removeFilters,name:this.props.lipsName,toggleRemoveFilter:this.props.toggleRemoveFilter,index:0}))),i.default.createElement("div",{className:"filters__container--inner--block Eyeshadows is-hidden",hidden:!0},i.default.createElement("div",{className:"shades__margin-b"+(this.props.isFilterBarEnabled?"":" shades_additional__margin-b")},this.props.isLoaded&&i.default.createElement("div",{className:"shades__outer__container"},i.default.createElement(_,{categoryType:this.props.categoryType,products:this.props.productsEyeshadow,updateShade:this.props.updateShade,closeShade:this.props.closeShade,name:this.props.eyeshadowsName,clearProduct:this.props.clearProduct,selectedShadesList:this.props.selectedShadesList,selectedShadeSku:this.props.currentEyeshadowProduct,invalidProduct:this.props.invalidEyeshadowsProduct}))),i.default.createElement("div",{className:"filters__inner__wrapper"+(this.props.isFilterBarEnabled?"":" is-hidden")},this.props.isLoaded&&i.default.createElement(V,{isFilterBarEnabled:this.props.isFilterBarEnabled,harmonies:this.props.harmoniesEyeshadow,setFilter:this.props.setFilter,updateFilterFlag:this.props.updateFilterFlag,categoryType:this.props.categoryType,errorTab:this.props.errorTab,currentLipProduct:this.props.currentLipProduct,currentEyeshadowProduct:this.props.currentEyeshadowProduct,finishes:this.props.finishesEyeshadows,products:this.props.productsEyeshadow,currentFilters:this.props.eyeshadowFilters,currentEyelinerProduct:this.props.currentEyelinerProduct,removeFilters:this.props.removeFilters,name:this.props.eyeshadowsName,toggleRemoveFilter:this.props.toggleRemoveFilter,index:1}))),i.default.createElement("div",{className:"filters__container--inner--block Eyeliners is-hidden",hidden:!0},i.default.createElement("div",{className:"shades__margin-b"+(this.props.isFilterBarEnabled?"":" shades_additional__margin-b")},this.props.isLoaded&&i.default.createElement("div",{className:"shades__outer__container"},i.default.createElement(_,{categoryType:this.props.categoryType,products:this.props.productsEyeliners,updateShade:this.props.updateShade,closeShade:this.props.closeShade,name:this.props.eyelinersName,clearProduct:this.props.clearProduct,selectedShadesList:this.props.selectedShadesList,selectedShadeSku:this.props.currentEyelinerProduct,invalidProduct:this.props.invalidEyelinersProduct}))),i.default.createElement("div",{className:"filters__inner__wrapper"+(this.props.isFilterBarEnabled?"":" is-hidden")},this.props.isLoaded&&i.default.createElement(V,{isFilterBarEnabled:this.props.isFilterBarEnabled,harmonies:this.props.harmoniesEyeliners,setFilter:this.props.setFilter,updateFilterFlag:this.props.updateFilterFlag,categoryType:this.props.categoryType,currentLipProduct:this.props.currentLipProduct,currentEyeshadowProduct:this.props.currentEyeshadowProduct,finishes:this.props.finishesEyeliners,products:this.props.productsEyeliners,currentFilters:this.props.eyelinerFilters,currentEyelinerProduct:this.props.currentEyelinerProduct,removeFilters:this.props.removeFilters,name:this.props.eyelinersName,toggleRemoveFilter:this.props.toggleRemoveFilter,index:2})))),i.default.createElement("div",{className:this.props.isFilterBarEnabled?"":" is-hidden"},i.default.createElement(G,{data:this.props.data,showPrice:this.props.showPrice,changeTab:this.props.changeTab,selectedShadesList:this.props.selectedShadesList})))),i.default.createElement("div",{className:"cto_landscape--modal"},i.default.createElement("img",{src:"".concat(config.theme,"/assets/media/landscapeMobileDev.svg"),alt:""}),i.default.createElement("p",null,window.config.cto.dedicated.rotate)))}}te(se,"contextType",E.a);var ie=se;class re extends i.Component{render(){let e=!1;const t="sku="+this.props.code+"&quickView=true",s=window.localStorage.getItem("cartCTO"),r=window.config.cto.dedicated.addToBag;return s&&-1!==s.indexOf(this.props.code)&&(e=!0),i.default.createElement("button",{className:"button icon is-large vto-cart nav-item"+(e?" already-has-product":""),type:"button","data-id":this.props.code,"data-popup-target":"quickview","data-popup-query":t,"aria-haspopup":"dialog","aria-describedby":this.props.cartId,"data-modal-title":this.props.name},i.default.createElement(v.a,{name:"cto_new_basket"}),i.default.createElement("span",{className:"is-sr-only"},r))}}var oe=re;class ae extends i.Component{constructor(e){var t,s,i;super(e),t=this,s="defaultImg",i="".concat(config.theme,"/assets/media/product_default.png"),s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i}componentDidMount(){let e,t;e=this.props.product,t=e.code.substring(0,6),window.addEventListener("resize",this.getWishlistNav(t,e.name))}shouldComponentUpdate(e){return!!e.product.code}renderCartIcon(e,t){if(!this.props.isQRcontext)return i.default.createElement(oe,{code:e,cartId:"REF-".concat(e),name:t.name})}getRightNav(e,t){return this.renderCartIcon(e,t)}getImage(e){let t="",s="";return s=e.filter(e=>"PACKSHOT_DEFAULT"===e.assetType),s&&""!=s?t=s[0].url:(s=e.filter(e=>"BASIC_TEXTURE"===e.assetType),t=s&&""!=s?s[0].url:this.defaultImg),t}getWishlistNav(e,t){let s,o,a,n,c;o=window.localStorage.getItem("wishlistCTO"),a=window.config.cto.dedicated.addToWishlist+" "+t+" - Ref. "+e,n=window.config.cto.dedicated.addToWishlist+" "+t+" - Ref. "+e,c=window.config.cto.dedicated.removeFromWishlist+" "+t+" - Ref. "+e,s=!1;const d={eventAction:t,eventLabel:e};o&&-1!==o.indexOf(e)&&(s=!0,a=window.config.cto.dedicated.removeFromWishlist+" "+t+"- Ref. "+e);const l=window.innerWidth>960?"wishlist":"cto_new_wishlist";if(!this.props.isQRcontext){var h=Object(r.select)("button.is-wishlist");return h&&(s?h.classList.add("is-active"):h.classList.remove("is-active")),i.default.createElement("button",{type:"button",className:"button is-icon is-wishlist "+(s?" is-active":""),"data-track-wishlist":JSON.stringify(d),"data-wishlist":e,"data-text-active":n,"data-text-inactive":c,"data-text-wishlist-active":window.config.cto.dedicated.addToWishlist,"data-text-wishlist-inactive":window.config.cto.dedicated.removeFromWishlist,"data-test":"wishlist-action"},i.default.createElement(v.a,{className:" is-medium  is-wishlist  ",name:l}),i.default.createElement("span",{className:"is-sr-only"},a))}}setProductTop(){const e=Object(r.select)(".product-container"),t=Object(r.select)(".cto__product");if(e){e.clientHeight>="50"?t.classList.add("align-top"):t.classList.remove("align-top")}}moveToShade(){const e=Object(r.select)("ul.shade-slider.".concat(this.props.categoryType," li.selected button"));e&&e.focus()}render(){let e,t,s,r;t=this.props.product.basic.images?this.getImage(this.props.product.basic.images):this.defaultImg,s=this.props.product,r=s.code.substring(0,6),e="sku="+r+"&quickView=true";const o=window.config.cto.dedicated.addToBag,a=window.config.cto.dedicated.backtoShadeText,n=window.jsConfigSecond.isBoutiqueApp;return setTimeout(()=>this.setProductTop(),10),i.default.createElement("div",{className:"cto-product-container product"},!n&&i.default.createElement("div",{className:"wishlst-icon nav-left"},this.getWishlistNav(r,s.name)),i.default.createElement("div",{className:"cart-icon nav-right cto-cart-icon"},this.props.ecom&&!n?this.getRightNav(r,s):""),i.default.createElement("div",{className:"product-container"},i.default.createElement("div",{className:"product-image"},i.default.createElement("img",{src:t,alt:""})),i.default.createElement("div",null,i.default.createElement("p",{role:"heading",tabIndex:"-1","aria-level":"2",id:"REF-".concat(r),className:"product-info"},i.default.createElement("span",{className:"product-title"}," ",s.name),i.default.createElement("span",{className:"product-description is-cropped"},s.shade.shade),i.default.createElement("span",{className:"is-sr-only"},"Ref. ".concat(r)))),i.default.createElement("div",{className:"product-price"},this.props.hidePrice||this.props.isQRcontext?"":i.default.createElement("p",null,s.price,!this.props.ecom&&s.price&&""!==s.price?i.default.createElement("a",{className:"disclaimer-indicator",href:"#disclaimer-text","aria-label":window.config.cto.dedicated.disclaimerTextPriceInfo,"data-test":"lblDisclaimerIndicator"},"*"):"")),!this.props.ecom||this.props.isQRcontext||n?"":i.default.createElement("button",{className:"button is-tertiary cto-addtobag",type:"button","data-id":r,"data-popup-target":"quickview","data-popup-query":e,"aria-haspopup":"dialog","aria-label":"".concat(o," ").concat(s.name," ").concat(s.shade.shade),"aria-describedby":"REF-".concat(r),"data-modal-title":s.name},i.default.createElement("span",null,i.default.createElement("span",null,window.config.cto.dedicated.addToBag))),i.default.createElement("button",{type:"button",className:"is-sr-only is-sr-only-focusable",onClick:()=>this.moveToShade()},a)))}}var ne=ae,ce=s(1),de=s(505),le=s(518);class he extends i.Component{constructor(e){super(e)}componentDidMount(){const e=this.props.category;this.errorMsgDLPush(this.props.errorType[e]),this.props.errorPresent(!0)}componentWillUnmount(){this.props.errorPresent(!1)}errorMsgDLPush(e){"noshade"==e?dataLayer.push({eventCategory:"vto",eventAction:"error shade",eventLabel:"No results match the selected filters.",event:"nievent"}):dataLayer.push({eventCategory:"vto",eventAction:"error shade",eventLabel:"The selected shade is not available. Please try another one.",event:"nievent"})}render(){const e=this.props.category;let t="";return t="noshade"==this.props.errorType[e]?window.config.cto.dedicated.noResults:window.config.cto.dedicated.errorProduct,i.default.createElement("p",{id:"cto__product--error",tabIndex:"-1"},t)}}var ue=he;class pe extends i.Component{constructor(e){super(e)}toggleButton(e,t){this.props.toggle(e,t)}render(){const e=this.props.type,t=this.props.active===e?"active":"",s=this.props.active===e?"true":"false";let r="";return"light"===e?r=window.config.vto.labels.light:"intense"===e&&(r=window.config.vto.labels.intense),i.default.createElement("button",{type:"button",className:"switch ".concat(t),onClick:this.toggleButton.bind(this,this.props.sku,e),"aria-pressed":s},r)}}var me=pe;class fe extends i.Component{constructor(e){super(e),this.state={active:"light"},this.toggle=this.toggle.bind(this)}componentWillReceiveProps(e){e.product.code!==this.props.product.code&&this.setState({active:"light"})}toggle(e,t){this.state.active!==t&&(this.props.toggleIntensity(e,t),this.setState({active:t}))}render(){const e=this.props.product.code,t=this.props.product.altSku,s=window.config.vto.labels.screenReaderText;return i.default.createElement("div",{className:"intensity-switch"},i.default.createElement("p",{className:"is-sr-only"},s," :"),i.default.createElement(me,{type:"light",sku:e,active:this.state.active,toggle:this.toggle,toggleIntensity:this.props.toggleIntensity}),i.default.createElement(me,{type:"intense",sku:t,active:this.state.active,toggle:this.toggle,toggleIntensity:this.props.toggleIntensity}))}}var ge=fe;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function be(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ve=f(),we=Object(S.B)().includes("Chrome");class Ee extends i.Component{constructor(e){super(e),be(this,"productContainer",""),be(this,"disclaimerURL","https://services.chanel.com/".concat(window.config.currentLanguage,"/policies/legal/6-prices")),be(this,"ipadLandscapeCheck",()=>this.state.windowWidth<961&&window.innerWidth>1e3),be(this,"setCanvasDimensionsOnResize",()=>{const e=Object(r.select)("#YMK-module-iframe",this.container).contentWindow.document,t=Object(r.select)("#canvas",e),{width:s,height:i}=window.getComputedStyle(Object(r.select)("#YMK-module"));if(Object(r.select)(".frame-content>div",e).style.height=i,Object(r.select)(".frame-content>div",e).style.width=s,t){const e=Math.max(parseInt(s,10)/parseInt(t.style.width.includes("px")?t.style.width.replace("px",""):t.getBoundingClientRect().width,10),parseInt(i,10)/parseInt(t.style.height.includes("px")?t.style.height.replace("px",""):t.getBoundingClientRect().height,10));t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform="translate3d(-50%, -50%, 0) scale(".concat(e,")"),Object(S.P)()&&this.ipadLandscapeCheck()&&this.setVideoDimensions()}}),be(this,"updateValue",(e,t)=>{this.setState({[e]:t})}),this.state={noCamera:!1,currentLipProduct:this.props.data.categories[0].products[0],ecommerceSite:this.props.data.ecommerceSite,initialLipsProducts:this.props.data.categories[0].products,lipsProducts:this.props.data.categories[0].products,lipsFilters:[],currentEyeshadowProduct:this.props.data.categories[1].products[0],EyeshadowProducts:this.props.data.categories[1].products,currentEyelinerProduct:this.props.data.categories[2].products[0],EyelinerProducts:this.props.data.categories[2].products,isLoaded:!1,errorTab:{Lips:!1,Eyeshadows:!1,Eyeliners:!1},errorType:{Lips:"",Eyeshadows:"",Eyeliners:""},isFilterBarEnabled:this.props.data.isfilterBarEnabled,hidePrice:this.props.data.categories[0].hidePrice,categoryType:"Lips",filterFlag:!1,eyeshadowFilters:[],initialEyeshadowProducts:this.props.data.categories[1].products,lastSelectedProduct:this.props.data.categories[0].products[0],selectedShadesList:[{currentLipsProduct:this.props.data.categories[0].products[0]},{currentEyeshadowsProduct:""},{currentEyelinersProduct:""}],invalidLipsProduct:"",invalidEyeshadowsProduct:"",invalidEyelinersProduct:"",eyelinerFilters:[],initialEyelinerProducts:this.props.data.categories[2].products,dlLipsHarmonyCodes:[],dlEyeshadowsHarmonyCodes:[],dlEyelinersHarmonyCodes:[],dlFinishCodes:[],dlFiltersCodes:[],appliedSkuCodes:[this.props.data.categories[0].products[0].code],prevLipsSkuCode:this.props.data.categories[0].products[0].code,prevEyeshadowsSkuCode:this.props.data.categories[1].products[0].code,prevEyelinersSkuCode:this.props.data.categories[2].products[0].code,removeFilters:{Lips:!1,Eyeshadows:!1,Eyeliners:!1},errorMessageCLass:"",showTimer:!1,showPicture:!1,backClicked:!1,windowWidth:window.innerWidth,windowHeight:0},this.closeShade=this.closeShade.bind(this),this.updateFilterFlag=this.updateFilterFlag.bind(this),this.showPrice=this.showPrice.bind(this),this.updateShade=this.updateShade.bind(this),this.setFilter=this.setFilter.bind(this),this.filterProducts=this.filterProducts.bind(this),this.changeTab=this.changeTab.bind(this),this.noShade=this.noShade.bind(this),this.clearProduct=this.clearProduct.bind(this),this.toggleRemoveFilter=this.toggleRemoveFilter.bind(this),this.setFilter=this.setFilter.bind(this)}componentDidMount(){const e=window.YMK;document.body.classList.add("cto-open"),this.productContainer=Object(r.select)(".cto__product");const t=Object(r.select)("#admin-calendar");t&&Object(r.select)("body").classList.contains(".page-chanel-try-on.cto-open")>-1&&t.remove(),e.addEventListener("noCamera",()=>{this.setState({noCamera:!0})}),e.addEventListener("loaded",()=>{ve.dispatch({type:"CTO_READY"}),this.setState({isLoaded:!0}),this.setAy11();const e=Object(r.select)("#YMK-module-iframe");if(e){e.setAttribute("title",window.config.cto.dedicated.iframeTitle);const s=e.contentWindow.document.querySelector("#canvas");var t=e.contentWindow.document.querySelector(".frame-content").getElementsByTagName("div")[0];t.style.border="none",t.style.width="100%",Object(r.select)("body").classList.contains("firefox")&&(s.style.objectFit="cover"),screen.width<window.innerWidth&&(s&&setTimeout(()=>{s.style.width="100%"},200),e.contentWindow.document.querySelector(".frame-content").getElementsByTagName("div")[0].style.width="auto")}Object(S.P)()&&this.ipadLandscapeCheck()&&this.setVideoDimensions(),YMK.applyMakeupBySku(this.props.data.categories[0].products[0].code);const s=Object(r.select)(".YMK-module");s&&s.classList.add("ymk-loaded")}),e.addEventListener("invalidProduct",()=>{const e=this.state.errorTab;e[this.state.categoryType]=!0,this.setState({errorTab:e}),this.invalidProduct()},{once:!0}),this.productContainer&&this.productContainer.classList.remove("is-softly-hidden"),this.landScapeError()}componentDidUpdate(e,t){this.state.showTimer!==t.showTimer&&(Object(S.Z)()||this.setCanvasDimensionsOnResize(),this.state.showTimer&&Object(S.P)()&&this.ipadLandscapeCheck()&&this.setVideoDimensions())}componentWillUnmount(){this.setState=(e,t)=>{},this.landScapeError(!1),this.noCameraMessage()}setVideoDimensions(){const e=Object(r.select)("#YMK-video-input"),t=Object(r.select)(".cto__container--inner");e&&t&&(e.style.height=t.getBoundingClientRect().height+"px",e.style.width=t.getBoundingClientRect().width+"px")}setAy11(){const e=Object(r.select)(".cto__container"),t=Object(r.select)("#YMK-module-iframe");if(e){const s=Object(r.select)("#YMK-video-input");s&&(s.setAttribute("aria-hidden",!0),s.setAttribute("tabindex","-1"));Object(r.selectAll)("canvas",e).forEach(e=>{"canvas"!=e.getAttribute("id")&&(e.setAttribute("aria-hidden",!0),e.setAttribute("tabindex","-1"))});t.contentWindow.document.querySelectorAll("canvas").forEach(e=>{"canvas"!=e.getAttribute("id")&&(e.setAttribute("aria-hidden",!0),e.setAttribute("tabindex","-1"))});const i=Object(r.select)(".ctoText",e);i&&window.innerWidth>960&&i.focus()}if(t){const e=t.contentWindow.document.querySelector("#canvas"),s=document.createElement("p"),i=document.createTextNode(window.config.cto.dedicated.canvasText);s.appendChild(i),e.appendChild(s)}}setFilter(e,t,s){let i,o,a,n,c="";const d=e.code,l=this.state.categoryType,h=l.toLowerCase();this.toggleRemoveFilter(!0),"Lips"===l&&(i=this.state.lipsFilters),"Eyeshadows"===l&&(i=this.state.eyeshadowFilters),"Eyeliners"===l&&(i=this.state.eyelinerFilters),i.find(e=>e.code===d)?i=i.filter(e=>e.code!==d):i.push({type:t,code:d}),"Lips"===l&&this.setState({lipsFilters:i},()=>{i.length>0?this.filterProducts(l):this.setState({lipsProducts:this.state.initialLipsProducts})}),"Eyeshadows"===l&&this.setState({eyeshadowFilters:i},()=>{i.length>0?this.filterProducts(l):this.setState({EyeshadowProducts:this.state.initialEyeshadowProducts})}),"Eyeliners"===l&&this.setState({eyelinerFilters:i},()=>{i.length>0?this.filterProducts(l):this.setState({EyelinerProducts:this.state.initialEyelinerProducts})}),"finish"===t&&(o=this.state.dlFiltersCodes,o.find(e=>e===d)?o=o.filter(e=>e!==d):o.push(d),this.setState({dlFiltersCodes:o}),1===o.length?c=o.toString():o.length>1&&(c=o.join("|"))),"harmony"===t&&("Lips"===l&&(a=this.state.dlFiltersCodes),"Eyeshadows"===l&&(a=this.state.dlEyeshadowsHarmonyCodes),"Eyeliners"===l&&(a=this.state.dlEyelinersHarmonyCodes),a.find(e=>e===d)?a=a.filter(e=>e!==d):a.push(d),"Lips"===l&&this.setState({dlFiltersCodes:a}),"Eyeshadows"===l&&this.setState({dlEyeshadowsHarmonyCodes:a}),"Eyeliners"===l&&this.setState({dlEyelinersHarmonyCodes:a}),1===a.length?c=a.toString():a.length>1&&(c=a.join("|"))),n="applied_filters_".concat(h),0===i.length&&this.toggleRemoveFilter(!1),dataLayer.push({eventCategory:"vto",eventAction:n,eventLabel:c,event:"uaevent"}),setTimeout(()=>{const e=Object(r.select)(".".concat(s," .shadeCount")),t=Object(r.select)(".".concat(s," .harmonyCount")),i=Object(r.select)(".".concat(s," .shades__container"));if(!t&&i){const t=document.createElement("p");t.classList="is-sr-only harmonyCount";const i=document.createTextNode("".concat("Lips"==s?this.state.lipsProducts.length:"Eyeshadows"==s?this.state.EyeshadowProducts.length:this.state.EyelinerProducts.length," ").concat(window.config.cto.dedicated.shadesAvailable));t.appendChild(i),e.appendChild(t)}else t.innerText="".concat("Lips"==s?this.state.lipsProducts.length:"Eyeshadows"==s?this.state.EyeshadowProducts.length:this.state.EyelinerProducts.length," ").concat(window.config.cto.dedicated.shadesAvailable)},100)}filterProducts(e){let t,s;"Lips"===e&&(t=this.state.initialLipsProducts,s=this.state.lipsFilters),"Eyeshadows"===e&&(t=this.state.initialEyeshadowProducts,s=this.state.eyeshadowFilters),"Eyeliners"===e&&(t=this.state.initialEyelinerProducts,s=this.state.eyelinerFilters),s.some(e=>"harmony"===e.type)&&(t=t.filter(e=>s.some(t=>{if("harmony"===t.type&&e.harmonies&&e.harmonies.includes(t.code))return!0}))),s.some(e=>"finish"===e.type)&&(t=t.filter(e=>s.some(t=>{if("finish"===t.type&&e.finishes&&e.finishes.includes(t.code))return!0})));const i=this.state.errorTab;i[e]=!1;const r=this.state.errorType;r[e]="","Lips"===e&&this.setState({lipsProducts:t},()=>{0===t.length?this.noShade():this.setState({errorTab:i,errorType:r})}),"Eyeshadows"===e&&this.setState({EyeshadowProducts:t},()=>{0===t.length?this.noShade():this.setState({errorTab:i,errorType:r})}),"Eyeliners"===e&&this.setState({EyelinerProducts:t},()=>{0===t.length?this.noShade():this.setState({errorTab:i,errorType:r})})}async close(e){"cameraCTO"===e.type&&YMK.close(),Object(r.select)(".virtual-makeup-component").classList.add("is-hidden"),i.default.unmountComponentAtNode(Object(r.select)(".virtual-makeup-component")),Object(r.select)(".cto-hero").classList.remove("is-hidden"),document.body.classList.remove("cto-open"),Object(de.j)(e),await new Promise(e=>{e(),localStorage.cartCTO&&(localStorage.cartCTO=""),localStorage.wishlistCTO&&(localStorage.wishlistCTO="")});const t=Object(r.select)(".cto-launch-button");t&&t.focus()}updateShade(e,t){let s,i,o,a="";const n=e.code,c=Object(r.select)(".cto__product");if("Lips"===t&&(this.setState({currentLipProduct:e,lastSelectedProduct:e,invalidLipsProduct:{}}),this.state.selectedShadesList[0].currentLipsProduct=e,YMK.applyMakeupBySku(e.code)),"Eyeshadows"===t&&(this.setState({currentEyeshadowProduct:e,lastSelectedProduct:e,invalidEyeshadowsProduct:{}}),this.state.selectedShadesList[1].currentEyeshadowsProduct=e,YMK.applyMakeupBySku(e.code),this.state.tabChanged=!0),"Eyeliners"===t&&(this.setState({currentEyelinerProduct:e,lastSelectedProduct:e,invalidEyelinersProduct:{}}),this.state.selectedShadesList[2].currentEyelinersProduct=e,YMK.applyMakeupBySku(e.code)),Object(S.X)()&&(c&&c.classList.remove("is-softly-hidden"),c&&!this.state.filterFlag&&c.classList.remove("is-softly-hidden")),Object(S.Q)()||Object(S.T)()){const e=Object(r.select)("div."+t);if(e){const t=Object(r.select)(".show__filters",e);c&&null===t&&c.classList.remove("is-softly-hidden"),c&&null!==t&&c.classList.add("is-softly-hidden")}}const d=this.state.errorTab;d[t]=!1,this.setState({errorTab:d}),s=this.state.appliedSkuCodes,"Lips"===t&&(o=this.state.prevLipsSkuCode),"Eyeshadows"===t&&(o=this.state.prevEyeshadowsSkuCode),"Eyeliners"===t&&(o=this.state.prevEyelinersSkuCode),s.find(e=>e===o)&&(s=s.filter(e=>e!==o)),s.push(n),i="applied_makeup",this.setState({appliedSkuCodes:s}),"Lips"===t&&this.setState({prevLipsSkuCode:n}),"Eyeshadows"===t&&this.setState({prevEyeshadowsSkuCode:n}),"Eyeliners"===t&&this.setState({prevEyelinersSkuCode:n}),1===s.length?a=s.toString():s.length>1&&(a=s.join("|")),dataLayer.push({eventCategory:"vto",eventAction:"applied_makeup",eventLabel:a,event:"nievent"})}updateAllShades(){let e;YMK.reset(),this.state.selectedShadesList.forEach(t=>{t.currentLipsProduct?e=t.currentLipsProduct.code:t.currentEyeshadowsProduct?e=t.currentEyeshadowsProduct.code:t.currentEyelinersProduct&&(e=t.currentEyelinersProduct.code),e&&void 0!==e&&YMK.applyMakeupBySku(e)})}closeShade(e){const t=this.state.errorTab;t[this.state.categoryType]=!1,this.setState({errorTab:t}),YMK.reset(),this.productContainer&&this.productContainer.classList.add("is-softly-hidden");Object(r.select)(".cto-product-container")&&this.productContainer.classList.add("is-softly-hidden"),e&&this.crossDataLayerPush(e.code)}noShade(){const e=this.state.categoryType,t=this.state.errorTab;t[e]=!0;const s=this.state.errorType;s[e]="noshade",this.setState({errorTab:t,errorType:s}),"Lips"===e&&(this.state.selectedShadesList[0].currentLipsProduct={}),"Eyeshadows"===e&&(this.state.selectedShadesList[1].currentEyeshadowsProduct={}),"Eyeliners"===e&&(this.state.selectedShadesList[2].currentEyelinersProduct={}),this.updateAllShades()}crossDataLayerPush(e){let t;const s=this.state.categoryType;let i="";t=this.state.appliedSkuCodes,t.find(t=>t===e)&&(t=t.filter(t=>t!==e)),this.setState({appliedSkuCodes:t}),1===t.length?i=t.toString():t.length>1&&(i=t.join("|")),"Lips"===s&&this.setState({prevLipsSkuCode:""}),"Eyeshadows"===s&&this.setState({prevEyeshadowsSkuCode:""}),"Eyeliners"===s&&this.setState({prevEyelinersSkuCode:""}),dataLayer.push({eventCategory:"vto",eventAction:"applied_makeup",eventLabel:i,event:"uaevent"})}clearProduct(e){let t=this.state.selectedShadesList;"Lips"===e&&(t[0].currentLipsProduct={},this.setState({currentLipProduct:{},selectedShadesList:t,invalidLipsProduct:{}})),"Eyeshadows"===e&&(t[1].currentEyeshadowsProduct={},this.setState({currentEyeshadowProduct:{},selectedShadesList:t,invalidEyeshadowsProduct:{}})),"Eyeliners"===e&&(t[2].currentEyelinersProduct={},this.setState({currentEyelinerProduct:{},selectedShadesList:t,invalidEyelinersProduct:{}})),this.updateAllShades()}showPrice(e){this.setState({hidePrice:e})}toggleIntensity(e){YMK.applyMakeupBySku(e)}changeTab(e){const t=Object(r.select)(".Lips"),s=Object(r.select)(".Eyeshadows"),i=Object(r.select)(".Eyeliners"),o=Object(r.select)(".cto__product");let a,n=this.state.appliedSkuCodes,c=this.state.selectedShadesList;if("Lips"===e&&(t.classList.remove("is-hidden"),t.hidden=!1,s.classList.add("is-hidden"),s.hidden=!0,i.classList.add("is-hidden"),i.hidden=!0,this.state.categoryType=e,this.setState({lastSelectedProduct:this.state.currentLipProduct})),"Eyeshadows"===e&&(s.classList.remove("is-hidden"),s.hidden=!1,t.classList.add("is-hidden"),t.hidden=!0,i.classList.add("is-hidden"),i.hidden=!0,this.state.categoryType=e,""===c[1].currentEyeshadowsProduct&&(c[1].currentEyeshadowsProduct=this.props.data.categories[1].products[0],n.push(this.props.data.categories[1].products[0].code),this.setState({appliedSkuCodes:n})),a=c[1].currentEyeshadowsProduct.code,a&&void 0!==a&&YMK.applyMakeupBySku(a),this.setState({lastSelectedProduct:this.state.currentEyeshadowProduct})),"Eyeliners"===e&&(i.classList.remove("is-hidden"),i.hidden=!1,s.classList.add("is-hidden"),s.hidden=!0,t.classList.add("is-hidden"),t.hidden=!0,this.state.categoryType=e,""===c[2].currentEyelinersProduct&&(c[2].currentEyelinersProduct=this.props.data.categories[2].products[0],n.push(this.props.data.categories[2].products[0].code),this.setState({appliedSkuCodes:n})),a=c[2].currentEyelinersProduct.code,a&&void 0!==a&&YMK.applyMakeupBySku(a),this.setState({lastSelectedProduct:this.state.currentEyelinerProduct})),(this.state.currentEyeshadowProduct.code||this.state.currentLipProduct.code||this.state.currentEyelinerProduct.code)&&o&&o.classList.remove("is-softly-hidden"),("Eyeshadows"===e&&!this.state.currentEyeshadowProduct.code||"Lips"===e&&!this.state.currentLipProduct.code||"Eyeliners"===e&&!this.state.currentEyelinerProduct.code)&&("Lips"===e&&(this.state.invalidLipsProduct.code?this.setState({lastSelectedProduct:this.state.invalidLipsProduct}):o&&o.classList.add("is-softly-hidden"),!this.state.currentLipProduct.code&&this.state.invalidLipsProduct.code&&o&&o.classList.remove("is-softly-hidden")),"Eyeshadows"===e&&(this.state.invalidEyeshadowsProduct.code?this.setState({lastSelectedProduct:this.state.invalidEyeshadowsProduct}):o&&o.classList.add("is-softly-hidden"),!this.state.currentEyeshadowProduct.code&&this.state.invalidEyeshadowsProduct.code&&o&&o.classList.remove("is-softly-hidden")),"Eyeliners"===e&&(this.state.invalidEyelinersProduct.code?this.setState({lastSelectedProduct:this.state.invalidEyelinersProduct}):o&&o.classList.add("is-softly-hidden"),!this.state.currentEyelinerProduct.code&&this.state.invalidEyelinersProduct.code&&o&&o.classList.remove("is-softly-hidden"))),(Object(S.Q)()||Object(S.T)())&&!Object(S.X)()){const t=Object(r.select)(".filters__container--inner--block."+e),s=Object(r.select)(".filters__value",t);"Lips"===e&&(0===Object.keys(c[0].currentLipsProduct).length||s.classList.contains("show__filters")?o.classList.add("is-softly-hidden"):o.classList.remove("is-softly-hidden"),!this.state.currentLipProduct.code&&this.state.invalidLipsProduct.code&&o&&!s.classList.contains("show__filters")&&o.classList.remove("is-softly-hidden")),"Eyeshadows"===e&&(0===Object.keys(c[1].currentEyeshadowsProduct).length||s.classList.contains("show__filters")?o.classList.add("is-softly-hidden"):o.classList.remove("is-softly-hidden"),!this.state.currentEyeshadowProduct.code&&this.state.invalidEyeshadowsProduct.code&&o&&!s.classList.contains("show__filters")&&o.classList.remove("is-softly-hidden")),"Eyeliners"===e&&(0===Object.keys(c[2].currentEyelinersProduct).length||s.classList.contains("show__filters")?o.classList.add("is-softly-hidden"):o.classList.remove("is-softly-hidden"),!this.state.currentEyelinerProduct.code&&this.state.invalidEyelinersProduct.code&&o&&!s.classList.contains("show__filters")&&o.classList.remove("is-softly-hidden"))}}updateFilterFlag(e){this.setState({filterFlag:e})}invalidProduct(){const e=this.state.categoryType;if(this.state.errorTab[e]){YMK.reset();let t=this.state.selectedShadesList;"Lips"===e&&(Object.keys(t[0].currentLipsProduct).length>0&&this.setState({invalidLipsProduct:t[0].currentLipsProduct}),t[0].currentLipsProduct={},this.setState({currentLipProduct:{},selectedShadesList:t})),"Eyeshadows"===e&&(Object.keys(t[1].currentEyeshadowsProduct).length>0&&this.setState({invalidEyeshadowsProduct:t[1].currentEyeshadowsProduct}),t[1].currentEyeshadowsProduct={},this.setState({currentEyeshadowProduct:{},selectedShadesList:t})),"Eyeliners"===e&&(Object.keys(t[2].currentEyelinersProduct).length>0&&this.setState({invalidEyelinersProduct:t[2].currentEyelinersProduct}),t[2].currentEyelinersProduct={},this.setState({currentEyelinerProduct:{},selectedShadesList:t})),this.updateAllShades()}}toggleRemoveFilter(e){let t=this.state.removeFilters;const s=this.state.categoryType;t[s]=e,this.setState({removeFilters:t}),!1===e&&("Lips"===s?this.setState({lipsFilters:[],lipsProducts:this.state.initialLipsProducts}):"Eyeshadows"===s?this.setState({eyeshadowFilters:[],EyeshadowProducts:this.state.initialEyeshadowProducts}):this.setState({eyelinerFilters:[],EyelinerProducts:this.state.initialEyelinerProducts}),setTimeout(()=>{const e=s,t=Object(r.select)(".".concat(e," .shadeCount")),i=Object(r.select)(".".concat(e," .harmonyCount")),o=Object(r.select)(".".concat(e," .shades__container"));if(!i&&o){const s=document.createElement("p");s.classList="is-sr-only harmonyCount";const i=document.createTextNode("".concat("Lips"==e?this.state.lipsProducts.length:"Eyeshadows"==e?this.state.EyeshadowProducts.length:this.state.EyelinerProducts.length," ").concat(window.config.cto.dedicated.shadesAvailable));s.appendChild(i),t.appendChild(s)}else i.innerText="".concat("Lips"==e?this.state.lipsProducts.length:"Eyeshadows"==e?this.state.EyeshadowProducts.length:this.state.EyelinerProducts.length," ").concat(window.config.cto.dedicated.shadesAvailable)},10))}errorPresent(e){e?this.setState({errorMessageCLass:"has_error"}):this.setState({errorMessageCLass:""})}landScapeError(e){const t=Object(r.select)("#cto_lanscape_error_ay11"),s=Object(r.select)(".cto__container .cto_landscape--modal");t&&(e?0===t.children.length&&(Object(S.T)()||Object(S.Q)())&&window.screen.orientation&&window.screen.orientation.type.includes("landscape")?(t.insertAdjacentHTML("beforeend","<p>".concat(window.config.cto.dedicated.rotate,"</p>")),s&&s.removeAttribute("aria-hidden"),setTimeout(()=>{t.innerHTML=""},2001)):window.screen.orientation&&window.screen.orientation.type.includes("portrait")&&(t.innerHTML="",(this.state.showTimer||this.state.showPicture)&&s&&s.setAttribute("aria-hidden",!0)):t.innerHTML="")}noCameraMessage(){arguments.length>0&&void 0!==arguments[0]||this.state.noCamera;const e=Object(r.select)("#no_camera_error_ay11");e&&(this.state.noCamera&&0===e.children.length?(e.insertAdjacentHTML("beforeend",'<div className="error__title" aria-level="2" role="heading">'.concat(window.config.vto.labels.deniedTitle,'</div><p className="error__message">').concat(window.config.vto.labels.deniedMessage,"</p>")),setTimeout(()=>{e.innerHTML=""},2001)):e.innerHTML="")}render(e){const{variants:t=[],error:s,product:o,dispatch:a}=this.props,n=this.state.categoryType,c=this.state.errorTab[n]?"cto__close--bottom":"",d=this.state.errorType[n];this.windowHeight=window.innerHeight,ce.C.subscribe(ce.fb,()=>{this.landScapeError(!0);const e=Object(r.select)("#YMK-module-iframe",this.container);e&&e.contentWindow.document&&(we&&this.windowHeight-window.innerHeight>80||this.setCanvasDimensionsOnResize()),this.windowHeight=window.innerHeight}),this.noCameraMessage(this.state.noCamera);const l=i.default.createElement(E.a.Provider,{value:{state:this.state,updateValue:this.updateValue}},i.default.createElement("div",{className:"cto__wrapper"},i.default.createElement("div",{className:"cto__row"},i.default.createElement("div",ye({className:"cto__close-mobile cto__close-color-white is-hidden-l ".concat(c," ").concat(d)},window.innerWidth>960?{hidden:!0}:"",this.state.showTimer||this.state.showPicture?{hidden:!0,"aria-hidden":!0}:{}),i.default.createElement(le.a,{close:()=>this.close({dispatch:a,type:"cameraCTO"})})),i.default.createElement("div",{className:"cto__container"},this.state.isLoaded&&"Eyeshadows"===this.state.categoryType&&this.state.currentEyeshadowProduct.hasTwoIntensities?i.default.createElement("div",this.state.showTimer||this.state.showPicture?{hidden:!0,"aria-hidden":!0}:{},i.default.createElement(ge,{product:this.state.currentEyeshadowProduct,toggleIntensity:this.toggleIntensity})):null,i.default.createElement("div",{className:"cto__error ".concat(this.state.errorMessageCLass),"aria-live":"polite"},this.state.errorTab[this.state.categoryType]?i.default.createElement(ue,{errorType:this.state.errorType,category:n,errorPresent:e=>this.errorPresent(e)}):null),i.default.createElement(ie,{selectedShadesList:this.state.selectedShadesList,updateFilterFlag:this.updateFilterFlag,filterFlag:this.state.filterFlag,products:this.state.lipsProducts,openFilter:this.props.openFilter,setFilter:this.setFilter,data:this.props.data,harmonies:this.props.data.categories[0].harmonies,harmoniesEyeshadow:this.props.data.categories[1].harmonies,finishesLips:this.props.data.categories[0].finishes,finishesEyeshadows:this.props.data.categories[1].finishes,closeShade:this.closeShade,updateShade:this.updateShade,isLoaded:this.state.isLoaded,showPrice:this.showPrice,isFilterBarEnabled:this.state.isFilterBarEnabled,changeTab:this.changeTab,productsEyeshadow:this.state.EyeshadowProducts,noShade:this.noShade,lipsName:"Lips",eyeshadowsName:"Eyeshadows",clearProduct:this.clearProduct,categoryType:this.state.categoryType,currentLipProduct:this.state.currentLipProduct,currentEyeshadowProduct:this.state.currentEyeshadowProduct,invalidLipsProduct:this.state.invalidLipsProduct,invalidEyeshadowsProduct:this.state.invalidEyeshadowsProduct,lipsFilters:this.state.lipsFilters,eyeshadowFilters:this.state.eyeshadowFilters,eyelinerFilters:this.state.eyelinerFilters,errorTab:this.errorTab,invalidEyelinersProduct:this.state.invalidEyelinersProduct,currentEyelinerProduct:this.state.currentEyelinerProduct,harmoniesEyeliners:this.props.data.categories[2].harmonies,finishesEyeliners:this.props.data.categories[2].finishes,productsEyeliners:this.state.EyelinerProducts,eyelinersName:"Eyeliners",removeFilters:this.state.removeFilters,toggleRemoveFilter:this.toggleRemoveFilter})),i.default.createElement("div",ye({className:"cto__product"},this.state.showTimer||this.state.showPicture?{hidden:!0,"aria-hidden":!0}:{}),this.state.isLoaded?i.default.createElement(ne,{hidePrice:this.state.hidePrice,product:this.state.lastSelectedProduct,ecom:this.state.ecommerceSite,categoryType:this.state.categoryType,isQRcontext:this.props.isQRcontext}):null)),!this.state.isLoaded||this.state.hidePrice||this.state.ecommerceSite||!this.state.currentLipProduct.price||""===this.state.currentLipProduct.price||this.props.isQRcontext?"":i.default.createElement("div",{id:"disclaimer-text",className:"price__disclaimer"},i.default.createElement("p",{className:"content"},window.config.cto.dedicated.disclaimerText,i.default.createElement("a",{target:"_blank",className:"link is-underline is-gray is-paddingLeft",title:window.config.cto.dedicated.disclaimerTextTitle,rel:"nofollow",href:this.disclaimerURL},i.default.createElement("span",null,window.config.cto.dedicated.disclaimerTextMoreInfo)))))),h=i.default.createElement("div",{className:"cto__row"+(s&&s.name?" error-no-camera-cto":"")},i.default.createElement("div",{className:"cto__close-mobile is-hidden-l"},i.default.createElement(le.a,{close:()=>this.close({dispatch:a})})),i.default.createElement("div",{className:"error__container"},i.default.createElement("div",{className:"error__title","aria-level":"2",role:"heading"},window.config.vto.labels.deniedTitle),i.default.createElement("p",{className:"error__message"},window.config.vto.labels.deniedMessage)),i.default.createElement("div",{className:"cto__product"}," "),i.default.createElement("div",{className:"cto_landscape--modal"},i.default.createElement("img",{src:"".concat(config.theme,"/assets/media/landscapeMobileDev.svg"),alt:""}),i.default.createElement("p",null,window.config.cto.dedicated.rotate)));return this.state.noCamera?h:l}}var Se=Object(a.b)(e=>e)(Ee),Le=s(211);const Pe=f(),Te=Object(r.select)(".virtual-makeup-component"),Ce=window.config.currentLanguage,Oe="".concat(window.config.currentLocale,"yapi/virtual-makeup/?lang=").concat(Ce);let _e=!1;function xe(e,t){const s=Object(r.select)("#cto-launch-button",e);jsConfigSecond.tryOnLegal.cto.isActive&&Object(Le.bindTryOnButtonEvents)(Object(r.select)(".cto-launch-button"),jsConfigSecond.tryOnLegal.cto.message),s.addEventListener("click",(function(){const s=Object(Le.getCookie)("LEGAL_CONSENT")?JSON.parse(Object(Le.getCookie)("LEGAL_CONSENT")):null;if(jsConfigSecond.tryOnLegal.cto.isActive&&(!s||!s.ctoDedicatedTryOnAccepted))return!1;e.classList.add("is-hidden"),Te.classList.remove("is-hidden"),dataLayer.push({eventCategory:"try-on",eventAction:"click",eventLabel:"start the experience",event:"uaevent"}),Object(i.render)(i.default.createElement(a.a,{store:Pe},i.default.createElement(Se,{data:t,isQRcontext:_e})),Te),window.YMK.open(),window.ymkAsyncInit()}))}function je(e){let t=0;const s=setInterval(()=>{t++,window.dataLayer&&void 0!==window.dataLayer[0].sub_category_level3&&(window.dataLayer[0].sub_category_level3=e,clearInterval(s)),t>=300&&clearInterval(s)},100)}function ke(){const e=window.config.vto?window.config.vto.makeup.sdk:"",t=Object(o.get)(Oe),s=new Promise(t=>c()(e,()=>{t(window.YMK),Pe.dispatch({type:"SDK_LOADED"})}));return Promise.all([t,s]).then(e=>{Pe.dispatch({type:"CTO_READY"});xe(Object(r.select)(".hero"),function(e){e.categories[1].products.forEach(e=>{if(e.is4ShadowFeatureFlipping&&e.basic.is4ShadowProduct)switch(e.basic.ctoIntensity){case"APACCTOIntensity":e.hasTwoIntensities=!1,e.code="".concat(e.code,"-3");break;case"WWCTOIntensity":e.altSku=e.code,e.code="".concat(e.code,"-1"),e.hasTwoIntensities=!0}});const t=e.categories[0].products,s=e.categories[0].finishes;return s.forEach(e=>{const s=e.code,i=t.some(e=>!!e.finishes&&e.finishes.includes(s));e.hasProduct=i}),e.categories[0].finishes=s,e}(e[0]))})}Object(d.a)(),function(){let e=new URL(window.location.href);if(Object(r.select)("body").classList.contains("page-chanel-try-on")&&e){let t=e.searchParams.get("utm_medium"),s=e.searchParams.get("utm_campaign"),i=["footer","#chatButton"];Object(r.select)(".page-chanel-try-on > header").style.visibility="visible",s&&"QRS"===s&&t&&"qrcode"===t?(_e=!0,i.forEach(e=>{Object(r.select)(e)&&(Object(r.select)(e).classList.add("is-hidden"),Object(r.select)(e).setAttribute("aria-hidden",!0))}),Object(r.select)("header").classList.add("cto-qrs"),je("qrs")):je("classic")}}(),localStorage.cartCTO&&(localStorage.cartCTO=""),localStorage.wishlistCTO&&(localStorage.wishlistCTO=""),window.ymkAsyncInit=function(){let e,t;if(Object(S.X)()){e=533,t=469;let s=document.body.clientWidth;const i=s-961;if(s>961&&s<=1400){e+=i/1.8}if(s>1400&&s<=1600){e+=i/1.805}else s>1600&&(e=887);Object(r.select)("body").classList.contains("firefox")&&(e=682,t=500)}else e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;window.YMK.init({hideUI:!0,width:e,height:t,autoOpen:!1})}},440:function(e,t,s){"use strict";var i=s(428);t.a=e=>{let{name:t,className:s}=e;return i.default.createElement("svg",{className:"icon ".concat(s),focusable:"false",viewBox:"0 0 1 1","aria-hidden":"true"},i.default.createElement("use",{xlinkHref:"".concat(config.theme,"/assets/icons.svg").concat(config.targetVersion,"#").concat(t)}))}},488:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i=s(428).default.createContext({state:"",updateValue:()=>{}})},505:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"k",(function(){return n})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return d})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return h})),s.d(t,"h",(function(){return u})),s.d(t,"c",(function(){return p})),s.d(t,"g",(function(){return m})),s.d(t,"e",(function(){return f})),s.d(t,"j",(function(){return g}));var i=s(209),r=s(8),o=s(1);const a=e=>e.dispatch({type:r.a.CAMERA_ERROR_RESOLVED}),n=e=>e.dispatch({type:r.a.VTO_VIDEO_STOP}),c=e=>e.dispatch({type:r.a.VTO_READY,category:"eyewear"}),d=(e,t)=>{e.dispatch({type:r.a.VTO_CLOSE}),t.vtoStream&&(t.vtoStream.getTracks().forEach(e=>e.stop()),t.vtoStream=null,delete t.vtoStream),Object(i.b)(e.getState().product.code),o.C.publish(o.db)},l=(e,t)=>e.dispatch({type:r.a.LAYOUT_CHANGE,payload:t}),h=(e,t)=>e.dispatch({type:r.a.PRODUCT_CHANGE,...t}),u=e=>{e.dispatch({type:r.a.VTO_OPEN})},p=(e,t)=>e.dispatch({type:r.a.ORIENTATION_CHANGE,payload:t?t.target.screen.orientation.angle:0}),m=e=>e.dispatch({type:r.a.VTO_CLOSE_CLICK}),f=e=>e.dispatch({type:r.a.CameraNotAvailable}),g=e=>e.dispatch({type:r.a.SDK_CLOSED})},518:function(e,t,s){"use strict";s(14);var i=s(428),r=s(440),o=s(3),a=s(0);class n extends i.Component{constructor(){var e,t,s;super(...arguments),s=()=>{const e=Object(a.select)(".product-details .js-slide:first-child a");e&&(e.style.top="",e.style.zIndex="")},(t="handleClick")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}componentDidMount(){this.button.focus()}render(){return i.default.createElement("button",{ref:e=>this.button=e,className:"button is-icon vto-close",onClick:()=>{this.props.close(),this.handleClick()}},i.default.createElement(r.a,{name:"close"}),i.default.createElement("span",{className:"is-sr-only"},o.a.locales.vto.closeButtonLabel))}}t.a=n},545:function(e,t,s){"use strict";s(7);var i=s(2),r=s(428),o=(s(0),s(440)),a=s(488);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends r.Component{constructor(e){super(e),c(this,"browser",Object(i.n)()),c(this,"getDataSource",e=>{const t=this.getImageName();return{files:[e||this.state.file],...this.isItiOS?{}:{text:t},...this.isItiOS?{}:{title:t}}}),c(this,"convertToFile",e=>{fetch(e).then(e=>e.blob()).then(e=>{const t=new File([e],"".concat(this.getImageName(),".jpg"),{type:"image/jpeg"});this.setState({file:t,shareAvailable:(!this.availablePlatform.includes(this.browser.platform)||Object(i.L)())&&navigator.canShare&&navigator.canShare(this.getDataSource(t))})}).catch()}),c(this,"getImageName",()=>{let e=new Date;e=new Date(e.getTime()-6e4*e.getTimezoneOffset());return e.toISOString().replace(/^(.+)T([^.]+).*/,(e,t,s)=>"CHANEL-TRY-ON_".concat(t,"_").concat(s.replace(/:/g,"")))}),this.state={showPicture:!0,shareAvailable:!1,file:null},this.backButton=r.default.createRef(),this.moveBack=this.moveBack.bind(this),this.isItiOS=Object(i.Z)(),this.availablePlatform=["Mac","Windows"]}componentDidMount(){this.backButton.current.focus(),window.scrollTo({top:0,left:0,options:{behavior:"smooth"}}),this.convertToFile(this.props.imgSrc)}moveBack(){this.context.updateValue("showPicture",!1),this.context.updateValue("backClicked",!0)}componentWillUnmount(){this.props.callback()}downloadImage(){dataLayer.push({eventCategory:"vto",eventAction:"take picture",eventLabel:"download",event:"uaevent"});const e=this.getImageName(),t=this.getDataSource(),s=()=>{const t=document.createElement("a");t.href=this.props.imgSrc,t.download=e+".jpg",document.body.appendChild(t),t.click(),document.body.removeChild(t)};this.state.shareAvailable?navigator.share(t).catch(e=>{"AbortError"!==e.name&&(s(),this.setState({shareAvailable:!1}))}):s()}render(){return r.default.createElement("div",n({className:"cto-captured-photo ".concat(this.props.customClass?this.props.customClass:"")},this.props.customProps),r.default.createElement("div",{className:"photo_container "},r.default.createElement("button",n({type:"button",className:"backButton",onClick:this.moveBack,ref:this.backButton},this.props.backIconName&&-1!=this.props.backIconName.indexOf("white")?{style:{color:"#fff"}}:null),r.default.createElement(o.a,{name:this.props.backIconName?this.props.backIconName:"cto_back_black",className:"cto__back_icon"}),window.config.cto.dedicated.photoCaptureBackText),r.default.createElement("img",n({src:this.props.imgSrc,className:"cto__image",alt:window.config.cto.dedicated.photoCaptureImageAltText},window.innerWidth>960?this.props.customProps:null)),r.default.createElement("ul",null,r.default.createElement("li",null,r.default.createElement("button",{type:"button",className:"cto__download_icon",onClick:this.downloadImage.bind(this)},r.default.createElement("span",{className:"is-sr-only"},this.state.shareAvailable?window.config.cto.dedicated.photoCaptureShareText:window.config.cto.dedicated.photoCaptureDownloadText),r.default.createElement(o.a,{name:"cto_download"}))))))}}c(d,"contextType",a.a),t.a=d},595:function(e,t,s){"use strict";t.a=function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices||console.log("enumerateDevices() not supported."),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices().then((function(e){let t=!1;e.forEach((function(e){t|="videoinput"===e.kind})),t?(console.log("Camera detected. vto can be enabled on this device"),document.body.classList.add("camera-ok")):(console.log("Camera undetected. vto is disabled on this device"),document.body.classList.add("no-camera"))})).catch((function(e){console.log(e.name+": "+e.message)}))}},596:function(e,t,s){"use strict";s(7);var i=s(428),r=s(440);class o extends i.Component{constructor(e){var t,s,i;super(e),i=e=>{let t,s,i,r;return e.match(/^rgb/)?(t=(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],s=e[2],i=e[3]):(t=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,s=e>>8&255,i=255&e),r=Math.sqrt(t*t*.299+s*s*.587+i*i*.114),50},(s="getLuminescence")in(t=this)?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i}render(){let e;return e=this.props.name?this.props.name:this.props.hexValue?this.getLuminescence(this.props.hexValue)>40?"cto_camera_white":"cto_camera_black":"cto_camera_white",i.default.createElement("button",{className:"camera-icon ".concat(this.props.class),type:"button",onClick:this.props.click},i.default.createElement(r.a,{name:e}),i.default.createElement("span",{className:"is-sr-only"},this.props.cameraMessage))}}t.a=o},597:function(e,t,s){"use strict";var i=s(428),r=s(1),o=s(0);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c extends i.Component{constructor(e){super(e),n(this,"countDown",()=>{if(!this.isMountedComponent)return!1;let e=this.state.currentTimer-1;this.setState({currentTimer:e}),e<this.state.timerEnd&&(clearInterval(this.timer),this.props.callback())}),n(this,"startTimer",()=>{this.state.currentTimer>=this.state.timerEnd&&(this.timer=setInterval(this.countDown,1e3))}),this.state={timerEnd:2,currentTimer:3},this.timer=0,this.timerRef=i.default.createRef(),this.isMountedComponent=!1}componentDidMount(){this.isMountedComponent=!0,Object(o.select)(".virtual-makeup-component")&&r.C.subscribe(r.i,()=>{window.innerWidth<961&&(window.innerHeight<window.innerWidth?clearInterval(this.timer):this.startTimer())}),this.timerRef.current.focus(),this.startTimer()}componentDidUpdate(e){void 0!==this.props.pauseTimer&&e.pauseTimer!==this.props.pauseTimer&&(this.props.pauseTimer?clearInterval(this.timer):this.startTimer())}componentWillUnmount(){this.isMountedComponent=!1,clearInterval(this.timer)}render(){return i.default.createElement("div",a({className:"count-down ".concat(this.props.customClass?this.props.customClass:"")},this.props.customProps),i.default.createElement("div",{className:"count-down-text"},i.default.createElement("p",{tabIndex:"-1",ref:this.timerRef},i.default.createElement("span",{className:"is-sr-only"},window.config.cto.dedicated.timerText,": "),i.default.createElement("span",{"aria-live":"assertive"},this.state.currentTimer))))}}t.a=c}}]);