{"version":3,"sources":["webpack:///./patterns/scripts/pages/look-detail/index.js","webpack:///./patterns/scripts/pages/look-detail/look-detail-controller.js","webpack:///./patterns/scripts/pages/look-detail/look-detail-modal.js"],"names":["LookDetail","el","controller","lookAdditionalImages","NEXT_LOOK_SELECTOR","PREV_LOOK_SELECTOR","EXPLORE_LOOK","PAGE_CONTROL_BULLETS","BACK_TO_LOOKS","PAGE_TYPE","dataLayerGA","pageLoad","page_type","window","addEventListener","init","LookDetailController","querySelector","bind","enter","bulletsEl","selectAll","observer","MutationObserver","mutationCallback","forEach","observe","attributes","exploreLook","select","onExploreThisLook","mutationList","mutation","type","attributeName","currentClassList","target","classList","contains","dlBulletDetail","JSON","parse","parentElement","dataset","datalayer","eventLabel","number","eventCategory","document","DLKit","push","eventAction","constructor","container","scrollSpyElement","enableNewPdp","transformLookItemsForMobile","lookPageWithImages","lookPageWithProducts","toggleMobileLookCards","mediaImages","lookProductMainImgContainer","Array","from","self","videoEl","filter","e","videoElRef","lookVideoContainer","videoConfigData","config","videoTitleData","title","videoIconLookNumber","lookNumber","videoAriaLabel","popinLookPDP","replace","parseInt","concat","setAttribute","some","getComputedStyle","height","initSyncControlsDots","initSyncColsTitle","handlePlayPauseButtons","lookPdpImgs","getCollection","mobileHeightWrapper","getBoundingClientRect","isHeightSmall","windowHeight","length","mobileCardContainer","style","position","isWideScreen","timer","that","previousLookLink","nextLookLink","lookDetailsWrapper","mobileImageWrapper","mobileCardWrapper","bindScroll","onscroll","contentHeight","offsetHeight","heightDifference","isVisible","scrollY","toggle","add","clearTimeout","setTimeout","remove","preventDefault","alreadyBindScroll","correctLookData","calcPdpCardPosition","Manager","subscribe","BREAKPOINT_CHANGE","onBreakpointChange","onButtonVideoPlayPause","videoContainerBtn","isDataMaxSet","lookItems","slice","max","lastLookItemId","lastLookItemEl","pageTitleWrapper","goToActiveLookElement","pageControlsWrapper","handleControlsKeyUp","isMobileScreen","isTabletScreen","lookMainZoomableImage","isiOS","animateImageOnMobile","lookCards","lookPageWrapper","lookPageSticky","undefined","parentNode","removeChild","handleSlidingStart","loadPrevLook","keyCode","loadNextLook","PAGELOAD_WISHLIST","wishlistData","wishListData","entries","map","product","code","WINDOW_DID_SCROLL","togglePlayPauseIcon","elem","wishListBtn","slideLookData","removeDataAttribute","mobileLookCardWrapper","innerHeight","bottom","isNotWideScreen","setZoomImages","body","lookModalInit","lastElementReached","pageControlBtn","focusMediaOnClick","which","currentActiveDot","controlDots","scrollTo","left","top","offsetTop","behavior","focusElement","touches","initialX","clientX","initialY","clientY","deltaX","frameWidth","clientWidth","handleEndSliding","handleSliding","passive","setTopProperty","scrollThresold","deltaY","Math","abs","transformX","allowSwipeRight","allowSwipeLeft","TweenLite","set","xPercent","stopPropagation","isLTR","to","ease","Quad","easeInOut","onComplete","btnPlay","removeEventListener","currentScrollTop","currentLookSlide","y","prevLookSlide","HEADER_SIZES","small_collapsed","nextLookSlide","lookData","lookImages","lookVideo","Promise","resolve","currentUrl","getAttribute","currentLocale","url","location","pathname","nextElementToLoad","nextElement","previousElementToLoad","previousLookElement","previousLookImages","currentLookImages","nextLookImages","formatImages","stringify","previousLookVideo","currentLookVideo","nextLookVideo","previousLookCode","currentLookCode","nextLookCode","passageNumber","currentLookElement","nextLookElement","previousLookId","currentLookId","nextLookId","lookId","toggleSlidesAfterSwipe","updateTopProperty","updateAnalyticsData","history","pushState","updateCardAttribute","previousElement","currentCard","slidePos","removeProperty","elementToFocus","currentTarget","imageid","focusedElementRef","sourceCapabilities","elemScrollTop","LOOK_STICKY_SIZES","large","isImageElement","index","updateOffset","initScrollSpyMobile","resetImageStyle","showHideButtonZoom","setLookimgSize","videoElement","paused","play","pause","element","elementToGo","hash","removeAttribute","options","syncColsDots","destroy","scrollSpyDots","SyncCols","calculateHeight","customElements","onUpdate","animateImage","ScrollSpy","stickyOffset","changeThreshold","onChange","updateScrollSpyDots","isInited","updateStickyOffset","syncColsTitle","scrollSpyMobileEl","scrollSpyMobile","scrollPosition","progressToTop","containerItemsHeight","firstElementChild","oldState","currentAnimationState","additonalImageList","isTranslate","setImagePositioning","overflow","scaleImage","fadeScrollArrow","translateImage","reverseTranslate","scrollDownElem","opacityScale","TimelineLite","opacity","diffHeight","mainPosition","mobileContentMainImgHeight","imagePosition","diffH","clientHeight","imgPosition","oldMobileActiveProduct","currentMobileActiveProduct","lookItemsLi","li","lastMobileProductMinMax","mobileMax","lookItem","lookElement","closest","lookMinMax","lastLookProduct","isLastElementMobileStatic","zoomedImageSize","lookImageWrapper","MIN_GAP","MAX_GAP","rversedLooks","reverse","i","currentLook","previousLook","previousMax","currentMax","newMax","event","returnValue","timeout","preventDefaultScroll","onwheel","onmousewheel","ontouchmove","timeoutScrollMobile","enableScroll","scroll","delegateTarget","goTo","imgHeight","currentId","id","currentElement","targetElementId","split","pop","targetElement","targetElementLook","targetImagePosition","targetDescriptionHead","scrollBehaviour","flag","currentScrollOffset","pageYOffset","documentElement","scrollTop","state","width","pageHeight","lookWidth","round","initialWidth","maxWidth","transformOrigin","clearProps","visibleDiff","restoreReversedParameters","scrollCoef","lookItemMinMax","lookItemsMinMax","find","onItemActivated","data","coefFix","parseFloat","toFixed","scrollDirection","scrollDirectionDetector","coefScale","currentCoefScale","scale","floor","percent","yPercent","activeIndex","indexControlImage","$bullet","$bulletLink","small","medium_collapsed","medium","large_collapsed","large_expanded","lookCode","currentLookSlides","zoomableImages","looknumber","ariaLabelToSet","dialogBtnLabel","contentClass","async","autoWidth","draggable","focusOpener","overrideAlt","focusImage","noAnimationMobile","noAnimation","onZoom","ariaLabel","className","zoom","Zoom","create","imgZoom","zoomArray","btnZoom","zoomCurrentImage","display","btnImg","click","lookPageName","min","lookSlideShowWrapper","swipeLookSlides","navigationWrapper","scrollDiff","previousCard","nextCard","imageBaseUrl","newLookdata","lookCardTemplate","transformation","nextLookVideoConfig","previousLookVideoConfig","currentLookVideoConfig","defaultImgHeight","transform","baseurl","looktransform","nextelement","previouselement","lookid","removePreviousCard","removeNextCard","imageArr","Object","keys","cloudinaryQuality","cloudinary","defaultQuality","defaultSrcFallBack","imagesArray","defaultImage","newImages","newVideo","assetType","unshift","configureVideo","videoData","formattedVideoData","autoSized","loop","mute","fluidLoop","videoCentered","pauseScroll","controls","mode","volume","soundControl","subtitles","subTitleAndLang","fullscreen","fullControl","sound","autoSound","asBackground","playButtonStyle","playButtonText","playbutton","color","playButtonColor","toLowerCase","playButtonPosition","coverImage","posterFrame","seoURL","loader","loaderIcon","soundcredit","soundCredit","brightcoveId","accountId","videoAccountId","description","videoConfig","lookVideoDescription","videoId","key","join","tagName","newLookData","newLookImages","imageData","pageTitle","lookCardNumber","xhr","lookSwipeData","then","allImages","lookVideos","videos","sortedImageData","sort","a","b","galleryIndex","path","updateNextLookData","mobileLookTemplate","updateLookCard","setupLookVideo","removeNextSlideData","firstChild","lastChild","updatePreviousLookData","removePreviousSlideData","newSwipedSlide","right","orderLookSlide","item","toggleProductCardsAfterSwipe","appendChild","newProductCard","allProductCard","changeProductCardHeading","orderProductCards","currentProductCard","cardArray","card","productCardContainer","productCardData","headingElem","createElement","innerHTML","insertBefore","querySelectorAll","btn","anchor","currentLookMedia","maxImageToDisplay","nextLookMedia","previousLookMedia","med","dataLayerObj","assign","page_name","isMobile","html","tempList","imageAlt","videoIndex","lookCategory","zoomableImage","lookImageAltText","defaultSrcFallback","zoomSrcFallback","srcFallback","zoomImageSrc","zoomImageAlt","lookZoomImageAlt","newLookCode","newLookElement","cardToUpdate","newHeadingId","newHeadingText","wishlistBtn","viewDetailsCta","innerText","wishlist","trackWishlist","CacheIndex","rePublishPageLoadData","indexOf","codeData","newLookCategory","videoButtonRef","playLabel","pauseLabel","spanElem","playButtonIcon","pauseButtonIcon","MODAL_OPENER","ViewDetailsModal","pageControlDots","bulletEl","frameHeight","productDetailsContainer","slidingElement","productSectionWrapper","previousYTransform","transformY","initialScrollTop","transformPercent","toggleBackGroundContent","toggleLookHeader","productListContent","markAllProductActive","slideDirectionCoef","showProductDetails","collapseListPanel","topPanel","mobileIconWrapper","overflowY","buttonClose","visibility","navPageControl","lookMainImg","notChangeTabIndex","productWrapperHeight","currentOffset","currentOpenProduct","lookProductsList","currentTransformValue","hideProductList","popinCol","buttonOpener","mainImgData","referenceProducts","lookDetails","expandDetailsBtn","showDisclaimerText","openedProductName","productWrapperDiv","pageControlWrapper","lookImageContainer","imageZoomContent","productSectionClicked","controlDotsClicked","modalBackground","mobileScrollTimer","didMove","triggeredMention","activeTitle","activeDesc","activeref","listCollapseHeader","lastProductDelta","unsubscribe","packshotDefault","viewDetailsClicked","lookDataUrl","mainImgDataUrl","src","geoAsset","positions","calculatedGeo","minYPosition","zoomAnimationData","minA","minB","imageAltText","lookImage","altTextLocalized","buildTemplate","asset","minY","maxY","pos","open","popin","template","role","modifiers","opener","modal","label","modalLabel","forceInert","manageFocus","outerClose","onOpenPopin","closeLabel","mobileNavDotTemplate","productListTemplate","disclaimerTemplate","name","disclaimerText","disclaimerAlly","disclaimerText1","disclaimerTitle","policyURL","disclaimerText2","productDescriptionText","productRefText","productPriceText","detailBtnTemplate","refProduct","fabricGrp","colorGrp","productDescription","manufacturerAID","refFshCode","priceMention","priceText","price","displayPrice","isPriceUnderRequest","formattedValue","sellableOnline","priceInfoAriaLabel","priceOnRequest","nonWebSelection","nonCommunication","availableToCurrentUser","viewDetailLabel","viewProductDetailsCta","setDomElement","setInitialTemplate","disclaimer","setPositionValue","popinEl","closeLookPopin","backToTarget","pageControlList","focusToTarget","cta","viewProductDetails","transformProductSection","expandFirstProduct","onImageScroll","expandClickedProduct","transformMobileProductCard","prod","positionData","referenceProduct","maxScrollTop","normalizeCoef","expandedProductDetails","evt","children","mobileIconSpan","titleSpan","productDetailsSection","productSectionToExpand","paddingTop","productWrapperOverflow","css","BORDER_GAP","handleImageStartSliding","collapseIcon","zoomContentHeight","scrollToProduct","handleImageEndSliding","handleImageSliding","currentOpenIndex","scrollToElement","productContent","updateMobileProductCard","productIdClicked","sectionid","productIndex","productListEl","productTitle","productToExpand","lookIndexToExpand","totalProductTranform","every","updateScrollDots","collapseAllPanels","expandCurrentPanel","sectionOpenDataLayer","lookExpandBtn","lookDetailsCollapse","clickedSpan","lookDetailsToExpand","scrollProductSection","marginBottom","productWrapper","lookSpan","lookItemMin","lookItemMax","lookItemScrollCoef","currentScrollPosition","expandSpanElem","status","lookDetailsModal"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEe,SAASA,UAAT,CAAoBC,EAApB,EAAwB;AACrC,MAAIC,UAAJ;AACA,MAAIC,oBAAJ;AACA,QAAMC,kBAAkB,GAAG,oBAA3B;AACA,QAAMC,kBAAkB,GAAG,oBAA3B;AACA,QAAMC,YAAY,GAAG,kBAArB;AACA,QAAMC,oBAAoB,GAAG,kBAA7B;AACA,QAAMC,aAAa,GAAG,WAAtB;AACA,QAAMC,SAAS,GAAGC,WAAW,CAACC,QAAZ,CAAqBC,SAAvC;AAEAC,QAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgCC,IAAhC;;AAEA,WAASA,IAAT,GAAgB;AACdb,cAAU,GAAG,IAAIc,+DAAJ,CAAyBf,EAAE,CAACgB,aAAH,CAAiB,uBAAjB,CAAzB,CAAb;AACAC,QAAI;AACL;;AAED,WAASA,IAAT,GAAgB;AACdhB,cAAU,CAACiB,KAAX;AACA,UAAMC,SAAS,GAAGC,+DAAS,CAAC,qBAAD,EAAwBpB,EAAxB,CAA3B;AACA,QAAIqB,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBC,gBAArB,CAAf;AACAJ,aAAS,CAACK,OAAV,CAAmBxB,EAAD,IAAQ;AACzBqB,cAAQ,CAACI,OAAT,CAAiBzB,EAAjB,EAAqB;AAAC0B,kBAAU,EAAG;AAAd,OAArB;AACA,KAFD;AAGA,UAAMC,WAAW,GAAGC,4DAAM,CAACvB,YAAD,CAA1B;;AACA,QAAIsB,WAAJ,EAAiB;AAChBA,iBAAW,CAACd,gBAAZ,CAA6B,OAA7B,EAAsCgB,iBAAtC;AACA;AACF;;AAED,WAASN,gBAAT,CAA0BO,YAA1B,EAAwC;AACvC,SAAK,IAAIC,QAAT,IAAqBD,YAArB,EAAmC;AAClC,UAAIC,QAAQ,CAACC,IAAT,IAAiB,YAAjB,IAAiCD,QAAQ,CAACE,aAAT,IAA0B,OAA/D,EAAwE;AACrE,YAAIC,gBAAgB,GAAGH,QAAQ,CAACI,MAAT,CAAgBC,SAAhB,CAA0BC,QAA1B,CAAmC,WAAnC,CAAvB;;AACA,YAAIH,gBAAJ,EAAsB;AACnB,cAAII,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWT,QAAQ,CAACI,MAAT,CAAgBM,aAAhB,CAA8BC,OAA9B,CAAsCC,SAAjD,CAArB;AACAL,wBAAc,CAACM,UAAf,GAA4Bb,QAAQ,CAACI,MAAT,CAAgBO,OAAhB,CAAwBG,MAApD;AACAP,wBAAc,CAACQ,aAAf,GAA+BtC,SAA/B;AACAI,gBAAM,CAACmC,QAAP,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2B,aAA3B,EAA0CX,cAA1C;AACF;AACH;AACD;AACD;;AAED,WAAST,iBAAT,GAA4B;AAC3BjB,UAAM,CAACmC,QAAP,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2B,2CAA3B,EAAwE;AACpEL,gBAAU,EAAE,EADwD;AAEpEM,iBAAW,EAAE;AAFuD,KAAxE;AAIA;AACF,C,CAiBD;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAcA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtNA;AACA;AAWA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEe,MAAMnC,oBAAN,CAA2B;AACxCoC,aAAW,CAACC,SAAD,EAAY;AAAA;;AAAA,mCAoGf,MAAM;AACZ,UAAI,CAAC,K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","file":"chunks/lookdetail.js?v=3.23.0","sourcesContent":["import LookDetailController from './look-detail-controller'\nimport { select, selectAll, getCollection } from 'lib/selectors'\nimport {focusElement} from 'lib/helpers'\nimport * as dBind from 'delegate'\n\nexport default function LookDetail(el) {\n  let controller\n  let lookAdditionalImages\n  const NEXT_LOOK_SELECTOR = '.js-link-next-look'\n  const PREV_LOOK_SELECTOR = '.js-link-prev-look'\n  const EXPLORE_LOOK = '.js-explore-look'\n  const PAGE_CONTROL_BULLETS = '.js-page-control'\n  const BACK_TO_LOOKS = '.nav-left'\n  const PAGE_TYPE = dataLayerGA.pageLoad.page_type\n\n  window.addEventListener('load', init)\n\n  function init() {\n    controller = new LookDetailController(el.querySelector('.look-page__container'))\n    bind()\n  }\n\n  function bind() {\n    controller.enter()\n    const bulletsEl = selectAll('.js-page-control li', el)\n    let observer = new MutationObserver(mutationCallback)\n    bulletsEl.forEach((el) => {\n    \tobserver.observe(el, {attributes : true})\n    })\n    const exploreLook = select(EXPLORE_LOOK)\n    if (exploreLook) {\n    \texploreLook.addEventListener('click', onExploreThisLook)\n    }   \n  }\n  \n  function mutationCallback(mutationList) {\n\t  for (let mutation of mutationList) {\n\t\t  if (mutation.type == \"attributes\" && mutation.attributeName == \"class\") {\n\t\t     let currentClassList = mutation.target.classList.contains('is-active')\n\t\t     if (currentClassList) {\n\t\t        let dlBulletDetail = JSON.parse(mutation.target.parentElement.dataset.datalayer)\n\t\t        dlBulletDetail.eventLabel = mutation.target.dataset.number\n\t\t        dlBulletDetail.eventCategory = PAGE_TYPE\n\t\t        window.document.DLKit.push('on-tracking', dlBulletDetail)\n\t\t     }\n\t\t  }\n\t  }\n  }\n  \n  function onExploreThisLook(){\n\t  window.document.DLKit.push('when-user-interact-with-pdp-ready-to-wear', {\n\t      eventLabel: '',\n\t      eventAction :'explore this look'\n\t    })\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// OLD 1.9 index.js\n\n// import { Manager, BREAKPOINT_CHANGE } from 'lib/events'\n// import { isWideScreen, isTabletScreen } from 'lib/helpers'\n// import ControllerNarrowScreen from './fifty-carousel/controller-narrow-screen'\n// import ControllerWideScreen from './fifty-carousel/controller-wide-screen'\n// import { select } from 'lib/selectors'\n// import  * as dBind  from 'delegate'\n\n// export default function LookDetail(el) {\n//   const NEXT_LOOK_SELECTOR = '.js-link-next-look'\n//   const PREV_LOOK_SELECTOR = '.js-link-prev-look'\n//   let controller\n//   let narrowScreenController\n//   let wideScreenController\n\n//   window.addEventListener('load', init)\n\n//   function init() {\n//     controller = new ControllerWideScreen(el.querySelector('.look-page__container'))\n//     controller.enter()\n//     // wideScreenController = new ControllerWideScreen(el.querySelector('.js-fifty-carousel'))\n//     // onBreakpointChange()\n//     bind()\n//   }\n\n//   function bind() {\n//     dBind(el, PREV_LOOK_SELECTOR, 'click', onPrevLookClicked)\n//     dBind(el, NEXT_LOOK_SELECTOR, 'click', onNextLookClicked)\n//     // Manager.subscribe(BREAKPOINT_CHANGE, onBreakpointChange)\n//   }\n\n//   // Switch controller on the fly on breakpoint change\n//   function onBreakpointChange() { //TODO hicham: remove, not used anymore\n//     // Collapse entries if necessary\n//     const prevController = controller\n//     if (!isWideScreen() && !isTabletScreen()) {\n//       if (prevController !== narrowScreenController) {\n//         controller = narrowScreenController\n//       }\n//     } else if (prevController !== wideScreenController) {\n//       controller = wideScreenController\n//     }\n//     if (controller !== prevController) {\n//       if (prevController) {\n//         prevController.leave()\n//       }\n//       controller.enter()\n//     }\n//   }\n\n//   function onPrevLookClicked() {\n//     const carouselEl = select('[data-dl-look-prev]', el)\n//     if (carouselEl) {\n//       window.document.DLKit.push('when-user-interact-with-carousel', JSON.parse(carouselEl.dataset.dlLookPrev))\n//     }\n//   }\n\n//   function onNextLookClicked() {\n//     const carouselEl = select('[data-dl-look-next]', el)\n//     if (carouselEl) {\n//       window.document.DLKit.push('when-user-interact-with-carousel', JSON.parse(carouselEl.dataset.dlLookNext))\n//     }\n//   }\n// }\n\n\n\n\n\n\n\n\n\n\n\n\n\n// v2-dev code\n\n\n// import { Manager, BREAKPOINT_CHANGE } from 'lib/events'\n// import { isWideScreen, isTabletScreen } from 'lib/helpers'\n// import ControllerNarrowScreen from './fifty-carousel/controller-narrow-screen'\n// import ControllerWideScreen from './fifty-carousel/controller-wide-screen'\n// import { select } from 'lib/selectors'\n// import  * as dBind  from 'delegate'\n\n// export default function LookDetail(el) {\n//   const NEXT_LOOK_SELECTOR = '.js-link-next-look'\n//   const PREV_LOOK_SELECTOR = '.js-link-prev-look'\n//   let controller\n//   let narrowScreenController\n//   let wideScreenController\n\n//   window.addEventListener('load', init)\n\n//   function init() {\n//     narrowScreenController = new ControllerNarrowScreen(el.querySelector('.js-fifty-carousel'))\n//     wideScreenController = new ControllerWideScreen(el.querySelector('.js-fifty-carousel'))\n//     onBreakpointChange()\n//     bind()\n//   }\n\n//   function bind() {\n//     dBind(el, PREV_LOOK_SELECTOR, 'click', onPrevLookClicked)\n//     dBind(el, NEXT_LOOK_SELECTOR, 'click', onNextLookClicked)\n//     Manager.subscribe(BREAKPOINT_CHANGE, onBreakpointChange)\n//   }\n\n//   // Switch controller on the fly on breakpoint change\n//   function onBreakpointChange() {\n//     // Collapse entries if necessary\n//     const prevController = controller\n//     if (!isWideScreen() && !isTabletScreen()) {\n//       if (prevController !== narrowScreenController) {\n//         controller = narrowScreenController\n//       }\n//     } else if (prevController !== wideScreenController) {\n//       controller = wideScreenController\n//     }\n//     if (controller !== prevController) {\n//       if (prevController) {\n//         prevController.leave()\n//       }\n//       controller.enter()\n//     }\n//   }\n\n//   function onPrevLookClicked() {\n//     const carouselEl = select('[data-dl-look-prev]', el)\n//     if (carouselEl) {\n//       window.document.DLKit.push('when-user-interact-with-carousel', JSON.parse(carouselEl.dataset.dlLookPrev))\n//     }\n//   }\n\n//   function onNextLookClicked() {\n//     const carouselEl = select('[data-dl-look-next]', el)\n//     if (carouselEl) {\n//       window.document.DLKit.push('when-user-interact-with-carousel', JSON.parse(carouselEl.dataset.dlLookNext))\n//     }\n//   }\n// }\n\n","import { HEADER_SIZES, LOOK_STICKY_SIZES } from 'config/constants'\nimport {\n  isLTR,\n  isMobile,\n  isiOS,\n  isWideScreen,\n  isTabletScreen,\n  isMobileScreen,\n  focusElement,\n  scrollDirectionDetector,\n  isInViewPort\n} from 'lib/helpers'\nimport {\n  Manager,\n  WINDOW_WAS_RESIZED,\n  BREAKPOINT_CHANGE,\n  PAGELOAD_WISHLIST,\n  WINDOW_DID_SCROLL\n} from 'lib/events'\nimport CacheIndex from 'modules/cache/pages/index'\nimport { select, selectAll, getCollection } from 'lib/selectors'\nimport ScrollSpy from 'lib/scroll-spy'\nimport SyncCols from 'ui/widgets/sync-cols'\nimport bind from 'delegate'\nimport Zoom from '../pdp/zoom'\nimport lookModalInit from './look-detail-modal'\nimport * as xhr from 'modules/fetch'\nimport config from 'lib/config'\nimport pageTitle from 'modules/pageTitle'\nimport { cloneDeep, debounce } from 'lodash'\nimport { init } from 'ui/video'\n\nexport default class LookDetailController {\n  constructor(container) {\n    this.container = container\n    this.lookPageName = 'look-page'\n    this.enableNewPdp = this.container.classList.contains(`${this.lookPageName}__new-pdp`)\n    this.lookPageWithProducts = this.container.classList.contains(\n      `${this.lookPageName}__with-products`\n    )\n    this.lookPageWithImages = this.enableNewPdp\n      ? this.container.classList.contains(`${this.lookPageName}__with-show`)\n      : this.container.classList.contains(`${this.lookPageName}__with-images`)\n    this.lookPageWrapper = select('.look-page')\n    this.pageControlsWrapper = select(`.${this.lookPageName}__controls__wrapper`, this.container)\n    this.pageTitleWrapper = select(`.${this.lookPageName}__details-wrapper`, this.container)\n    this.lookProductMainImgContainer = select(`.${this.lookPageName}__main-img`, this.container)\n    this.lookMainZoomableImage = select(`.${this.lookPageName}__img-zoom img`, this.container)\n    this.pageControlBtn = selectAll(`.${this.lookPageName}__control-btn`, this.container)\n    this.lookVideoContainer = select('.look-page__video-wrapper', this.container)\n    this.lookItems = selectAll('.look-description', this.pageTitleWrapper)\n    this.lookItemsLi = selectAll(\n      `.${this.lookPageName}__details-wrapper-list`,\n      this.pageTitleWrapper\n    )\n    this.lookItemsMinMax = this.lookItems\n      ? Array.from(this.lookItems).map(element => ({ min: element.dataset.min, max: element.dataset.max }))\n      : []\n    if (this.lookPageWithProducts && !this.enableNewPdp) {\n      this.lastLookProduct = this.lookItems[this.lookItems.length - 1].closest('li')\n      this.mobileContentMainImgHeight = select(`.${this.lookPageName}__main-img`).offsetHeight\n      this.lastMobileProductMinMax = select('.look-description', this.lastLookProduct).dataset\n    }\n    this.btnZoom = select('.look-btn-zoom', this.container)\n    this.videoContainerBtn = select('.video-container', this.container)\n    // swipe look changes goes here\n    this.lookSlideShowWrapper = select('.look-slideshow__wrapper', this.container)\n    this.swipeLookSlides = getCollection('.look-slideshow__common', this.container)\n    this.currentLookSlide = select('.look-slideshow__current', this.container)\n    this.nextLookSlide = select('.look-slideshow__next', this.container)\n    this.prevLookSlide = select('.look-slideshow__prev', this.container)\n    this.navigationWrapper = select('.look-page__look-navigation')\n    this.indexControlImage = 0\n    this.zoomArray = []\n    this.syncColsDots = null\n    this.syncColsTitle = null\n    this.scrollSpyDots = null\n    this.scrollSpyMobile = null\n    this.currentAnimationState = null\n    this.currentCoefScale = 0\n    this.isTranslate = true\n    this.visibleDiff = null\n    this.scrollDiff = null\n    this.timeoutScrollMobile = null\n    this.currentMobileActiveProduct = null\n    this.oldMobileActiveProduct = null\n    this.isLastElementMobileStatic = false\n    this.controlDots = selectAll('li', this.pageControlsWrapper)\n    // lookSwipeVariable\n    this.currentCard = null\n    this.previousCard = null\n    this.nextCard = null\n    this.lookDetailsWrapper = null\n    this.nextLookLink = null\n    this.previousLookLink = null\n    this.initialWidth = null\n    this.imageBaseUrl = null\n    this.nextLookImages = null\n    this.previousLookImages = null\n    this.currentLookImages = null\n    this.nextLookCode = null\n    this.previousLookCode = null\n    this.currentLookCode = null\n    this.newLookdata = null\n    this.lookCardTemplate = null\n    this.transformation = null\n    this.currentLookId = null\n    this.nextLookId = null\n    this.previousLookId = null\n    this.initialX = 0\n    this.initialY = 0\n    this.deltaX = 0\n    this.frameWidth = 0\n    this.transformX = 0\n    this.nextElementToLoad = null\n    this.allowSwipeRight = true\n    this.allowSwipeLeft = true\n    this.wishListData = null\n    this.nextLookVideo = null\n    this.previousLookVideo = null\n    this.currentLookVideo = null\n    this.nextLookVideoConfig = null\n    this.previousLookVideoConfig = null\n    this.currentLookVideoConfig = null\n    this.mobileImageWrapper = null\n    this.mobileCardWrapper = null\n    this.windowHeight = window.innerHeight;\n    this.mobileCardContainer = select('.look-page__details-container')\n    this.defaultImgHeight = select('.look-slideshow__current .PACKSHOT_DEFAULT').getBoundingClientRect().height\n    this.heightDifference = this.windowHeight - this.defaultImgHeight\n    this.alreadyBindScroll = false\n  }\n\n  enter = () => {\n    if (!this.container) {\n      return\n    }\n    // init page controls dots\n    let scrollSpyElement\n    if (!this.enableNewPdp) {\n      this.transformLookItemsForMobile()\n      if (this.lookPageWithImages) {\n        scrollSpyElement = select('.look-page__alternative-imgs-container')\n      } else if (this.lookPageWithProducts) {\n        scrollSpyElement = select('.look-page__details-wrapper')\n      }\n    } else {\n      this.toggleMobileLookCards()\n      scrollSpyElement = select('.look-page__images-container')\n    }\n    const mediaImages = [\n      this.lookProductMainImgContainer,\n      ...Array.from(selectAll('.look-page__img-wrapper', scrollSpyElement))\n    ]\n    const self = this\n    const videoEl = select('video', mediaImages.filter(e => select('video', e))[0])\n    if (videoEl) {\n      const videoElRef = select('.js-video', this.lookVideoContainer)\n      const videoConfigData = videoElRef ? videoElRef.dataset.config : ''\n      const videoTitleData = videoConfigData ? JSON.parse(videoConfigData).title : ''\n      const videoIconLookNumber = select('.video-container')\n        ? select('.video-container').dataset.lookNumber\n        : ''\n      let videoAriaLabel = config.popinLookPDP.videoAriaLabel\n        .replace('{0}', 1)\n        .replace('{1}', parseInt(videoIconLookNumber))\n      if (videoTitleData) {\n        videoAriaLabel = videoAriaLabel.concat(` - ${videoTitleData}`)\n      }\n      videoEl.setAttribute('aria-label', videoAriaLabel)\n    }\n    if (mediaImages && mediaImages.some(e => window.getComputedStyle(e).height === '0px')) {\n      if (videoEl) {\n        videoEl.addEventListener(\n          'loadeddata',\n          () => {\n            self.initSyncControlsDots()\n            self.initSyncColsTitle()\n          },\n          false\n        )\n      }\n    } else {\n      this.initSyncControlsDots()\n      this.initSyncColsTitle()\n    }\n    // init page title scroll\n\n    // init scrollAnimation on mobile\n    // this.initScrollSpyMobile()\n\n    this.bind()\n    this.handlePlayPauseButtons()\n  }\n\n  calcPdpCardPosition = () => {\n    const lookPdpImgs = getCollection('li',select('.look-page__images-container.look-slideshow__current'))\n    const mobileHeightWrapper = select('.look-page__mobile-height').getBoundingClientRect().height\n    const isHeightSmall = mobileHeightWrapper < this.windowHeight\n    if(lookPdpImgs.length === 1 && isHeightSmall) {\n      this.mobileCardContainer.style.position = 'absolute'\n    } else {\n      this.mobileCardContainer.style.position = 'fixed'\n    }\n  }\n\n  isNotWideScreen = () => {\n    if (!isWideScreen() && this.enableNewPdp) {\n      let timer = null\n      let that = this\n      this.previousLookLink = select('.js-previous-look')\n      this.nextLookLink = select('.js-next-look')\n      this.lookDetailsWrapper = select('.look-page__details-wrapper-inner')\n      this.mobileImageWrapper = select('.look-page__mobile-height')\n      this.mobileCardWrapper = select('.look-page__details-container')\n      const bindScroll = () => {\n        window.onscroll = function () {\n          if (isWideScreen()) return\n          const contentHeight = that.mobileImageWrapper.offsetHeight - that.heightDifference;\n          const isVisible = window.scrollY <= contentHeight\n          that.mobileCardWrapper.classList.toggle('is-d-block', isVisible)\n          that.mobileCardWrapper.classList.toggle('is-d-none', !isVisible)\n          that.lookDetailsWrapper.classList.add('has-opacity-hidden')\n        }\n\n        window.addEventListener('scroll', function(e) {\n          if (timer) {\n            clearTimeout(timer)\n          }\n          timer = setTimeout(function() {\n            that.lookDetailsWrapper.classList.remove('has-opacity-hidden')\n          }, 150)\n          e.preventDefault\n        }, false)\n      }\n\n\n      if(!this.alreadyBindScroll) {\n        bindScroll()\n        this.alreadyBindScroll = true\n      }\n      this.correctLookData()\n      this.calcPdpCardPosition()\n    }\n  }\n\n\n  bind = () => {\n    Manager.subscribe(BREAKPOINT_CHANGE, this.onBreakpointChange)\n    if (this.lookVideoContainer) {\n      this.lookVideoContainer.addEventListener('keyup', this.onButtonVideoPlayPause)\n      this.lookVideoContainer.addEventListener('click', this.onButtonVideoPlayPause)\n      this.videoContainerBtn.addEventListener('keyup', this.onButtonVideoPlayPause)\n      this.videoContainerBtn.addEventListener('click', this.onButtonVideoPlayPause)\n    }\n    if (this.lookPageWithProducts && !this.enableNewPdp) {\n      const isDataMaxSet = !Array.from(this.lookItems)\n        .slice(1)\n        .some(e => !e.dataset.max)\n      const lastLookItemId = `look-details-${this.lookItems.length}`\n      const lastLookItemEl = select(\n        `li#look-details-${this.lookItems.length}`,\n        this.pageTitleWrapper\n      )\n      bind(this.pageTitleWrapper, 'a[href*=\"#look-details-\"]', 'click', e =>\n        this.goToActiveLookElement(e, isDataMaxSet, lastLookItemId, lastLookItemEl)\n      )\n    }\n    if (this.lookPageWithProducts || this.lookPageWithImages) {\n      bind(this.pageControlsWrapper, 'a[href*=\"#look-details-\"]', 'keyup', this.handleControlsKeyUp)\n    }\n    if (\n      this.lookPageWithProducts &&\n      (isMobileScreen() || isTabletScreen()) &&\n      this.lookMainZoomableImage\n    ) {\n      if (isiOS()) {\n        this.lookMainZoomableImage.classList.add('ios')\n      }\n      this.animateImageOnMobile()\n      window.addEventListener('scroll', this.animateImageOnMobile)\n    }\n    const lookCards = getCollection('.look-page__card-wrapper')\n    if (!isWideScreen() && this.enableNewPdp) {\n      let timer = null\n      const that = this\n      const lookPageWrapper = select('.look-page')\n      const lookPageSticky = select('.js-sticky-item')\n      if (lookPageSticky !== null && lookPageSticky !== undefined) {\n        lookPageSticky.parentNode.removeChild(lookPageSticky)\n      }\n      this.previousLookLink = select('.js-previous-look')\n      this.nextLookLink = select('.js-next-look')\n      this.lookDetailsWrapper = select('.look-page__details-wrapper-inner')\n      this.mobileImageWrapper = select('.look-page__mobile-height')\n      this.mobileCardWrapper = select('.look-page__details-container')\n      this.lookPageWrapper.addEventListener('touchstart', this.handleSlidingStart)\n      this.lookPageWrapper.addEventListener('mousedown', this.handleSlidingStart)\n      this.previousLookLink\n        ? this.previousLookLink.addEventListener('click', this.loadPrevLook.bind(this))\n        : ''\n      this.previousLookLink\n        ? this.previousLookLink.addEventListener('keypress', e => {\n          if (e.keyCode == 32) {\n            e.preventDefault()\n            that.loadPrevLook(e)\n          }\n        })\n        : ''\n      this.nextLookLink\n        ? this.nextLookLink.addEventListener('click', this.loadNextLook.bind(this))\n        : ''\n      this.nextLookLink\n        ? this.nextLookLink.addEventListener('keypress', e => {\n          if (e.keyCode == 32) {\n            e.preventDefault()\n            that.loadNextLook(e)\n          }\n        })\n        : ''\n\n      window.onscroll = function () {\n        if (isWideScreen()) return\n        const contentHeight = that.mobileImageWrapper.offsetHeight - that.heightDifference;\n        const isVisible = window.scrollY <= contentHeight\n        that.mobileCardWrapper.classList.toggle('is-d-block', isVisible)\n        that.mobileCardWrapper.classList.toggle('is-d-none', !isVisible)\n        that.lookDetailsWrapper.classList.add('has-opacity-hidden')\n      }\n\n      window.addEventListener(\n        'scroll',\n        () => {\n          if (timer) {\n            clearTimeout(timer)\n          }\n          timer = setTimeout(() => {\n            that.lookDetailsWrapper.classList.remove('has-opacity-hidden')\n          }, 150)\n        },\n        false\n      )\n      Manager.subscribe(PAGELOAD_WISHLIST, wishlistData => {\n        this.wishListData = wishlistData.entries.map(product => product.code)\n      })\n      Manager.subscribe(WINDOW_DID_SCROLL, this.togglePlayPauseIcon.bind(this))\n      // remove next and previous arrow icons for mobile view\n      lookCards.forEach(elem => {\n        const wishListBtn = select('button.is-wishlist', elem)\n        if (wishListBtn && !elem.classList.contains('current-card')) {\n          wishListBtn.setAttribute('tabindex', -1)\n        }\n      })\n      this.slideLookData()\n      this.calcPdpCardPosition()\n    } else {\n      lookCards.forEach(elem => {\n        if (elem.classList.contains('is-hidden-desktop')) {\n          elem.parentNode.removeChild(elem)\n        } else {\n          this.removeDataAttribute(elem)\n        }\n      })\n    }\n    window.addEventListener('resize', debounce(() => {\n\n      const mobileLookCardWrapper = select('.look-page__details-wrapper-inner')\n      if (window.innerHeight - mobileLookCardWrapper.getBoundingClientRect().bottom < 50) {\n          mobileLookCardWrapper.style.position = 'unset'\n      }\n      if(isWideScreen()) {\n          mobileLookCardWrapper.style.position = 'unset'\n    }\n      this.isNotWideScreen()\n\n      if (!isWideScreen()) return\n      this.mobileCardWrapper = select('.look-page__details-container')\n      if (this.mobileCardWrapper) {\n        this.mobileCardWrapper.style.position = 'unset'\n      }\n    }, 50))\n\n    window.addEventListener('scroll', function() {\n      const mobileLookCardWrapper = select('.look-page__details-wrapper-inner')\n      if(!isWideScreen()) {\n          mobileLookCardWrapper.style.position = 'absolute'\n      } else {\n        mobileLookCardWrapper.style.position = 'unset'\n      }\n    }, false)\n\n\n    if (this.enableNewPdp) {\n      this.setZoomImages()\n      bind(document.body, '.js-view-detail-modal', 'click', lookModalInit)\n      let lastElementReached = false\n      this.pageControlBtn.forEach(elem => {\n        elem.addEventListener('keyup', this.focusMediaOnClick, true)\n        elem.addEventListener('click', this.focusMediaOnClick, true)\n      })\n      bind(this.lookProductMainImgContainer, '.look-page__img-wrapper', 'keyup', e => {\n        if (e.which === 32) {\n          const currentActiveDot = this.controlDots.filter(elem =>\n            elem.classList.contains('is-active')\n          )\n          if (currentActiveDot) {\n            if (\n              parseInt(currentActiveDot[0].dataset.number) + 1 === this.controlDots.length &&\n              !lastElementReached\n            ) {\n              window.scrollTo({\n                left: 0,\n                top: select(`#look-details-${parseInt(currentActiveDot[0].dataset.number)}`)\n                  .offsetTop,\n                behavior: 'smooth'\n              })\n              focusElement(\n                select(`#look-details-${parseInt(currentActiveDot[0].dataset.number)} img`)\n              )\n            } else if (\n              parseInt(currentActiveDot[0].dataset.number) + 1 !==\n              this.controlDots.length\n            ) {\n              window.scrollTo({\n                left: 0,\n                top: select(`#look-details-${parseInt(currentActiveDot[0].dataset.number)}`)\n                  .offsetTop,\n                behavior: 'smooth'\n              })\n              focusElement(\n                select(`#look-details-${parseInt(currentActiveDot[0].dataset.number)} img`)\n              )\n            }\n            if (parseInt(currentActiveDot[0].dataset.number) + 1 === this.controlDots.length) {\n              lastElementReached = true\n            } else {\n              lastElementReached = false\n            }\n          }\n        }\n      })\n    }\n  }\n\n  slideLookData() {\n    this.currentCard = select('.look-page__card-wrapper.current-card')\n    this.previousCard = select('.look-page__card-wrapper.prev-card')\n    this.nextCard = select('.look-page__card-wrapper.next-card')\n    this.lookSlideShowWrapper.style.transform = 'translateX(0%)'\n    this.imageBaseUrl = this.currentCard.dataset.baseurl\n    this.transformation = this.currentCard.dataset.looktransform\n    this.nextLookCode = this.nextCard.dataset.code\n    this.previousLookCode = this.previousCard.dataset.code\n    this.currentLookCode = this.currentCard.dataset.code\n    this.nextLookElement = this.currentCard.dataset.nextelement\n    this.previousLookElement = this.currentCard.dataset.previouselement\n    this.currentLookElement = this.previousCard.dataset.nextelement\n    this.nextElementToLoad = this.nextCard.dataset.nextelement\n    this.previousElementToLoad = this.previousCard.dataset.previouselement\n    this.lookCardTemplate = select('.look-description__card-container', this.currentCard)\n    this.currentLookId = this.currentCard.dataset.lookid\n    this.nextLookId = this.nextCard.dataset.lookid\n    this.previousLookId = this.previousCard.dataset.lookid\n    if (this.previousLookElement == '') {\n      this.removePreviousCard()\n    } else if (this.nextLookElement == '') {\n      this.removeNextCard()\n    }\n    this.removeDataAttribute(this.currentCard)\n    this.removeDataAttribute(this.previousCard)\n    this.removeDataAttribute(this.nextCard)\n    this.correctLookData()\n  }\n\n  formatImages(imageArr) {\n    if (imageArr && Object.keys(JSON.parse(imageArr)).length !== 0) {\n      const cloudinaryQuality =\n        `${window.config.cloudinary.defaultQuality\n        }/w_${\n        window.config.cloudinary.defaultSrcFallBack\n        }/`\n      const imagesArray = JSON.parse(imageArr)\n      let defaultImage\n      const newImages = []\n      const newVideo = null\n      const assetType = Object.keys(imagesArray)\n      for (let index = 0; index < assetType.length; index++) {\n        if (assetType[index] == 'PACKSHOT_DEFAULT' && this.transformation !== '') {\n          defaultImage =\n            `${this.imageBaseUrl\n            }/` +\n            `t_${\n            this.transformation\n            }/${\n            cloudinaryQuality\n            }${imagesArray[assetType[index]]}`\n        } else if (assetType[index] !== 'VIDEO') {\n          newImages.push(\n            `${this.imageBaseUrl}/${cloudinaryQuality}${imagesArray[assetType[index]]}`\n          )\n        }\n      }\n      defaultImage !== undefined ? newImages.unshift(defaultImage) : newImages\n      return newImages\n    }\n  }\n\n  configureVideo(videoData, lookCode) {\n    if (videoData) {\n      let formattedVideoData\n      if (typeof videoData === 'string') {\n        formattedVideoData = JSON.parse(videoData)\n      } else {\n        formattedVideoData = {\n          config: {\n            autoSized: true,\n            loop: true,\n            mute: true,\n            fluidLoop: true,\n            videoCentered: true,\n            pauseScroll: true,\n            controls: {\n              mode: 'none',\n              volume: videoData[0].soundControl || false,\n              subtitles: videoData[0].subTitleAndLang || false,\n              fullscreen: videoData[0].fullControl || false\n            },\n            sound: videoData[0].autoSound || false,\n            asBackground: 'true',\n            playButtonStyle: videoData[0].playButtonText ? 'none' : '',\n            playbutton: {\n              color: videoData[0].playButtonColor && videoData[0].playButtonColor.toLowerCase() || \"\",\n              position: videoData[0].playButtonPosition.toLowerCase()\n            },\n            coverImage: videoData[0].posterFrame ? videoData[0].posterFrame.seoURL : '',\n            loader: {\n              type: videoData[0].loaderIcon != 'wfj' ? 'default' : 'brand'\n            },\n            soundcredit: videoData[0].soundCredit || false\n          },\n          brightcoveId: videoData[0].brightcoveId,\n          accountId: videoData[0].accountId\n            ? videoData[0].accountId\n            : window.config.popinLookPDP.videoAccountId,\n          title: videoData[0].title ? videoData[0].title : '',\n          description: videoData[0].description ? videoData[0].description : ''\n        }\n      }\n\n      const brightcoveId = formattedVideoData.brightcoveId\n      const accountId = formattedVideoData.accountId\n      const videoConfig = formattedVideoData.config\n      let videoAriaLabel = window.config.popinLookPDP.videoAriaLabel\n        .replace('{0}', 1)\n        .replace('{1}', parseInt(lookCode))\n      let lookVideoDescription = ''\n      if (formattedVideoData.title) {\n        videoAriaLabel = `${videoAriaLabel} - ${formattedVideoData.title}`\n      }\n      if (formattedVideoData.description) {\n        lookVideoDescription =\n          `<div class=\"is-sr-only\">${formattedVideoData.description}</div>`\n      }\n      const videoId = `video_look-details-video_${parseInt(lookCode)}`\n      return (\n        `<div id=\"${\n        videoId\n        }\" class=\"video js-video\" data-ooyalaId=${\n        brightcoveId\n        } data-ooyalaAccountId=${\n        accountId\n        } data-config=${\n        JSON.stringify(videoConfig)\n        } data-decorative=\"true\" data-aria-label=\"${\n        videoAriaLabel\n        }\"></div>`\n      )\n    }\n  }\n\n  removeDataAttribute(elem) {\n    for (const key in elem.dataset) {\n      elem.removeAttribute(\n        `data-${\n          key\n            .split(/(?=[A-Z])/)\n            .join('-')\n            .toLowerCase()}`\n      )\n    }\n  }\n\n  handleSlidingStart = e => {\n    if (!e.touches) {\n      e.preventDefault()\n    }\n    this.initialX = e.touches ? e.touches[0].clientX : e.clientX\n    this.initialY = e.touches ? e.touches[0].clientY : e.clientY\n    this.deltaX = 0\n    this.frameWidth = this.lookProductMainImgContainer.clientWidth\n\n    this.lookPageWrapper.addEventListener('mouseup', this.handleEndSliding)\n    this.lookPageWrapper.addEventListener('mouseleave', this.handleEndSliding)\n    this.lookPageWrapper.addEventListener('mousemove', this.handleSliding)\n    this.lookPageWrapper.addEventListener('touchmove', this.handleSliding, { passive: false })\n    this.lookPageWrapper.addEventListener('touchend', this.handleEndSliding)\n    this.setTopProperty()\n  }\n\n  handleSliding = e => {\n    const scrollThresold = 10\n    if (e.touches) {\n      this.deltaX = this.initialX - e.touches[0].clientX\n      this.deltaY = this.initialY - e.touches[0].clientY\n    } else {\n      this.deltaX = this.initialX - e.clientX\n    }\n    if (\n      Math.abs(this.deltaY) < scrollThresold + 50 &&\n      Math.abs(this.deltaX) > Math.abs(this.deltaY)\n    ) {\n      this.transformX = ((this.deltaX * -1) / this.frameWidth) * 100\n      if (\n        (this.allowSwipeRight && this.transformX > 0) ||\n        (this.allowSwipeLeft && this.transformX < 0)\n      ) {\n        document.body.classList.add('stop-scrolling')\n        TweenLite.set(this.lookProductMainImgContainer, { xPercent: this.transformX })\n        TweenLite.set(this.lookDetailsWrapper, { xPercent: this.transformX })\n      } else {\n        this.transformX = 0\n      }\n      if (isiOS()) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    }\n  }\n\n  handleEndSliding = e => {\n    if (this.transformX <= -15) {\n      this.allowSwipeLeft = false\n      // this.loadNextLook(e)\n      isLTR() ? this.loadNextLook(e) : this.loadPrevLook(e)\n\n    } else if (this.transformX >= 15) {\n      this.allowSwipeRight = false\n      // this.loadPrevLook(e)\n      isLTR() ? this.loadPrevLook(e) : this.loadNextLook(e)\n\n    } else if (\n      (this.transformX > 0 && this.transformX < 25) ||\n      (this.transformX < 0 && this.transformX > -25)\n    ) {\n      TweenLite.to([this.lookProductMainImgContainer, this.lookDetailsWrapper], 0.5, {\n        xPercent: 0,\n        ease: Quad.easeInOut,\n        onComplete: () => document.body.classList.remove('stop-scrolling'),\n      })\n    } else {\n      document.body.classList.remove('stop-scrolling')\n    }\n    const btnPlay = select('button.video-container')\n    btnPlay ? btnPlay.addEventListener('click', this.onButtonVideoPlayPause, true) : ''\n    this.lookPageWrapper.removeEventListener('mouseup', this.handleEndSliding)\n    this.lookPageWrapper.removeEventListener('mouseleave', this.handleEndSliding)\n    this.lookPageWrapper.removeEventListener('mousemove', this.handleSliding)\n    this.lookPageWrapper.removeEventListener('touchmove', this.handleSliding)\n    this.lookPageWrapper.removeEventListener('touchend', this.handleEndSliding)\n  }\n\n  setTopProperty = () => {\n    const currentScrollTop = this.currentLookSlide.getBoundingClientRect().y\n    this.prevLookSlide\n      ? (this.prevLookSlide.style.top =\n          `${Math.abs(currentScrollTop - HEADER_SIZES.small_collapsed)}px`)\n      : ''\n    this.nextLookSlide\n      ? (this.nextLookSlide.style.top =\n          `${Math.abs(currentScrollTop - HEADER_SIZES.small_collapsed)}px`)\n      : ''\n  }\n\n  loadNextLook(event) {\n    event.target.tagName == 'A' ? event.preventDefault() : ''\n    TweenLite.to([this.lookProductMainImgContainer, this.lookDetailsWrapper], 0.5, {\n      xPercent: isLTR() ? -100 : 100,\n      ease: Quad.easeInOut,\n      onComplete: () => {\n        let newLookData = null\n        const newLookImages = {}\n        let imageData = null\n        let lookVideo = null\n        document.body.classList.remove('stop-scrolling')\n        pageTitle(config.popinLookPDP.lookCardNumber.replace('{0}', parseInt(this.nextLookCode)))\n        if (this.nextElementToLoad !== null && this.nextElementToLoad !== '') {\n          xhr\n            .get(config.popinLookPDP.lookSwipeData.replace('{0}', this.nextElementToLoad))\n            .then(data => {\n              newLookData = data\n              if (newLookData.lookImages !== null && newLookData.lookImages !== undefined) {\n                newLookData.lookImages.map((elem, index) => {\n                  elem.assetType = `${elem.assetType}_${index}`\n                })\n              }\n              // set image data for show and boutique looks\n              if (newLookData.lookImages === undefined && newLookData.allImages !== undefined) {\n                imageData = newLookData.allImages\n              } else if (\n                newLookData.lookImages !== undefined &&\n                newLookData.allImages !== undefined\n              ) {\n                imageData = newLookData.allImages.concat(newLookData.lookImages)\n              } else if (newLookData.lookImages !== undefined) {\n                imageData = newLookData.lookImages\n              }\n\n              if (newLookData.lookVideos !== undefined && newLookData.lookVideos.length !== 0) {\n                lookVideo = this.configureVideo(newLookData.lookVideos, newLookData.passageNumber)\n              } else if (newLookData.videos !== undefined && newLookData.videos.length !== 0) {\n                lookVideo = this.configureVideo(newLookData.videos, newLookData.passageNumber)\n              }\n\n              if (imageData !== '' && imageData !== null) {\n                const sortedImageData = imageData.sort((a, b) => a.galleryIndex - b.galleryIndex)\n                sortedImageData.forEach(elem => {\n                  if (elem.assetType !== 'VIDEO') newLookImages[elem.assetType] = elem.path\n                })\n              }\n            })\n            .then(() => {\n              if (!this.allowSwipeRight) {\n                this.allowSwipeRight = true\n                this.previousCard.style.display = 'block'\n                this.previousLookLink.style.display = 'block'\n              }\n              this.updateNextLookData(newLookData, newLookImages, lookVideo)\n            })\n            .then(() => {\n              this.mobileLookTemplate(\n                this.nextLookImages,\n                this.nextLookCode,\n                this.nextLookVideo,\n                'next'\n              )\n              this.updateLookCard(this.nextLookCode, this.nextLookElement, this.nextCard)\n              this.setupLookVideo('next')\n              this.setZoomImages(this.currentLookCode)\n              window.scrollTo(0, 0)\n              setTimeout(() => {\n                this.previousCard.style.removeProperty('transform')\n                this.nextCard.style.removeProperty('transform')\n                this.navigationWrapper.style.display = 'block'\n                this.allowSwipeLeft = true\n              }, 250)\n            })\n        } else {\n          this.updateNextLookData(newLookData, newLookImages, lookVideo)\n          this.removeNextSlideData()\n          this.removeNextCard()\n          this.setZoomImages(this.currentLookCode)\n          this.setupLookVideo('next')\n          window.scrollTo(0, 0)\n          this.previousCard.style.removeProperty('transform')\n          this.nextCard.style.removeProperty('transform')\n          this.navigationWrapper.style.display = 'block'\n        }\n      }\n    })\n  }\n\n  removeNextCard() {\n    this.nextCard.style.display = 'none'\n    this.nextLookLink.style.display = 'none'\n    this.allowSwipeLeft = false\n  }\n\n  removeNextSlideData() {\n    while (this.nextLookSlide.firstChild) {\n      this.nextLookSlide.removeChild(this.nextLookSlide.lastChild)\n    }\n  }\n\n  updateNextLookData = async (lookData, lookImages, lookVideo) => {\n    await new Promise(resolve => {\n      TweenLite.to([this.lookProductMainImgContainer, this.lookDetailsWrapper], 0, {\n        xPercent: 0,\n        ease: Quad.easeInOut,\n        onComplete: () => {\n          const currentUrl = this.nextLookLink.getAttribute('href')\n          const currentLocale = config.currentLocale.replace(/\\//g, '')\n          this.nextLookLink\n            ? this.nextLookLink.setAttribute(\n                'href',\n                lookData ? `/${currentLocale}${lookData.url}` : ''\n              )\n            : ''\n          this.previousLookLink.setAttribute('href', window.location.pathname)\n          this.transformX = 0\n          this.nextElementToLoad = lookData && lookData.nextElement ? lookData.nextElement : ''\n          this.previousElementToLoad = this.previousLookElement\n          this.previousLookImages = this.currentLookImages\n          this.currentLookImages = this.nextLookImages\n          this.nextLookImages = lookImages ? this.formatImages(JSON.stringify(lookImages)) : ''\n          this.previousLookVideo = this.currentLookVideo\n          this.currentLookVideo = this.nextLookVideo\n          this.nextLookVideo = lookVideo\n          this.previousLookCode = this.currentLookCode\n          this.currentLookCode = this.nextLookCode\n          this.nextLookCode = lookData ? lookData.passageNumber : ''\n          this.previousLookElement = this.currentLookElement\n          this.currentLookElement = this.nextLookElement\n          this.nextLookElement = lookData ? lookData.code : ''\n          this.previousLookId = this.currentLookId\n          this.currentLookId = this.nextLookId\n          this.nextLookId = lookData ? lookData.lookId : ''\n          this.toggleSlidesAfterSwipe('next')\n          this.correctLookData()\n          this.updateTopProperty('next')\n          this.updateAnalyticsData()\n          window.history.pushState('', '', currentUrl)\n          this.updateCardAttribute()\n          // focusElement(this.currentCard)\n          resolve()\n        }\n      })\n    })\n  }\n\n  loadPrevLook(event) {\n    event.target.tagName == 'A' ? event.preventDefault() : ''\n    TweenLite.to([this.lookProductMainImgContainer, this.lookDetailsWrapper], 0.5, {\n      xPercent: isLTR() ? 100 : -100,\n      ease: Quad.easeInOut,\n      onComplete: () => {\n        const newLookImages = {}\n        let newLookData = null\n        let imageData = null\n        let lookVideo = null\n        document.body.classList.remove('stop-scrolling')\n        pageTitle(\n          config.popinLookPDP.lookCardNumber.replace('{0}', parseInt(this.previousLookCode))\n        )\n        if (this.previousElementToLoad !== null && this.previousElementToLoad !== '') {\n          xhr\n            .get(config.popinLookPDP.lookSwipeData.replace('{0}', this.previousElementToLoad))\n            .then(data => {\n              newLookData = data\n              if (newLookData.lookImages !== null && newLookData.lookImages !== undefined) {\n                newLookData.lookImages.map((elem, index) => {\n                  elem.assetType = `${elem.assetType}_${index}`\n                })\n              }\n              if (newLookData.lookImages === undefined && newLookData.allImages !== undefined) {\n                imageData = newLookData.allImages\n              } else if (\n                newLookData.lookImages !== undefined &&\n                newLookData.allImages !== undefined\n              ) {\n                imageData = newLookData.allImages.concat(newLookData.lookImages)\n              } else if (newLookData.lookImages !== undefined) {\n                imageData = newLookData.lookImages\n              }\n\n              if (newLookData.lookVideos !== undefined && newLookData.lookVideos.length !== 0) {\n                lookVideo = this.configureVideo(newLookData.lookVideos, newLookData.passageNumber)\n              } else if (newLookData.videos !== undefined && newLookData.videos.length !== 0) {\n                lookVideo = this.configureVideo(newLookData.videos, newLookData.passageNumber)\n              }\n              if (imageData !== '' && imageData !== null) {\n                const sortedImageData = imageData.sort((a, b) => a.galleryIndex - b.galleryIndex)\n                sortedImageData.forEach(elem => {\n                  if (elem.assetType !== 'VIDEO') newLookImages[elem.assetType] = elem.path\n                })\n              }\n            })\n            .then(() => {\n              if (!this.allowSwipeLeft) {\n                this.allowSwipeLeft = true\n                this.nextCard.style.display = 'block'\n                this.nextLookLink.style.display = 'block'\n              }\n              this.updatePreviousLookData(newLookData, newLookImages, lookVideo)\n            })\n            .then(() => {\n              this.mobileLookTemplate(\n                this.previousLookImages,\n                this.previousLookCode,\n                this.previousLookVideo,\n                'prev'\n              )\n              this.updateLookCard(\n                this.previousLookCode,\n                this.previousLookElement,\n                this.previousCard\n              )\n              this.setupLookVideo('prev')\n              this.setZoomImages(this.currentLookCode)\n              setTimeout(() => {\n                this.previousCard.style.removeProperty('transform')\n                this.nextCard.style.removeProperty('transform')\n                this.navigationWrapper.style.display = 'block'\n                this.allowSwipeRight = true\n              }, 250)\n            })\n        } else {\n          this.updatePreviousLookData(newLookData, newLookImages, lookVideo)\n          this.removePreviousSlideData()\n          this.removePreviousCard()\n          this.setZoomImages(this.currentLookCode)\n          this.setupLookVideo('prev')\n          this.previousCard.style.removeProperty('transform')\n          this.nextCard.style.removeProperty('transform')\n          this.navigationWrapper.style.display = 'block'\n        }\n      }\n    })\n  }\n\n  removePreviousCard() {\n    this.previousCard.style.display = 'none'\n    this.allowSwipeRight = false\n    this.previousLookLink.style.display = 'none'\n  }\n\n  removePreviousSlideData() {\n    while (this.prevLookSlide.firstChild) {\n      this.prevLookSlide.removeChild(this.prevLookSlide.lastChild)\n    }\n  }\n\n  updatePreviousLookData = async (lookData, lookImages, lookVideo) => {\n    await new Promise(resolve => {\n      TweenLite.to([this.lookProductMainImgContainer, this.lookDetailsWrapper], 0, {\n        xPercent: 0,\n        ease: Quad.easeInOut,\n        onComplete: () => {\n          const currentUrl = this.previousLookLink.getAttribute('href')\n          const currentLocale = config.currentLocale.replace(/\\//g, '')\n          this.nextLookLink.setAttribute('href', window.location.pathname)\n          this.previousLookLink\n            ? this.previousLookLink.setAttribute(\n                'href',\n                lookData ? `/${currentLocale}${lookData.url}` : ''\n              )\n            : ''\n          this.transformX = 0\n          this.nextElementToLoad = this.nextLookElement\n          this.previousElementToLoad =\n            lookData && lookData.previousElement ? lookData.previousElement : ''\n          this.nextLookImages = this.currentLookImages\n          this.currentLookImages = this.previousLookImages\n          this.previousLookImages = lookImages ? this.formatImages(JSON.stringify(lookImages)) : ''\n          this.nextLookVideo = this.currentLookVideo\n          this.currentLookVideo = this.previousLookVideo\n          this.previousLookVideo = lookVideo\n          this.nextLookCode = this.currentLookCode\n          this.currentLookCode = this.previousLookCode\n          this.previousLookCode = lookData ? lookData.passageNumber : ''\n          this.nextLookElement = this.currentLookElement\n          this.currentLookElement = this.previousLookElement\n          this.previousLookElement = lookData ? lookData.code : ''\n          this.nextLookId = this.currentLookId\n          this.currentLookId = this.previousLookId\n          this.previousLookId = lookData ? lookData.lookId : ''\n          this.toggleSlidesAfterSwipe('prev')\n          this.correctLookData()\n          this.updateTopProperty('prev')\n          this.updateAnalyticsData()\n          window.history.pushState('', '', currentUrl)\n          this.updateCardAttribute()\n          focusElement(this.currentCard)\n          resolve()\n        }\n      })\n    })\n  }\n\n  toggleSlidesAfterSwipe(slidePos) {\n    const newSwipedSlide = select(`.look-slideshow__${slidePos}`)\n    this.navigationWrapper.style.display = 'none'\n    if (newSwipedSlide !== undefined && newSwipedSlide !== null) {\n      if (slidePos == 'next') {\n        this.nextLookSlide.style.left = 0\n        this.prevLookSlide.classList.remove('look-slideshow__prev')\n        this.currentLookSlide.classList.remove('look-slideshow__current')\n        this.currentLookSlide.classList.add('look-slideshow__prev')\n        this.nextLookSlide.classList.remove('look-slideshow__next')\n        this.nextLookSlide.classList.add('look-slideshow__current')\n        this.prevLookSlide.classList.add('look-slideshow__next')\n      } else {\n        this.prevLookSlide.style.right = 0\n        this.nextLookSlide.classList.remove('look-slideshow__next')\n        this.currentLookSlide.classList.remove('look-slideshow__current')\n        this.currentLookSlide.classList.add('look-slideshow__next')\n        this.prevLookSlide.classList.remove('look-slideshow__prev')\n        this.prevLookSlide.classList.add('look-slideshow__current')\n        this.nextLookSlide.classList.add('look-slideshow__prev')\n      }\n      this.orderLookSlide()\n      slidePos == 'next'\n        ? newSwipedSlide.style.removeProperty('left')\n        : newSwipedSlide.style.removeProperty('right')\n      this.currentLookSlide.removeAttribute('aria-hidden')\n      selectAll('button', this.currentLookSlide).map(item => item.removeAttribute('tabindex'))\n      this.prevLookSlide.setAttribute('aria-hidden', true)\n      this.nextLookSlide.setAttribute('aria-hidden', true)\n      this.toggleProductCardsAfterSwipe(slidePos)\n      selectAll('button', select('.look-slideshow__prev')).map(item => item.setAttribute('tabindex', \"-1\"))\n      selectAll('button', select('.look-slideshow__next')).map(item => item.setAttribute('tabindex', \"-1\"))\n    }\n  }\n\n  orderLookSlide() {\n    this.currentLookSlide = select('.look-slideshow__current')\n    this.prevLookSlide = select('.look-slideshow__prev')\n    this.nextLookSlide = select('.look-slideshow__next')\n    this.lookSlideShowWrapper.appendChild(this.prevLookSlide)\n    this.lookSlideShowWrapper.appendChild(this.nextLookSlide)\n  }\n\n  updateTopProperty = slidePos => {\n    window.scrollTo(0, 0)\n    this.currentLookSlide.style.removeProperty('top')\n    slidePos == 'next'\n      ? (this.nextLookSlide.style.top = '0px')\n      : (this.prevLookSlide.style.top = '0px')\n  }\n\n  toggleProductCardsAfterSwipe(slidePos) {\n    const newProductCard = select(`.look-page__card-wrapper.${slidePos}-card`)\n    const allProductCard = getCollection('.look-page__card-wrapper')\n    if (newProductCard !== null && newProductCard !== undefined) {\n      this.changeProductCardHeading(slidePos)\n      if (slidePos == 'next') {\n        newProductCard.style.left = 0\n        this.previousCard.classList.remove('prev-card')\n        this.currentCard.classList.remove('current-card')\n        this.currentCard.classList.add('prev-card')\n        this.nextCard.classList.remove('next-card')\n        this.nextCard.classList.add('current-card')\n        this.previousCard.classList.add('next-card')\n      } else {\n        newProductCard.style.right = 0\n        this.nextCard.classList.remove('next-card')\n        this.currentCard.classList.remove('current-card')\n        this.currentCard.classList.add('next-card')\n        this.previousCard.classList.remove('prev-card')\n        this.previousCard.classList.add('current-card')\n        this.nextCard.classList.add('prev-card')\n      }\n      this.orderProductCards(slidePos)\n      slidePos == 'next'\n        ? newProductCard.style.removeProperty('left')\n        : newProductCard.style.removeProperty('right')\n    }\n  }\n\n  changeProductCardHeading(slidePos) {\n    const newProductCard = select(`.look-page__card-wrapper.${slidePos}-card`)\n    const currentProductCard = select('.look-page__card-wrapper.current-card')\n    const cardArray = [newProductCard, currentProductCard]\n    cardArray.forEach((card, index) => {\n      const productCardContainer = select('.look-description__card-container', card)\n      const productCardData = select('.look-description__content', card)\n      let headingElem = null\n      if (index === 0) {\n        headingElem = document.createElement('H1')\n      } else {\n        headingElem = document.createElement('DIV')\n        headingElem.setAttribute('heading', 'role')\n        headingElem.setAttribute('aria-level', 1)\n      }\n      headingElem.classList.add('look-description__content')\n      this.lookPageWithProducts ? headingElem.classList.add('link-margin-bottom') : ''\n      headingElem.setAttribute('id', productCardData.getAttribute('id'))\n      headingElem.innerHTML = productCardData.innerHTML\n      productCardContainer.removeChild(productCardData)\n      productCardContainer.insertBefore(\n        headingElem,\n        select('.look-description__right', productCardContainer)\n      )\n    })\n  }\n\n  orderProductCards(slidePos) {\n    this.currentCard = select('.look-page__card-wrapper.current-card')\n    this.previousCard = select('.look-page__card-wrapper.prev-card')\n    this.nextCard = select('.look-page__card-wrapper.next-card')\n    this.navigationWrapper = select('.look-page__look-navigation')\n    this.lookDetailsWrapper.appendChild(this.previousCard)\n    this.lookDetailsWrapper.appendChild(this.nextCard)\n    this.lookDetailsWrapper.appendChild(this.navigationWrapper)\n    this.calcPdpCardPosition()\n  }\n\n  updateCardAttribute() {\n    const lookCards = getCollection('.look-page__card-wrapper')\n    lookCards.length > 0\n      ? lookCards.forEach(card => {\n        if (card.classList.contains('current-card')) {\n          card.removeAttribute('aria-hidden')\n          card.removeAttribute('tabindex')\n          card.querySelectorAll('button').length\n              ? card.querySelectorAll('button').forEach(btn => {\n                btn.removeAttribute('tabindex')\n              })\n              : ''\n          card.querySelectorAll('a').length > 0\n              ? card.querySelectorAll('a').forEach(anchor => {\n                anchor.removeAttribute('tabindex')\n              })\n              : ''\n        } else {\n          card.setAttribute('aria-hidden', true)\n          card.setAttribute('tabindex', -1)\n          card.querySelectorAll('button').length > 0\n              ? card.querySelectorAll('button').forEach(btn => {\n                btn.setAttribute('tabindex', -1)\n              })\n              : ''\n          card.querySelectorAll('a').length > 0\n              ? card.querySelectorAll('a').forEach(anchor => {\n                anchor.setAttribute('tabindex', -1)\n              })\n              : ''\n        }\n      })\n      : ''\n  }\n\n  setupLookVideo(slidePos) {\n    if (slidePos == 'next') {\n      if (this.nextLookVideo !== null && this.nextLookVideo !== '') {\n        init(this.nextLookSlide)\n      }\n    } else if (this.previousLookVideo !== null && this.previousLookVideo !== '') {\n      init(this.prevLookSlide)\n    }\n    this.lookVideoContainer = select('.look-page__video-wrapper', this.currentLookSlide)\n    if (this.lookVideoContainer !== null && this.lookVideoContainer !== '') {\n      this.lookVideoContainer.addEventListener('keypress', this.onButtonVideoPlayPause, true)\n      this.lookVideoContainer.addEventListener('click', this.onButtonVideoPlayPause, true)\n    }\n  }\n\n  correctLookData() {\n    const currentLookMedia = getCollection('li.look-page__img-wrapper', this.currentLookSlide)\n    if (currentLookMedia !== null && currentLookMedia.length !== 0) {\n      currentLookMedia.forEach(item => {\n        item.style.display == 'none' ? item.style.removeProperty('display') : ''\n      })\n      const maxImageToDisplay = currentLookMedia.length\n      const nextLookMedia = getCollection('li.look-page__img-wrapper', this.nextLookSlide)\n      const previousLookMedia = getCollection('li.look-page__img-wrapper', this.prevLookSlide)\n      if (nextLookMedia.length > maxImageToDisplay) {\n        for (let med = maxImageToDisplay; med < nextLookMedia.length; med++) {\n          nextLookMedia[med].style.display = 'none'\n        }\n      }\n      if (previousLookMedia.length > maxImageToDisplay) {\n        for (let med = maxImageToDisplay; med < previousLookMedia.length; med++) {\n          previousLookMedia[med].style.display = 'none'\n        }\n      }\n    }\n  }\n\n  updateAnalyticsData() {\n    const dataLayerObj = Object.assign(cloneDeep(dataLayerGA.pageLoad))\n    dataLayerObj.lookId = this.currentLookId\n    dataLayerObj.page_name = document.title\n    if (isMobile()) {\n      dataLayerObj.event = 'virtualpageview'\n    }\n    window.document.DLKit.push('on-tracking', dataLayerObj)\n  }\n\n  mobileLookTemplate(lookImages, lookCode, lookVideo, slidePos) {\n    const html = document.querySelector(`.look-slideshow__${slidePos}`)\n    html.dataset.looknumber = parseInt(lookCode)\n    let tempList = ''\n    let imageAlt\n    let videoIndex = 0\n    const videoAriaLabel = config.popinLookPDP.lookCategory\n      .replace('{0}', 1)\n      .replace('{1}', parseInt(lookCode))\n    const zoomableImage = true\n    if (lookImages && lookImages.length !== 0) {\n      for (let index = 0; index < lookImages.length; index++) {\n        imageAlt = config.popinLookPDP.lookImageAltText\n          .replace('{0}', index + 1)\n          .replace('{1}', parseInt(lookCode))\n        // zoomableImage = (lookImages[index].assetType == 'PACKSHOT_DEFAULT' || lookImages[index].assetType == 'PACKSHOT_ALTERNATE' || lookImages[index].assetType == 'PACKSHOT_OTHER') ? true : false\n        if (zoomableImage) {\n          const defaultSrcFallback = `w_${window.config.cloudinary.defaultSrcFallBack}`\n          const zoomSrcFallback = `w_${window.config.cloudinary.srcFallback}`\n          const zoomImageSrc = lookImages[index].replace(defaultSrcFallback, zoomSrcFallback)\n          const zoomImageAlt = config.popinLookPDP.lookZoomImageAlt.replace('{0}', imageAlt)\n          tempList =\n            `${tempList\n            }<li class=\"look-page__img-wrapper look-page__img-position\" id=\"look-details-${\n            videoIndex\n            }\">\n\t\t\t\t<button class=\"look-page__zoom-btn js-look-image-zoom\" type=\"button\" data-zoomable=\"true\" tabindex=\"-1\" data-test=\"imgProduct_PDP\">\n\t\t\t\t\t<img class=\"lazyautosizes lazyloaded\" src=\"${\n            lookImages[index]\n            }\" alt=\"${\n            zoomImageAlt\n            }\">\n\t\t\t\t\t<img class=\"img-zoom-js is-hidden\" async-src=\"${\n            zoomImageSrc\n            }\"\n\t\t\t\t\t\tsrc=\"\" alt=\"${\n            imageAlt\n            }\"\n\t\t        \t\t/>\n\t\t        \t</button>\n\t\t        </li>`\n        } else {\n          tempList =\n            `${tempList\n            }<li class=\"look-page__img-wrapper look-page__img-position\" id=\"look-details-${\n            videoIndex\n            }\">\n\t\t\t\t\t<img class=\"lazyautosizes lazyloaded\" src=\"${\n            lookImages[index]\n            }\" alt=\"${\n            imageAlt\n            }\">\n\t\t        </li>`\n        }\n        if (index == 0 && lookVideo !== null) {\n          videoIndex = index + 1\n          tempList =\n            `${tempList\n            }<li class=\"look-page__img-wrapper look-page__img-position look-page__video-wrapper\" id=\"look-details-${\n            videoIndex\n            }\">${\n            lookVideo\n            }<button type=\"button\" class=\"video-container\" data-label-pause=\"Pause Video\" tabindex=\"-1\" data-label-play=\"Play Video\">\n\t\t       \t\t \t<svg data-test=\"\" class=\"icon is-large pause-icon\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n\t\t       \t\t \t\t<use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg?#video-pause\"></use>\n\t\t       \t\t \t</svg>\n\t\t       \t\t \t<svg data-test=\"\" class=\"icon is-large play-icon\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n\t\t       \t\t \t\t<use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg?#video-play\"></use>\n\t\t       \t\t \t</svg>\n\t\t\t\t\t<span class=\"is-sr-only js-video-status\">${\n            videoAriaLabel\n            }</span>\n\t\t       \t\t \t</button>\n\t\t       \t\t </li>`\n        }\n        videoIndex += 1\n      }\n    } else if (lookVideo !== null) {\n      tempList =\n        `${tempList\n        }<li class=\"look-page__img-wrapper look-page__img-position look-page__video-wrapper\" id=\"look-details-${\n        videoIndex\n        }\">${\n        lookVideo\n        }<button type=\"button\" class=\"video-container\" data-label-pause=\"Pause Video\" tabindex=\"-1\" data-label-play=\"Play Video\">\n     \t\t \t<svg data-test=\"\" class=\"icon is-large pause-icon\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n              \t\t<use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg?#video-pause\"></use>\n            \t</svg>\n                <svg data-test=\"\" class=\"icon is-large play-icon\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n              \t\t<use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg?#video-play\"></use>\n            \t</svg>\n\t\t\t<span class=\"is-sr-only js-video-status\">${\n        videoAriaLabel\n        }</span>\n     \t\t \t</button>\n     \t\t </li>`\n    }\n    html.innerHTML = tempList\n  }\n\n  updateLookCard(newLookCode, newLookElement, cardToUpdate) {\n    const newHeadingId = `look-details__${newLookCode}`\n    const newHeadingText = config.popinLookPDP.lookCardNumber.replace('{0}', parseInt(newLookCode))\n    const wishlistBtn = select('.look-description__wishlist button', cardToUpdate)\n    const viewDetailsCta = select('.look-description__viewdetails button', cardToUpdate)\n    select('.look-description__content', cardToUpdate).setAttribute('id', newHeadingId)\n    select('.look-description__number', cardToUpdate).innerText = newHeadingText\n    if (wishlistBtn !== null) {\n      wishlistBtn.dataset.wishlist = newLookElement\n      wishlistBtn.dataset.trackWishlist = {\n        eventAction: newHeadingText,\n        eventLabel: newLookElement\n      }\n      CacheIndex.rePublishPageLoadData(PAGELOAD_WISHLIST)\n      if (this.wishListData !== null && this.wishListData.indexOf(newLookElement) !== -1) {\n        wishlistBtn.classList.add('is-active')\n      } else {\n        wishlistBtn.classList.remove('is-active')\n      }\n      wishlistBtn.setAttribute('aria-describedby', newHeadingId)\n    }\n    if (viewDetailsCta) {\n      const codeData = JSON.parse(viewDetailsCta.dataset.code)\n      const newLookCategory = codeData.lookCategory\n      viewDetailsCta.setAttribute('aria-describedby', newHeadingId)\n      viewDetailsCta.dataset.code = JSON.stringify({\n        lookCode: newLookElement,\n        lookCategory: newLookCategory\n      })\n    }\n  }\n\n  focusMediaOnClick = e => {\n    const elementToFocus = e.currentTarget.dataset.imageid\n    const focusedElementRef = select(`#${elementToFocus}`)\n    if ((e.type === 'click' || e.type === 'keyup') && e.sourceCapabilities) {\n      const elemScrollTop = focusedElementRef.offsetTop + LOOK_STICKY_SIZES.large\n      if (e.which === 1 && e.type == 'click') {\n        elementToFocus ? window.scrollTo({ left: 0, top: elemScrollTop, behavior: 'smooth' }) : ''\n      } else if (e.which === 13) {\n        elementToFocus ? window.scrollTo({ left: 0, top: elemScrollTop, behavior: 'smooth' }) : ''\n        if (focusedElementRef.classList.contains('look-page__video-wrapper')) {\n          focusElement(select('.video-container', select(`#${elementToFocus}`)))\n        } else {\n          setTimeout(() => {\n            focusElement(select(`#${elementToFocus} img`))\n          }, 1000)\n        }\n      } else if (e.which === 32) {\n        const isImageElement = !focusedElementRef.classList.contains('look-page__video-wrapper')\n        if (isImageElement) {\n          window.scrollTo({ left: 0, top: focusedElementRef.offsetTop, behavior: 'smooth' })\n          focusElement(select(`#${elementToFocus} img`))\n        } else {\n          focusElement(select('.video-container', focusedElementRef))\n        }\n      }\n    }\n  }\n\n  toggleMobileLookCards = () => {\n    const lookImages = getCollection('li', select('.look-page__images-container'))\n    if (lookImages.length > 0) {\n      for (let index = 0; index < lookImages.length; index++) {\n        if (lookImages[index].querySelector('img')) {\n          lookImages[index].querySelector('img').setAttribute('tabindex', -1)\n        }\n      }\n    }\n  }\n\n  onBreakpointChange = () => {\n    this.initSyncControlsDots({\n      updateOffset: true\n    })\n    this.initSyncColsTitle({\n      updateOffset: true\n    })\n    this.initScrollSpyMobile()\n    this.resetImageStyle()\n    this.showHideButtonZoom()\n    this.setLookimgSize()\n  }\n\n  // US: ONE-17555\n  onButtonVideoPlayPause = e => {\n    if (e.type === 'click' && e.sourceCapabilities === null) {\n      // click unknown: no mouse click and no touch\n    } else if (e.type === 'keyup' || e.type === 'click') {\n      e.stopPropagation()\n      const videoElement = this.lookVideoContainer.querySelector('video')\n      if (videoElement) {\n        if (\n          (e.type === 'keyup' && e.which === 32) ||\n          (e.type === 'keyup' && e.which === 13) ||\n          e.type === 'click'\n        ) {\n          if (videoElement.paused) {\n            videoElement.play()\n          } else {\n            videoElement.pause()\n          }\n        }\n        this.togglePlayPauseIcon()\n      }\n    }\n  }\n\n  handlePlayPauseButtons = () => {\n    const videoElement = this.lookVideoContainer.querySelector('video')\n    if(videoElement) {\n      videoElement.addEventListener('play',() => this.togglePlayPauseIcon())\n      videoElement.addEventListener('pause',() => this.togglePlayPauseIcon())\n    }\n  }\n\n  togglePlayPauseIcon() {\n    if (this.lookVideoContainer) {\n      const videoButtonRef = select('.look-page__video-wrapper .video-container')\n      if (videoButtonRef) {\n        const playLabel = videoButtonRef.getAttribute('data-label-play')\n        const pauseLabel = videoButtonRef.getAttribute('data-label-pause')\n        const spanElem = videoButtonRef.querySelector('.js-video-status')\n        const playButtonIcon = videoButtonRef.querySelector('.play-icon')\n        const pauseButtonIcon = videoButtonRef.querySelector('.pause-icon')\n        const videoElement = this.lookVideoContainer\n          ? this.lookVideoContainer.querySelector('video')\n          : ''\n        if (videoElement && spanElem) {\n          if (videoElement.paused) {\n            spanElem.innerHTML = spanElem.innerHTML.replace(pauseLabel, playLabel)\n            playButtonIcon.style.display = 'block'\n            pauseButtonIcon.style.display = 'none'\n          } else {\n            spanElem.innerHTML = spanElem.innerHTML.replace(playLabel, pauseLabel)\n            playButtonIcon.style.display = 'none'\n            pauseButtonIcon.style.display = 'block'\n          }\n        }\n      }\n    }\n  }\n\n  handleControlsKeyUp = e => {\n    if (e.which === 13) {\n      const element = e.target\n      const elementToGo = select(element.hash, this.container)\n      if (this.lookPageWithProducts) {\n        const elementToFocus = select('.look-page__details-wrapper-inner', elementToGo)\n          ? select('.look-page__details-wrapper-inner', elementToGo)\n          : elementToGo\n        Array.from(selectAll('.look-page__details-wrapper-inner', this.container)).forEach(el =>\n          el.removeAttribute('tabindex')\n        )\n        setTimeout(() => {\n          elementToFocus.setAttribute('tabindex', -1)\n          focusElement(elementToFocus)\n        }, 250)\n      } else if (this.lookPageWithImages) {\n        const elementToFocus = elementToGo\n        setTimeout(() => {\n          focusElement(elementToFocus)\n        }, 250)\n      }\n    }\n  }\n\n  initSyncControlsDots = (options = {}) => {\n    if (!this.lookPageWithImages && !this.lookPageWithProducts) {\n      return\n    }\n\n    // in mobile destroy scrollSpyDots || in tablet if we are in products destroy scrollSpyDots\n    if ((!isTabletScreen() && !isWideScreen()) || (isTabletScreen() && this.lookPageWithProducts)) {\n      if (this.syncColsDots) {\n        this.syncColsDots.destroy()\n      }\n      if (this.scrollSpyDots) {\n        this.scrollSpyDots.destroy()\n      }\n      return\n    }\n\n    if (!this.syncColsDots) {\n      this.syncColsDots = new SyncCols(\n        this.pageControlsWrapper,\n        this.container,\n        this.calculateHeight(),\n      )\n    }\n\n    if (!this.scrollSpyDots) {\n      let scrollSpyElement\n      let customElements = []\n      let onUpdate = () => {}\n      if (!this.enableNewPdp) {\n        if (this.lookPageWithImages) {\n          scrollSpyElement = select('.look-page__alternative-imgs-container')\n          customElements = [select('.look-page__main-img')]\n        } else if (this.lookPageWithProducts) {\n          scrollSpyElement = select('.look-page__details-wrapper')\n          customElements = select('.look-page__alternative-imgs-container')\n            ? [select('.look-page__alternative-imgs-container')]\n            : []\n          onUpdate = this.animateImage\n        }\n      } else {\n        scrollSpyElement = select('.look-page__images-container')\n      }\n\n      this.scrollSpyDots = new ScrollSpy(scrollSpyElement, {\n        stickyOffset: this.calculateHeight(),\n        changeThreshold: '.5',\n        onChange: this.updateScrollSpyDots,\n        onUpdate,\n        customElements\n      })\n    }\n\n    if (!this.syncColsDots.isInited()) {\n      this.syncColsDots.init()\n    }\n\n    if (!this.scrollSpyDots.isInited()) {\n      this.scrollSpyDots.init()\n    }\n\n    if (options.updateOffset) {\n      this.syncColsDots.updateStickyOffset(this.calculateHeight())\n    }\n  }\n\n  initSyncColsTitle = (options = {}) => {\n    if (!this.lookPageWithImages && !this.enableNewPdp) {\n      return\n    }\n    // in mobile destroy ScrollSpyTitle (page with images)\n    if (!isWideScreen()) {\n      if (this.syncColsTitle) {\n        this.syncColsTitle.destroy()\n      }\n      return\n    }\n\n    if (!this.syncColsTitle) {\n      if (this.lookPageWithImages && !this.enableNewPdp) {\n        this.syncColsTitle = new SyncCols(\n          this.pageTitleWrapper,\n          this.container,\n          this.calculateHeight()\n        )\n      } else if (this.enableNewPdp) {\n        this.syncColsTitle = new SyncCols(\n          select('.look-page__details-wrapper-fixed'),\n          this.container,\n          this.calculateHeight()\n        )\n      }\n    }\n    if (!this.syncColsTitle.isInited()) {\n      this.syncColsTitle.init()\n    }\n\n    if (options.updateOffset) {\n      this.syncColsTitle.updateStickyOffset(this.calculateHeight())\n    }\n  }\n\n  initScrollSpyMobile = (options = {}) => {\n    const scrollSpyMobileEl = select('.look-page__details-wrapper')\n    if (!this.lookPageWithProducts || this.enableNewPdp) {\n      return\n    }\n    // in desktop destroy scrollSpyMobile (page with products)\n    if (isWideScreen()) {\n      if (this.scrollSpyMobile) {\n        this.scrollSpyMobile.destroy()\n      }\n      return\n    }\n\n    if (!this.scrollSpyMobile) {\n      this.scrollSpyMobile = new ScrollSpy(scrollSpyMobileEl, {\n        stickyOffset: this.calculateHeight(),\n        changeThreshold: '.5',\n        onUpdate: this.animateImageOnMobile\n      })\n    }\n    if (!this.scrollSpyMobile.isInited()) {\n      this.scrollSpyMobile.init()\n    }\n  }\n\n  animateImage = (scrollPosition, progressToTop) => {\n    const containerItemsHeight = this.pageTitleWrapper.firstElementChild.offsetHeight\n    const oldState = this.currentAnimationState\n    const additonalImageList = getCollection('.look-additional-images')\n    this.isTranslate = true\n    if (progressToTop === 0) {\n      this.currentAnimationState = 'static'\n    } else if (progressToTop < 1) {\n      this.currentAnimationState = 'fixed'\n    } else {\n      this.isTranslate = false\n    }\n\n    if (this.currentAnimationState !== oldState) {\n      this.setImagePositioning(this.lookMainZoomableImage, this.currentAnimationState)\n    }\n\n    // hide the overflow zoomed image in case of additional images\n    if (additonalImageList.length > 0 && this.lookPageWithProducts) {\n      if (\n        window.scrollY + window.innerHeight >=\n        this.lookProductMainImgContainer.offsetHeight + this.calculateHeight()\n      ) {\n        this.lookProductMainImgContainer.style.overflow = 'hidden'\n      } else {\n        this.lookProductMainImgContainer.style.overflow = 'unset'\n      }\n    }\n\n    // Zoom on image on the first item\n    if (window.scrollY < containerItemsHeight) {\n      this.scaleImage(containerItemsHeight)\n      this.fadeScrollArrow(containerItemsHeight)\n    } else if (this.isTranslate) {\n      this.translateImage(scrollPosition)\n    } else {\n      this.reverseTranslate()\n    }\n  }\n\n  fadeScrollArrow = containerItemsHeight => {\n    const scrollDownElem = select('.scroll-to-explore', document.body)\n    const opacityScale = (containerItemsHeight - window.scrollY) / containerItemsHeight - 0.2\n    new TimelineLite().to(scrollDownElem, 0.3, { opacity: opacityScale })\n  }\n\n  // TODO: this function should be binded on scroll and after finishing css\n  animateImageOnMobile = () => {\n    const diffHeight = window.scrollY + window.innerHeight - this.calculateHeight()\n    const mainPosition = diffHeight / this.mobileContentMainImgHeight\n    const imagePosition = mainPosition * 100\n    const diffH = this.lookMainZoomableImage.clientHeight - this.calculateHeight()\n    const imgPosition = (window.scrollY * 100) / diffH\n\n    if (window.scrollY < 1) {\n      if (this.lookMainZoomableImage.classList.contains('zoom-in')) {\n        this.oldMobileActiveProduct = null\n        this.currentMobileActiveProduct = null\n        this.lookMainZoomableImage.classList.remove('zoom-in')\n      }\n      this.lookItemsLi.forEach(li => li.classList.remove('is-visible'))\n      this.lookItemsLi[0].classList.add('is-visible')\n    } else {\n      if (!this.lookMainZoomableImage.classList.contains('zoom-in')) {\n        this.lookMainZoomableImage.classList.add('zoom-in')\n      }\n      if (mainPosition < 1) {\n        if (imgPosition < this.lastMobileProductMinMax.mobileMax) {\n          for (const lookItem of this.lookItems) {\n            const lookElement = lookItem.closest('li')\n            const lookMinMax = select('.look-description', lookElement).dataset\n            if (imgPosition <= lookMinMax.mobileMax) {\n              this.oldMobileActiveProduct = this.currentMobileActiveProduct\n              this.currentMobileActiveProduct = lookElement\n              break\n            }\n          }\n        } else {\n          this.oldMobileActiveProduct = this.currentMobileActiveProduct\n          this.currentMobileActiveProduct = this.lastLookProduct\n        }\n\n        if (\n          this.currentMobileActiveProduct !== this.oldMobileActiveProduct ||\n          this.isLastElementMobileStatic\n        ) {\n          this.isLastElementMobileStatic = false\n          this.oldMobileActiveProduct = this.currentMobileActiveProduct\n\n          this.lookItemsLi.forEach(li => li.classList.remove('is-visible'))\n          this.lastLookProduct.classList.remove('static-last')\n          this.currentMobileActiveProduct.classList.add('is-visible')\n        }\n\n        // focus title of active element\n      } else if (!this.isLastElementMobileStatic) {\n        this.isLastElementMobileStatic = true\n        const zoomedImageSize = this.lookMainZoomableImage.getBoundingClientRect().height\n        const lookImageWrapper = select('.look-page__multiple-products', this.container)\n        this.lookItemsLi.forEach(li => li.classList.remove('is-visible'))\n        this.lastLookProduct.classList.remove('is-visible')\n        this.lastLookProduct.classList.add('static-last')\n        TweenLite.set(lookImageWrapper, { height: zoomedImageSize })\n      }\n    }\n  }\n\n  transformLookItemsForMobile = () => {\n    const MIN_GAP = 5\n    const MAX_GAP = MIN_GAP * 2\n    if (isMobileScreen() || isTabletScreen()) {\n      const rversedLooks = Array.from(this.lookItems).reverse()\n      rversedLooks.forEach((el, i) => {\n        const currentLook = select('.look-description', el.closest('li'))\n        if (i !== 0) {\n          const previousLook = select('.look-description', rversedLooks[i - 1].closest('li'))\n          const previousMax = previousLook.dataset.mobileMax\n            ? previousLook.dataset.mobileMax\n            : previousLook.dataset.max\n          const currentMax = currentLook.dataset.mobileMax\n            ? currentLook.dataset.mobileMax\n            : currentLook.dataset.max\n          let newMax = 0\n          if (currentMax) {\n            newMax = previousMax - currentMax > MAX_GAP ? currentMax + MIN_GAP : currentMax\n          } else {\n            newMax = previousMax - MIN_GAP\n          }\n          // test for first element (last element in reversed)\n          newMax = newMax < 0 ? 0 : newMax\n          currentLook.dataset.mobileMax = newMax\n        } else {\n          currentLook.dataset.mobileMax = currentLook.dataset.max\n        }\n      })\n\n      rversedLooks.forEach((el, i) => {\n        const currentLook = select('.look-description', el.closest('li'))\n        if (i !== 0) {\n          const previousLook = select('.look-description', rversedLooks[i - 1].closest('li'))\n          const previousMax = previousLook.dataset.mobileMax\n            ? previousLook.dataset.mobileMax\n            : previousLook.dataset.max\n          const currentMax = currentLook.dataset.mobileMax\n            ? currentLook.dataset.mobileMax\n            : currentLook.dataset.max\n          let newMax = 0\n          if (currentMax) {\n            newMax = previousMax - currentMax >= MIN_GAP ? currentMax : previousMax - MIN_GAP\n          } else {\n            newMax = previousMax - MIN_GAP\n          }\n          // test for first element (last element in reversed)\n          newMax = newMax < 0 ? 0 : newMax\n          currentLook.dataset.mobileMax = newMax\n        } else {\n          currentLook.dataset.mobileMax = currentLook.dataset.max\n        }\n      })\n    }\n  }\n\n  preventDefaultScroll = e => {\n    e = e || window.event\n    if (e.preventDefault) {\n      e.preventDefault()\n    }\n    if (e.stopPropagation) {\n      e.stopPropagation()\n    }\n    e.returnValue = false\n  }\n\n  disableScroll = timeout => {\n    if (window.addEventListener) {\n      window.addEventListener('scroll', this.preventDefaultScroll, false)\n    }\n    window.onwheel = this.preventDefaultScroll // modern standard\n    document.onmousewheel = this.preventDefaultScroll // older browsers\n    window.onmousewheel = this.preventDefaultScroll // older browsers\n    window.ontouchmove = this.preventDefaultScroll // mobile\n    window.onscroll = this.preventDefaultScroll\n    this.timeoutScrollMobile = setTimeout(this.enableScroll, timeout)\n  }\n\n  enableScroll = () => {\n    if (window.removeEventListener) {\n      window.removeEventListener('scroll', this.preventDefaultScroll, false)\n    }\n    window.onwheel = null\n    document.onmousewheel = null\n    window.onmousewheel = null\n    window.ontouchmove = null\n    this.timeoutScrollMobile = null\n  }\n\n  // ONE-1260 - focus order mobile|tablet\n  goToActiveLookElement = (e, isDataMaxSet, lastLookItemId, lastLookItemEl) => {\n    if (isWideScreen()) {\n      const containerItemsHeight = this.pageTitleWrapper.firstElementChild.offsetHeight\n      window.scroll(0, containerItemsHeight - 1)\n      return\n    }\n\n    const el = e.delegateTarget\n    const goTo = el.dataset.goTo\n    const imgHeight = this.lookMainZoomableImage.clientHeight - this.calculateHeight()\n    const currentId = el.closest('li').id\n    const currentElement = select(`li#${currentId}`, this.pageTitleWrapper)\n    const targetElementId = currentId.replace(\n      /\\d+$/,\n      parseInt(currentId.split('-').pop(), 10) + (goTo === 'next' || !goTo ? 1 : -1)\n    )\n    const targetElement = select(`li#${targetElementId}`, this.pageTitleWrapper)\n    const targetElementLook = select('.look-description', targetElement)\n    const newMax = parseInt(targetElementLook.dataset[isDataMaxSet ? 'max' : 'mobileMax'], 10)\n    const targetImagePosition = parseInt((newMax * imgHeight) / 100)\n    const targetDescriptionHead = select('.look-description__head', targetElementLook)\n\n    window.scrollTo({\n      top: targetImagePosition\n    })\n\n    window.addEventListener('scroll', () => scrollBehaviour())\n\n    let flag = true\n    const scrollBehaviour = () => {\n      const currentScrollOffset = window.pageYOffset || document.documentElement.scrollTop\n      // Scroll reach the target\n      if (currentScrollOffset === targetImagePosition && flag) {\n        if (goTo) {\n          if (targetElementId !== lastLookItemId) {\n            lastLookItemEl.classList.remove('is-visible', 'static-last')\n            currentElement.classList.remove('is-visible')\n            targetElement.classList.add('is-visible')\n          } else {\n            lastLookItemEl.classList.add('is-visible', 'static-last')\n          }\n        }\n\n        flag = false\n        focusElement(targetDescriptionHead)\n      }\n    }\n  }\n\n  setLookimgSize = state => {\n    if (isWideScreen()) {\n      // set default width\n      this.lookMainZoomableImage.style.width = '390px'\n\n      const pageHeight = window.innerHeight - this.calculateHeight(), // page height without header and nav\n        lookWidth =\n          Math.round(pageHeight - pageHeight * (50 / 100)) > 390\n            ? `${Math.round(pageHeight - pageHeight * (50 / 100))}px`\n            : '390px' // calculate page width, 70% of the height\n\n      if (!this.initialWidth) {\n        this.initialWidth = lookWidth\n      }\n\n      this.lookMainZoomableImage.style.width = `${lookWidth}`\n      document.querySelector('.look-page__img-zoom').style.maxWidth = `${lookWidth}`\n\n      if (state === 'static') {\n        this.lookMainZoomableImage.style.width = `${this.initialWidth}px`\n      }\n    } else {\n      document.querySelector('.look-page__img-zoom').style.maxWidth = 'initial'\n    }\n  }\n\n  setImagePositioning = (element, state, lookWidth) => {\n    let style\n\n    this.setLookimgSize()\n\n    switch (state) {\n      case 'static':\n        style = {\n          position: 'static',\n          bottom: 'auto'\n        }\n        break\n      case 'fixed':\n        style = {\n          position: 'fixed',\n          bottom: 'auto',\n          transformOrigin: '50% 0%',\n          width: lookWidth\n        }\n        break\n      default:\n        style = {\n          position: 'absolute',\n          top: 'auto',\n          bottom: '-140px',\n          y: 0,\n          transformOrigin: '50% 50%'\n        }\n    }\n    TweenLite.set(element, style)\n  }\n\n  resetImageStyle = () => {\n    if (this.lookPageWithProducts && (isTabletScreen() || isMobileScreen)) {\n      TweenLite.set(this.lookMainZoomableImage, { clearProps: 'all' })\n    }\n  }\n\n  // translate image on scroll\n  translateImage = scrollPosition => {\n    if (this.visibleDiff !== null) {\n      this.restoreReversedParameters()\n    }\n    if (scrollPosition && scrollPosition < 1) {\n      const scrollCoef = scrollPosition * 10\n      const lookItemMinMax = this.lookItemsMinMax.find(element => scrollCoef * 10 < element.max)\n\n      this.onItemActivated({\n        scrollCoef,\n        lookItem: lookItemMinMax,\n        lookItems: this.lookItemsMinMax\n      })\n    }\n  }\n\n  // Manage the scroll animation with item active\n  onItemActivated = data => {\n    const coefFix = parseFloat(data.scrollCoef.toFixed(1)) + 0.1\n    if (data.lookItem && data.lookItem.max !== '') {\n      const scrollDirection = scrollDirectionDetector()\n      const coefScale = (data.scrollCoef * coefFix) / data.lookItem.max\n      if (scrollDirection) {\n        this.currentCoefScale =\n          this.currentCoefScale < coefScale\n            ? coefScale\n            : this.currentCoefScale - Math.abs(coefScale - this.currentCoefScale)\n      } else if (!scrollDirection) {\n        this.currentCoefScale =\n          this.currentCoefScale > coefScale\n            ? coefScale\n            : this.currentCoefScale + Math.abs(coefScale - this.currentCoefScale)\n      }\n      TweenLite.set(this.lookMainZoomableImage, {\n        y: `-${this.currentCoefScale * 100}%`,\n        scale: 1.85\n      })\n    }\n  }\n\n  reverseTranslate = () => {\n    if (this.visibleDiff === null) {\n      this.visibleDiff = Math.floor(\n        parseFloat(window.getComputedStyle(this.lookMainZoomableImage).bottom.replace('px', ''))\n      )\n      if (this.visibleDiff < 0) {\n        this.visibleDiff = 0\n      }\n    }\n\n    const style = {\n      position: 'absolute',\n      top: 'auto',\n      bottom: `${this.visibleDiff}px`,\n      y: 0,\n      transformOrigin: '50% 0%'\n    }\n\n    if (this.visibleDiff >= 0) {\n      TweenLite.set(this.lookMainZoomableImage, style)\n    }\n  }\n\n  restoreReversedParameters = () => {\n    this.visibleDiff = null\n    const style = {\n      position: 'fixed',\n      bottom: 'auto'\n    }\n    TweenLite.set(this.lookMainZoomableImage, style)\n  }\n\n  scaleImage = containerItemsHeight => {\n    let percent = (window.scrollY * 100) / containerItemsHeight\n    if (percent < 10) {\n      percent = `0${percent}`\n    }\n    const scale = `1.${percent}`\n    TweenLite.set(this.lookMainZoomableImage, { scale, yPercent: 0 })\n  }\n\n  // Dots Update on Scroll\n  updateScrollSpyDots = activeIndex => {\n    this.indexControlImage = activeIndex\n\n    if (this.controlDots) {\n      this.controlDots.forEach(($bullet, index) => {\n        const $bulletLink = select('a', $bullet)\n        if ($bullet.classList.contains('is-active') && activeIndex !== index) {\n          $bullet.classList.remove('is-active')\n          if ($bulletLink) $bulletLink.removeAttribute('aria-current')\n        } else if (activeIndex === index) {\n          $bullet.classList.add('is-active')\n          if ($bulletLink) $bulletLink.setAttribute('aria-current', true)\n        }\n      })\n    }\n  }\n\n  calculateHeight = () => {\n    let height = HEADER_SIZES.small_collapsed + LOOK_STICKY_SIZES.small\n\n    if (isTabletScreen()) {\n      height = HEADER_SIZES.medium_collapsed + LOOK_STICKY_SIZES.medium\n    } else if (isWideScreen() && select('body').classList.contains('is-body-narrow')) {\n      height = HEADER_SIZES.large_collapsed + LOOK_STICKY_SIZES.large\n    } else if (isWideScreen()) {\n      height = HEADER_SIZES.large_expanded + LOOK_STICKY_SIZES.large\n    } else {\n      height = HEADER_SIZES.small_collapsed + LOOK_STICKY_SIZES.small\n    }\n\n    return height\n  }\n\n  setZoomImages = lookCode => {\n    const currentLookSlides = select('.look-slideshow__current')\n    const zoomableImages = selectAll('.js-look-image-zoom', currentLookSlides)\n    let lookNumber = null\n    if (lookCode == undefined || lookCode == '') {\n      lookNumber = currentLookSlides.dataset.looknumber\n        ? parseInt(currentLookSlides.dataset.looknumber)\n        : undefined\n    } else {\n      lookNumber = parseInt(lookCode)\n    }\n    let ariaLabelToSet = ''\n    if (lookNumber !== undefined && lookNumber !== '') {\n      ariaLabelToSet = config.popinLookPDP.dialogBtnLabel.replace('{0}', lookNumber)\n    }\n    const options = {\n      contentClass: '.lookdetail',\n      async: true,\n      autoWidth: true,\n      draggable: false,\n      focusOpener: true,\n      overrideAlt: false,\n      focusImage: false,\n      noAnimationMobile: true,\n      noAnimation: true,\n      onZoom: this.onZoom,\n      ariaLabel: ariaLabelToSet,\n      className: 'look-zoom-img-wrapper'\n    }\n    const zoom = new Zoom(zoomableImages, options)\n    zoom.create()\n    zoomableImages.forEach(imgZoom => {\n      this.zoomArray.push(imgZoom)\n    })\n    if (this.btnZoom !== null) {\n      this.btnZoom.addEventListener('click', this.zoomCurrentImage)\n    }\n    if (this.btnZoom !== null) {\n      this.showHideButtonZoom()\n    }\n  }\n\n  showHideButtonZoom = () => {\n    if (!this.lookPageWithProducts) {\n      this.btnZoom ? this.btnZoom.classList.remove('is-hidden') : ''\n      if (isMobileScreen()) {\n        this.pageControlsWrapper.closest('.look-page__controls').style.display = 'block'\n        select('.js-page-control', this.pageControlsWrapper).classList.add('is-hidden')\n        select('.back-to-looks span').classList.add('is-sr-only')\n      } else {\n        select('.js-page-control', this.pageControlsWrapper).classList.remove('is-hidden')\n        select('.back-to-looks span').classList.remove('is-sr-only')\n      }\n    }\n  }\n\n  onZoom = () => {\n    document.DLKit.push('when-user-zoom-look-image', {\n      eventAction: 'zoom',\n      eventCategory: 'pdp look'\n    })\n  }\n\n  zoomCurrentImage = () => {\n    if (this.indexControlImage >= 0) {\n      const id = `look-details-${this.indexControlImage}`\n      this.zoomArray.forEach(btnImg => {\n        if (id === btnImg.id) {\n          btnImg.click()\n        }\n      })\n    }\n  }\n}\n","import popin from 'modules/popin'\nimport {select, getCollection, closest} from 'lib/selectors'\nimport * as xhr from 'modules/fetch'\nimport config from 'lib/config'\nimport { debounce, throttle } from 'lodash'\nimport { Manager, WINDOW_WAS_RESIZED, BREAKPOINT_CHANGE } from 'lib/events'\nimport disclaimer from 'ui/footer/disclaimer'\nimport { isMobile, isMobileScreen, isTabletScreen, isWideScreen, focusElement } from 'lib/helpers'\n\nconst MODAL_OPENER = '.js-view-detail-modal'\n\nclass ViewDetailsModal {\n\tconstructor(el) {\n\t\tthis.el = el\n\t\tthis.popinCol = null\n\t\tthis.buttonOpener = null\n\t\tthis.data = null\n\t\tthis.mainImgData = null\n\t\tthis.referenceProducts = null\n\t\tthis.imageData = null\n\t\tthis.lookDetails = null\n\t\tthis.lookCategory = null\n\t\tthis.expandDetailsBtn = null\n\t\tthis.lookProductsList = null\n\t\tthis.showDisclaimerText = false\n\t\tthis.openedProductName = null\n\t\tthis.pageControlDots = null\n\t\tthis.productWrapperDiv = null\n\t\tthis.pageControlWrapper = null\n\t\tthis.lookImageContainer = null\n\t\tthis.navPageControl = null\n\t\tthis.productDetailsContainer = null\n\t\tthis.productListContent = null\n\t\tthis.productSectionWrapper = null\n\t\tthis.lookMainImg = null\n\t\tthis.imageZoomContent = null\n\t\tthis.lookItems = null\n\t\tthis.lookItemsMinMax = null\n\t\tthis.productSectionClicked = false\n\t\tthis.scrollPosition = null\n\t\tthis.controlDotsClicked = false\n\t\tthis.modalBackground = null\n\t\tthis.mobileScrollTimer = null\n\t\tthis.initialX = 0\n\t    this.initialY = 0\n\t    this.didMove = false\n\t\tthis.currentOpenProduct = null\n\t\tthis.currentTransformValue = 0\n\t\tthis.transformPercent = 0\n\t    this.deltaX = 0\n\t    this.deltaY = 0\n\t    this.frameHeight = 0\n\t    this.transformY = 0\n\t    this.triggeredMention = null\n\t    this.activeTitle = null\n\t\tthis.activeDesc = null\n\t\tthis.activeref = null\n\t\tthis.listCollapseHeader = null\n\t\tthis.slidingElement = null\n\t\tthis.previousYTransform = null\n\t\tthis.initialScrollTop = null\n\t\tthis.lastProductDelta = 60\n\t}\n\n\tasync init() {\n\t\tManager.unsubscribe(BREAKPOINT_CHANGE)\n\t\tthis.buttonOpener = select(MODAL_OPENER)\n\t\tthis.packshotDefault = select('*#look-details-0 img')\n\t\tthis.lookDetails = JSON.parse(this.buttonOpener.dataset.code)\n\t\tthis.lookCategory = this.lookDetails.lookCategory\n\t\tthis.viewDetailsClicked()\n\t\tthis.data = await xhr.get(config.popinLookPDP.lookDataUrl.replace('{0}',this.lookDetails.lookCode))\n\t\tif (this.data && this.data !== null) {\n\t\t  this.mainImgDataUrl = this.packshotDefault ? this.packshotDefault.src : ''\n\t\t  this.referenceProducts = this.data.referenceProducts\n\t\t  this.referenceProducts.forEach((item) => {\n\t\t\t  if (item.geoAsset !== null && item.geoAsset.positions !== undefined && item.geoAsset.positions.length !== 0) {\n\t\t\t\t  item.calculatedGeo = this.minYPosition(item.geoAsset)\n\t\t\t  }\n\t\t  })\n\t\t  this.referenceProducts.sort((a,b) => {\n\t\t\t  if (a.geoAsset !== null && b.geoAsset !== null) {\n\t\t\t\t  if (a.calculatedGeo < b.calculatedGeo) {\n\t\t\t\t\t  return -1\n\t\t\t\t  } else {\n\t\t\t\t\t  return 1\n\t\t\t\t  }\n\t\t\t\t  return 0\n\t\t\t  } else if (a.zoomAnimationData !== null && b.zoomAnimationData !== null) {\n\t\t\t\t  let minA = parseFloat(a.zoomAnimationData.min) + (parseFloat(a.zoomAnimationData.max) - parseFloat(a.zoomAnimationData.min)) / 2\n\t\t\t\t  let minB = parseFloat(b.zoomAnimationData.min) + (parseFloat(b.zoomAnimationData.max) - parseFloat(b.zoomAnimationData.min)) / 2\n\t\t\t\t  if (minA < minB) {\n\t\t\t\t\t  return -1\n\t\t\t\t  } else {\n\t\t\t\t\t  return 1\n\t\t\t\t  }\n\t\t\t\t  return 0\n\t\t\t  }\n\t\t  })\n\t\t  this.imageAltText = this.data.lookImage.altTextLocalized !== null ? this.data.lookImage.altTextLocalized : ''\n\t\t  this.buildTemplate()\n\t\t}\n\t}\n\n\tminYPosition(asset) {\n\t\tif (asset.positions.length > 0) {\n\t\t\tlet minY = asset.positions[0].y\n\t\t\tlet maxY = asset.positions[0].y\n\t\t\tlet returnValue\n\t\t\tasset.positions.forEach((pos) => {\n\t\t\t\tmaxY = pos.y > maxY ? pos.y : maxY\n\t\t\t\tminY = pos.y < minY ? pos.y : minY\n\t\t\t})\n\t\t\treturnValue = Math.abs(minY - 50) + (Math.abs(maxY - 50) - Math.abs(minY - 50)) / 2\n\t\t\treturn returnValue\n\t\t}\n\t\treturn false\n\t}\n\n\topen() {\n\t  popin.open({\n\t    html: this.template,\n\t    role: 'dialog',\n\t    modifiers: 'is-relative look-popin',\n\t    opener: null,\n\t    modal: true,\n\t    label: config.popinLookPDP.modalLabel,\n\t    forceInert: true,\n\t    manageFocus: true,\n\t    outerClose: true\n\t  }).then(() => {\n\t    this.onOpenPopin()\n\t  })\n\t}\n\n\tviewDetailsClicked() {\n\t  window.document.DLKit.push('when-user-interact-with-product-page', {\n\t\teventLabel : \"\",\n\t\teventAction :\"view details\"\n\t  })\n\t}\n\n\tbuildTemplate() {\n\t  this.template =\n\t\t  `\n\t\t  <div class=\"popin-text text-center look-popin__content\" data-close-label=\"${window.config.popinLookPDP.closeLabel}\">\n\t\t    <div class=\"look-popin__heading\">\n\t\t      <div class=\"look-popin-details__container look-popin-image__container\">\n\t\t        <div class=\"look-popin-zoom__wrapper\">\n\t\t          <div class=\"look-popin-zoom__content\">\n\t\t            <div class=\"look-popin-zoom__image\">\n\t\t              <img alt=\"`+ this.imageAltText +`\" src=\"`+ this.mainImgDataUrl +`\" class=\"look-popin__mainImg\" />\n\t\t            </div>\n\t\t          </div>\n\t\t        </div>\n\t\t      </div>`\n\t\t      + this.mobileNavDotTemplate() +\n\t\t      `<div class=\"look-popin-details__list\">\n\t\t        <div class=\"look-popin-list__header is-hidden-l\">\n\t\t          <p class=\"heading\" role=\"heading\" aria-level=\"1\">\n\t\t            <span class=\"collapse-product-panel js-collapse-list\" role=\"button\" tabindex=\"0\" aria-expanded=\"false\">\n\t\t              <span class=\"is-sr-only list-title\">${window.config.popinLookPDP.modalLabel}</span>\n\t\t              <span class=\"is-sr-only\">  `+ this.lookDetails.lookCategory +`</span>\n\t\t              <span class=\"down-icon-container\">\n\t\t                <svg class=\"icon is-large is-down-mediumThin\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n\t\t                  <use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg#down-mediumThin\"/>\n\t\t                </svg>\n\t\t              </span>\n\t\t            </span>\n\t\t          </p>\n\t\t        </div>\n\t\t        <div class=\"look-popin-details__container look-popin-products__container\">\n\t\t          <div class=\"look-popin-product__position center-aligned\">\n\t\t            <div class=\"look-popin-product__wrapper\">\n\t\t              <div class=\"look-popin-product__content\">\n\t\t                <p role=\"heading\" aria-level=\"1\" class=\"is-sr-only\">\n\t\t                  <span>\n\t\t                    <span>${window.config.popinLookPDP.modalLabel}</span>\n\t\t                    <span>  `+ this.lookDetails.lookCategory +`</span>\n\t\t                  </span>\n\t\t                </p>`\n\t\t              + this.productListTemplate() +\n\t\t            `</div>`\n\t\t            + this.disclaimerTemplate() +\n\t\t          `</div>\n\t\t          </div>\n\t\t      </div>\n\t\t    </div>\n\t\t  </div>\n\t\t  </div>\n\t\t  `\n\t}\n\n\tmobileNavDotTemplate() {\n\t\tlet html = ''\n\t\tif (this.referenceProducts.length > 0) {\n\t\t  html = `<div class=\"look-popin__controls\">\n\t\t\t<nav role=\"navigation\" aria-label=\"${window.config.popinLookPDP.modalLabel} - `+ this.lookCategory +`\">\n\t\t    <ul class=\"page-control js-page-control\">`\n\t\t    for (let product = 0; product < this.referenceProducts.length; product++) {\n\t\t\t  html = html +\n\t\t\t    `<li data-number=\"`+ product +`\">\n\t\t\t      <button type=\"button\" class=\"look-page__control-btn js-product-navigation\" data-sectionId=\"look-details-card_`+ this.referenceProducts[product].code +`\">\n\t\t\t        <span class=\"is-sr-only\">`\n\t\t\t         + this.referenceProducts[product].name +\n\t\t\t        ` - ${window.config.popinLookPDP.modalLabel}</span>\n\t\t\t      </button>\n\t\t\t\t</li>`\n\t\t    }\n\t\t  html = html + '</ul></nav></div>'\n\t\t}\n\t\treturn html\n\t}\n\n\tdisclaimerTemplate() {\n\t\tlet disclaimerText = ''\n\t\tif (this.showDisclaimerText) {\n\t\t\tdisclaimerText = disclaimerText +  `\n\t\t\t<div id=\"disclaimer-text\" class=\"disclaimer js-disclaimer disclaimer-display\">\n\t\t\t  <div class=\"disclaimer-container\">\n\t\t        <p id=\"disclaimer-back-content\" tabindex=\"-1\">\n\t\t          <a id=\"js-disclaimer-back-to-target\" class=\"disclaimer__back\" aria-label=\"${window.config.popinLookPDP.disclaimerAlly}\" href=\"#\"></a>\n\t            </p>\n\t            <p class=\"content\">\n\t              ${window.config.popinLookPDP.disclaimerText1}\n\t             <a target=\"_blank\" class=\"link is-underline is-gray is-paddingLeft\"\n\t\t\t       title=\"${window.config.popinLookPDP.disclaimerTitle}\" rel=\"nofollow\"\n\t\t\t       href=\"${window.config.popinLookPDP.policyURL}\">\n\t\t\t       <span>${window.config.popinLookPDP.disclaimerText2}</span>\n\t\t         </a>\n\t           </p>\n\t\t     </div>\n\t\t   </div>\n\t\t   `\n\t\t}\n\t\treturn disclaimerText\n\t}\n\n\tproductListTemplate() {\n\t  let html = ''\n\t  if (this.referenceProducts.length > 0) {\n\t\thtml = `<div class=\"look-detail-list__content\">\n\t\t<ul class=\"look-detail-product__list\">`\n\t    for (let product = 0; product < this.referenceProducts.length; product++) {\n\t\t  html = html + `<li class=\"look-detail-product__item\" id=\"look-details-card_`+ this.referenceProducts[product].code +`\">\n\t\t    <div class=\"look-detail-product__content\" data-max=\"0\" data-min=\"0\">\n\t\t      <p class=\"heading look-detail-product__title\" role=\"heading\" aria-level=\"2\" tabindex=\"-1\">\n\t\t        <span class=\"look-detail-product__expand js-expand-look-details\" id=\"look-product-`+ product +`\" role=\"button\" tabindex=\"0\" aria-expanded=`+false+`>\n\t\t     \t  `+ this.referenceProducts[product].name +`\n\t\t     \t  <span class=\"icon-wrapper\">\n\t\t     \t    <svg class=\"icon is-small is-next\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n\t\t              <use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg#next\"/>\n\t\t            </svg>\n\t\t     \t  </span>\n\t\t     \t</span>\n\t\t      </p>\n\t\t     <div class=\"look-detail-product__details\">\n\t\t         ` + this.productDescriptionText(this.referenceProducts[product]) + `\n\t\t         ` + this.productRefText(this.referenceProducts[product]) + `\n\t\t         ` + this.productPriceText(this.referenceProducts[product], product) + `\n\t\t         ` + this.detailBtnTemplate(this.referenceProducts[product]) + `\n\t\t     </div>\n\t\t   </div>\n\t\t </li>`\n\t    }\n\t\thtml = html + '</ul></div>'\n\t  }\n\t   return html\n\t}\n\n\tproductDescriptionText(refProduct) {\n\t\tif (refProduct.fabricGrp !== null && refProduct.colorGrp !== null) {\n\t\t  if (refProduct.fabricGrp.name !== '' && refProduct.colorGrp.name !=='') {\n\t\t\treturn '<p class=\"look-detail-product__description\">' + refProduct.fabricGrp.name + '<br>' + refProduct.colorGrp.name + '</p>'\n\t\t  } else if (refProduct.fabricGrp.name === '' && refProduct.colorGrp.name !=='') {\n\t\t\treturn '<p class=\"look-detail-product__description\">' + refProduct.colorGrp.name + '</p>'\n\t\t  } else if (refProduct.fabricGrp.name !== '' && refProduct.colorGrp.name ==='') {\n\t\t\treturn '<p class=\"look-detail-product__description\">' + refProduct.fabricGrp.name + '</p>'\n\t\t  }\n\t\t} else if ((refProduct.fabricGrp === null && refProduct.colorGrp !== null) || (refProduct.fabricGrp !== null && refProduct.colorGrp === null)) {\n\t\t\tlet productDescription = refProduct.fabricGrp === null ? refProduct.colorGrp : refProduct.fabricGrp\n\t\t\tif (productDescription.name !== '') {\n\t\t\t\treturn '<p class=\"look-detail-product__description\">' + productDescription.name + '</p>'\n\t\t\t}\n\t\t}\n\t\treturn ''\n\t}\n\n\tproductRefText(refProduct) {\n\t  if (refProduct.manufacturerAID != '') {\n\t\treturn '<p class=\"look-detail-product__ref\">' + refProduct.manufacturerAID + ' ' + refProduct.refFshCode + '</p>'\n      } else {\n\t\treturn '<p class=\"look-detail-product__ref\">' + refProduct.refFshCode + '</p>'\n\t  }\n\t}\n\n\tproductPriceText(refProduct, index) {\n\t\tif(refProduct.priceMention) {\n\t\t\tlet priceText =  (refProduct.price !== null && refProduct.displayPrice && !refProduct.isPriceUnderRequest) ? refProduct.price.formattedValue : ''\n\t\t\tif (priceText !== '') {\n\t\t\t\tif (!refProduct.sellableOnline && priceText !== '') {\n\t\t\t\t\tthis.showDisclaimerText = true\n\t\t      \t\tpriceText = priceText + '<a class=\"disclaimer-indicator look-detail-product__asterisk\" data-test=\"lblDisclaimerIndicator\" href=\"#disclaimer-text\" aria-label=\"' + config.popinLookPDP.priceInfoAriaLabel + '\" data-index=\"'+ index +'\">*</a>'\n\t\t\t\t}\n\t\t\t\treturn '<p class=\"heading look-detail-product__price\">' + priceText + '</p>'\n\t\t\t} else {\n\t\t\t\treturn '<p class=\"look-detail-product__price\">' + config.popinLookPDP.priceOnRequest + '</p>'\n\t\t\t}\n\t\t}\n\t\treturn ''\n\t}\n\n\tdetailBtnTemplate(refProduct) {\n\t\tconst currentLocale = config.currentLocale.replace(/\\//g, '')\n\t\tif ((refProduct.nonWebSelection !== '' && !refProduct.nonWebSelection) && (refProduct.nonCommunication !== '' && !refProduct.nonCommunication) && (refProduct.availableToCurrentUser == '' || (refProduct.availableToCurrentUser !== '' && refProduct.availableToCurrentUser))) {\n\t\t\treturn `\n\t\t\t  <p class=\"product-description__cta\">\n\t\t\t    <a href=`+ '/' + currentLocale + refProduct.url +` class=\"link has-icon is-right is-gray js-view-details\" aria-label =\"`+ config.popinLookPDP.viewDetailLabel.replace('{0}',refProduct.name) +`\">\n\t\t\t      <span>\n\t\t\t        <span>${window.config.popinLookPDP.viewProductDetailsCta}</span>\n\t\t\t        <svg class=\"icon is-small is-next\" focusable=\"false\" viewBox=\"0 0 1 1\" aria-hidden=\"true\">\n                      <use xlink:href=\"/_ui/responsive/theme-onechanel/assets/icons.svg#next\"/>\n                    </svg>\n\t\t\t      </span>\n\t\t\t    </a>\n\t\t\t  </p>\n\t\t\t`\n\t\t}\n\t\treturn ''\n\t}\n\n\tonOpenPopin() {\n\t\tthis.setDomElement()\n\t\tthis.setInitialTemplate()\n\t    if (select('.disclaimer-indicator')) {\n\t    \tdisclaimer()\n\t    }\n\t\tthis.setPositionValue()\n\t\tthis.lookItemsMinMax = this.lookItems.length > 0 ? Array.from(this.lookItems).map((element) => { return { min: parseFloat(element.dataset.min), max: parseFloat(element.dataset.max) } }) : []\n\t\tManager.subscribe(BREAKPOINT_CHANGE, this.setInitialTemplate.bind(this))\n\t}\n\n\tsetDomElement() {\n\t  this.popinEl = select('.look-popin')\n\t  this.popinCol = select('.popin__col', this.popinEl)\n\t  this.buttonClose = select('button.popin__close', this.popinEl)\n\t  this.expandDetailsBtn = getCollection('.js-expand-look-details')\n\t  this.lookProductsList = getCollection('.look-detail-product__item')\n\t  this.pageControlWrapper = select('.look-popin__controls', this.popinEl)\n\t  this.buttonClose ? this.buttonClose.addEventListener('click', this.closeLookPopin.bind(this)) : ''\n\t  this.viewDetailsCta = getCollection('.js-view-details', this.popinEl)\n\t  this.backToTarget = select('#js-disclaimer-back-to-target', this.popinEl)\n\t  this.productWrapperDiv = select('.look-popin-product__position', this.popinEl)\n\t  this.productDetailsContainer = select('.look-popin-products__container', this.popinEl)\n\t  this.productSectionWrapper = select('.look-popin-product__content', this.popinEl)\n\t  this.productListContent = select('.look-detail-list__content', this.popinEl)\n\t  this.imageZoomContent = select('.look-popin-zoom__content', this.popinEl)\n\t  this.pageControlList = select('.js-page-control', this.popinEl)\n\t  this.navPageControl = select('.look-popin__controls nav', this.popinEl)\n\t  this.pageControlDots = getCollection('.js-page-control li', this.popinEl)\n\t  this.lookMainImg = select('.look-popin-zoom__image img', this.popinEl)\n\t  this.lookItems = getCollection('.look-detail-product__content', this.popinEl)\n\t  this.modalBackground = select('.popin__background')\n\t  this.modalBackground ? this.modalBackground.parentNode.removeChild(this.modalBackground) : ''\n\t  if (this.backToTarget) {\n\t\tthis.backToTarget.addEventListener('click', this.focusToTarget.bind(this))\n\t  }\n\t  this.viewDetailsCta.forEach((cta) => {\n\t\tcta.addEventListener('click', this.viewProductDetails.bind(this))\n\t  })\n\t  this.lookProductsList.forEach((product) => {\n\t\tif (select('.product-description__cta', product) !== null) {\n\t\t  select('.look-detail-product__ref', product).classList.add('is-sr-only')\n\t\t}\n\t  })\n\t}\n\n\tsetInitialTemplate() {\n\t  if ((!isMobileScreen() && !isTabletScreen())) {\n\t\tthis.transformProductSection()\n\t\tthis.expandFirstProduct()\n\t\tlet timer = null\n\t\tthis.popinCol.addEventListener('scroll',() => {\n\t\t  if(timer !== null) {\n\t\t    clearTimeout(timer)\n\t\t  }\n\t\t  timer = setTimeout(() => {\n\t\t\tif (!this.productSectionClicked) {\n\t\t\t  this.onImageScroll()\n\t\t\t} else {\n\t\t\t\tthis.productSectionClicked = false\n\t\t\t}\n\t\t  }, 250)\n\t\t}, false)\n\t\tthis.expandDetailsBtn.forEach((elem) => {\n\t\t  elem.addEventListener('click', this.expandClickedProduct.bind(this))\n\t\t  elem.addEventListener('keyup', this.expandClickedProduct.bind(this))\n\t\t})\n\t  } else {\n\t\tthis.transformMobileProductCard()\n\t  }\n\t}\n\n\tsetPositionValue() {\n\t\tfor (let prod = 0; prod < this.referenceProducts.length; prod++) {\n\t\t\tconst positionData = this.referenceProducts[prod].geoAsset ? this.referenceProducts[prod].geoAsset.positions : ''\n\t\t\tconst referenceProduct = select('#look-details-card_'+this.referenceProducts[prod].code+' div')\n\t\t\tconst maxScrollTop = this.lookMainImg.offsetHeight - window.innerHeight\n\t\t\tlet minY = 0\n\t\t\tlet maxY = 0\n\t\t\tif (positionData && positionData.length > 0) {\n\t\t\t\tconst normalizeCoef = 50\n\t\t\t\tminY = positionData[0].y\n\t\t\t\tmaxY = positionData[0].y\n\t\t\t\tpositionData.forEach(pos => {\n\t\t\t\t\tmaxY = pos.y > maxY ? pos.y : maxY\n\t\t\t\t\tminY = pos.y < minY ? pos.y : minY\n\t\t\t\t})\n\t\t\t\treferenceProduct.setAttribute('data-max',Math.abs(parseFloat(minY) - normalizeCoef))\n\t\t\t\treferenceProduct.setAttribute('data-min',Math.abs(parseFloat(maxY) - normalizeCoef))\n\t\t\t} else if (this.referenceProducts[prod].zoomAnimationData !== null) {\n\t\t\t\tminY = this.referenceProducts[prod].zoomAnimationData.min\n\t\t\t\tmaxY = this.referenceProducts[prod].zoomAnimationData.max\n\t\t\t\treferenceProduct.setAttribute('data-max',parseFloat(maxY))\n\t\t\t\treferenceProduct.setAttribute('data-min',parseFloat(minY))\n\t\t\t}\n\t\t}\n\t}\n\n\tfocusToTarget() {\n\t  const expandedProductDetails = select('.look-detail-product__details--enabled')\n\t  const el = isMobile() ? this.triggeredMention : select('.disclaimer-indicator', expandedProductDetails)\n\t  if (el) {\n        focusElement(el)\n      }\n\t}\n\n\tviewProductDetails(evt) {\n\t\twindow.document.DLKit.push('on-tracking', {\n\t      event: 'uaevent',\n\t      eventAction: 'view details',\n          eventLabel: this.openedProductName,\n\t      eventCategory: 'pdp_look_popin'\n\t    })\n\t}\n\n\ttransformProductSection() {\n\t\tif (this.productSectionWrapper) {\n\t\t\tconst mobileIconWrapper = select('.mobile-icon-wrapper', this.productSectionWrapper)\n\t\t\tif (mobileIconWrapper !== null && mobileIconWrapper !== \"\") {\n\t\t\t\tmobileIconWrapper.classList.remove('mobile-icon-wrapper')\n\t\t\t\tmobileIconWrapper.classList.add('is-sr-only')\n\t\t\t\tif (Array.from(mobileIconWrapper.children).length > 0) {\n\t\t\t\t  \tconst mobileIconSpan = Array.from(mobileIconWrapper.children)[0]\n\t\t\t\t  \tmobileIconSpan.removeAttribute('role')\n\t\t\t\t\tmobileIconSpan.removeAttribute('tabindex')\n\t\t\t\t\tmobileIconSpan.removeAttribute('aria-expanded')\n\t\t\t\t\tArray.from(mobileIconSpan.children).forEach(elem => elem.classList.remove('is-sr-only'))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.lookProductsList.length > 0) {\n\t\t\tthis.lookProductsList.forEach(elem => {\n\t\t\t\tlet titleSpan = select('.look-detail-product__expand', elem)\n\t\t\t\ttitleSpan.setAttribute('role','button')\n\t\t\t\ttitleSpan.setAttribute('tabindex','0')\n\t\t\t\ttitleSpan.setAttribute('aria-expanded','false')\n\t\t\t})\n\t\t}\n\t}\n\n\texpandFirstProduct() {\n\t  if (this.lookProductsList.length > 0) {\n\t\tconst productDetailsSection = select('.look-detail-product__details',this.lookProductsList[0])\n\t\tconst productSectionToExpand = select('.look-detail-product__expand',this.lookProductsList[0])\n\t\tthis.openedProductName = productSectionToExpand.innerText ? productSectionToExpand.innerText : ''\n\t\tproductDetailsSection.classList.add('look-detail-product__details--enabled')\n\t\tselect('.look-detail-product__title',this.lookProductsList[0]).classList.add('look-detail-product__title--active')\n\t\tTweenLite.to(productDetailsSection, 0.2, {\n\t\t\tdisplay: 'block',\n\t\t\toverflowY: 'visible',\n\t\t\theight:'auto',\n\t\t\tpaddingTop: '5px',\n\t\t\tonComplete: () => {\n\t\t\t  if (this.productWrapperDiv !== '' && this.productWrapperDiv !== null) {\n\t\t\t\t  const productWrapperOverflow = this.productWrapperDiv.offsetHeight > window.innerHeight ? true : false\n\t\t\t\t  if (productWrapperOverflow) {\n\t\t\t\t    TweenLite.to(this.productWrapperDiv, 0.1, {\n\t\t\t\t\t    css : {\n\t\t\t\t\t\t    height: '100%'\n\t\t\t\t\t    }\n\t\t\t\t    })\n\t\t\t\t  }\n\t\t\t  }\n\t\t\t}\n\t\t})\n\t\tproductSectionToExpand.setAttribute('aria-expanded', true)\n\t\tproductSectionToExpand.setAttribute('aria-disabled', true)\n\t\tselect('.icon-wrapper',this.lookProductsList[0]).style.display = \"none\"\n\t  }\n\t}\n\n\ttransformMobileProductCard() {\n\t\tconst priceMention = getCollection('.disclaimer-indicator')\n\t\tconst BORDER_GAP = 10\n\t\tconst paddingTop = 27\n\t\tif (this.lookProductsList.length > 0) {\n\t\t\tlet productWrapperHeight = this.productDetailsContainer.offsetHeight\n\t\t\tthis.lookProductsList.forEach((elem,index) => {\n\t\t\t\tlet titleSpan = select('.look-detail-product__expand', elem)\n\t\t\t\tif (index == 0) {\n\t\t\t\t\tthis.transformPercent = (productWrapperHeight - elem.offsetHeight) / productWrapperHeight* 100\n\t\t\t\t\telem.classList.add('is-active')\n\t\t\t\t\tthis.pageControlList.style.height = (window.innerHeight - elem.offsetHeight + BORDER_GAP) + 'px'\n\t\t\t\t\tthis.imageZoomContent.style.height = (window.innerHeight - elem.offsetHeight + BORDER_GAP) + 'px'\n\t\t\t\t\tTweenLite.set(this.productDetailsContainer, { y: `${(productWrapperHeight - elem.offsetHeight) / productWrapperHeight* 100}%`})\n\t\t\t\t\tTweenLite.set(this.productListContent, { y: 0})\n\t\t\t\t}\n\t\t\t\ttitleSpan.setAttribute('role','presentation')\n\t\t\t\ttitleSpan.removeAttribute('tabindex')\n\t\t\t\ttitleSpan.removeAttribute('aria-expanded')\n\t\t\t\ttitleSpan.removeAttribute('aria-disabled')\n\t\t\t})\n\t\t}\n\t\tif (this.productSectionWrapper) {\n\t\t\tArray.from(this.productSectionWrapper.children).forEach((elem) => {\n\t\t\t\tif (elem.classList.contains('is-sr-only')) {\n\t\t\t\t\telem.classList.remove('is-sr-only')\n\t\t\t\t\telem.classList.add('mobile-icon-wrapper')\n\t\t\t\t\tif (Array.from(elem.children).length > 0) {\n\t\t\t\t\t\tconst mobileIconSpan = Array.from(elem.children)[0]\n\t\t\t\t\t\tmobileIconSpan.setAttribute('role','button')\n\t\t\t\t\t\tmobileIconSpan.setAttribute('tabindex','0')\n\t\t\t\t\t\tmobileIconSpan.setAttribute('aria-expanded','false')\n\t\t\t\t\t\tArray.from(mobileIconSpan.children).forEach(elem => elem.classList.add('is-sr-only'))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tthis.imageZoomContent.addEventListener('mousedown', this.handleImageStartSliding.bind(this))\n\t    this.imageZoomContent.addEventListener('touchstart', this.handleImageStartSliding.bind(this))\n\t    this.currentOpenProduct = select('.look-detail-product__item.is-active')\n\t\tthis.activeTitle = select('.is-active .look-detail-product__title', this.popinEl)\n\t    this.activeDesc = select('.is-active .look-detail-product__description', this.popinEl)\n\t    this.activeref = select('.is-active .look-detail-product__ref', this.popinEl)\n\t\tthis.listCollapseHeader = select('.look-popin-list__header')\n\t\tconst mobileIconWrapper = select('.mobile-icon-wrapper', this.productSectionWrapper)\n\t\tconst collapseIcon = select('.js-collapse-list')\n\t\tmobileIconWrapper.style.height = this.activeTitle.offsetHeight + this.activeref.offsetHeight + (this.activeDesc !== null ? this.activeDesc.offsetHeight : 0) + paddingTop + 'px'\n\t\tmobileIconWrapper.addEventListener('click', this.showProductDetails.bind(this))\n\t\tcollapseIcon.addEventListener('click', this.collapseListPanel.bind(this))\n\t\tlet that = this\n\t\tmobileIconWrapper.addEventListener('keyup', (event) => {\n\t\t\tif (event.which == 32 ||  event.which == 13) that.showProductDetails()\n\t\t})\n\t\tcollapseIcon.addEventListener('keyup', (event) => {\n\t\t\tif (event.which == 32 ||  event.which == 13) that.collapseListPanel()\n\t\t})\n\t\tmobileIconWrapper.addEventListener('touchstart', this.handleSlidingStart.bind(this))\n        mobileIconWrapper.addEventListener('mousedown', this.handleSlidingStart.bind(this))\n\t\tthis.zoomContentHeight = this.imageZoomContent.offsetHeight\n\t\tif (priceMention.length > 0) {\n\t\t\tpriceMention.forEach((elem) => {\n\t\t\t\telem.addEventListener('click', () => {\n\t\t\t\t\tthis.triggeredMention = this.lookProductsList[elem.dataset.index]\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\tif (this.pageControlDots.length > 0) {\n\t\t  this.pageControlDots.forEach((elem, index) => {\n\t\t\tlet pageControlBtn = select('.look-page__control-btn', elem)\n\t\t\tif (index == 0) {\n\t\t\t  elem.classList.add('is-active')\n\t\t\t  pageControlBtn ? pageControlBtn.setAttribute('aria-current', true) : ''\n\t\t\t}\n\t\t\tpageControlBtn.addEventListener('click', this.scrollToProduct.bind(this))\n\t\t })\n\t    }\n\t}\n\n\thandleImageStartSliding(e) {\n\t\tif (!e.touches) {\n\t\t    e.preventDefault()\n\t\t  }\n\t    this.initialX = e.touches ? e.touches[0].clientX : e.clientX\n\t    this.initialY = e.touches ? e.touches[0].clientY : e.clientY\n\t    this.deltaY = 0\n\t    this.didMove = false\n\t    this.imageZoomContent.addEventListener('mouseup', this.handleImageEndSliding.bind(this))\n\t    this.imageZoomContent.addEventListener('mouseleave', this.handleImageEndSliding.bind(this))\n\t    this.imageZoomContent.addEventListener('mousemove', this.handleImageSliding.bind(this))\n\t    this.imageZoomContent.addEventListener('touchmove', this.handleImageSliding.bind(this))\n\t    this.imageZoomContent.addEventListener('touchend', this.handleImageEndSliding.bind(this))\n\t}\n\n\thandleImageSliding(e) {\n\t\tif (e.touches) {\n\t\t    this.deltaY = this.initialY - e.touches[0].clientY\n\t\t  } else {\n\t\t    this.deltaY = this.initialY - e.clientY\n\t\t  }\n\t}\n\n\thandleImageEndSliding() {\n\t\tlet currentOpenIndex = null\n\t\tthis.lookProductsList.forEach((elem, index) => {\n\t\t\tif (elem.classList.contains('is-active')) {\n\t\t\t\tcurrentOpenIndex = index\n\t\t\t}\n\t\t})\n\t\tif (this.deltaY > 0 && currentOpenIndex !== this.lookProductsList.length -1 && !this.didMove) {\n\t\t\tthis.scrollToElement(currentOpenIndex + 1)\n\t\t} else if (this.deltaY < 0 && currentOpenIndex !== 0 && !this.didMove) {\n\t\t\tthis.scrollToElement(currentOpenIndex - 1)\n\t\t}\n\t\tthis.imageZoomContent.removeEventListener('mouseup', this.handleImageEndSliding)\n\t    this.imageZoomContent.removeEventListener('mouseleave', this.handleImageEndSliding)\n\t    this.imageZoomContent.removeEventListener('mousemove', this.handleImageSliding)\n\t    this.imageZoomContent.removeEventListener('touchmove', this.handleImageSliding)\n\t    this.imageZoomContent.removeEventListener('touchend', this.handleImageEndSliding)\n\t}\n\n\tscrollToElement(index) {\n\t\tconst MIN_GAP = 5\n\t\tconst currentOpenProduct = select('.look-detail-product__item.is-active')\n\t\tconst productContent = select('.look-detail-product__content', this.lookProductsList[index])\n\t\tconst minY = productContent.dataset.min ? productContent.dataset.min : ''\n\t\tlet maxScrollTop = this.lookMainImg.offsetHeight - (window.innerHeight - productContent.offsetHeight)\n\t\t// checking the last product\n        if ((parseInt(index)+1) === this.pageControlDots.length) {\n          maxScrollTop = maxScrollTop + this.lastProductDelta\n        }\n\t\tconst scrollPosition = parseFloat(minY) * maxScrollTop / 100 + MIN_GAP\n\t\tthis.didMove = true\n\t\tTweenLite.to(this.imageZoomContent, 1, {\n\t\t  scrollTop: scrollPosition,\n\t\t  ease: Quad.easeInOut\n\t    })\n\t\tthis.updateMobileProductCard(this.lookProductsList[index], currentOpenProduct, index)\n\t}\n\n\tscrollToProduct(event) {\n\t\tconst MIN_GAP = 5\n\t\tconst MAX_GAP = MIN_GAP * 2\n\t\tconst productIdClicked = event.target ? event.target.dataset.sectionid : ''\n\t\tconst productIndex = event.target ? event.target.parentElement.dataset.number : ''\n\t\tconst productListEl = select('#'+productIdClicked)\n\t\tconst currentOpenProduct = select('.look-detail-product__item.is-active')\n\t\tif (productListEl !== null && productListEl !== currentOpenProduct) {\n\t\t\tconst productContent = select('.look-detail-product__content', productListEl)\n\t\t\tconst productTitle = select('.look-detail-product__title', productListEl)\n\t\t\tconst minY = productContent.dataset.min ? productContent.dataset.min : ''\n\t\t\tif (minY !== '') {\n\t\t\t  let maxScrollTop = this.lookMainImg.offsetHeight - (window.innerHeight - productContent.offsetHeight)\n              // checking the last product\n              if ((parseInt(productIndex)+1) === this.pageControlDots.length) {\n                maxScrollTop = maxScrollTop + this.lastProductDelta\n              }\n\t\t\t  const scrollPosition = parseFloat(minY) * maxScrollTop / 100 + MIN_GAP\n\t\t\t  this.controlDotsClicked = true\n\t\t\t  TweenLite.to(this.imageZoomContent, 1, {\n\t\t\t      scrollTop: scrollPosition,\n\t\t\t      ease: Quad.easeInOut,\n\t\t\t      onComplete: () => {\n\t\t\t    \tsetTimeout(() => {\n\t\t\t    \t\tthis.controlDotsClicked = false\n\t\t\t    \t\tfocusElement(productTitle)\n\t\t\t\t}, 500)\n\t\t\t      }\n\t\t\t    })\n\t\t\t    this.updateMobileProductCard(this.lookProductsList[productIndex], currentOpenProduct, productIndex)\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateMobileProductCard(productToExpand, currentOpenProduct, lookIndexToExpand) {\n\t\tconst BORDER_GAP = 10\n\t\tconst paddingTop = 27\n\t\tlet productWrapperHeight = this.productDetailsContainer.offsetHeight\n\t\tlet totalProductTranform = 0\n\t\tcurrentOpenProduct.classList.remove('is-active')\n\t\tproductToExpand.classList.add('is-active')\n\t\tthis.activeTitle = select('.is-active .look-detail-product__title', this.popinEl)\n\t    this.activeDesc = select('.is-active .look-detail-product__description', this.popinEl)\n\t    this.activeref = select('.is-active .look-detail-product__ref', this.popinEl)\n\t\tconst mobileIconWrapper = select('.mobile-icon-wrapper', this.productSectionWrapper)\n\t\tmobileIconWrapper.style.height = this.activeTitle.offsetHeight + this.activeref.offsetHeight + (this.activeDesc !== null ? this.activeDesc.offsetHeight : 0) + paddingTop + 'px'\n\t\tthis.pageControlList.style.height = (window.innerHeight - productToExpand.offsetHeight + BORDER_GAP) + 'px'\n\t\tthis.imageZoomContent.style.height = (window.innerHeight - productToExpand.offsetHeight + BORDER_GAP) + 'px'\n\t\tTweenLite.set(this.productDetailsContainer, { yPercent: `${(productWrapperHeight - productToExpand.offsetHeight) / productWrapperHeight* 100}%`})\n\t\tthis.lookProductsList.every((elem) => {\n\t\t\tif (elem.classList.contains('is-active')) {\n\t\t\t  return false\n\t\t\t} else {\n\t\t\t  totalProductTranform = totalProductTranform + elem.offsetHeight\n\t\t\t  return true\n\t\t\t}\n\t\t})\n\t\tthis.currentOpenProduct = productToExpand\n\t\tthis.currentTransformValue = totalProductTranform\n\t\tTweenLite.set(this.productListContent, { y: `-${totalProductTranform}px`})\n\t\tthis.updateScrollDots(lookIndexToExpand)\n\t}\n\n\tupdateScrollDots = (activeIndex) => {\n\t  if (this.pageControlDots) {\n\t\tthis.pageControlDots.forEach((bulletEl, index) => {\n\t\t  if (bulletEl.classList.contains('is-active') && index !== activeIndex) {\n\t\t\tbulletEl.classList.remove('is-active')\n\t\t\tbulletEl.querySelector('button').removeAttribute('aria-current')\n\t\t  } else if (activeIndex == index) {\n\t\t    bulletEl.classList.add('is-active')\n\t\t    bulletEl.querySelector('button').setAttribute('aria-current', true)\n\t\t  }\n\t\t})\n\t  }\n\t}\n\n\tcloseLookPopin() {\n\t  document.body.classList.remove('has-modal')\n\t  this.popinEl.parentNode.removeChild(this.popinEl)\n\t  window.document.DLKit.push('on-tracking', {\n\t\tevent: 'uaevent',\n\t\teventAction: 'close',\n\t\teventLabel: this.lookDetails.lookCode ? this.lookDetails.lookCode : '',\n\t\teventCategory: 'pdp_look_popin'\n\t  })\n\t}\n\n\texpandClickedProduct(evt) {\n\tif (evt.type == 'click' || (evt.type == 'keyup' && (evt.which === 13 || evt.which === 32 ))) {\n\t  if (evt.currentTarget.getAttribute('aria-expanded') == \"false\") {\n\t\tlet productToExpand = this.lookProductsList[evt.currentTarget.id.split('-')[2]]\n\t\tthis.openedProductName = evt.currentTarget.innerText ? evt.currentTarget.innerText : ''\n\t\tthis.productSectionClicked = true\n\t\tthis.collapseAllPanels()\n\t\tthis.expandCurrentPanel(productToExpand, evt.currentTarget)\n\t\tthis.animateImage(productToExpand)\n\t\tthis.sectionOpenDataLayer()\n\t  }\n\t}\n  }\n\n  collapseAllPanels() {\n\tthis.lookProductsList.forEach((elem) => {\n\t  let lookExpandBtn = select('.look-detail-product__expand', elem)\n\t  if (lookExpandBtn.getAttribute('aria-expanded') === \"true\") {\n\t\tlet lookDetailsCollapse = select('.look-detail-product__details',elem)\n\t\tlookExpandBtn.setAttribute('aria-expanded', false)\n\t\tlookDetailsCollapse.classList.remove('look-detail-product__details--enabled')\n\t\tselect('.look-detail-product__title',elem).classList.remove('look-detail-product__title--active')\n\t\tTweenLite.to(lookDetailsCollapse, 0, {\n\t\t  display: 'none',\n\t\t  overflowY: 'hidden',\n\t\t  height:0,\n\t\t  paddingTop:0\n\t\t})\n\t\tlookExpandBtn.removeAttribute('aria-disabled')\n\t\tselect('.icon-wrapper',elem).style.display = \"block\"\n\t  }\n\t})\n  }\n\n  expandCurrentPanel(productToExpand, clickedSpan) {\n\tlet lookDetailsToExpand = select('.look-detail-product__details',productToExpand)\n\tclickedSpan.setAttribute('aria-expanded', true)\n\tlookDetailsToExpand.classList.add('look-detail-product__details--enabled')\n\tselect('.look-detail-product__title',productToExpand).classList.add('look-detail-product__title--active')\n\tTweenLite.to(lookDetailsToExpand, 1, {\n\t  display: 'block',\n\t  overflowY: 'visible',\n\t  height:'auto',\n\t  onComplete: () => {\n\t\tlet scrollProductSection = 0\n\t\t  if (productToExpand.getBoundingClientRect().top < 0) {\n\t\t    scrollProductSection = this.productWrapperDiv.scrollTop - Math.abs(productToExpand.getBoundingClientRect().top) - parseInt(window.getComputedStyle(productToExpand).marginBottom)\n\t\t    this.productWrapperDiv.scrollTo(0, scrollProductSection)\n\t\t  } else if (productToExpand.getBoundingClientRect().bottom > this.productWrapperDiv.offsetHeight) {\n\t\t\t  scrollProductSection = productToExpand.getBoundingClientRect().bottom\n\t\t\t  this.productWrapperDiv.scrollTo(0, scrollProductSection)\n\t\t  }\n\t  }\n\t})\n\tclickedSpan.setAttribute('aria-disabled', true)\n\tselect('.icon-wrapper',productToExpand).style.display = \"none\"\n  }\n\n  animateImage(productWrapper) {\n\tconst lookItem = select('.look-detail-product__content',productWrapper)\n\tconst lookSpan = select('.look-detail-product__expand', productWrapper)\n\tconst lookItemMin = lookItem.dataset.min ? parseFloat(lookItem.dataset.min) : 0\n\tconst lookItemMax = lookItem.dataset.max ? parseFloat(lookItem.dataset.max) : 0\n\tconst lookItemScrollCoef = lookItemMin + (lookItemMax - lookItemMin) / 2\n\tconst maxScrollTop = this.lookMainImg.offsetHeight - window.innerHeight\n\tlet scrollPosition\n\tif (this.lookProductsList.length == parseInt(lookSpan.id.split('-')[2]) + 1) {\n\t\tscrollPosition = Math.abs(lookItemMax * (maxScrollTop / 100))\n\t} else {\n\t\tscrollPosition = Math.abs(lookItemScrollCoef * (maxScrollTop / 100))\n\t}\n\tTweenLite.to(this.popinCol, 0.5, {\n      scrollTop: scrollPosition,\n      ease: Quad.easeInOut\n    })\n  }\n\n  onImageScroll(event) {\n    const currentScrollPosition = this.popinCol.scrollTop\n\tconst maxScrollTop = this.lookMainImg.offsetHeight - window.innerHeight\n\tconst scrollCoef = currentScrollPosition * 100 / maxScrollTop\n\tlet lookIndexToExpand = 0\n\tthis.lookItemsMinMax.forEach((element,index) => {\n\t  if (scrollCoef > element.min) {\n\t    if (index === this.lookItemsMinMax.length - 1) {\n\t\t  lookIndexToExpand = index\n\t    } else if(scrollCoef < this.lookItemsMinMax[index+1].min) {\n\t\t  lookIndexToExpand = index\n\t    }\n\t  }\n\t})\n\tconst productToExpand = this.lookProductsList[lookIndexToExpand]\n\tconst expandSpanElem = select('.look-detail-product__expand', productToExpand)\n\tif (expandSpanElem.getAttribute('aria-expanded') == \"false\") {\n\t  this.collapseAllPanels()\n\t  this.expandCurrentPanel(productToExpand, expandSpanElem)\n\t}\n  }\n\n  sectionOpenDataLayer() {\n\twindow.document.DLKit.push('on-tracking', {\n\t  event: 'uaevent',\n\t  eventAction: 'display',\n      eventLabel: this.openedProductName,\n\t  eventCategory: 'pdp_look_popin'\n\t})\n  }\n\n  handleSlidingStart = (e) => {\n\t  if (!e.touches) {\n\t    e.preventDefault()\n\t  }\n\te.stopPropagation()\n    this.initialX = e.touches ? e.touches[0].clientX : e.clientX\n    this.initialY = e.touches ? e.touches[0].clientY : e.clientY\n    this.deltaX = 0\n    this.frameHeight = this.productDetailsContainer.offsetHeight\n    if (e.currentTarget.classList.contains('mobile-icon-wrapper')) {\n    \tthis.slidingElement = select('.mobile-icon-wrapper', this.productSectionWrapper)\n    } else {\n    \tthis.slidingElement = this.productDetailsContainer\n    }\n    this.previousYTransform = this.transformY\n    this.initialScrollTop = this.productDetailsContainer.scrollTop\n    this.slidingElement.addEventListener('mouseup', this.handleEndSliding)\n    this.slidingElement.addEventListener('mouseleave', this.handleEndSliding)\n    this.slidingElement.addEventListener('mousemove', this.handleSliding)\n    this.slidingElement.addEventListener('touchmove', this.handleSliding)\n    this.slidingElement.addEventListener('touchend', this.handleEndSliding)\n  }\n\n  handleSliding = (e) => {\n\tif (e.touches) {\n\t  this.deltaX = this.initialX - e.touches[0].clientX\n\t  this.deltaY = this.initialY - e.touches[0].clientY\n\t} else {\n\t  this.deltaX = this.initialX - e.clientX\n\t}\n\tif (this.deltaY > 0 && e.currentTarget.classList.contains('mobile-icon-wrapper')) {\n\t  this.transformY = (((this.deltaY)) / this.frameHeight * 100)\n\t  this.transformY = this.transformPercent - this.transformY\n\t} else if (this.deltaY < 0 && e.currentTarget.classList.contains('look-popin-products__container') && this.productDetailsContainer.scrollTop <= 0) {\n\t\tthis.deltaY = this.deltaY + this.initialScrollTop\n\t\tthis.transformY = (((this.deltaY)) / this.frameHeight * 100)\n\t\tthis.transformY = Math.abs(this.transformY)\n\t\tthis.toggleBackGroundContent('show')\n\t\tthis.toggleLookHeader('hide')\n\t}\n\tif (this.transformY < this.transformPercent && this.transformY > 0) {\n\t  TweenLite.set(this.productListContent, { y: 0})\n\t  TweenLite.set(this.productDetailsContainer, {yPercent: this.transformY})\n\t}\n\tthis.markAllProductActive()\n  }\n\n  handleEndSliding = (e) => {\n\tconst slideDirectionCoef = this.transformY - this.previousYTransform\n\tif (slideDirectionCoef < 0 && Math.abs(slideDirectionCoef) > 15 ) {\n\t  this.showProductDetails()\n\t} else if (slideDirectionCoef > 0 && Math.abs(slideDirectionCoef) > 15 ) {\n\t  this.collapseListPanel()\n\t} else if (Math.abs(slideDirectionCoef) > 0 && Math.abs(slideDirectionCoef) <= 15) {\n\t  TweenLite.set(this.productDetailsContainer, {yPercent: 0})\n\t  this.toggleBackGroundContent('hide')\n\t  this.toggleLookHeader('show')\n\t}\n  }\n\n  showProductDetails = () => {\n\tconst topPanel = select('.collapse-product-panel')\n\tconst mobileIconWrapper = select('.mobile-icon-wrapper', this.productSectionWrapper)\n\tTweenLite.set(this.productListContent, { y: 0})\n\tthis.toggleLookHeader('show')\n\tTweenLite.to(this.productDetailsContainer , 0.5, {\n\t  yPercent: 0,\n\t  overflowY : 'auto',\n\t  onComplete: () => {\n\t\tthis.transformY = 0\n\t\tthis.buttonClose.style.visibility = \"hidden\"\n\t\tthis.navPageControl.style.visibility = \"hidden\"\n\t\tthis.lookMainImg.style.visibility = \"hidden\"\n\t\tthis.slidingElement.removeEventListener('touchstart', this.handleSlidingStart)\n        this.slidingElement.removeEventListener('mousedown', this.handleSlidingStart)\n\t\tthis.slidingElement.removeEventListener('mouseup', this.handleEndSliding)\n        this.slidingElement.removeEventListener('mouseleave', this.handleEndSliding)\n        this.slidingElement.removeEventListener('mousemove', this.handleSliding)\n        this.slidingElement.removeEventListener('touchmove', this.handleSliding)\n        this.slidingElement.removeEventListener('touchend', this.handleEndSliding)\n        this.productDetailsContainer.addEventListener('touchstart', this.handleSlidingStart)\n        this.productDetailsContainer.addEventListener('mousedown', this.handleSlidingStart)\n        mobileIconWrapper.firstElementChild.setAttribute('aria-expanded', true)\n\t\tmobileIconWrapper.style.display = 'none'\n\t\tmobileIconWrapper.firstElementChild.style.display = 'none'\n    this.productDetailsContainer.classList.add('is-expanded')\n        focusElement(topPanel, {notChangeTabIndex: true})\n\t  }\n     })\n\tthis.markAllProductActive()\n  }\n\n  collapseListPanel = () => {\n\tconst mobileIconWrapper = select('.mobile-icon-wrapper', this.productSectionWrapper)\n\tlet productWrapperHeight = this.productDetailsContainer.offsetHeight\n\tlet currentOffset = this.currentOpenProduct ? this.currentOpenProduct.offsetHeight : this.lookProductsList[0].offsetHeight\n\tthis.productDetailsContainer.scrollTop = 0\n\tthis.toggleLookHeader('hide')\n\tTweenLite.set(this.productListContent, { y: `-${this.currentTransformValue}px`})\n\tTweenLite.to(this.productDetailsContainer, 0.5, {\n\t  yPercent: `${(productWrapperHeight - currentOffset) / productWrapperHeight* 100}%`,\n\t  overflowY : 'hidden',\n\t  onComplete: () => {\n\t\tthis.hideProductList()\n\t\tthis.buttonClose.style.visibility = \"visible\"\n\t\tthis.navPageControl.style.visibility = \"visible\"\n\t\tthis.lookMainImg.style.visibility = \"visible\"\n\t\tthis.transformY = (productWrapperHeight - currentOffset) / productWrapperHeight* 100\n\t\tmobileIconWrapper.firstElementChild.style.display = 'block'\n\t\tmobileIconWrapper.addEventListener('touchstart', this.handleSlidingStart)\n        mobileIconWrapper.addEventListener('mousedown', this.handleSlidingStart)\n        mobileIconWrapper.firstElementChild.setAttribute('aria-expanded', false)\n\t\tmobileIconWrapper.style.display = 'block'\n    this.productDetailsContainer.classList.remove('is-expanded')\n        focusElement(mobileIconWrapper.firstElementChild, {notChangeTabIndex: true})\n\t  }\n    })\n  }\n\n  toggleBackGroundContent(status) {\n\t  if (status == 'hide') {\n\t\t  this.buttonClose.style.visibility = \"hidden\"\n\t\t  this.navPageControl.style.visibility = \"hidden\"\n\t\t  this.lookMainImg.style.visibility = \"hidden\"\n\t  } else if (status == 'show') {\n\t\t  this.buttonClose.style.visibility = \"visible\"\n\t\t  this.navPageControl.style.visibility = \"visible\"\n\t\t  this.lookMainImg.style.visibility = \"visible\"\n\t  }\n  }\n\n  toggleLookHeader(status) {\n\t  const topPanel = select('.collapse-product-panel')\n\t  if (status == 'show') {\n\t\tTweenLite.to(this.listCollapseHeader, 0.5, {\n\t\t\ty: 0,\n\t\t\tdisplay: 'block',\n\t\t\tonComplete: () => {\n\t\t\t\ttopPanel.setAttribute('aria-expanded', true)\n\t\t\t    topPanel.firstElementChild.classList.remove('is-sr-only')\n\t\t\t}\n\t\t})\n\t  } else if (status == 'hide') {\n\t\tTweenLite.to(this.listCollapseHeader, 0.5, {\n\t\t\ty: `-${this.listCollapseHeader.offsetHeight}px`,\n\t\t\tdisplay: 'none',\n\t\t\tonComplete: () => {\n\t\t\t\ttopPanel.setAttribute('aria-expanded', true)\n\t\t\t    topPanel.firstElementChild.classList.remove('is-sr-only')\n\t\t\t}\n\t\t})\n\t  }\n  }\n\n  markAllProductActive() {\n\tif (this.lookProductsList.length > 0) {\n\t  this.lookProductsList.forEach((elem) => {\n\t\telem.classList.add('is-active')\n\t  })\n\t}\n  }\n\n  hideProductList() {\n\tif (this.lookProductsList.length > 0) {\n\t  this.lookProductsList.forEach((elem) => {\n\t\tif(this.currentOpenProduct !== null && this.currentOpenProduct.id !== elem.id) {\n\t\t  elem.classList.remove('is-active')\n\t\t}\n\t  })\n\t}\n  }\n}\n\n\nconst init = () => {\n\tconst lookDetailsModal = new ViewDetailsModal()\n\tlookDetailsModal.init().then(() => {\n\t\tlookDetailsModal.open()\n\t})\n}\n\nexport default init\n"],"sourceRoot":""}