(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1074:function(t,e,o){"use strict";o.r(e),o.d(e,"default",(function(){return S}));o(14);var i=o(17),s=o.n(i),a=o(41),l=o.n(a),n=(o(7),o(100),o(134),o(8)),r=o(2),c=o(1),d=o(50),h=o(0),p=o(197),u=o(98),m=o(4),g=o.n(m),k=o(201),b=o(6),v=o(5),L=o(3),f=o(69);function w(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class y{constructor(t){w(this,"updateScrollDots",t=>{this.pageControlDots&&this.pageControlDots.forEach((e,o)=>{e.classList.contains("is-active")&&o!==t?(e.classList.remove("is-active"),e.querySelector("button").removeAttribute("aria-current")):t==o&&(e.classList.add("is-active"),e.querySelector("button").setAttribute("aria-current",!0))})}),w(this,"handleSlidingStart",t=>{t.touches||t.preventDefault(),t.stopPropagation(),this.initialX=t.touches?t.touches[0].clientX:t.clientX,this.initialY=t.touches?t.touches[0].clientY:t.clientY,this.deltaX=0,this.frameHeight=this.productDetailsContainer.offsetHeight,t.currentTarget.classList.contains("mobile-icon-wrapper")?this.slidingElement=Object(h.select)(".mobile-icon-wrapper",this.productSectionWrapper):this.slidingElement=this.productDetailsContainer,this.previousYTransform=this.transformY,this.initialScrollTop=this.productDetailsContainer.scrollTop,this.slidingElement.addEventListener("mouseup",this.handleEndSliding),this.slidingElement.addEventListener("mouseleave",this.handleEndSliding),this.slidingElement.addEventListener("mousemove",this.handleSliding),this.slidingElement.addEventListener("touchmove",this.handleSliding),this.slidingElement.addEventListener("touchend",this.handleEndSliding)}),w(this,"handleSliding",t=>{t.touches?(this.deltaX=this.initialX-t.touches[0].clientX,this.deltaY=this.initialY-t.touches[0].clientY):this.deltaX=this.initialX-t.clientX,this.deltaY>0&&t.currentTarget.classList.contains("mobile-icon-wrapper")?(this.transformY=this.deltaY/this.frameHeight*100,this.transformY=this.transformPercent-this.transformY):this.deltaY<0&&t.currentTarget.classList.contains("look-popin-products__container")&&this.productDetailsContainer.scrollTop<=0&&(this.deltaY=this.deltaY+this.initialScrollTop,this.transformY=this.deltaY/this.frameHeight*100,this.transformY=Math.abs(this.transformY),this.toggleBackGroundContent("show"),this.toggleLookHeader("hide")),this.transformY<this.transformPercent&&this.transformY>0&&(TweenLite.set(this.productListContent,{y:0}),TweenLite.set(this.productDetailsContainer,{yPercent:this.transformY})),this.markAllProductActive()}),w(this,"handleEndSliding",t=>{const e=this.transformY-this.previousYTransform;e<0&&Math.abs(e)>15?this.showProductDetails():e>0&&Math.abs(e)>15?this.collapseListPanel():Math.abs(e)>0&&Math.abs(e)<=15&&(TweenLite.set(this.productDetailsContainer,{yPercent:0}),this.toggleBackGroundContent("hide"),this.toggleLookHeader("show"))}),w(this,"showProductDetails",()=>{const t=Object(h.select)(".collapse-product-panel"),e=Object(h.select)(".mobile-icon-wrapper",this.productSectionWrapper);TweenLite.set(this.productListContent,{y:0}),this.toggleLookHeader("show"),TweenLite.to(this.productDetailsContainer,.5,{yPercent:0,overflowY:"auto",onComplete:()=>{this.transformY=0,this.buttonClose.style.visibility="hidden",this.navPageControl.style.visibility="hidden",this.lookMainImg.style.visibility="hidden",this.slidingElement.removeEventListener("touchstart",this.handleSlidingStart),this.slidingElement.removeEventListener("mousedown",this.handleSlidingStart),this.slidingElement.removeEventListener("mouseup",this.handleEndSliding),this.slidingElement.removeEventListener("mouseleave",this.handleEndSliding),this.slidingElement.removeEventListener("mousemove",this.handleSliding),this.slidingElement.removeEventListener("touchmove",this.handleSliding),this.slidingElement.removeEventListener("touchend",this.handleEndSliding),this.productDetailsContainer.addEventListener("touchstart",this.handleSlidingStart),this.productDetailsContainer.addEventListener("mousedown",this.handleSlidingStart),e.firstElementChild.setAttribute("aria-expanded",!0),e.style.display="none",e.firstElementChild.style.display="none",this.productDetailsContainer.classList.add("is-expanded"),Object(r.m)(t,{notChangeTabIndex:!0})}}),this.markAllProductActive()}),w(this,"collapseListPanel",()=>{const t=Object(h.select)(".mobile-icon-wrapper",this.productSectionWrapper);let e=this.productDetailsContainer.offsetHeight,o=this.currentOpenProduct?this.currentOpenProduct.offsetHeight:this.lookProductsList[0].offsetHeight;this.productDetailsContainer.scrollTop=0,this.toggleLookHeader("hide"),TweenLite.set(this.productListContent,{y:"-".concat(this.currentTransformValue,"px")}),TweenLite.to(this.productDetailsContainer,.5,{yPercent:"".concat((e-o)/e*100,"%"),overflowY:"hidden",onComplete:()=>{this.hideProductList(),this.buttonClose.style.visibility="visible",this.navPageControl.style.visibility="visible",this.lookMainImg.style.visibility="visible",this.transformY=(e-o)/e*100,t.firstElementChild.style.display="block",t.addEventListener("touchstart",this.handleSlidingStart),t.addEventListener("mousedown",this.handleSlidingStart),t.firstElementChild.setAttribute("aria-expanded",!1),t.style.display="block",this.productDetailsContainer.classList.remove("is-expanded"),Object(r.m)(t.firstElementChild,{notChangeTabIndex:!0})}})}),this.el=t,this.popinCol=null,this.buttonOpener=null,this.data=null,this.mainImgData=null,this.referenceProducts=null,this.imageData=null,this.lookDetails=null,this.lookCategory=null,this.expandDetailsBtn=null,this.lookProductsList=null,this.showDisclaimerText=!1,this.openedProductName=null,this.pageControlDots=null,this.productWrapperDiv=null,this.pageControlWrapper=null,this.lookImageContainer=null,this.navPageControl=null,this.productDetailsContainer=null,this.productListContent=null,this.productSectionWrapper=null,this.lookMainImg=null,this.imageZoomContent=null,this.lookItems=null,this.lookItemsMinMax=null,this.productSectionClicked=!1,this.scrollPosition=null,this.controlDotsClicked=!1,this.modalBackground=null,this.mobileScrollTimer=null,this.initialX=0,this.initialY=0,this.didMove=!1,this.currentOpenProduct=null,this.currentTransformValue=0,this.transformPercent=0,this.deltaX=0,this.deltaY=0,this.frameHeight=0,this.transformY=0,this.triggeredMention=null,this.activeTitle=null,this.activeDesc=null,this.activeref=null,this.listCollapseHeader=null,this.slidingElement=null,this.previousYTransform=null,this.initialScrollTop=null,this.lastProductDelta=60}async init(){c.C.unsubscribe(c.i),this.buttonOpener=Object(h.select)(".js-view-detail-modal"),this.packshotDefault=Object(h.select)("*#look-details-0 img"),this.lookDetails=JSON.parse(this.buttonOpener.dataset.code),this.lookCategory=this.lookDetails.lookCategory,this.viewDetailsClicked(),this.data=await v.get(L.a.popinLookPDP.lookDataUrl.replace("{0}",this.lookDetails.lookCode)),this.data&&null!==this.data&&(this.mainImgDataUrl=this.packshotDefault?this.packshotDefault.src:"",this.referenceProducts=this.data.referenceProducts,this.referenceProducts.forEach(t=>{null!==t.geoAsset&&void 0!==t.geoAsset.positions&&0!==t.geoAsset.positions.length&&(t.calculatedGeo=this.minYPosition(t.geoAsset))}),this.referenceProducts.sort((t,e)=>{if(null!==t.geoAsset&&null!==e.geoAsset)return t.calculatedGeo<e.calculatedGeo?-1:1;if(null!==t.zoomAnimationData&&null!==e.zoomAnimationData){return parseFloat(t.zoomAnimationData.min)+(parseFloat(t.zoomAnimationData.max)-parseFloat(t.zoomAnimationData.min))/2<parseFloat(e.zoomAnimationData.min)+(parseFloat(e.zoomAnimationData.max)-parseFloat(e.zoomAnimationData.min))/2?-1:1}}),this.imageAltText=null!==this.data.lookImage.altTextLocalized?this.data.lookImage.altTextLocalized:"",this.buildTemplate())}minYPosition(t){if(t.positions.length>0){let e,o=t.positions[0].y,i=t.positions[0].y;return t.positions.forEach(t=>{i=t.y>i?t.y:i,o=t.y<o?t.y:o}),e=Math.abs(o-50)+(Math.abs(i-50)-Math.abs(o-50))/2,e}return!1}open(){b.a.open({html:this.template,role:"dialog",modifiers:"is-relative look-popin",opener:null,modal:!0,label:L.a.popinLookPDP.modalLabel,forceInert:!0,manageFocus:!0,outerClose:!0}).then(()=>{this.onOpenPopin()})}viewDetailsClicked(){window.document.DLKit.push("when-user-interact-with-product-page",{eventLabel:"",eventAction:"view details"})}buildTemplate(){this.template='\n\t\t  <div class="popin-text text-center look-popin__content" data-close-label="'.concat(window.config.popinLookPDP.closeLabel,'">\n\t\t    <div class="look-popin__heading">\n\t\t      <div class="look-popin-details__container look-popin-image__container">\n\t\t        <div class="look-popin-zoom__wrapper">\n\t\t          <div class="look-popin-zoom__content">\n\t\t            <div class="look-popin-zoom__image">\n\t\t              <img alt="')+this.imageAltText+'" src="'+this.mainImgDataUrl+'" class="look-popin__mainImg" />\n\t\t            </div>\n\t\t          </div>\n\t\t        </div>\n\t\t      </div>'+this.mobileNavDotTemplate()+'<div class="look-popin-details__list">\n\t\t        <div class="look-popin-list__header is-hidden-l">\n\t\t          <p class="heading" role="heading" aria-level="1">\n\t\t            <span class="collapse-product-panel js-collapse-list" role="button" tabindex="0" aria-expanded="false">\n\t\t              <span class="is-sr-only list-title">'.concat(window.config.popinLookPDP.modalLabel,'</span>\n\t\t              <span class="is-sr-only"> â€“ ')+this.lookDetails.lookCategory+'</span>\n\t\t              <span class="down-icon-container">\n\t\t                <svg class="icon is-large is-down-mediumThin" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n\t\t                  <use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg#down-mediumThin"/>\n\t\t                </svg>\n\t\t              </span>\n\t\t            </span>\n\t\t          </p>\n\t\t        </div>\n\t\t        <div class="look-popin-details__container look-popin-products__container">\n\t\t          <div class="look-popin-product__position center-aligned">\n\t\t            <div class="look-popin-product__wrapper">\n\t\t              <div class="look-popin-product__content">\n\t\t                <p role="heading" aria-level="1" class="is-sr-only">\n\t\t                  <span>\n\t\t                    <span>'.concat(window.config.popinLookPDP.modalLabel,"</span>\n\t\t                    <span> â€“ ")+this.lookDetails.lookCategory+"</span>\n\t\t                  </span>\n\t\t                </p>"+this.productListTemplate()+"</div>"+this.disclaimerTemplate()+"</div>\n\t\t          </div>\n\t\t      </div>\n\t\t    </div>\n\t\t  </div>\n\t\t  </div>\n\t\t  "}mobileNavDotTemplate(){let t="";if(this.referenceProducts.length>0){t='<div class="look-popin__controls">\n\t\t\t<nav role="navigation" aria-label="'.concat(window.config.popinLookPDP.modalLabel," - ")+this.lookCategory+'">\n\t\t    <ul class="page-control js-page-control">';for(let e=0;e<this.referenceProducts.length;e++)t=t+'<li data-number="'+e+'">\n\t\t\t      <button type="button" class="look-page__control-btn js-product-navigation" data-sectionId="look-details-card_'+this.referenceProducts[e].code+'">\n\t\t\t        <span class="is-sr-only">'+this.referenceProducts[e].name+" - ".concat(window.config.popinLookPDP.modalLabel,"</span>\n\t\t\t      </button>\n\t\t\t\t</li>");t+="</ul></nav></div>"}return t}disclaimerTemplate(){let t="";return this.showDisclaimerText&&(t+='\n\t\t\t<div id="disclaimer-text" class="disclaimer js-disclaimer disclaimer-display">\n\t\t\t  <div class="disclaimer-container">\n\t\t        <p id="disclaimer-back-content" tabindex="-1">\n\t\t          <a id="js-disclaimer-back-to-target" class="disclaimer__back" aria-label="'.concat(window.config.popinLookPDP.disclaimerAlly,'" href="#">â†©</a>\n\t            </p>\n\t            <p class="content">\n\t              ').concat(window.config.popinLookPDP.disclaimerText1,'\n\t             <a target="_blank" class="link is-underline is-gray is-paddingLeft"\n\t\t\t       title="').concat(window.config.popinLookPDP.disclaimerTitle,'" rel="nofollow"\n\t\t\t       href="').concat(window.config.popinLookPDP.policyURL,'">\n\t\t\t       <span>').concat(window.config.popinLookPDP.disclaimerText2,"</span>\n\t\t         </a>\n\t           </p>\n\t\t     </div>\n\t\t   </div>\n\t\t   ")),t}productListTemplate(){let t="";if(this.referenceProducts.length>0){t='<div class="look-detail-list__content">\n\t\t<ul class="look-detail-product__list">';for(let e=0;e<this.referenceProducts.length;e++)t=t+'<li class="look-detail-product__item" id="look-details-card_'+this.referenceProducts[e].code+'">\n\t\t    <div class="look-detail-product__content" data-max="0" data-min="0">\n\t\t      <p class="heading look-detail-product__title" role="heading" aria-level="2" tabindex="-1">\n\t\t        <span class="look-detail-product__expand js-expand-look-details" id="look-product-'+e+'" role="button" tabindex="0" aria-expanded='+!1+">\n\t\t     \t  "+this.referenceProducts[e].name+'\n\t\t     \t  <span class="icon-wrapper">\n\t\t     \t    <svg class="icon is-small is-next" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n\t\t              <use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg#next"/>\n\t\t            </svg>\n\t\t     \t  </span>\n\t\t     \t</span>\n\t\t      </p>\n\t\t     <div class="look-detail-product__details">\n\t\t         '+this.productDescriptionText(this.referenceProducts[e])+"\n\t\t         "+this.productRefText(this.referenceProducts[e])+"\n\t\t         "+this.productPriceText(this.referenceProducts[e],e)+"\n\t\t         "+this.detailBtnTemplate(this.referenceProducts[e])+"\n\t\t     </div>\n\t\t   </div>\n\t\t </li>";t+="</ul></div>"}return t}productDescriptionText(t){if(null!==t.fabricGrp&&null!==t.colorGrp){if(""!==t.fabricGrp.name&&""!==t.colorGrp.name)return'<p class="look-detail-product__description">'+t.fabricGrp.name+"<br>"+t.colorGrp.name+"</p>";if(""===t.fabricGrp.name&&""!==t.colorGrp.name)return'<p class="look-detail-product__description">'+t.colorGrp.name+"</p>";if(""!==t.fabricGrp.name&&""===t.colorGrp.name)return'<p class="look-detail-product__description">'+t.fabricGrp.name+"</p>"}else if(null===t.fabricGrp&&null!==t.colorGrp||null!==t.fabricGrp&&null===t.colorGrp){let e=null===t.fabricGrp?t.colorGrp:t.fabricGrp;if(""!==e.name)return'<p class="look-detail-product__description">'+e.name+"</p>"}return""}productRefText(t){return""!=t.manufacturerAID?'<p class="look-detail-product__ref">'+t.manufacturerAID+" "+t.refFshCode+"</p>":'<p class="look-detail-product__ref">'+t.refFshCode+"</p>"}productPriceText(t,e){if(t.priceMention){let o=null!==t.price&&t.displayPrice&&!t.isPriceUnderRequest?t.price.formattedValue:"";return""!==o?(t.sellableOnline||""===o||(this.showDisclaimerText=!0,o=o+'<a class="disclaimer-indicator look-detail-product__asterisk" data-test="lblDisclaimerIndicator" href="#disclaimer-text" aria-label="'+L.a.popinLookPDP.priceInfoAriaLabel+'" data-index="'+e+'">*</a>'),'<p class="heading look-detail-product__price">'+o+"</p>"):'<p class="look-detail-product__price">'+L.a.popinLookPDP.priceOnRequest+"</p>"}return""}detailBtnTemplate(t){const e=L.a.currentLocale.replace(/\//g,"");return""===t.nonWebSelection||t.nonWebSelection||""===t.nonCommunication||t.nonCommunication||!(""==t.availableToCurrentUser||""!==t.availableToCurrentUser&&t.availableToCurrentUser)?"":'\n\t\t\t  <p class="product-description__cta">\n\t\t\t    <a href=/'+e+t.url+' class="link has-icon is-right is-gray js-view-details" aria-label ="'+L.a.popinLookPDP.viewDetailLabel.replace("{0}",t.name)+'">\n\t\t\t      <span>\n\t\t\t        <span>'.concat(window.config.popinLookPDP.viewProductDetailsCta,'</span>\n\t\t\t        <svg class="icon is-small is-next" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n                      <use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg#next"/>\n                    </svg>\n\t\t\t      </span>\n\t\t\t    </a>\n\t\t\t  </p>\n\t\t\t')}onOpenPopin(){this.setDomElement(),this.setInitialTemplate(),Object(h.select)(".disclaimer-indicator")&&Object(f.a)(),this.setPositionValue(),this.lookItemsMinMax=this.lookItems.length>0?Array.from(this.lookItems).map(t=>({min:parseFloat(t.dataset.min),max:parseFloat(t.dataset.max)})):[],c.C.subscribe(c.i,this.setInitialTemplate.bind(this))}setDomElement(){this.popinEl=Object(h.select)(".look-popin"),this.popinCol=Object(h.select)(".popin__col",this.popinEl),this.buttonClose=Object(h.select)("button.popin__close",this.popinEl),this.expandDetailsBtn=Object(h.getCollection)(".js-expand-look-details"),this.lookProductsList=Object(h.getCollection)(".look-detail-product__item"),this.pageControlWrapper=Object(h.select)(".look-popin__controls",this.popinEl),this.buttonClose&&this.buttonClose.addEventListener("click",this.closeLookPopin.bind(this)),this.viewDetailsCta=Object(h.getCollection)(".js-view-details",this.popinEl),this.backToTarget=Object(h.select)("#js-disclaimer-back-to-target",this.popinEl),this.productWrapperDiv=Object(h.select)(".look-popin-product__position",this.popinEl),this.productDetailsContainer=Object(h.select)(".look-popin-products__container",this.popinEl),this.productSectionWrapper=Object(h.select)(".look-popin-product__content",this.popinEl),this.productListContent=Object(h.select)(".look-detail-list__content",this.popinEl),this.imageZoomContent=Object(h.select)(".look-popin-zoom__content",this.popinEl),this.pageControlList=Object(h.select)(".js-page-control",this.popinEl),this.navPageControl=Object(h.select)(".look-popin__controls nav",this.popinEl),this.pageControlDots=Object(h.getCollection)(".js-page-control li",this.popinEl),this.lookMainImg=Object(h.select)(".look-popin-zoom__image img",this.popinEl),this.lookItems=Object(h.getCollection)(".look-detail-product__content",this.popinEl),this.modalBackground=Object(h.select)(".popin__background"),this.modalBackground&&this.modalBackground.parentNode.removeChild(this.modalBackground),this.backToTarget&&this.backToTarget.addEventListener("click",this.focusToTarget.bind(this)),this.viewDetailsCta.forEach(t=>{t.addEventListener("click",this.viewProductDetails.bind(this))}),this.lookProductsList.forEach(t=>{null!==Object(h.select)(".product-description__cta",t)&&Object(h.select)(".look-detail-product__ref",t).classList.add("is-sr-only")})}setInitialTemplate(){if(Object(r.Q)()||Object(r.T)())this.transformMobileProductCard();else{this.transformProductSection(),this.expandFirstProduct();let t=null;this.popinCol.addEventListener("scroll",()=>{null!==t&&clearTimeout(t),t=setTimeout(()=>{this.productSectionClicked?this.productSectionClicked=!1:this.onImageScroll()},250)},!1),this.expandDetailsBtn.forEach(t=>{t.addEventListener("click",this.expandClickedProduct.bind(this)),t.addEventListener("keyup",this.expandClickedProduct.bind(this))})}}setPositionValue(){for(let t=0;t<this.referenceProducts.length;t++){const e=this.referenceProducts[t].geoAsset?this.referenceProducts[t].geoAsset.positions:"",o=Object(h.select)("#look-details-card_"+this.referenceProducts[t].code+" div");this.lookMainImg.offsetHeight,window.innerHeight;let i=0,s=0;if(e&&e.length>0){const t=50;i=e[0].y,s=e[0].y,e.forEach(t=>{s=t.y>s?t.y:s,i=t.y<i?t.y:i}),o.setAttribute("data-max",Math.abs(parseFloat(i)-t)),o.setAttribute("data-min",Math.abs(parseFloat(s)-t))}else null!==this.referenceProducts[t].zoomAnimationData&&(i=this.referenceProducts[t].zoomAnimationData.min,s=this.referenceProducts[t].zoomAnimationData.max,o.setAttribute("data-max",parseFloat(s)),o.setAttribute("data-min",parseFloat(i)))}}focusToTarget(){const t=Object(h.select)(".look-detail-product__details--enabled"),e=Object(r.P)()?this.triggeredMention:Object(h.select)(".disclaimer-indicator",t);e&&Object(r.m)(e)}viewProductDetails(t){window.document.DLKit.push("on-tracking",{event:"uaevent",eventAction:"view details",eventLabel:this.openedProductName,eventCategory:"pdp_look_popin"})}transformProductSection(){if(this.productSectionWrapper){const t=Object(h.select)(".mobile-icon-wrapper",this.productSectionWrapper);if(null!==t&&""!==t&&(t.classList.remove("mobile-icon-wrapper"),t.classList.add("is-sr-only"),Array.from(t.children).length>0)){const e=Array.from(t.children)[0];e.removeAttribute("role"),e.removeAttribute("tabindex"),e.removeAttribute("aria-expanded"),Array.from(e.children).forEach(t=>t.classList.remove("is-sr-only"))}}this.lookProductsList.length>0&&this.lookProductsList.forEach(t=>{let e=Object(h.select)(".look-detail-product__expand",t);e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.setAttribute("aria-expanded","false")})}expandFirstProduct(){if(this.lookProductsList.length>0){const t=Object(h.select)(".look-detail-product__details",this.lookProductsList[0]),e=Object(h.select)(".look-detail-product__expand",this.lookProductsList[0]);this.openedProductName=e.innerText?e.innerText:"",t.classList.add("look-detail-product__details--enabled"),Object(h.select)(".look-detail-product__title",this.lookProductsList[0]).classList.add("look-detail-product__title--active"),TweenLite.to(t,.2,{display:"block",overflowY:"visible",height:"auto",paddingTop:"5px",onComplete:()=>{if(""!==this.productWrapperDiv&&null!==this.productWrapperDiv){this.productWrapperDiv.offsetHeight>window.innerHeight&&TweenLite.to(this.productWrapperDiv,.1,{css:{height:"100%"}})}}}),e.setAttribute("aria-expanded",!0),e.setAttribute("aria-disabled",!0),Object(h.select)(".icon-wrapper",this.lookProductsList[0]).style.display="none"}}transformMobileProductCard(){const t=Object(h.getCollection)(".disclaimer-indicator");if(this.lookProductsList.length>0){let t=this.productDetailsContainer.offsetHeight;this.lookProductsList.forEach((e,o)=>{let i=Object(h.select)(".look-detail-product__expand",e);0==o&&(this.transformPercent=(t-e.offsetHeight)/t*100,e.classList.add("is-active"),this.pageControlList.style.height=window.innerHeight-e.offsetHeight+10+"px",this.imageZoomContent.style.height=window.innerHeight-e.offsetHeight+10+"px",TweenLite.set(this.productDetailsContainer,{y:"".concat((t-e.offsetHeight)/t*100,"%")}),TweenLite.set(this.productListContent,{y:0})),i.setAttribute("role","presentation"),i.removeAttribute("tabindex"),i.removeAttribute("aria-expanded"),i.removeAttribute("aria-disabled")})}this.productSectionWrapper&&Array.from(this.productSectionWrapper.children).forEach(t=>{if(t.classList.contains("is-sr-only")&&(t.classList.remove("is-sr-only"),t.classList.add("mobile-icon-wrapper"),Array.from(t.children).length>0)){const e=Array.from(t.children)[0];e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.setAttribute("aria-expanded","false"),Array.from(e.children).forEach(t=>t.classList.add("is-sr-only"))}}),this.imageZoomContent.addEventListener("mousedown",this.handleImageStartSliding.bind(this)),this.imageZoomContent.addEventListener("touchstart",this.handleImageStartSliding.bind(this)),this.currentOpenProduct=Object(h.select)(".look-detail-product__item.is-active"),this.activeTitle=Object(h.select)(".is-active .look-detail-product__title",this.popinEl),this.activeDesc=Object(h.select)(".is-active .look-detail-product__description",this.popinEl),this.activeref=Object(h.select)(".is-active .look-detail-product__ref",this.popinEl),this.listCollapseHeader=Object(h.select)(".look-popin-list__header");const e=Object(h.select)(".mobile-icon-wrapper",this.productSectionWrapper),o=Object(h.select)(".js-collapse-list");e.style.height=this.activeTitle.offsetHeight+this.activeref.offsetHeight+(null!==this.activeDesc?this.activeDesc.offsetHeight:0)+27+"px",e.addEventListener("click",this.showProductDetails.bind(this)),o.addEventListener("click",this.collapseListPanel.bind(this));let i=this;e.addEventListener("keyup",t=>{32!=t.which&&13!=t.which||i.showProductDetails()}),o.addEventListener("keyup",t=>{32!=t.which&&13!=t.which||i.collapseListPanel()}),e.addEventListener("touchstart",this.handleSlidingStart.bind(this)),e.addEventListener("mousedown",this.handleSlidingStart.bind(this)),this.zoomContentHeight=this.imageZoomContent.offsetHeight,t.length>0&&t.forEach(t=>{t.addEventListener("click",()=>{this.triggeredMention=this.lookProductsList[t.dataset.index]})}),this.pageControlDots.length>0&&this.pageControlDots.forEach((t,e)=>{let o=Object(h.select)(".look-page__control-btn",t);0==e&&(t.classList.add("is-active"),o&&o.setAttribute("aria-current",!0)),o.addEventListener("click",this.scrollToProduct.bind(this))})}handleImageStartSliding(t){t.touches||t.preventDefault(),this.initialX=t.touches?t.touches[0].clientX:t.clientX,this.initialY=t.touches?t.touches[0].clientY:t.clientY,this.deltaY=0,this.didMove=!1,this.imageZoomContent.addEventListener("mouseup",this.handleImageEndSliding.bind(this)),this.imageZoomContent.addEventListener("mouseleave",this.handleImageEndSliding.bind(this)),this.imageZoomContent.addEventListener("mousemove",this.handleImageSliding.bind(this)),this.imageZoomContent.addEventListener("touchmove",this.handleImageSliding.bind(this)),this.imageZoomContent.addEventListener("touchend",this.handleImageEndSliding.bind(this))}handleImageSliding(t){t.touches?this.deltaY=this.initialY-t.touches[0].clientY:this.deltaY=this.initialY-t.clientY}handleImageEndSliding(){let t=null;this.lookProductsList.forEach((e,o)=>{e.classList.contains("is-active")&&(t=o)}),this.deltaY>0&&t!==this.lookProductsList.length-1&&!this.didMove?this.scrollToElement(t+1):this.deltaY<0&&0!==t&&!this.didMove&&this.scrollToElement(t-1),this.imageZoomContent.removeEventListener("mouseup",this.handleImageEndSliding),this.imageZoomContent.removeEventListener("mouseleave",this.handleImageEndSliding),this.imageZoomContent.removeEventListener("mousemove",this.handleImageSliding),this.imageZoomContent.removeEventListener("touchmove",this.handleImageSliding),this.imageZoomContent.removeEventListener("touchend",this.handleImageEndSliding)}scrollToElement(t){const e=Object(h.select)(".look-detail-product__item.is-active"),o=Object(h.select)(".look-detail-product__content",this.lookProductsList[t]),i=o.dataset.min?o.dataset.min:"";let s=this.lookMainImg.offsetHeight-(window.innerHeight-o.offsetHeight);parseInt(t)+1===this.pageControlDots.length&&(s+=this.lastProductDelta);const a=parseFloat(i)*s/100+5;this.didMove=!0,TweenLite.to(this.imageZoomContent,1,{scrollTop:a,ease:Quad.easeInOut}),this.updateMobileProductCard(this.lookProductsList[t],e,t)}scrollToProduct(t){const e=t.target?t.target.dataset.sectionid:"",o=t.target?t.target.parentElement.dataset.number:"",i=Object(h.select)("#"+e),s=Object(h.select)(".look-detail-product__item.is-active");if(null!==i&&i!==s){const t=Object(h.select)(".look-detail-product__content",i),e=Object(h.select)(".look-detail-product__title",i),a=t.dataset.min?t.dataset.min:"";if(""!==a){let i=this.lookMainImg.offsetHeight-(window.innerHeight-t.offsetHeight);parseInt(o)+1===this.pageControlDots.length&&(i+=this.lastProductDelta);const l=parseFloat(a)*i/100+5;this.controlDotsClicked=!0,TweenLite.to(this.imageZoomContent,1,{scrollTop:l,ease:Quad.easeInOut,onComplete:()=>{setTimeout(()=>{this.controlDotsClicked=!1,Object(r.m)(e)},500)}}),this.updateMobileProductCard(this.lookProductsList[o],s,o)}}}updateMobileProductCard(t,e,o){let i=this.productDetailsContainer.offsetHeight,s=0;e.classList.remove("is-active"),t.classList.add("is-active"),this.activeTitle=Object(h.select)(".is-active .look-detail-product__title",this.popinEl),this.activeDesc=Object(h.select)(".is-active .look-detail-product__description",this.popinEl),this.activeref=Object(h.select)(".is-active .look-detail-product__ref",this.popinEl);Object(h.select)(".mobile-icon-wrapper",this.productSectionWrapper).style.height=this.activeTitle.offsetHeight+this.activeref.offsetHeight+(null!==this.activeDesc?this.activeDesc.offsetHeight:0)+27+"px",this.pageControlList.style.height=window.innerHeight-t.offsetHeight+10+"px",this.imageZoomContent.style.height=window.innerHeight-t.offsetHeight+10+"px",TweenLite.set(this.productDetailsContainer,{yPercent:"".concat((i-t.offsetHeight)/i*100,"%")}),this.lookProductsList.every(t=>!t.classList.contains("is-active")&&(s+=t.offsetHeight,!0)),this.currentOpenProduct=t,this.currentTransformValue=s,TweenLite.set(this.productListContent,{y:"-".concat(s,"px")}),this.updateScrollDots(o)}closeLookPopin(){document.body.classList.remove("has-modal"),this.popinEl.parentNode.removeChild(this.popinEl),window.document.DLKit.push("on-tracking",{event:"uaevent",eventAction:"close",eventLabel:this.lookDetails.lookCode?this.lookDetails.lookCode:"",eventCategory:"pdp_look_popin"})}expandClickedProduct(t){if(("click"==t.type||"keyup"==t.type&&(13===t.which||32===t.which))&&"false"==t.currentTarget.getAttribute("aria-expanded")){let e=this.lookProductsList[t.currentTarget.id.split("-")[2]];this.openedProductName=t.currentTarget.innerText?t.currentTarget.innerText:"",this.productSectionClicked=!0,this.collapseAllPanels(),this.expandCurrentPanel(e,t.currentTarget),this.animateImage(e),this.sectionOpenDataLayer()}}collapseAllPanels(){this.lookProductsList.forEach(t=>{let e=Object(h.select)(".look-detail-product__expand",t);if("true"===e.getAttribute("aria-expanded")){let o=Object(h.select)(".look-detail-product__details",t);e.setAttribute("aria-expanded",!1),o.classList.remove("look-detail-product__details--enabled"),Object(h.select)(".look-detail-product__title",t).classList.remove("look-detail-product__title--active"),TweenLite.to(o,0,{display:"none",overflowY:"hidden",height:0,paddingTop:0}),e.removeAttribute("aria-disabled"),Object(h.select)(".icon-wrapper",t).style.display="block"}})}expandCurrentPanel(t,e){let o=Object(h.select)(".look-detail-product__details",t);e.setAttribute("aria-expanded",!0),o.classList.add("look-detail-product__details--enabled"),Object(h.select)(".look-detail-product__title",t).classList.add("look-detail-product__title--active"),TweenLite.to(o,1,{display:"block",overflowY:"visible",height:"auto",onComplete:()=>{let e=0;t.getBoundingClientRect().top<0?(e=this.productWrapperDiv.scrollTop-Math.abs(t.getBoundingClientRect().top)-parseInt(window.getComputedStyle(t).marginBottom),this.productWrapperDiv.scrollTo(0,e)):t.getBoundingClientRect().bottom>this.productWrapperDiv.offsetHeight&&(e=t.getBoundingClientRect().bottom,this.productWrapperDiv.scrollTo(0,e))}}),e.setAttribute("aria-disabled",!0),Object(h.select)(".icon-wrapper",t).style.display="none"}animateImage(t){const e=Object(h.select)(".look-detail-product__content",t),o=Object(h.select)(".look-detail-product__expand",t),i=e.dataset.min?parseFloat(e.dataset.min):0,s=e.dataset.max?parseFloat(e.dataset.max):0,a=i+(s-i)/2,l=this.lookMainImg.offsetHeight-window.innerHeight;let n;n=this.lookProductsList.length==parseInt(o.id.split("-")[2])+1?Math.abs(s*(l/100)):Math.abs(a*(l/100)),TweenLite.to(this.popinCol,.5,{scrollTop:n,ease:Quad.easeInOut})}onImageScroll(t){const e=100*this.popinCol.scrollTop/(this.lookMainImg.offsetHeight-window.innerHeight);let o=0;this.lookItemsMinMax.forEach((t,i)=>{e>t.min&&(i===this.lookItemsMinMax.length-1||e<this.lookItemsMinMax[i+1].min)&&(o=i)});const i=this.lookProductsList[o],s=Object(h.select)(".look-detail-product__expand",i);"false"==s.getAttribute("aria-expanded")&&(this.collapseAllPanels(),this.expandCurrentPanel(i,s))}sectionOpenDataLayer(){window.document.DLKit.push("on-tracking",{event:"uaevent",eventAction:"display",eventLabel:this.openedProductName,eventCategory:"pdp_look_popin"})}toggleBackGroundContent(t){"hide"==t?(this.buttonClose.style.visibility="hidden",this.navPageControl.style.visibility="hidden",this.lookMainImg.style.visibility="hidden"):"show"==t&&(this.buttonClose.style.visibility="visible",this.navPageControl.style.visibility="visible",this.lookMainImg.style.visibility="visible")}toggleLookHeader(t){const e=Object(h.select)(".collapse-product-panel");"show"==t?TweenLite.to(this.listCollapseHeader,.5,{y:0,display:"block",onComplete:()=>{e.setAttribute("aria-expanded",!0),e.firstElementChild.classList.remove("is-sr-only")}}):"hide"==t&&TweenLite.to(this.listCollapseHeader,.5,{y:"-".concat(this.listCollapseHeader.offsetHeight,"px"),display:"none",onComplete:()=>{e.setAttribute("aria-expanded",!0),e.firstElementChild.classList.remove("is-sr-only")}})}markAllProductActive(){this.lookProductsList.length>0&&this.lookProductsList.forEach(t=>{t.classList.add("is-active")})}hideProductList(){this.lookProductsList.length>0&&this.lookProductsList.forEach(t=>{null!==this.currentOpenProduct&&this.currentOpenProduct.id!==t.id&&t.classList.remove("is-active")})}}var C=()=>{const t=new y;t.init().then(()=>{t.open()})},_=o(135),P=o(215);function x(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class O{constructor(t){var e=this;x(this,"enter",()=>{if(!this.container)return;let t;this.enableNewPdp?(this.toggleMobileLookCards(),t=Object(h.select)(".look-page__images-container")):(this.transformLookItemsForMobile(),this.lookPageWithImages?t=Object(h.select)(".look-page__alternative-imgs-container"):this.lookPageWithProducts&&(t=Object(h.select)(".look-page__details-wrapper")));const e=[this.lookProductMainImgContainer,...Array.from(Object(h.selectAll)(".look-page__img-wrapper",t))],o=this,i=Object(h.select)("video",e.filter(t=>Object(h.select)("video",t))[0]);if(i){const t=Object(h.select)(".js-video",this.lookVideoContainer),e=t?t.dataset.config:"",o=e?JSON.parse(e).title:"",s=Object(h.select)(".video-container")?Object(h.select)(".video-container").dataset.lookNumber:"";let a=L.a.popinLookPDP.videoAriaLabel.replace("{0}",1).replace("{1}",parseInt(s));o&&(a=a.concat(" - ".concat(o))),i.setAttribute("aria-label",a)}e&&e.some(t=>"0px"===window.getComputedStyle(t).height)?i&&i.addEventListener("loadeddata",()=>{o.initSyncControlsDots(),o.initSyncColsTitle()},!1):(this.initSyncControlsDots(),this.initSyncColsTitle()),this.bind(),this.handlePlayPauseButtons()}),x(this,"calcPdpCardPosition",()=>{const t=Object(h.getCollection)("li",Object(h.select)(".look-page__images-container.look-slideshow__current")),e=Object(h.select)(".look-page__mobile-height").getBoundingClientRect().height<this.windowHeight;1===t.length&&e?this.mobileCardContainer.style.position="absolute":this.mobileCardContainer.style.position="fixed"}),x(this,"isNotWideScreen",()=>{if(!Object(r.X)()&&this.enableNewPdp){let t=null,e=this;this.previousLookLink=Object(h.select)(".js-previous-look"),this.nextLookLink=Object(h.select)(".js-next-look"),this.lookDetailsWrapper=Object(h.select)(".look-page__details-wrapper-inner"),this.mobileImageWrapper=Object(h.select)(".look-page__mobile-height"),this.mobileCardWrapper=Object(h.select)(".look-page__details-container");const o=()=>{window.onscroll=function(){if(Object(r.X)())return;const t=e.mobileImageWrapper.offsetHeight-e.heightDifference,o=window.scrollY<=t;e.mobileCardWrapper.classList.toggle("is-d-block",o),e.mobileCardWrapper.classList.toggle("is-d-none",!o),e.lookDetailsWrapper.classList.add("has-opacity-hidden")},window.addEventListener("scroll",(function(o){t&&clearTimeout(t),t=setTimeout((function(){e.lookDetailsWrapper.classList.remove("has-opacity-hidden")}),150),o.preventDefault}),!1)};this.alreadyBindScroll||(o(),this.alreadyBindScroll=!0),this.correctLookData(),this.calcPdpCardPosition()}}),x(this,"bind",()=>{if(c.C.subscribe(c.i,this.onBreakpointChange),this.lookVideoContainer&&(this.lookVideoContainer.addEventListener("keyup",this.onButtonVideoPlayPause),this.lookVideoContainer.addEventListener("click",this.onButtonVideoPlayPause),this.videoContainerBtn.addEventListener("keyup",this.onButtonVideoPlayPause),this.videoContainerBtn.addEventListener("click",this.onButtonVideoPlayPause)),this.lookPageWithProducts&&!this.enableNewPdp){const t=!Array.from(this.lookItems).slice(1).some(t=>!t.dataset.max),e="look-details-".concat(this.lookItems.length),o=Object(h.select)("li#look-details-".concat(this.lookItems.length),this.pageTitleWrapper);g()(this.pageTitleWrapper,'a[href*="#look-details-"]',"click",i=>this.goToActiveLookElement(i,t,e,o))}(this.lookPageWithProducts||this.lookPageWithImages)&&g()(this.pageControlsWrapper,'a[href*="#look-details-"]',"keyup",this.handleControlsKeyUp),this.lookPageWithProducts&&(Object(r.Q)()||Object(r.T)())&&this.lookMainZoomableImage&&(Object(r.Z)()&&this.lookMainZoomableImage.classList.add("ios"),this.animateImageOnMobile(),window.addEventListener("scroll",this.animateImageOnMobile));const t=Object(h.getCollection)(".look-page__card-wrapper");if(!Object(r.X)()&&this.enableNewPdp){let e=null;const o=this,i=(Object(h.select)(".look-page"),Object(h.select)(".js-sticky-item"));null!=i&&i.parentNode.removeChild(i),this.previousLookLink=Object(h.select)(".js-previous-look"),this.nextLookLink=Object(h.select)(".js-next-look"),this.lookDetailsWrapper=Object(h.select)(".look-page__details-wrapper-inner"),this.mobileImageWrapper=Object(h.select)(".look-page__mobile-height"),this.mobileCardWrapper=Object(h.select)(".look-page__details-container"),this.lookPageWrapper.addEventListener("touchstart",this.handleSlidingStart),this.lookPageWrapper.addEventListener("mousedown",this.handleSlidingStart),this.previousLookLink&&this.previousLookLink.addEventListener("click",this.loadPrevLook.bind(this)),this.previousLookLink&&this.previousLookLink.addEventListener("keypress",t=>{32==t.keyCode&&(t.preventDefault(),o.loadPrevLook(t))}),this.nextLookLink&&this.nextLookLink.addEventListener("click",this.loadNextLook.bind(this)),this.nextLookLink&&this.nextLookLink.addEventListener("keypress",t=>{32==t.keyCode&&(t.preventDefault(),o.loadNextLook(t))}),window.onscroll=function(){if(Object(r.X)())return;const t=o.mobileImageWrapper.offsetHeight-o.heightDifference,e=window.scrollY<=t;o.mobileCardWrapper.classList.toggle("is-d-block",e),o.mobileCardWrapper.classList.toggle("is-d-none",!e),o.lookDetailsWrapper.classList.add("has-opacity-hidden")},window.addEventListener("scroll",()=>{e&&clearTimeout(e),e=setTimeout(()=>{o.lookDetailsWrapper.classList.remove("has-opacity-hidden")},150)},!1),c.C.subscribe(c.J,t=>{this.wishListData=t.entries.map(t=>t.code)}),c.C.subscribe(c.eb,this.togglePlayPauseIcon.bind(this)),t.forEach(t=>{const e=Object(h.select)("button.is-wishlist",t);e&&!t.classList.contains("current-card")&&e.setAttribute("tabindex",-1)}),this.slideLookData(),this.calcPdpCardPosition()}else t.forEach(t=>{t.classList.contains("is-hidden-desktop")?t.parentNode.removeChild(t):this.removeDataAttribute(t)});if(window.addEventListener("resize",s()(()=>{const t=Object(h.select)(".look-page__details-wrapper-inner");window.innerHeight-t.getBoundingClientRect().bottom<50&&(t.style.position="unset"),Object(r.X)()&&(t.style.position="unset"),this.isNotWideScreen(),Object(r.X)()&&(this.mobileCardWrapper=Object(h.select)(".look-page__details-container"),this.mobileCardWrapper&&(this.mobileCardWrapper.style.position="unset"))},50)),window.addEventListener("scroll",(function(){const t=Object(h.select)(".look-page__details-wrapper-inner");Object(r.X)()?t.style.position="unset":t.style.position="absolute"}),!1),this.enableNewPdp){this.setZoomImages(),g()(document.body,".js-view-detail-modal","click",C);let t=!1;this.pageControlBtn.forEach(t=>{t.addEventListener("keyup",this.focusMediaOnClick,!0),t.addEventListener("click",this.focusMediaOnClick,!0)}),g()(this.lookProductMainImgContainer,".look-page__img-wrapper","keyup",e=>{if(32===e.which){const e=this.controlDots.filter(t=>t.classList.contains("is-active"));e&&(parseInt(e[0].dataset.number)+1!==this.controlDots.length||t?parseInt(e[0].dataset.number)+1!==this.controlDots.length&&(window.scrollTo({left:0,top:Object(h.select)("#look-details-".concat(parseInt(e[0].dataset.number))).offsetTop,behavior:"smooth"}),Object(r.m)(Object(h.select)("#look-details-".concat(parseInt(e[0].dataset.number)," img")))):(window.scrollTo({left:0,top:Object(h.select)("#look-details-".concat(parseInt(e[0].dataset.number))).offsetTop,behavior:"smooth"}),Object(r.m)(Object(h.select)("#look-details-".concat(parseInt(e[0].dataset.number)," img")))),t=parseInt(e[0].dataset.number)+1===this.controlDots.length)}})}}),x(this,"handleSlidingStart",t=>{t.touches||t.preventDefault(),this.initialX=t.touches?t.touches[0].clientX:t.clientX,this.initialY=t.touches?t.touches[0].clientY:t.clientY,this.deltaX=0,this.frameWidth=this.lookProductMainImgContainer.clientWidth,this.lookPageWrapper.addEventListener("mouseup",this.handleEndSliding),this.lookPageWrapper.addEventListener("mouseleave",this.handleEndSliding),this.lookPageWrapper.addEventListener("mousemove",this.handleSliding),this.lookPageWrapper.addEventListener("touchmove",this.handleSliding,{passive:!1}),this.lookPageWrapper.addEventListener("touchend",this.handleEndSliding),this.setTopProperty()}),x(this,"handleSliding",t=>{t.touches?(this.deltaX=this.initialX-t.touches[0].clientX,this.deltaY=this.initialY-t.touches[0].clientY):this.deltaX=this.initialX-t.clientX,Math.abs(this.deltaY)<60&&Math.abs(this.deltaX)>Math.abs(this.deltaY)&&(this.transformX=-1*this.deltaX/this.frameWidth*100,this.allowSwipeRight&&this.transformX>0||this.allowSwipeLeft&&this.transformX<0?(document.body.classList.add("stop-scrolling"),TweenLite.set(this.lookProductMainImgContainer,{xPercent:this.transformX}),TweenLite.set(this.lookDetailsWrapper,{xPercent:this.transformX})):this.transformX=0,Object(r.Z)()&&(t.preventDefault(),t.stopPropagation()))}),x(this,"handleEndSliding",t=>{this.transformX<=-15?(this.allowSwipeLeft=!1,Object(r.M)()?this.loadNextLook(t):this.loadPrevLook(t)):this.transformX>=15?(this.allowSwipeRight=!1,Object(r.M)()?this.loadPrevLook(t):this.loadNextLook(t)):this.transformX>0&&this.transformX<25||this.transformX<0&&this.transformX>-25?TweenLite.to([this.lookProductMainImgContainer,this.lookDetailsWrapper],.5,{xPercent:0,ease:Quad.easeInOut,onComplete:()=>document.body.classList.remove("stop-scrolling")}):document.body.classList.remove("stop-scrolling");const e=Object(h.select)("button.video-container");e&&e.addEventListener("click",this.onButtonVideoPlayPause,!0),this.lookPageWrapper.removeEventListener("mouseup",this.handleEndSliding),this.lookPageWrapper.removeEventListener("mouseleave",this.handleEndSliding),this.lookPageWrapper.removeEventListener("mousemove",this.handleSliding),this.lookPageWrapper.removeEventListener("touchmove",this.handleSliding),this.lookPageWrapper.removeEventListener("touchend",this.handleEndSliding)}),x(this,"setTopProperty",()=>{const t=this.currentLookSlide.getBoundingClientRect().y;this.prevLookSlide&&(this.prevLookSlide.style.top="".concat(Math.abs(t-n.e.small_collapsed),"px")),this.nextLookSlide&&(this.nextLookSlide.style.top="".concat(Math.abs(t-n.e.small_collapsed),"px"))}),x(this,"updateNextLookData",async(t,e,o)=>{await new Promise(i=>{TweenLite.to([this.lookProductMainImgContainer,this.lookDetailsWrapper],0,{xPercent:0,ease:Quad.easeInOut,onComplete:()=>{const s=this.nextLookLink.getAttribute("href"),a=L.a.currentLocale.replace(/\//g,"");this.nextLookLink&&this.nextLookLink.setAttribute("href",t?"/".concat(a).concat(t.url):""),this.previousLookLink.setAttribute("href",window.location.pathname),this.transformX=0,this.nextElementToLoad=t&&t.nextElement?t.nextElement:"",this.previousElementToLoad=this.previousLookElement,this.previousLookImages=this.currentLookImages,this.currentLookImages=this.nextLookImages,this.nextLookImages=e?this.formatImages(JSON.stringify(e)):"",this.previousLookVideo=this.currentLookVideo,this.currentLookVideo=this.nextLookVideo,this.nextLookVideo=o,this.previousLookCode=this.currentLookCode,this.currentLookCode=this.nextLookCode,this.nextLookCode=t?t.passageNumber:"",this.previousLookElement=this.currentLookElement,this.currentLookElement=this.nextLookElement,this.nextLookElement=t?t.code:"",this.previousLookId=this.currentLookId,this.currentLookId=this.nextLookId,this.nextLookId=t?t.lookId:"",this.toggleSlidesAfterSwipe("next"),this.correctLookData(),this.updateTopProperty("next"),this.updateAnalyticsData(),window.history.pushState("","",s),this.updateCardAttribute(),i()}})})}),x(this,"updatePreviousLookData",async(t,e,o)=>{await new Promise(i=>{TweenLite.to([this.lookProductMainImgContainer,this.lookDetailsWrapper],0,{xPercent:0,ease:Quad.easeInOut,onComplete:()=>{const s=this.previousLookLink.getAttribute("href"),a=L.a.currentLocale.replace(/\//g,"");this.nextLookLink.setAttribute("href",window.location.pathname),this.previousLookLink&&this.previousLookLink.setAttribute("href",t?"/".concat(a).concat(t.url):""),this.transformX=0,this.nextElementToLoad=this.nextLookElement,this.previousElementToLoad=t&&t.previousElement?t.previousElement:"",this.nextLookImages=this.currentLookImages,this.currentLookImages=this.previousLookImages,this.previousLookImages=e?this.formatImages(JSON.stringify(e)):"",this.nextLookVideo=this.currentLookVideo,this.currentLookVideo=this.previousLookVideo,this.previousLookVideo=o,this.nextLookCode=this.currentLookCode,this.currentLookCode=this.previousLookCode,this.previousLookCode=t?t.passageNumber:"",this.nextLookElement=this.currentLookElement,this.currentLookElement=this.previousLookElement,this.previousLookElement=t?t.code:"",this.nextLookId=this.currentLookId,this.currentLookId=this.previousLookId,this.previousLookId=t?t.lookId:"",this.toggleSlidesAfterSwipe("prev"),this.correctLookData(),this.updateTopProperty("prev"),this.updateAnalyticsData(),window.history.pushState("","",s),this.updateCardAttribute(),Object(r.m)(this.currentCard),i()}})})}),x(this,"updateTopProperty",t=>{window.scrollTo(0,0),this.currentLookSlide.style.removeProperty("top"),"next"==t?this.nextLookSlide.style.top="0px":this.prevLookSlide.style.top="0px"}),x(this,"focusMediaOnClick",t=>{const e=t.currentTarget.dataset.imageid,o=Object(h.select)("#".concat(e));if(("click"===t.type||"keyup"===t.type)&&t.sourceCapabilities){const i=o.offsetTop+n.g.large;if(1===t.which&&"click"==t.type)e&&window.scrollTo({left:0,top:i,behavior:"smooth"});else if(13===t.which)e&&window.scrollTo({left:0,top:i,behavior:"smooth"}),o.classList.contains("look-page__video-wrapper")?Object(r.m)(Object(h.select)(".video-container",Object(h.select)("#".concat(e)))):setTimeout(()=>{Object(r.m)(Object(h.select)("#".concat(e," img")))},1e3);else if(32===t.which){!o.classList.contains("look-page__video-wrapper")?(window.scrollTo({left:0,top:o.offsetTop,behavior:"smooth"}),Object(r.m)(Object(h.select)("#".concat(e," img")))):Object(r.m)(Object(h.select)(".video-container",o))}}}),x(this,"toggleMobileLookCards",()=>{const t=Object(h.getCollection)("li",Object(h.select)(".look-page__images-container"));if(t.length>0)for(let e=0;e<t.length;e++)t[e].querySelector("img")&&t[e].querySelector("img").setAttribute("tabindex",-1)}),x(this,"onBreakpointChange",()=>{this.initSyncControlsDots({updateOffset:!0}),this.initSyncColsTitle({updateOffset:!0}),this.initScrollSpyMobile(),this.resetImageStyle(),this.showHideButtonZoom(),this.setLookimgSize()}),x(this,"onButtonVideoPlayPause",t=>{if("click"===t.type&&null===t.sourceCapabilities);else if("keyup"===t.type||"click"===t.type){t.stopPropagation();const e=this.lookVideoContainer.querySelector("video");e&&(("keyup"===t.type&&32===t.which||"keyup"===t.type&&13===t.which||"click"===t.type)&&(e.paused?e.play():e.pause()),this.togglePlayPauseIcon())}}),x(this,"handlePlayPauseButtons",()=>{const t=this.lookVideoContainer.querySelector("video");t&&(t.addEventListener("play",()=>this.togglePlayPauseIcon()),t.addEventListener("pause",()=>this.togglePlayPauseIcon()))}),x(this,"handleControlsKeyUp",t=>{if(13===t.which){const e=t.target,o=Object(h.select)(e.hash,this.container);if(this.lookPageWithProducts){const t=Object(h.select)(".look-page__details-wrapper-inner",o)?Object(h.select)(".look-page__details-wrapper-inner",o):o;Array.from(Object(h.selectAll)(".look-page__details-wrapper-inner",this.container)).forEach(t=>t.removeAttribute("tabindex")),setTimeout(()=>{t.setAttribute("tabindex",-1),Object(r.m)(t)},250)}else if(this.lookPageWithImages){const t=o;setTimeout(()=>{Object(r.m)(t)},250)}}}),x(this,"initSyncControlsDots",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.lookPageWithImages||e.lookPageWithProducts){if(!Object(r.T)()&&!Object(r.X)()||Object(r.T)()&&e.lookPageWithProducts)return e.syncColsDots&&e.syncColsDots.destroy(),void(e.scrollSpyDots&&e.scrollSpyDots.destroy());if(e.syncColsDots||(e.syncColsDots=new u.a(e.pageControlsWrapper,e.container,e.calculateHeight())),!e.scrollSpyDots){let t,o=[],i=()=>{};e.enableNewPdp?t=Object(h.select)(".look-page__images-container"):e.lookPageWithImages?(t=Object(h.select)(".look-page__alternative-imgs-container"),o=[Object(h.select)(".look-page__main-img")]):e.lookPageWithProducts&&(t=Object(h.select)(".look-page__details-wrapper"),o=Object(h.select)(".look-page__alternative-imgs-container")?[Object(h.select)(".look-page__alternative-imgs-container")]:[],i=e.animateImage),e.scrollSpyDots=new p.a(t,{stickyOffset:e.calculateHeight(),changeThreshold:".5",onChange:e.updateScrollSpyDots,onUpdate:i,customElements:o})}e.syncColsDots.isInited()||e.syncColsDots.init(),e.scrollSpyDots.isInited()||e.scrollSpyDots.init(),t.updateOffset&&e.syncColsDots.updateStickyOffset(e.calculateHeight())}})),x(this,"initSyncColsTitle",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e.lookPageWithImages||e.enableNewPdp)&&(Object(r.X)()?(e.syncColsTitle||(e.lookPageWithImages&&!e.enableNewPdp?e.syncColsTitle=new u.a(e.pageTitleWrapper,e.container,e.calculateHeight()):e.enableNewPdp&&(e.syncColsTitle=new u.a(Object(h.select)(".look-page__details-wrapper-fixed"),e.container,e.calculateHeight()))),e.syncColsTitle.isInited()||e.syncColsTitle.init(),t.updateOffset&&e.syncColsTitle.updateStickyOffset(e.calculateHeight())):e.syncColsTitle&&e.syncColsTitle.destroy())})),x(this,"initScrollSpyMobile",(function(){const t=Object(h.select)(".look-page__details-wrapper");e.lookPageWithProducts&&!e.enableNewPdp&&(Object(r.X)()?e.scrollSpyMobile&&e.scrollSpyMobile.destroy():(e.scrollSpyMobile||(e.scrollSpyMobile=new p.a(t,{stickyOffset:e.calculateHeight(),changeThreshold:".5",onUpdate:e.animateImageOnMobile})),e.scrollSpyMobile.isInited()||e.scrollSpyMobile.init()))})),x(this,"animateImage",(t,e)=>{const o=this.pageTitleWrapper.firstElementChild.offsetHeight,i=this.currentAnimationState,s=Object(h.getCollection)(".look-additional-images");this.isTranslate=!0,0===e?this.currentAnimationState="static":e<1?this.currentAnimationState="fixed":this.isTranslate=!1,this.currentAnimationState!==i&&this.setImagePositioning(this.lookMainZoomableImage,this.currentAnimationState),s.length>0&&this.lookPageWithProducts&&(window.scrollY+window.innerHeight>=this.lookProductMainImgContainer.offsetHeight+this.calculateHeight()?this.lookProductMainImgContainer.style.overflow="hidden":this.lookProductMainImgContainer.style.overflow="unset"),window.scrollY<o?(this.scaleImage(o),this.fadeScrollArrow(o)):this.isTranslate?this.translateImage(t):this.reverseTranslate()}),x(this,"fadeScrollArrow",t=>{const e=Object(h.select)(".scroll-to-explore",document.body),o=(t-window.scrollY)/t-.2;(new TimelineLite).to(e,.3,{opacity:o})}),x(this,"animateImageOnMobile",()=>{const t=(window.scrollY+window.innerHeight-this.calculateHeight())/this.mobileContentMainImgHeight,e=this.lookMainZoomableImage.clientHeight-this.calculateHeight(),o=100*window.scrollY/e;if(window.scrollY<1)this.lookMainZoomableImage.classList.contains("zoom-in")&&(this.oldMobileActiveProduct=null,this.currentMobileActiveProduct=null,this.lookMainZoomableImage.classList.remove("zoom-in")),this.lookItemsLi.forEach(t=>t.classList.remove("is-visible")),this.lookItemsLi[0].classList.add("is-visible");else if(this.lookMainZoomableImage.classList.contains("zoom-in")||this.lookMainZoomableImage.classList.add("zoom-in"),t<1){if(o<this.lastMobileProductMinMax.mobileMax)for(const t of this.lookItems){const e=t.closest("li");if(o<=Object(h.select)(".look-description",e).dataset.mobileMax){this.oldMobileActiveProduct=this.currentMobileActiveProduct,this.currentMobileActiveProduct=e;break}}else this.oldMobileActiveProduct=this.currentMobileActiveProduct,this.currentMobileActiveProduct=this.lastLookProduct;(this.currentMobileActiveProduct!==this.oldMobileActiveProduct||this.isLastElementMobileStatic)&&(this.isLastElementMobileStatic=!1,this.oldMobileActiveProduct=this.currentMobileActiveProduct,this.lookItemsLi.forEach(t=>t.classList.remove("is-visible")),this.lastLookProduct.classList.remove("static-last"),this.currentMobileActiveProduct.classList.add("is-visible"))}else if(!this.isLastElementMobileStatic){this.isLastElementMobileStatic=!0;const t=this.lookMainZoomableImage.getBoundingClientRect().height,e=Object(h.select)(".look-page__multiple-products",this.container);this.lookItemsLi.forEach(t=>t.classList.remove("is-visible")),this.lastLookProduct.classList.remove("is-visible"),this.lastLookProduct.classList.add("static-last"),TweenLite.set(e,{height:t})}}),x(this,"transformLookItemsForMobile",()=>{if(Object(r.Q)()||Object(r.T)()){const t=Array.from(this.lookItems).reverse();t.forEach((e,o)=>{const i=Object(h.select)(".look-description",e.closest("li"));if(0!==o){const e=Object(h.select)(".look-description",t[o-1].closest("li")),s=e.dataset.mobileMax?e.dataset.mobileMax:e.dataset.max,a=i.dataset.mobileMax?i.dataset.mobileMax:i.dataset.max;let l=0;l=a?s-a>10?a+5:a:s-5,l=l<0?0:l,i.dataset.mobileMax=l}else i.dataset.mobileMax=i.dataset.max}),t.forEach((e,o)=>{const i=Object(h.select)(".look-description",e.closest("li"));if(0!==o){const e=Object(h.select)(".look-description",t[o-1].closest("li")),s=e.dataset.mobileMax?e.dataset.mobileMax:e.dataset.max,a=i.dataset.mobileMax?i.dataset.mobileMax:i.dataset.max;let l=0;l=a&&s-a>=5?a:s-5,l=l<0?0:l,i.dataset.mobileMax=l}else i.dataset.mobileMax=i.dataset.max})}}),x(this,"preventDefaultScroll",t=>{(t=t||window.event).preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1}),x(this,"disableScroll",t=>{window.addEventListener&&window.addEventListener("scroll",this.preventDefaultScroll,!1),window.onwheel=this.preventDefaultScroll,document.onmousewheel=this.preventDefaultScroll,window.onmousewheel=this.preventDefaultScroll,window.ontouchmove=this.preventDefaultScroll,window.onscroll=this.preventDefaultScroll,this.timeoutScrollMobile=setTimeout(this.enableScroll,t)}),x(this,"enableScroll",()=>{window.removeEventListener&&window.removeEventListener("scroll",this.preventDefaultScroll,!1),window.onwheel=null,document.onmousewheel=null,window.onmousewheel=null,window.ontouchmove=null,this.timeoutScrollMobile=null}),x(this,"goToActiveLookElement",(t,e,o,i)=>{if(Object(r.X)()){const t=this.pageTitleWrapper.firstElementChild.offsetHeight;return void window.scroll(0,t-1)}const s=t.delegateTarget,a=s.dataset.goTo,l=this.lookMainZoomableImage.clientHeight-this.calculateHeight(),n=s.closest("li").id,c=Object(h.select)("li#".concat(n),this.pageTitleWrapper),d=n.replace(/\d+$/,parseInt(n.split("-").pop(),10)+("next"!==a&&a?-1:1)),p=Object(h.select)("li#".concat(d),this.pageTitleWrapper),u=Object(h.select)(".look-description",p),m=parseInt(u.dataset[e?"max":"mobileMax"],10),g=parseInt(m*l/100),k=Object(h.select)(".look-description__head",u);window.scrollTo({top:g}),window.addEventListener("scroll",()=>v());let b=!0;const v=()=>{(window.pageYOffset||document.documentElement.scrollTop)===g&&b&&(a&&(d!==o?(i.classList.remove("is-visible","static-last"),c.classList.remove("is-visible"),p.classList.add("is-visible")):i.classList.add("is-visible","static-last")),b=!1,Object(r.m)(k))}}),x(this,"setLookimgSize",t=>{if(Object(r.X)()){this.lookMainZoomableImage.style.width="390px";const e=window.innerHeight-this.calculateHeight(),o=Math.round(e-.5*e)>390?"".concat(Math.round(e-.5*e),"px"):"390px";this.initialWidth||(this.initialWidth=o),this.lookMainZoomableImage.style.width="".concat(o),document.querySelector(".look-page__img-zoom").style.maxWidth="".concat(o),"static"===t&&(this.lookMainZoomableImage.style.width="".concat(this.initialWidth,"px"))}else document.querySelector(".look-page__img-zoom").style.maxWidth="initial"}),x(this,"setImagePositioning",(t,e,o)=>{let i;switch(this.setLookimgSize(),e){case"static":i={position:"static",bottom:"auto"};break;case"fixed":i={position:"fixed",bottom:"auto",transformOrigin:"50% 0%",width:o};break;default:i={position:"absolute",top:"auto",bottom:"-140px",y:0,transformOrigin:"50% 50%"}}TweenLite.set(t,i)}),x(this,"resetImageStyle",()=>{this.lookPageWithProducts&&(Object(r.T)()||r.Q)&&TweenLite.set(this.lookMainZoomableImage,{clearProps:"all"})}),x(this,"translateImage",t=>{if(null!==this.visibleDiff&&this.restoreReversedParameters(),t&&t<1){const e=10*t,o=this.lookItemsMinMax.find(t=>10*e<t.max);this.onItemActivated({scrollCoef:e,lookItem:o,lookItems:this.lookItemsMinMax})}}),x(this,"onItemActivated",t=>{const e=parseFloat(t.scrollCoef.toFixed(1))+.1;if(t.lookItem&&""!==t.lookItem.max){const o=Object(r.ib)(),i=t.scrollCoef*e/t.lookItem.max;o?this.currentCoefScale=this.currentCoefScale<i?i:this.currentCoefScale-Math.abs(i-this.currentCoefScale):o||(this.currentCoefScale=this.currentCoefScale>i?i:this.currentCoefScale+Math.abs(i-this.currentCoefScale)),TweenLite.set(this.lookMainZoomableImage,{y:"-".concat(100*this.currentCoefScale,"%"),scale:1.85})}}),x(this,"reverseTranslate",()=>{null===this.visibleDiff&&(this.visibleDiff=Math.floor(parseFloat(window.getComputedStyle(this.lookMainZoomableImage).bottom.replace("px",""))),this.visibleDiff<0&&(this.visibleDiff=0));const t={position:"absolute",top:"auto",bottom:"".concat(this.visibleDiff,"px"),y:0,transformOrigin:"50% 0%"};this.visibleDiff>=0&&TweenLite.set(this.lookMainZoomableImage,t)}),x(this,"restoreReversedParameters",()=>{this.visibleDiff=null;TweenLite.set(this.lookMainZoomableImage,{position:"fixed",bottom:"auto"})}),x(this,"scaleImage",t=>{let e=100*window.scrollY/t;e<10&&(e="0".concat(e));const o="1.".concat(e);TweenLite.set(this.lookMainZoomableImage,{scale:o,yPercent:0})}),x(this,"updateScrollSpyDots",t=>{this.indexControlImage=t,this.controlDots&&this.controlDots.forEach((e,o)=>{const i=Object(h.select)("a",e);e.classList.contains("is-active")&&t!==o?(e.classList.remove("is-active"),i&&i.removeAttribute("aria-current")):t===o&&(e.classList.add("is-active"),i&&i.setAttribute("aria-current",!0))})}),x(this,"calculateHeight",()=>{let t=n.e.small_collapsed+n.g.small;return t=Object(r.T)()?n.e.medium_collapsed+n.g.medium:Object(r.X)()&&Object(h.select)("body").classList.contains("is-body-narrow")?n.e.large_collapsed+n.g.large:Object(r.X)()?n.e.large_expanded+n.g.large:n.e.small_collapsed+n.g.small,t}),x(this,"setZoomImages",t=>{const e=Object(h.select)(".look-slideshow__current"),o=Object(h.selectAll)(".js-look-image-zoom",e);let i=null;i=null==t||""==t?e.dataset.looknumber?parseInt(e.dataset.looknumber):void 0:parseInt(t);let s="";void 0!==i&&""!==i&&(s=L.a.popinLookPDP.dialogBtnLabel.replace("{0}",i));const a={contentClass:".lookdetail",async:!0,autoWidth:!0,draggable:!1,focusOpener:!0,overrideAlt:!1,focusImage:!1,noAnimationMobile:!0,noAnimation:!0,onZoom:this.onZoom,ariaLabel:s,className:"look-zoom-img-wrapper"};new k.a(o,a).create(),o.forEach(t=>{this.zoomArray.push(t)}),null!==this.btnZoom&&this.btnZoom.addEventListener("click",this.zoomCurrentImage),null!==this.btnZoom&&this.showHideButtonZoom()}),x(this,"showHideButtonZoom",()=>{this.lookPageWithProducts||(this.btnZoom&&this.btnZoom.classList.remove("is-hidden"),Object(r.Q)()?(this.pageControlsWrapper.closest(".look-page__controls").style.display="block",Object(h.select)(".js-page-control",this.pageControlsWrapper).classList.add("is-hidden"),Object(h.select)(".back-to-looks span").classList.add("is-sr-only")):(Object(h.select)(".js-page-control",this.pageControlsWrapper).classList.remove("is-hidden"),Object(h.select)(".back-to-looks span").classList.remove("is-sr-only")))}),x(this,"onZoom",()=>{document.DLKit.push("when-user-zoom-look-image",{eventAction:"zoom",eventCategory:"pdp look"})}),x(this,"zoomCurrentImage",()=>{if(this.indexControlImage>=0){const t="look-details-".concat(this.indexControlImage);this.zoomArray.forEach(e=>{t===e.id&&e.click()})}}),this.container=t,this.lookPageName="look-page",this.enableNewPdp=this.container.classList.contains("".concat(this.lookPageName,"__new-pdp")),this.lookPageWithProducts=this.container.classList.contains("".concat(this.lookPageName,"__with-products")),this.lookPageWithImages=this.enableNewPdp?this.container.classList.contains("".concat(this.lookPageName,"__with-show")):this.container.classList.contains("".concat(this.lookPageName,"__with-images")),this.lookPageWrapper=Object(h.select)(".look-page"),this.pageControlsWrapper=Object(h.select)(".".concat(this.lookPageName,"__controls__wrapper"),this.container),this.pageTitleWrapper=Object(h.select)(".".concat(this.lookPageName,"__details-wrapper"),this.container),this.lookProductMainImgContainer=Object(h.select)(".".concat(this.lookPageName,"__main-img"),this.container),this.lookMainZoomableImage=Object(h.select)(".".concat(this.lookPageName,"__img-zoom img"),this.container),this.pageControlBtn=Object(h.selectAll)(".".concat(this.lookPageName,"__control-btn"),this.container),this.lookVideoContainer=Object(h.select)(".look-page__video-wrapper",this.container),this.lookItems=Object(h.selectAll)(".look-description",this.pageTitleWrapper),this.lookItemsLi=Object(h.selectAll)(".".concat(this.lookPageName,"__details-wrapper-list"),this.pageTitleWrapper),this.lookItemsMinMax=this.lookItems?Array.from(this.lookItems).map(t=>({min:t.dataset.min,max:t.dataset.max})):[],this.lookPageWithProducts&&!this.enableNewPdp&&(this.lastLookProduct=this.lookItems[this.lookItems.length-1].closest("li"),this.mobileContentMainImgHeight=Object(h.select)(".".concat(this.lookPageName,"__main-img")).offsetHeight,this.lastMobileProductMinMax=Object(h.select)(".look-description",this.lastLookProduct).dataset),this.btnZoom=Object(h.select)(".look-btn-zoom",this.container),this.videoContainerBtn=Object(h.select)(".video-container",this.container),this.lookSlideShowWrapper=Object(h.select)(".look-slideshow__wrapper",this.container),this.swipeLookSlides=Object(h.getCollection)(".look-slideshow__common",this.container),this.currentLookSlide=Object(h.select)(".look-slideshow__current",this.container),this.nextLookSlide=Object(h.select)(".look-slideshow__next",this.container),this.prevLookSlide=Object(h.select)(".look-slideshow__prev",this.container),this.navigationWrapper=Object(h.select)(".look-page__look-navigation"),this.indexControlImage=0,this.zoomArray=[],this.syncColsDots=null,this.syncColsTitle=null,this.scrollSpyDots=null,this.scrollSpyMobile=null,this.currentAnimationState=null,this.currentCoefScale=0,this.isTranslate=!0,this.visibleDiff=null,this.scrollDiff=null,this.timeoutScrollMobile=null,this.currentMobileActiveProduct=null,this.oldMobileActiveProduct=null,this.isLastElementMobileStatic=!1,this.controlDots=Object(h.selectAll)("li",this.pageControlsWrapper),this.currentCard=null,this.previousCard=null,this.nextCard=null,this.lookDetailsWrapper=null,this.nextLookLink=null,this.previousLookLink=null,this.initialWidth=null,this.imageBaseUrl=null,this.nextLookImages=null,this.previousLookImages=null,this.currentLookImages=null,this.nextLookCode=null,this.previousLookCode=null,this.currentLookCode=null,this.newLookdata=null,this.lookCardTemplate=null,this.transformation=null,this.currentLookId=null,this.nextLookId=null,this.previousLookId=null,this.initialX=0,this.initialY=0,this.deltaX=0,this.frameWidth=0,this.transformX=0,this.nextElementToLoad=null,this.allowSwipeRight=!0,this.allowSwipeLeft=!0,this.wishListData=null,this.nextLookVideo=null,this.previousLookVideo=null,this.currentLookVideo=null,this.nextLookVideoConfig=null,this.previousLookVideoConfig=null,this.currentLookVideoConfig=null,this.mobileImageWrapper=null,this.mobileCardWrapper=null,this.windowHeight=window.innerHeight,this.mobileCardContainer=Object(h.select)(".look-page__details-container"),this.defaultImgHeight=Object(h.select)(".look-slideshow__current .PACKSHOT_DEFAULT").getBoundingClientRect().height,this.heightDifference=this.windowHeight-this.defaultImgHeight,this.alreadyBindScroll=!1}slideLookData(){this.currentCard=Object(h.select)(".look-page__card-wrapper.current-card"),this.previousCard=Object(h.select)(".look-page__card-wrapper.prev-card"),this.nextCard=Object(h.select)(".look-page__card-wrapper.next-card"),this.lookSlideShowWrapper.style.transform="translateX(0%)",this.imageBaseUrl=this.currentCard.dataset.baseurl,this.transformation=this.currentCard.dataset.looktransform,this.nextLookCode=this.nextCard.dataset.code,this.previousLookCode=this.previousCard.dataset.code,this.currentLookCode=this.currentCard.dataset.code,this.nextLookElement=this.currentCard.dataset.nextelement,this.previousLookElement=this.currentCard.dataset.previouselement,this.currentLookElement=this.previousCard.dataset.nextelement,this.nextElementToLoad=this.nextCard.dataset.nextelement,this.previousElementToLoad=this.previousCard.dataset.previouselement,this.lookCardTemplate=Object(h.select)(".look-description__card-container",this.currentCard),this.currentLookId=this.currentCard.dataset.lookid,this.nextLookId=this.nextCard.dataset.lookid,this.previousLookId=this.previousCard.dataset.lookid,""==this.previousLookElement?this.removePreviousCard():""==this.nextLookElement&&this.removeNextCard(),this.removeDataAttribute(this.currentCard),this.removeDataAttribute(this.previousCard),this.removeDataAttribute(this.nextCard),this.correctLookData()}formatImages(t){if(t&&0!==Object.keys(JSON.parse(t)).length){const e="".concat(window.config.cloudinary.defaultQuality,"/w_").concat(window.config.cloudinary.defaultSrcFallBack,"/"),o=JSON.parse(t);let i;const s=[],a=Object.keys(o);for(let t=0;t<a.length;t++)"PACKSHOT_DEFAULT"==a[t]&&""!==this.transformation?i="".concat(this.imageBaseUrl,"/")+"t_".concat(this.transformation,"/").concat(e).concat(o[a[t]]):"VIDEO"!==a[t]&&s.push("".concat(this.imageBaseUrl,"/").concat(e).concat(o[a[t]]));return void 0!==i&&s.unshift(i),s}}configureVideo(t,e){if(t){let o;o="string"==typeof t?JSON.parse(t):{config:{autoSized:!0,loop:!0,mute:!0,fluidLoop:!0,videoCentered:!0,pauseScroll:!0,controls:{mode:"none",volume:t[0].soundControl||!1,subtitles:t[0].subTitleAndLang||!1,fullscreen:t[0].fullControl||!1},sound:t[0].autoSound||!1,asBackground:"true",playButtonStyle:t[0].playButtonText?"none":"",playbutton:{color:t[0].playButtonColor&&t[0].playButtonColor.toLowerCase()||"",position:t[0].playButtonPosition.toLowerCase()},coverImage:t[0].posterFrame?t[0].posterFrame.seoURL:"",loader:{type:"wfj"!=t[0].loaderIcon?"default":"brand"},soundcredit:t[0].soundCredit||!1},brightcoveId:t[0].brightcoveId,accountId:t[0].accountId?t[0].accountId:window.config.popinLookPDP.videoAccountId,title:t[0].title?t[0].title:"",description:t[0].description?t[0].description:""};const i=o.brightcoveId,s=o.accountId,a=o.config;let l=window.config.popinLookPDP.videoAriaLabel.replace("{0}",1).replace("{1}",parseInt(e)),n="";o.title&&(l="".concat(l," - ").concat(o.title)),o.description&&(n='<div class="is-sr-only">'.concat(o.description,"</div>"));const r="video_look-details-video_".concat(parseInt(e));return'<div id="'.concat(r,'" class="video js-video" data-ooyalaId=').concat(i," data-ooyalaAccountId=").concat(s," data-config=").concat(JSON.stringify(a),' data-decorative="true" data-aria-label="').concat(l,'"></div>')}}removeDataAttribute(t){for(const e in t.dataset)t.removeAttribute("data-".concat(e.split(/(?=[A-Z])/).join("-").toLowerCase()))}loadNextLook(t){"A"==t.target.tagName&&t.preventDefault(),TweenLite.to([this.lookProductMainImgContainer,this.lookDetailsWrapper],.5,{xPercent:Object(r.M)()?-100:100,ease:Quad.easeInOut,onComplete:()=>{let t=null;const e={};let o=null,i=null;document.body.classList.remove("stop-scrolling"),Object(_.a)(L.a.popinLookPDP.lookCardNumber.replace("{0}",parseInt(this.nextLookCode))),null!==this.nextElementToLoad&&""!==this.nextElementToLoad?v.get(L.a.popinLookPDP.lookSwipeData.replace("{0}",this.nextElementToLoad)).then(s=>{if(t=s,null!==t.lookImages&&void 0!==t.lookImages&&t.lookImages.map((t,e)=>{t.assetType="".concat(t.assetType,"_").concat(e)}),void 0===t.lookImages&&void 0!==t.allImages?o=t.allImages:void 0!==t.lookImages&&void 0!==t.allImages?o=t.allImages.concat(t.lookImages):void 0!==t.lookImages&&(o=t.lookImages),void 0!==t.lookVideos&&0!==t.lookVideos.length?i=this.configureVideo(t.lookVideos,t.passageNumber):void 0!==t.videos&&0!==t.videos.length&&(i=this.configureVideo(t.videos,t.passageNumber)),""!==o&&null!==o){o.sort((t,e)=>t.galleryIndex-e.galleryIndex).forEach(t=>{"VIDEO"!==t.assetType&&(e[t.assetType]=t.path)})}}).then(()=>{this.allowSwipeRight||(this.allowSwipeRight=!0,this.previousCard.style.display="block",this.previousLookLink.style.display="block"),this.updateNextLookData(t,e,i)}).then(()=>{this.mobileLookTemplate(this.nextLookImages,this.nextLookCode,this.nextLookVideo,"next"),this.updateLookCard(this.nextLookCode,this.nextLookElement,this.nextCard),this.setupLookVideo("next"),this.setZoomImages(this.currentLookCode),window.scrollTo(0,0),setTimeout(()=>{this.previousCard.style.removeProperty("transform"),this.nextCard.style.removeProperty("transform"),this.navigationWrapper.style.display="block",this.allowSwipeLeft=!0},250)}):(this.updateNextLookData(t,e,i),this.removeNextSlideData(),this.removeNextCard(),this.setZoomImages(this.currentLookCode),this.setupLookVideo("next"),window.scrollTo(0,0),this.previousCard.style.removeProperty("transform"),this.nextCard.style.removeProperty("transform"),this.navigationWrapper.style.display="block")}})}removeNextCard(){this.nextCard.style.display="none",this.nextLookLink.style.display="none",this.allowSwipeLeft=!1}removeNextSlideData(){for(;this.nextLookSlide.firstChild;)this.nextLookSlide.removeChild(this.nextLookSlide.lastChild)}loadPrevLook(t){"A"==t.target.tagName&&t.preventDefault(),TweenLite.to([this.lookProductMainImgContainer,this.lookDetailsWrapper],.5,{xPercent:Object(r.M)()?100:-100,ease:Quad.easeInOut,onComplete:()=>{const t={};let e=null,o=null,i=null;document.body.classList.remove("stop-scrolling"),Object(_.a)(L.a.popinLookPDP.lookCardNumber.replace("{0}",parseInt(this.previousLookCode))),null!==this.previousElementToLoad&&""!==this.previousElementToLoad?v.get(L.a.popinLookPDP.lookSwipeData.replace("{0}",this.previousElementToLoad)).then(s=>{if(e=s,null!==e.lookImages&&void 0!==e.lookImages&&e.lookImages.map((t,e)=>{t.assetType="".concat(t.assetType,"_").concat(e)}),void 0===e.lookImages&&void 0!==e.allImages?o=e.allImages:void 0!==e.lookImages&&void 0!==e.allImages?o=e.allImages.concat(e.lookImages):void 0!==e.lookImages&&(o=e.lookImages),void 0!==e.lookVideos&&0!==e.lookVideos.length?i=this.configureVideo(e.lookVideos,e.passageNumber):void 0!==e.videos&&0!==e.videos.length&&(i=this.configureVideo(e.videos,e.passageNumber)),""!==o&&null!==o){o.sort((t,e)=>t.galleryIndex-e.galleryIndex).forEach(e=>{"VIDEO"!==e.assetType&&(t[e.assetType]=e.path)})}}).then(()=>{this.allowSwipeLeft||(this.allowSwipeLeft=!0,this.nextCard.style.display="block",this.nextLookLink.style.display="block"),this.updatePreviousLookData(e,t,i)}).then(()=>{this.mobileLookTemplate(this.previousLookImages,this.previousLookCode,this.previousLookVideo,"prev"),this.updateLookCard(this.previousLookCode,this.previousLookElement,this.previousCard),this.setupLookVideo("prev"),this.setZoomImages(this.currentLookCode),setTimeout(()=>{this.previousCard.style.removeProperty("transform"),this.nextCard.style.removeProperty("transform"),this.navigationWrapper.style.display="block",this.allowSwipeRight=!0},250)}):(this.updatePreviousLookData(e,t,i),this.removePreviousSlideData(),this.removePreviousCard(),this.setZoomImages(this.currentLookCode),this.setupLookVideo("prev"),this.previousCard.style.removeProperty("transform"),this.nextCard.style.removeProperty("transform"),this.navigationWrapper.style.display="block")}})}removePreviousCard(){this.previousCard.style.display="none",this.allowSwipeRight=!1,this.previousLookLink.style.display="none"}removePreviousSlideData(){for(;this.prevLookSlide.firstChild;)this.prevLookSlide.removeChild(this.prevLookSlide.lastChild)}toggleSlidesAfterSwipe(t){const e=Object(h.select)(".look-slideshow__".concat(t));this.navigationWrapper.style.display="none",null!=e&&("next"==t?(this.nextLookSlide.style.left=0,this.prevLookSlide.classList.remove("look-slideshow__prev"),this.currentLookSlide.classList.remove("look-slideshow__current"),this.currentLookSlide.classList.add("look-slideshow__prev"),this.nextLookSlide.classList.remove("look-slideshow__next"),this.nextLookSlide.classList.add("look-slideshow__current"),this.prevLookSlide.classList.add("look-slideshow__next")):(this.prevLookSlide.style.right=0,this.nextLookSlide.classList.remove("look-slideshow__next"),this.currentLookSlide.classList.remove("look-slideshow__current"),this.currentLookSlide.classList.add("look-slideshow__next"),this.prevLookSlide.classList.remove("look-slideshow__prev"),this.prevLookSlide.classList.add("look-slideshow__current"),this.nextLookSlide.classList.add("look-slideshow__prev")),this.orderLookSlide(),"next"==t?e.style.removeProperty("left"):e.style.removeProperty("right"),this.currentLookSlide.removeAttribute("aria-hidden"),Object(h.selectAll)("button",this.currentLookSlide).map(t=>t.removeAttribute("tabindex")),this.prevLookSlide.setAttribute("aria-hidden",!0),this.nextLookSlide.setAttribute("aria-hidden",!0),this.toggleProductCardsAfterSwipe(t),Object(h.selectAll)("button",Object(h.select)(".look-slideshow__prev")).map(t=>t.setAttribute("tabindex","-1")),Object(h.selectAll)("button",Object(h.select)(".look-slideshow__next")).map(t=>t.setAttribute("tabindex","-1")))}orderLookSlide(){this.currentLookSlide=Object(h.select)(".look-slideshow__current"),this.prevLookSlide=Object(h.select)(".look-slideshow__prev"),this.nextLookSlide=Object(h.select)(".look-slideshow__next"),this.lookSlideShowWrapper.appendChild(this.prevLookSlide),this.lookSlideShowWrapper.appendChild(this.nextLookSlide)}toggleProductCardsAfterSwipe(t){const e=Object(h.select)(".look-page__card-wrapper.".concat(t,"-card"));Object(h.getCollection)(".look-page__card-wrapper");null!=e&&(this.changeProductCardHeading(t),"next"==t?(e.style.left=0,this.previousCard.classList.remove("prev-card"),this.currentCard.classList.remove("current-card"),this.currentCard.classList.add("prev-card"),this.nextCard.classList.remove("next-card"),this.nextCard.classList.add("current-card"),this.previousCard.classList.add("next-card")):(e.style.right=0,this.nextCard.classList.remove("next-card"),this.currentCard.classList.remove("current-card"),this.currentCard.classList.add("next-card"),this.previousCard.classList.remove("prev-card"),this.previousCard.classList.add("current-card"),this.nextCard.classList.add("prev-card")),this.orderProductCards(t),"next"==t?e.style.removeProperty("left"):e.style.removeProperty("right"))}changeProductCardHeading(t){[Object(h.select)(".look-page__card-wrapper.".concat(t,"-card")),Object(h.select)(".look-page__card-wrapper.current-card")].forEach((t,e)=>{const o=Object(h.select)(".look-description__card-container",t),i=Object(h.select)(".look-description__content",t);let s=null;0===e?s=document.createElement("H1"):(s=document.createElement("DIV"),s.setAttribute("heading","role"),s.setAttribute("aria-level",1)),s.classList.add("look-description__content"),this.lookPageWithProducts&&s.classList.add("link-margin-bottom"),s.setAttribute("id",i.getAttribute("id")),s.innerHTML=i.innerHTML,o.removeChild(i),o.insertBefore(s,Object(h.select)(".look-description__right",o))})}orderProductCards(t){this.currentCard=Object(h.select)(".look-page__card-wrapper.current-card"),this.previousCard=Object(h.select)(".look-page__card-wrapper.prev-card"),this.nextCard=Object(h.select)(".look-page__card-wrapper.next-card"),this.navigationWrapper=Object(h.select)(".look-page__look-navigation"),this.lookDetailsWrapper.appendChild(this.previousCard),this.lookDetailsWrapper.appendChild(this.nextCard),this.lookDetailsWrapper.appendChild(this.navigationWrapper),this.calcPdpCardPosition()}updateCardAttribute(){const t=Object(h.getCollection)(".look-page__card-wrapper");t.length>0&&t.forEach(t=>{t.classList.contains("current-card")?(t.removeAttribute("aria-hidden"),t.removeAttribute("tabindex"),t.querySelectorAll("button").length&&t.querySelectorAll("button").forEach(t=>{t.removeAttribute("tabindex")}),t.querySelectorAll("a").length>0&&t.querySelectorAll("a").forEach(t=>{t.removeAttribute("tabindex")})):(t.setAttribute("aria-hidden",!0),t.setAttribute("tabindex",-1),t.querySelectorAll("button").length>0&&t.querySelectorAll("button").forEach(t=>{t.setAttribute("tabindex",-1)}),t.querySelectorAll("a").length>0&&t.querySelectorAll("a").forEach(t=>{t.setAttribute("tabindex",-1)}))})}setupLookVideo(t){"next"==t?null!==this.nextLookVideo&&""!==this.nextLookVideo&&Object(P.init)(this.nextLookSlide):null!==this.previousLookVideo&&""!==this.previousLookVideo&&Object(P.init)(this.prevLookSlide),this.lookVideoContainer=Object(h.select)(".look-page__video-wrapper",this.currentLookSlide),null!==this.lookVideoContainer&&""!==this.lookVideoContainer&&(this.lookVideoContainer.addEventListener("keypress",this.onButtonVideoPlayPause,!0),this.lookVideoContainer.addEventListener("click",this.onButtonVideoPlayPause,!0))}correctLookData(){const t=Object(h.getCollection)("li.look-page__img-wrapper",this.currentLookSlide);if(null!==t&&0!==t.length){t.forEach(t=>{"none"==t.style.display&&t.style.removeProperty("display")});const e=t.length,o=Object(h.getCollection)("li.look-page__img-wrapper",this.nextLookSlide),i=Object(h.getCollection)("li.look-page__img-wrapper",this.prevLookSlide);if(o.length>e)for(let t=e;t<o.length;t++)o[t].style.display="none";if(i.length>e)for(let t=e;t<i.length;t++)i[t].style.display="none"}}updateAnalyticsData(){const t=Object.assign(l()(dataLayerGA.pageLoad));t.lookId=this.currentLookId,t.page_name=document.title,Object(r.P)()&&(t.event="virtualpageview"),window.document.DLKit.push("on-tracking",t)}mobileLookTemplate(t,e,o,i){const s=document.querySelector(".look-slideshow__".concat(i));s.dataset.looknumber=parseInt(e);let a,l="",n=0;const r=L.a.popinLookPDP.lookCategory.replace("{0}",1).replace("{1}",parseInt(e));if(t&&0!==t.length)for(let i=0;i<t.length;i++){a=L.a.popinLookPDP.lookImageAltText.replace("{0}",i+1).replace("{1}",parseInt(e));{const e="w_".concat(window.config.cloudinary.defaultSrcFallBack),o="w_".concat(window.config.cloudinary.srcFallback),s=t[i].replace(e,o),r=L.a.popinLookPDP.lookZoomImageAlt.replace("{0}",a);l="".concat(l,'<li class="look-page__img-wrapper look-page__img-position" id="look-details-').concat(n,'">\n\t\t\t\t<button class="look-page__zoom-btn js-look-image-zoom" type="button" data-zoomable="true" tabindex="-1" data-test="imgProduct_PDP">\n\t\t\t\t\t<img class="lazyautosizes lazyloaded" src="').concat(t[i],'" alt="').concat(r,'">\n\t\t\t\t\t<img class="img-zoom-js is-hidden" async-src="').concat(s,'"\n\t\t\t\t\t\tsrc="" alt="').concat(a,'"\n\t\t        \t\t/>\n\t\t        \t</button>\n\t\t        </li>')}0==i&&null!==o&&(n=i+1,l="".concat(l,'<li class="look-page__img-wrapper look-page__img-position look-page__video-wrapper" id="look-details-').concat(n,'">').concat(o,'<button type="button" class="video-container" data-label-pause="Pause Video" tabindex="-1" data-label-play="Play Video">\n\t\t       \t\t \t<svg data-test="" class="icon is-large pause-icon" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n\t\t       \t\t \t\t<use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg?#video-pause"></use>\n\t\t       \t\t \t</svg>\n\t\t       \t\t \t<svg data-test="" class="icon is-large play-icon" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n\t\t       \t\t \t\t<use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg?#video-play"></use>\n\t\t       \t\t \t</svg>\n\t\t\t\t\t<span class="is-sr-only js-video-status">').concat(r,"</span>\n\t\t       \t\t \t</button>\n\t\t       \t\t </li>")),n+=1}else null!==o&&(l="".concat(l,'<li class="look-page__img-wrapper look-page__img-position look-page__video-wrapper" id="look-details-').concat(n,'">').concat(o,'<button type="button" class="video-container" data-label-pause="Pause Video" tabindex="-1" data-label-play="Play Video">\n     \t\t \t<svg data-test="" class="icon is-large pause-icon" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n              \t\t<use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg?#video-pause"></use>\n            \t</svg>\n                <svg data-test="" class="icon is-large play-icon" focusable="false" viewBox="0 0 1 1" aria-hidden="true">\n              \t\t<use xlink:href="/_ui/responsive/theme-onechanel/assets/icons.svg?#video-play"></use>\n            \t</svg>\n\t\t\t<span class="is-sr-only js-video-status">').concat(r,"</span>\n     \t\t \t</button>\n     \t\t </li>"));s.innerHTML=l}updateLookCard(t,e,o){const i="look-details__".concat(t),s=L.a.popinLookPDP.lookCardNumber.replace("{0}",parseInt(t)),a=Object(h.select)(".look-description__wishlist button",o),l=Object(h.select)(".look-description__viewdetails button",o);if(Object(h.select)(".look-description__content",o).setAttribute("id",i),Object(h.select)(".look-description__number",o).innerText=s,null!==a&&(a.dataset.wishlist=e,a.dataset.trackWishlist={eventAction:s,eventLabel:e},d.a.rePublishPageLoadData(c.J),null!==this.wishListData&&-1!==this.wishListData.indexOf(e)?a.classList.add("is-active"):a.classList.remove("is-active"),a.setAttribute("aria-describedby",i)),l){const t=JSON.parse(l.dataset.code).lookCategory;l.setAttribute("aria-describedby",i),l.dataset.code=JSON.stringify({lookCode:e,lookCategory:t})}}togglePlayPauseIcon(){if(this.lookVideoContainer){const t=Object(h.select)(".look-page__video-wrapper .video-container");if(t){const e=t.getAttribute("data-label-play"),o=t.getAttribute("data-label-pause"),i=t.querySelector(".js-video-status"),s=t.querySelector(".play-icon"),a=t.querySelector(".pause-icon"),l=this.lookVideoContainer?this.lookVideoContainer.querySelector("video"):"";l&&i&&(l.paused?(i.innerHTML=i.innerHTML.replace(o,e),s.style.display="block",a.style.display="none"):(i.innerHTML=i.innerHTML.replace(e,o),s.style.display="none",a.style.display="block"))}}}}function S(t){let e;const o=dataLayerGA.pageLoad.page_type;function i(t){for(let e of t)if("attributes"==e.type&&"class"==e.attributeName){if(e.target.classList.contains("is-active")){let t=JSON.parse(e.target.parentElement.dataset.datalayer);t.eventLabel=e.target.dataset.number,t.eventCategory=o,window.document.DLKit.push("on-tracking",t)}}}function s(){window.document.DLKit.push("when-user-interact-with-pdp-ready-to-wear",{eventLabel:"",eventAction:"explore this look"})}window.addEventListener("load",(function(){e=new O(t.querySelector(".look-page__container")),function(){e.enter();const o=Object(h.selectAll)(".js-page-control li",t);let a=new MutationObserver(i);o.forEach(t=>{a.observe(t,{attributes:!0})});const l=Object(h.select)(".js-explore-look");l&&l.addEventListener("click",s)}()}))}}}]);